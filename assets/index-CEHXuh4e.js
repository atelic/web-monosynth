(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}})();var Rc={exports:{}},yo={},Ac={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function Gv(){if(hp)return De;hp=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(E){return E===null||typeof E!="object"?null:(E=v&&E[v]||E["@@iterator"],typeof E=="function"?E:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,k={};function C(E,q,de){this.props=E,this.context=q,this.refs=k,this.updater=de||_}C.prototype.isReactComponent={},C.prototype.setState=function(E,q){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,q,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function R(){}R.prototype=C.prototype;function I(E,q,de){this.props=E,this.context=q,this.refs=k,this.updater=de||_}var j=I.prototype=new R;j.constructor=I,x(j,C.prototype),j.isPureReactComponent=!0;var z=Array.isArray,N=Object.prototype.hasOwnProperty,M={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function D(E,q,de){var _e,ae={},fe=null,ke=null;if(q!=null)for(_e in q.ref!==void 0&&(ke=q.ref),q.key!==void 0&&(fe=""+q.key),q)N.call(q,_e)&&!F.hasOwnProperty(_e)&&(ae[_e]=q[_e]);var oe=arguments.length-2;if(oe===1)ae.children=de;else if(1<oe){for(var Re=Array(oe),We=0;We<oe;We++)Re[We]=arguments[We+2];ae.children=Re}if(E&&E.defaultProps)for(_e in oe=E.defaultProps,oe)ae[_e]===void 0&&(ae[_e]=oe[_e]);return{$$typeof:o,type:E,key:fe,ref:ke,props:ae,_owner:M.current}}function X(E,q){return{$$typeof:o,type:E.type,key:q,ref:E.ref,props:E.props,_owner:E._owner}}function W(E){return typeof E=="object"&&E!==null&&E.$$typeof===o}function G(E){var q={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(de){return q[de]})}var Q=/\/+/g;function re(E,q){return typeof E=="object"&&E!==null&&E.key!=null?G(""+E.key):q.toString(36)}function K(E,q,de,_e,ae){var fe=typeof E;(fe==="undefined"||fe==="boolean")&&(E=null);var ke=!1;if(E===null)ke=!0;else switch(fe){case"string":case"number":ke=!0;break;case"object":switch(E.$$typeof){case o:case e:ke=!0}}if(ke)return ke=E,ae=ae(ke),E=_e===""?"."+re(ke,0):_e,z(ae)?(de="",E!=null&&(de=E.replace(Q,"$&/")+"/"),K(ae,q,de,"",function(We){return We})):ae!=null&&(W(ae)&&(ae=X(ae,de+(!ae.key||ke&&ke.key===ae.key?"":(""+ae.key).replace(Q,"$&/")+"/")+E)),q.push(ae)),1;if(ke=0,_e=_e===""?".":_e+":",z(E))for(var oe=0;oe<E.length;oe++){fe=E[oe];var Re=_e+re(fe,oe);ke+=K(fe,q,de,Re,ae)}else if(Re=w(E),typeof Re=="function")for(E=Re.call(E),oe=0;!(fe=E.next()).done;)fe=fe.value,Re=_e+re(fe,oe++),ke+=K(fe,q,de,Re,ae);else if(fe==="object")throw q=String(E),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ke}function ne(E,q,de){if(E==null)return E;var _e=[],ae=0;return K(E,_e,"","",function(fe){return q.call(de,fe,ae++)}),_e}function ee(E){if(E._status===-1){var q=E._result;q=q(),q.then(function(de){(E._status===0||E._status===-1)&&(E._status=1,E._result=de)},function(de){(E._status===0||E._status===-1)&&(E._status=2,E._result=de)}),E._status===-1&&(E._status=0,E._result=q)}if(E._status===1)return E._result.default;throw E._result}var J={current:null},H={transition:null},Z={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:H,ReactCurrentOwner:M};function Y(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:ne,forEach:function(E,q,de){ne(E,function(){q.apply(this,arguments)},de)},count:function(E){var q=0;return ne(E,function(){q++}),q},toArray:function(E){return ne(E,function(q){return q})||[]},only:function(E){if(!W(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},De.Component=C,De.Fragment=s,De.Profiler=a,De.PureComponent=I,De.StrictMode=r,De.Suspense=f,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,De.act=Y,De.cloneElement=function(E,q,de){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var _e=x({},E.props),ae=E.key,fe=E.ref,ke=E._owner;if(q!=null){if(q.ref!==void 0&&(fe=q.ref,ke=M.current),q.key!==void 0&&(ae=""+q.key),E.type&&E.type.defaultProps)var oe=E.type.defaultProps;for(Re in q)N.call(q,Re)&&!F.hasOwnProperty(Re)&&(_e[Re]=q[Re]===void 0&&oe!==void 0?oe[Re]:q[Re])}var Re=arguments.length-2;if(Re===1)_e.children=de;else if(1<Re){oe=Array(Re);for(var We=0;We<Re;We++)oe[We]=arguments[We+2];_e.children=oe}return{$$typeof:o,type:E.type,key:ae,ref:fe,props:_e,_owner:ke}},De.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},De.createElement=D,De.createFactory=function(E){var q=D.bind(null,E);return q.type=E,q},De.createRef=function(){return{current:null}},De.forwardRef=function(E){return{$$typeof:d,render:E}},De.isValidElement=W,De.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:ee}},De.memo=function(E,q){return{$$typeof:m,type:E,compare:q===void 0?null:q}},De.startTransition=function(E){var q=H.transition;H.transition={};try{E()}finally{H.transition=q}},De.unstable_act=Y,De.useCallback=function(E,q){return J.current.useCallback(E,q)},De.useContext=function(E){return J.current.useContext(E)},De.useDebugValue=function(){},De.useDeferredValue=function(E){return J.current.useDeferredValue(E)},De.useEffect=function(E,q){return J.current.useEffect(E,q)},De.useId=function(){return J.current.useId()},De.useImperativeHandle=function(E,q,de){return J.current.useImperativeHandle(E,q,de)},De.useInsertionEffect=function(E,q){return J.current.useInsertionEffect(E,q)},De.useLayoutEffect=function(E,q){return J.current.useLayoutEffect(E,q)},De.useMemo=function(E,q){return J.current.useMemo(E,q)},De.useReducer=function(E,q,de){return J.current.useReducer(E,q,de)},De.useRef=function(E){return J.current.useRef(E)},De.useState=function(E){return J.current.useState(E)},De.useSyncExternalStore=function(E,q,de){return J.current.useSyncExternalStore(E,q,de)},De.useTransition=function(){return J.current.useTransition()},De.version="18.3.1",De}var dp;function Gc(){return dp||(dp=1,Ac.exports=Gv()),Ac.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function Yv(){if(fp)return yo;fp=1;var o=Gc(),e=Symbol.for("react.element"),s=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(d,f,m){var g,v={},w=null,_=null;m!==void 0&&(w=""+m),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(_=f.ref);for(g in f)r.call(f,g)&&!u.hasOwnProperty(g)&&(v[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:e,type:d,key:w,ref:_,props:v,_owner:a.current}}return yo.Fragment=s,yo.jsx=h,yo.jsxs=h,yo}var pp;function Xv(){return pp||(pp=1,Rc.exports=Yv()),Rc.exports}var T=Xv(),S=Gc(),Ja={},Oc={exports:{}},sn={},Dc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function Kv(){return mp||(mp=1,(function(o){function e(H,Z){var Y=H.length;H.push(Z);e:for(;0<Y;){var E=Y-1>>>1,q=H[E];if(0<a(q,Z))H[E]=Z,H[Y]=q,Y=E;else break e}}function s(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var Z=H[0],Y=H.pop();if(Y!==Z){H[0]=Y;e:for(var E=0,q=H.length,de=q>>>1;E<de;){var _e=2*(E+1)-1,ae=H[_e],fe=_e+1,ke=H[fe];if(0>a(ae,Y))fe<q&&0>a(ke,ae)?(H[E]=ke,H[fe]=Y,E=fe):(H[E]=ae,H[_e]=Y,E=_e);else if(fe<q&&0>a(ke,Y))H[E]=ke,H[fe]=Y,E=fe;else break e}}return Z}function a(H,Z){var Y=H.sortIndex-Z.sortIndex;return Y!==0?Y:H.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();o.unstable_now=function(){return h.now()-d}}var f=[],m=[],g=1,v=null,w=3,_=!1,x=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(H){for(var Z=s(m);Z!==null;){if(Z.callback===null)r(m);else if(Z.startTime<=H)r(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=s(m)}}function z(H){if(k=!1,j(H),!x)if(s(f)!==null)x=!0,ee(N);else{var Z=s(m);Z!==null&&J(z,Z.startTime-H)}}function N(H,Z){x=!1,k&&(k=!1,R(D),D=-1),_=!0;var Y=w;try{for(j(Z),v=s(f);v!==null&&(!(v.expirationTime>Z)||H&&!G());){var E=v.callback;if(typeof E=="function"){v.callback=null,w=v.priorityLevel;var q=E(v.expirationTime<=Z);Z=o.unstable_now(),typeof q=="function"?v.callback=q:v===s(f)&&r(f),j(Z)}else r(f);v=s(f)}if(v!==null)var de=!0;else{var _e=s(m);_e!==null&&J(z,_e.startTime-Z),de=!1}return de}finally{v=null,w=Y,_=!1}}var M=!1,F=null,D=-1,X=5,W=-1;function G(){return!(o.unstable_now()-W<X)}function Q(){if(F!==null){var H=o.unstable_now();W=H;var Z=!0;try{Z=F(!0,H)}finally{Z?re():(M=!1,F=null)}}else M=!1}var re;if(typeof I=="function")re=function(){I(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ne=K.port2;K.port1.onmessage=Q,re=function(){ne.postMessage(null)}}else re=function(){C(Q,0)};function ee(H){F=H,M||(M=!0,re())}function J(H,Z){D=C(function(){H(o.unstable_now())},Z)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(H){H.callback=null},o.unstable_continueExecution=function(){x||_||(x=!0,ee(N))},o.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<H?Math.floor(1e3/H):5},o.unstable_getCurrentPriorityLevel=function(){return w},o.unstable_getFirstCallbackNode=function(){return s(f)},o.unstable_next=function(H){switch(w){case 1:case 2:case 3:var Z=3;break;default:Z=w}var Y=w;w=Z;try{return H()}finally{w=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(H,Z){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Y=w;w=H;try{return Z()}finally{w=Y}},o.unstable_scheduleCallback=function(H,Z,Y){var E=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?E+Y:E):Y=E,H){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Y+q,H={id:g++,callback:Z,priorityLevel:H,startTime:Y,expirationTime:q,sortIndex:-1},Y>E?(H.sortIndex=Y,e(m,H),s(f)===null&&H===s(m)&&(k?(R(D),D=-1):k=!0,J(z,Y-E))):(H.sortIndex=q,e(f,H),x||_||(x=!0,ee(N))),H},o.unstable_shouldYield=G,o.unstable_wrapCallback=function(H){var Z=w;return function(){var Y=w;w=Z;try{return H.apply(this,arguments)}finally{w=Y}}}})(Mc)),Mc}var gp;function Zv(){return gp||(gp=1,Dc.exports=Kv()),Dc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function Jv(){if(vp)return sn;vp=1;var o=Gc(),e=Zv();function s(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function u(t,n){h(t,n),h(t+"Capture",n)}function h(t,n){for(a[t]=n,t=0;t<n.length;t++)r.add(n[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(t){return f.call(v,t)?!0:f.call(g,t)?!1:m.test(t)?v[t]=!0:(g[t]=!0,!1)}function _(t,n,i,l){if(i!==null&&i.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function x(t,n,i,l){if(n===null||typeof n>"u"||_(t,n,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function k(t,n,i,l,c,p,y){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=t,this.type=n,this.sanitizeURL=p,this.removeEmptyString=y}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){C[t]=new k(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];C[n]=new k(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){C[t]=new k(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){C[t]=new k(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){C[t]=new k(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){C[t]=new k(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){C[t]=new k(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){C[t]=new k(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){C[t]=new k(t,5,!1,t.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function I(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(R,I);C[n]=new k(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(R,I);C[n]=new k(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(R,I);C[n]=new k(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){C[t]=new k(t,1,!1,t.toLowerCase(),null,!1,!1)}),C.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){C[t]=new k(t,1,!1,t.toLowerCase(),null,!0,!0)});function j(t,n,i,l){var c=C.hasOwnProperty(n)?C[n]:null;(c!==null?c.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(x(n,i,c,l)&&(i=null),l||c===null?w(n)&&(i===null?t.removeAttribute(n):t.setAttribute(n,""+i)):c.mustUseProperty?t[c.propertyName]=i===null?c.type===3?!1:"":i:(n=c.attributeName,l=c.attributeNamespace,i===null?t.removeAttribute(n):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?t.setAttributeNS(l,n,i):t.setAttribute(n,i))))}var z=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),M=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),G=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),H=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=H&&t[H]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,E;function q(t){if(E===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);E=n&&n[1]||""}return`
`+E+t}var de=!1;function _e(t,n){if(!t||de)return"";de=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(V){var l=V}Reflect.construct(t,[],n)}else{try{n.call()}catch(V){l=V}t.call(n.prototype)}else{try{throw Error()}catch(V){l=V}t()}}catch(V){if(V&&l&&typeof V.stack=="string"){for(var c=V.stack.split(`
`),p=l.stack.split(`
`),y=c.length-1,b=p.length-1;1<=y&&0<=b&&c[y]!==p[b];)b--;for(;1<=y&&0<=b;y--,b--)if(c[y]!==p[b]){if(y!==1||b!==1)do if(y--,b--,0>b||c[y]!==p[b]){var A=`
`+c[y].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=y&&0<=b);break}}}finally{de=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?q(t):""}function ae(t){switch(t.tag){case 5:return q(t.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return t=_e(t.type,!1),t;case 11:return t=_e(t.type.render,!1),t;case 1:return t=_e(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case M:return"Portal";case X:return"Profiler";case D:return"StrictMode";case re:return"Suspense";case K:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case G:return(t.displayName||"Context")+".Consumer";case W:return(t._context.displayName||"Context")+".Provider";case Q:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ne:return n=t.displayName||null,n!==null?n:fe(t.type)||"Memo";case ee:n=t._payload,t=t._init;try{return fe(t(n))}catch{}}return null}function ke(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(n);case 8:return n===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function oe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Re(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function We(t){var n=Re(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){l=""+y,p.call(this,y)}}),Object.defineProperty(t,n,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function _t(t){t._valueTracker||(t._valueTracker=We(t))}function Et(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var i=n.getValue(),l="";return t&&(l=Re(t)?t.checked?"true":"false":t.value),t=l,t!==i?(n.setValue(t),!0):!1}function wn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function In(t,n){var i=n.checked;return Y({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function ce(t,n){var i=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;i=oe(n.value!=null?n.value:i),t._wrapperState={initialChecked:l,initialValue:i,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function ye(t,n){n=n.checked,n!=null&&j(t,"checked",n,!1)}function Ne(t,n){ye(t,n);var i=oe(n.value),l=n.type;if(i!=null)l==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?Ae(t,n.type,i):n.hasOwnProperty("defaultValue")&&Ae(t,n.type,oe(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function Ee(t,n,i){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,i||n===t.value||(t.value=n),t.defaultValue=n}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function Ae(t,n,i){(n!=="number"||wn(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Ie=Array.isArray;function Ze(t,n,i,l){if(t=t.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<t.length;i++)c=n.hasOwnProperty("$"+t[i].value),t[i].selected!==c&&(t[i].selected=c),c&&l&&(t[i].defaultSelected=!0)}else{for(i=""+oe(i),n=null,c=0;c<t.length;c++){if(t[c].value===i){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function wt(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(s(91));return Y({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ut(t,n){var i=n.value;if(i==null){if(i=n.children,n=n.defaultValue,i!=null){if(n!=null)throw Error(s(92));if(Ie(i)){if(1<i.length)throw Error(s(93));i=i[0]}n=i}n==null&&(n=""),i=n}t._wrapperState={initialValue:oe(i)}}function ln(t,n){var i=oe(n.value),l=oe(n.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),n.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),l!=null&&(t.defaultValue=""+l)}function xt(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?lt(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var un,Zn=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,i,l,c){MSApp.execUnsafeLocalFunction(function(){return t(n,i,l,c)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(un=un||document.createElement("div"),un.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=un.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function cn(t,n){if(n){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=n;return}}t.textContent=n}var Pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cr=["Webkit","ms","Moz","O"];Object.keys(Pn).forEach(function(t){cr.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Pn[n]=Pn[t]})});function Ps(t,n,i){return n==null||typeof n=="boolean"||n===""?"":i||typeof n!="number"||n===0||Pn.hasOwnProperty(t)&&Pn[t]?(""+n).trim():n+"px"}function hn(t,n){t=t.style;for(var i in n)if(n.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=Ps(i,n[i],l);i==="float"&&(i="cssFloat"),l?t.setProperty(i,c):t[i]=c}}var hr=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cs(t,n){if(n){if(hr[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(s(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(s(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(n.style!=null&&typeof n.style!="object")throw Error(s(62))}}function hs(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ds=null;function fs(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ps=null,xn=null,kn=null;function ue(t){if(t=no(t)){if(typeof ps!="function")throw Error(s(280));var n=t.stateNode;n&&(n=pa(n),ps(t.stateNode,t.type,n))}}function Be(t){xn?kn?kn.push(t):kn=[t]:xn=t}function kt(){if(xn){var t=xn,n=kn;if(kn=xn=null,ue(t),n)for(t=0;t<n.length;t++)ue(n[t])}}function Rt(t,n){return t(n)}function Jn(){}var dr=!1;function Qr(t,n,i){if(dr)return t(n,i);dr=!0;try{return Rt(t,n,i)}finally{dr=!1,(xn!==null||kn!==null)&&(Jn(),kt())}}function ms(t,n){var i=t.stateNode;if(i===null)return null;var l=pa(i);if(l===null)return null;i=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var fr=!1;if(d)try{var gs={};Object.defineProperty(gs,"passive",{get:function(){fr=!0}}),window.addEventListener("test",gs,gs),window.removeEventListener("test",gs,gs)}catch{fr=!1}function Pi(t,n,i,l,c,p,y,b,A){var V=Array.prototype.slice.call(arguments,3);try{n.apply(i,V)}catch(se){this.onError(se)}}var vs=!1,Fs=null,$=!1,Pe=null,Je={onError:function(t){vs=!0,Fs=t}};function Ue(t,n,i,l,c,p,y,b,A){vs=!1,Fs=null,Pi.apply(Je,arguments)}function $t(t,n,i,l,c,p,y,b,A){if(Ue.apply(this,arguments),vs){if(vs){var V=Fs;vs=!1,Fs=null}else throw Error(s(198));$||($=!0,Pe=V)}}function pt(t){var n=t,i=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(i=n.return),t=n.return;while(t)}return n.tag===3?i:null}function et(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function Cn(t){if(pt(t)!==t)throw Error(s(188))}function es(t){var n=t.alternate;if(!n){if(n=pt(t),n===null)throw Error(s(188));return n!==t?null:t}for(var i=t,l=n;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return Cn(c),t;if(p===l)return Cn(c),n;p=p.sibling}throw Error(s(188))}if(i.return!==l.return)i=c,l=p;else{for(var y=!1,b=c.child;b;){if(b===i){y=!0,i=c,l=p;break}if(b===l){y=!0,l=c,i=p;break}b=b.sibling}if(!y){for(b=p.child;b;){if(b===i){y=!0,i=p,l=c;break}if(b===l){y=!0,l=p,i=c;break}b=b.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==l)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?t:n}function ys(t){return t=es(t),t!==null?pr(t):null}function pr(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=pr(t);if(n!==null)return n;t=t.sibling}return null}var U=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,$o=e.unstable_shouldYield,Qo=e.unstable_requestPaint,rt=e.unstable_now,Ho=e.unstable_getCurrentPriorityLevel,Hr=e.unstable_ImmediatePriority,Fi=e.unstable_UserBlockingPriority,mr=e.unstable_NormalPriority,Go=e.unstable_LowPriority,Li=e.unstable_IdlePriority,gr=null,dn=null;function Yo(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(gr,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:dg,cg=Math.log,hg=Math.LN2;function dg(t){return t>>>=0,t===0?32:31-(cg(t)/hg|0)|0}var Xo=64,Ko=4194304;function ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zo(t,n){var i=t.pendingLanes;if(i===0)return 0;var l=0,c=t.suspendedLanes,p=t.pingedLanes,y=i&268435455;if(y!==0){var b=y&~c;b!==0?l=ji(b):(p&=y,p!==0&&(l=ji(p)))}else y=i&~c,y!==0?l=ji(y):p!==0&&(l=ji(p));if(l===0)return 0;if(n!==0&&n!==l&&(n&c)===0&&(c=l&-l,p=n&-n,c>=p||c===16&&(p&4194240)!==0))return n;if((l&4)!==0&&(l|=i&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=l;0<n;)i=31-Fn(n),c=1<<i,l|=t[i],n&=~c;return l}function fg(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pg(t,n){for(var i=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,p=t.pendingLanes;0<p;){var y=31-Fn(p),b=1<<y,A=c[y];A===-1?((b&i)===0||(b&l)!==0)&&(c[y]=fg(b,n)):A<=n&&(t.expiredLanes|=b),p&=~b}}function Xl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qh(){var t=Xo;return Xo<<=1,(Xo&4194240)===0&&(Xo=64),t}function Kl(t){for(var n=[],i=0;31>i;i++)n.push(t);return n}function Vi(t,n,i){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-Fn(n),t[n]=i}function mg(t,n){var i=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<i;){var c=31-Fn(i),p=1<<c;n[c]=0,l[c]=-1,t[c]=-1,i&=~p}}function Zl(t,n){var i=t.entangledLanes|=n;for(t=t.entanglements;i;){var l=31-Fn(i),c=1<<l;c&n|t[l]&n&&(t[l]|=n),i&=~c}}var Qe=0;function Wh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Bh,Jl,Uh,$h,Qh,eu=!1,Jo=[],Ls=null,js=null,Vs=null,zi=new Map,qi=new Map,zs=[],gg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hh(t,n){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":zi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":qi.delete(n.pointerId)}}function Wi(t,n,i,l,c,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:i,eventSystemFlags:l,nativeEvent:p,targetContainers:[c]},n!==null&&(n=no(n),n!==null&&Jl(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function vg(t,n,i,l,c){switch(n){case"focusin":return Ls=Wi(Ls,t,n,i,l,c),!0;case"dragenter":return js=Wi(js,t,n,i,l,c),!0;case"mouseover":return Vs=Wi(Vs,t,n,i,l,c),!0;case"pointerover":var p=c.pointerId;return zi.set(p,Wi(zi.get(p)||null,t,n,i,l,c)),!0;case"gotpointercapture":return p=c.pointerId,qi.set(p,Wi(qi.get(p)||null,t,n,i,l,c)),!0}return!1}function Gh(t){var n=vr(t.target);if(n!==null){var i=pt(n);if(i!==null){if(n=i.tag,n===13){if(n=et(i),n!==null){t.blockedOn=n,Qh(t.priority,function(){Uh(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ea(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var i=nu(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);ds=l,i.target.dispatchEvent(l),ds=null}else return n=no(i),n!==null&&Jl(n),t.blockedOn=i,!1;n.shift()}return!0}function Yh(t,n,i){ea(t)&&i.delete(n)}function yg(){eu=!1,Ls!==null&&ea(Ls)&&(Ls=null),js!==null&&ea(js)&&(js=null),Vs!==null&&ea(Vs)&&(Vs=null),zi.forEach(Yh),qi.forEach(Yh)}function Bi(t,n){t.blockedOn===n&&(t.blockedOn=null,eu||(eu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yg)))}function Ui(t){function n(c){return Bi(c,t)}if(0<Jo.length){Bi(Jo[0],t);for(var i=1;i<Jo.length;i++){var l=Jo[i];l.blockedOn===t&&(l.blockedOn=null)}}for(Ls!==null&&Bi(Ls,t),js!==null&&Bi(js,t),Vs!==null&&Bi(Vs,t),zi.forEach(n),qi.forEach(n),i=0;i<zs.length;i++)l=zs[i],l.blockedOn===t&&(l.blockedOn=null);for(;0<zs.length&&(i=zs[0],i.blockedOn===null);)Gh(i),i.blockedOn===null&&zs.shift()}var Gr=z.ReactCurrentBatchConfig,ta=!0;function _g(t,n,i,l){var c=Qe,p=Gr.transition;Gr.transition=null;try{Qe=1,tu(t,n,i,l)}finally{Qe=c,Gr.transition=p}}function wg(t,n,i,l){var c=Qe,p=Gr.transition;Gr.transition=null;try{Qe=4,tu(t,n,i,l)}finally{Qe=c,Gr.transition=p}}function tu(t,n,i,l){if(ta){var c=nu(t,n,i,l);if(c===null)_u(t,n,l,na,i),Hh(t,l);else if(vg(c,t,n,i,l))l.stopPropagation();else if(Hh(t,l),n&4&&-1<gg.indexOf(t)){for(;c!==null;){var p=no(c);if(p!==null&&Bh(p),p=nu(t,n,i,l),p===null&&_u(t,n,l,na,i),p===c)break;c=p}c!==null&&l.stopPropagation()}else _u(t,n,l,null,i)}}var na=null;function nu(t,n,i,l){if(na=null,t=fs(l),t=vr(t),t!==null)if(n=pt(t),n===null)t=null;else if(i=n.tag,i===13){if(t=et(n),t!==null)return t;t=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return na=t,null}function Xh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ho()){case Hr:return 1;case Fi:return 4;case mr:case Go:return 16;case Li:return 536870912;default:return 16}default:return 16}}var qs=null,su=null,sa=null;function Kh(){if(sa)return sa;var t,n=su,i=n.length,l,c="value"in qs?qs.value:qs.textContent,p=c.length;for(t=0;t<i&&n[t]===c[t];t++);var y=i-t;for(l=1;l<=y&&n[i-l]===c[p-l];l++);return sa=c.slice(t,1<l?1-l:void 0)}function ra(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function ia(){return!0}function Zh(){return!1}function fn(t){function n(i,l,c,p,y){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=p,this.target=y,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(i=t[b],this[b]=i?i(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ia:Zh,this.isPropagationStopped=Zh,this}return Y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ia)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ia)},persist:function(){},isPersistent:ia}),n}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ru=fn(Yr),$i=Y({},Yr,{view:0,detail:0}),xg=fn($i),iu,ou,Qi,oa=Y({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(iu=t.screenX-Qi.screenX,ou=t.screenY-Qi.screenY):ou=iu=0,Qi=t),iu)},movementY:function(t){return"movementY"in t?t.movementY:ou}}),Jh=fn(oa),kg=Y({},oa,{dataTransfer:0}),Cg=fn(kg),Tg=Y({},$i,{relatedTarget:0}),au=fn(Tg),Sg=Y({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=fn(Sg),Ng=Y({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Eg=fn(Ng),Rg=Y({},Yr,{data:0}),ed=fn(Rg),Ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Og={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mg(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Dg[t])?!!n[t]:!1}function lu(){return Mg}var Ig=Y({},$i,{key:function(t){if(t.key){var n=Ag[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ra(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Og[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(t){return t.type==="keypress"?ra(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ra(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pg=fn(Ig),Fg=Y({},oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),td=fn(Fg),Lg=Y({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),jg=fn(Lg),Vg=Y({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),zg=fn(Vg),qg=Y({},oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wg=fn(qg),Bg=[9,13,27,32],uu=d&&"CompositionEvent"in window,Hi=null;d&&"documentMode"in document&&(Hi=document.documentMode);var Ug=d&&"TextEvent"in window&&!Hi,nd=d&&(!uu||Hi&&8<Hi&&11>=Hi),sd=" ",rd=!1;function id(t,n){switch(t){case"keyup":return Bg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function od(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function $g(t,n){switch(t){case"compositionend":return od(n);case"keypress":return n.which!==32?null:(rd=!0,sd);case"textInput":return t=n.data,t===sd&&rd?null:t;default:return null}}function Qg(t,n){if(Xr)return t==="compositionend"||!uu&&id(t,n)?(t=Kh(),sa=su=qs=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return nd&&n.locale!=="ko"?null:n.data;default:return null}}var Hg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Hg[t.type]:n==="textarea"}function ld(t,n,i,l){Be(l),n=ha(n,"onChange"),0<n.length&&(i=new ru("onChange","change",null,i,l),t.push({event:i,listeners:n}))}var Gi=null,Yi=null;function Gg(t){bd(t,0)}function aa(t){var n=ti(t);if(Et(n))return t}function Yg(t,n){if(t==="change")return n}var ud=!1;if(d){var cu;if(d){var hu="oninput"in document;if(!hu){var cd=document.createElement("div");cd.setAttribute("oninput","return;"),hu=typeof cd.oninput=="function"}cu=hu}else cu=!1;ud=cu&&(!document.documentMode||9<document.documentMode)}function hd(){Gi&&(Gi.detachEvent("onpropertychange",dd),Yi=Gi=null)}function dd(t){if(t.propertyName==="value"&&aa(Yi)){var n=[];ld(n,Yi,t,fs(t)),Qr(Gg,n)}}function Xg(t,n,i){t==="focusin"?(hd(),Gi=n,Yi=i,Gi.attachEvent("onpropertychange",dd)):t==="focusout"&&hd()}function Kg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return aa(Yi)}function Zg(t,n){if(t==="click")return aa(n)}function Jg(t,n){if(t==="input"||t==="change")return aa(n)}function ev(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Ln=typeof Object.is=="function"?Object.is:ev;function Xi(t,n){if(Ln(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var i=Object.keys(t),l=Object.keys(n);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!f.call(n,c)||!Ln(t[c],n[c]))return!1}return!0}function fd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pd(t,n){var i=fd(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=n&&l>=n)return{node:i,offset:n-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=fd(i)}}function md(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?md(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function gd(){for(var t=window,n=wn();n instanceof t.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)t=n.contentWindow;else break;n=wn(t.document)}return n}function du(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function tv(t){var n=gd(),i=t.focusedElem,l=t.selectionRange;if(n!==i&&i&&i.ownerDocument&&md(i.ownerDocument.documentElement,i)){if(l!==null&&du(i)){if(n=l.start,t=l.end,t===void 0&&(t=n),"selectionStart"in i)i.selectionStart=n,i.selectionEnd=Math.min(t,i.value.length);else if(t=(n=i.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var c=i.textContent.length,p=Math.min(l.start,c);l=l.end===void 0?p:Math.min(l.end,c),!t.extend&&p>l&&(c=l,l=p,p=c),c=pd(i,p);var y=pd(i,l);c&&y&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(n=n.createRange(),n.setStart(c.node,c.offset),t.removeAllRanges(),p>l?(t.addRange(n),t.extend(y.node,y.offset)):(n.setEnd(y.node,y.offset),t.addRange(n)))}}for(n=[],t=i;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<n.length;i++)t=n[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nv=d&&"documentMode"in document&&11>=document.documentMode,Kr=null,fu=null,Ki=null,pu=!1;function vd(t,n,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;pu||Kr==null||Kr!==wn(l)||(l=Kr,"selectionStart"in l&&du(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ki&&Xi(Ki,l)||(Ki=l,l=ha(fu,"onSelect"),0<l.length&&(n=new ru("onSelect","select",null,n,i),t.push({event:n,listeners:l}),n.target=Kr)))}function la(t,n){var i={};return i[t.toLowerCase()]=n.toLowerCase(),i["Webkit"+t]="webkit"+n,i["Moz"+t]="moz"+n,i}var Zr={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionend:la("Transition","TransitionEnd")},mu={},yd={};d&&(yd=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function ua(t){if(mu[t])return mu[t];if(!Zr[t])return t;var n=Zr[t],i;for(i in n)if(n.hasOwnProperty(i)&&i in yd)return mu[t]=n[i];return t}var _d=ua("animationend"),wd=ua("animationiteration"),xd=ua("animationstart"),kd=ua("transitionend"),Cd=new Map,Td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ws(t,n){Cd.set(t,n),u(n,[t])}for(var gu=0;gu<Td.length;gu++){var vu=Td[gu],sv=vu.toLowerCase(),rv=vu[0].toUpperCase()+vu.slice(1);Ws(sv,"on"+rv)}Ws(_d,"onAnimationEnd"),Ws(wd,"onAnimationIteration"),Ws(xd,"onAnimationStart"),Ws("dblclick","onDoubleClick"),Ws("focusin","onFocus"),Ws("focusout","onBlur"),Ws(kd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function Sd(t,n,i){var l=t.type||"unknown-event";t.currentTarget=i,$t(l,n,void 0,t),t.currentTarget=null}function bd(t,n){n=(n&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],c=l.event;l=l.listeners;e:{var p=void 0;if(n)for(var y=l.length-1;0<=y;y--){var b=l[y],A=b.instance,V=b.currentTarget;if(b=b.listener,A!==p&&c.isPropagationStopped())break e;Sd(c,b,V),p=A}else for(y=0;y<l.length;y++){if(b=l[y],A=b.instance,V=b.currentTarget,b=b.listener,A!==p&&c.isPropagationStopped())break e;Sd(c,b,V),p=A}}}if($)throw t=Pe,$=!1,Pe=null,t}function tt(t,n){var i=n[Su];i===void 0&&(i=n[Su]=new Set);var l=t+"__bubble";i.has(l)||(Nd(n,t,2,!1),i.add(l))}function yu(t,n,i){var l=0;n&&(l|=4),Nd(i,t,l,n)}var ca="_reactListening"+Math.random().toString(36).slice(2);function Ji(t){if(!t[ca]){t[ca]=!0,r.forEach(function(i){i!=="selectionchange"&&(iv.has(i)||yu(i,!1,t),yu(i,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[ca]||(n[ca]=!0,yu("selectionchange",!1,n))}}function Nd(t,n,i,l){switch(Xh(n)){case 1:var c=_g;break;case 4:c=wg;break;default:c=tu}i=c.bind(null,n,i,t),c=void 0,!fr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,i,{capture:!0,passive:c}):t.addEventListener(n,i,!0):c!==void 0?t.addEventListener(n,i,{passive:c}):t.addEventListener(n,i,!1)}function _u(t,n,i,l,c){var p=l;if((n&1)===0&&(n&2)===0&&l!==null)e:for(;;){if(l===null)return;var y=l.tag;if(y===3||y===4){var b=l.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(y===4)for(y=l.return;y!==null;){var A=y.tag;if((A===3||A===4)&&(A=y.stateNode.containerInfo,A===c||A.nodeType===8&&A.parentNode===c))return;y=y.return}for(;b!==null;){if(y=vr(b),y===null)return;if(A=y.tag,A===5||A===6){l=p=y;continue e}b=b.parentNode}}l=l.return}Qr(function(){var V=p,se=fs(i),ie=[];e:{var te=Cd.get(t);if(te!==void 0){var he=ru,me=t;switch(t){case"keypress":if(ra(i)===0)break e;case"keydown":case"keyup":he=Pg;break;case"focusin":me="focus",he=au;break;case"focusout":me="blur",he=au;break;case"beforeblur":case"afterblur":he=au;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=jg;break;case _d:case wd:case xd:he=bg;break;case kd:he=zg;break;case"scroll":he=xg;break;case"wheel":he=Wg;break;case"copy":case"cut":case"paste":he=Eg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=td}var ve=(n&4)!==0,mt=!ve&&t==="scroll",P=ve?te!==null?te+"Capture":null:te;ve=[];for(var O=V,L;O!==null;){L=O;var le=L.stateNode;if(L.tag===5&&le!==null&&(L=le,P!==null&&(le=ms(O,P),le!=null&&ve.push(eo(O,le,L)))),mt)break;O=O.return}0<ve.length&&(te=new he(te,me,null,i,se),ie.push({event:te,listeners:ve}))}}if((n&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",he=t==="mouseout"||t==="pointerout",te&&i!==ds&&(me=i.relatedTarget||i.fromElement)&&(vr(me)||me[_s]))break e;if((he||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,he?(me=i.relatedTarget||i.toElement,he=V,me=me?vr(me):null,me!==null&&(mt=pt(me),me!==mt||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=V),he!==me)){if(ve=Jh,le="onMouseLeave",P="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(ve=td,le="onPointerLeave",P="onPointerEnter",O="pointer"),mt=he==null?te:ti(he),L=me==null?te:ti(me),te=new ve(le,O+"leave",he,i,se),te.target=mt,te.relatedTarget=L,le=null,vr(se)===V&&(ve=new ve(P,O+"enter",me,i,se),ve.target=L,ve.relatedTarget=mt,le=ve),mt=le,he&&me)t:{for(ve=he,P=me,O=0,L=ve;L;L=Jr(L))O++;for(L=0,le=P;le;le=Jr(le))L++;for(;0<O-L;)ve=Jr(ve),O--;for(;0<L-O;)P=Jr(P),L--;for(;O--;){if(ve===P||P!==null&&ve===P.alternate)break t;ve=Jr(ve),P=Jr(P)}ve=null}else ve=null;he!==null&&Ed(ie,te,he,ve,!1),me!==null&&mt!==null&&Ed(ie,mt,me,ve,!0)}}e:{if(te=V?ti(V):window,he=te.nodeName&&te.nodeName.toLowerCase(),he==="select"||he==="input"&&te.type==="file")var we=Yg;else if(ad(te))if(ud)we=Jg;else{we=Kg;var Ce=Xg}else(he=te.nodeName)&&he.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(we=Zg);if(we&&(we=we(t,V))){ld(ie,we,i,se);break e}Ce&&Ce(t,te,V),t==="focusout"&&(Ce=te._wrapperState)&&Ce.controlled&&te.type==="number"&&Ae(te,"number",te.value)}switch(Ce=V?ti(V):window,t){case"focusin":(ad(Ce)||Ce.contentEditable==="true")&&(Kr=Ce,fu=V,Ki=null);break;case"focusout":Ki=fu=Kr=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,vd(ie,i,se);break;case"selectionchange":if(nv)break;case"keydown":case"keyup":vd(ie,i,se)}var Te;if(uu)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Xr?id(t,i)&&(be="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(be="onCompositionStart");be&&(nd&&i.locale!=="ko"&&(Xr||be!=="onCompositionStart"?be==="onCompositionEnd"&&Xr&&(Te=Kh()):(qs=se,su="value"in qs?qs.value:qs.textContent,Xr=!0)),Ce=ha(V,be),0<Ce.length&&(be=new ed(be,t,null,i,se),ie.push({event:be,listeners:Ce}),Te?be.data=Te:(Te=od(i),Te!==null&&(be.data=Te)))),(Te=Ug?$g(t,i):Qg(t,i))&&(V=ha(V,"onBeforeInput"),0<V.length&&(se=new ed("onBeforeInput","beforeinput",null,i,se),ie.push({event:se,listeners:V}),se.data=Te))}bd(ie,n)})}function eo(t,n,i){return{instance:t,listener:n,currentTarget:i}}function ha(t,n){for(var i=n+"Capture",l=[];t!==null;){var c=t,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=ms(t,i),p!=null&&l.unshift(eo(t,p,c)),p=ms(t,n),p!=null&&l.push(eo(t,p,c))),t=t.return}return l}function Jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ed(t,n,i,l,c){for(var p=n._reactName,y=[];i!==null&&i!==l;){var b=i,A=b.alternate,V=b.stateNode;if(A!==null&&A===l)break;b.tag===5&&V!==null&&(b=V,c?(A=ms(i,p),A!=null&&y.unshift(eo(i,A,b))):c||(A=ms(i,p),A!=null&&y.push(eo(i,A,b)))),i=i.return}y.length!==0&&t.push({event:n,listeners:y})}var ov=/\r\n?/g,av=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(ov,`
`).replace(av,"")}function da(t,n,i){if(n=Rd(n),Rd(t)!==n&&i)throw Error(s(425))}function fa(){}var wu=null,xu=null;function ku(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cu=typeof setTimeout=="function"?setTimeout:void 0,lv=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,uv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(t){return Ad.resolve(null).then(t).catch(cv)}:Cu;function cv(t){setTimeout(function(){throw t})}function Tu(t,n){var i=n,l=0;do{var c=i.nextSibling;if(t.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){t.removeChild(c),Ui(n);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);Ui(n)}function Bs(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Od(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return t;n--}else i==="/$"&&n++}t=t.previousSibling}return null}var ei=Math.random().toString(36).slice(2),ts="__reactFiber$"+ei,to="__reactProps$"+ei,_s="__reactContainer$"+ei,Su="__reactEvents$"+ei,hv="__reactListeners$"+ei,dv="__reactHandles$"+ei;function vr(t){var n=t[ts];if(n)return n;for(var i=t.parentNode;i;){if(n=i[_s]||i[ts]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(t=Od(t);t!==null;){if(i=t[ts])return i;t=Od(t)}return n}t=i,i=t.parentNode}return null}function no(t){return t=t[ts]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(s(33))}function pa(t){return t[to]||null}var bu=[],ni=-1;function Us(t){return{current:t}}function nt(t){0>ni||(t.current=bu[ni],bu[ni]=null,ni--)}function Xe(t,n){ni++,bu[ni]=t.current,t.current=n}var $s={},jt=Us($s),Zt=Us(!1),yr=$s;function si(t,n){var i=t.type.contextTypes;if(!i)return $s;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=n[p];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=c),c}function Jt(t){return t=t.childContextTypes,t!=null}function ma(){nt(Zt),nt(jt)}function Dd(t,n,i){if(jt.current!==$s)throw Error(s(168));Xe(jt,n),Xe(Zt,i)}function Md(t,n,i){var l=t.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in n))throw Error(s(108,ke(t)||"Unknown",c));return Y({},i,l)}function ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$s,yr=jt.current,Xe(jt,t),Xe(Zt,Zt.current),!0}function Id(t,n,i){var l=t.stateNode;if(!l)throw Error(s(169));i?(t=Md(t,n,yr),l.__reactInternalMemoizedMergedChildContext=t,nt(Zt),nt(jt),Xe(jt,t)):nt(Zt),Xe(Zt,i)}var ws=null,va=!1,Nu=!1;function Pd(t){ws===null?ws=[t]:ws.push(t)}function fv(t){va=!0,Pd(t)}function Qs(){if(!Nu&&ws!==null){Nu=!0;var t=0,n=Qe;try{var i=ws;for(Qe=1;t<i.length;t++){var l=i[t];do l=l(!0);while(l!==null)}ws=null,va=!1}catch(c){throw ws!==null&&(ws=ws.slice(t+1)),U(Hr,Qs),c}finally{Qe=n,Nu=!1}}return null}var ri=[],ii=0,ya=null,_a=0,Tn=[],Sn=0,_r=null,xs=1,ks="";function wr(t,n){ri[ii++]=_a,ri[ii++]=ya,ya=t,_a=n}function Fd(t,n,i){Tn[Sn++]=xs,Tn[Sn++]=ks,Tn[Sn++]=_r,_r=t;var l=xs;t=ks;var c=32-Fn(l)-1;l&=~(1<<c),i+=1;var p=32-Fn(n)+c;if(30<p){var y=c-c%5;p=(l&(1<<y)-1).toString(32),l>>=y,c-=y,xs=1<<32-Fn(n)+c|i<<c|l,ks=p+t}else xs=1<<p|i<<c|l,ks=t}function Eu(t){t.return!==null&&(wr(t,1),Fd(t,1,0))}function Ru(t){for(;t===ya;)ya=ri[--ii],ri[ii]=null,_a=ri[--ii],ri[ii]=null;for(;t===_r;)_r=Tn[--Sn],Tn[Sn]=null,ks=Tn[--Sn],Tn[Sn]=null,xs=Tn[--Sn],Tn[Sn]=null}var pn=null,mn=null,it=!1,jn=null;function Ld(t,n){var i=Rn(5,null,null,0);i.elementType="DELETED",i.stateNode=n,i.return=t,n=t.deletions,n===null?(t.deletions=[i],t.flags|=16):n.push(i)}function jd(t,n){switch(t.tag){case 5:var i=t.type;return n=n.nodeType!==1||i.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,pn=t,mn=Bs(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,pn=t,mn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(i=_r!==null?{id:xs,overflow:ks}:null,t.memoizedState={dehydrated:n,treeContext:i,retryLane:1073741824},i=Rn(18,null,null,0),i.stateNode=n,i.return=t,t.child=i,pn=t,mn=null,!0):!1;default:return!1}}function Au(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ou(t){if(it){var n=mn;if(n){var i=n;if(!jd(t,n)){if(Au(t))throw Error(s(418));n=Bs(i.nextSibling);var l=pn;n&&jd(t,n)?Ld(l,i):(t.flags=t.flags&-4097|2,it=!1,pn=t)}}else{if(Au(t))throw Error(s(418));t.flags=t.flags&-4097|2,it=!1,pn=t}}}function Vd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function wa(t){if(t!==pn)return!1;if(!it)return Vd(t),it=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!ku(t.type,t.memoizedProps)),n&&(n=mn)){if(Au(t))throw zd(),Error(s(418));for(;n;)Ld(t,n),n=Bs(n.nextSibling)}if(Vd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(n===0){mn=Bs(t.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++}t=t.nextSibling}mn=null}}else mn=pn?Bs(t.stateNode.nextSibling):null;return!0}function zd(){for(var t=mn;t;)t=Bs(t.nextSibling)}function oi(){mn=pn=null,it=!1}function Du(t){jn===null?jn=[t]:jn.push(t)}var pv=z.ReactCurrentBatchConfig;function so(t,n,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(s(309));var l=i.stateNode}if(!l)throw Error(s(147,t));var c=l,p=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===p?n.ref:(n=function(y){var b=c.refs;y===null?delete b[p]:b[p]=y},n._stringRef=p,n)}if(typeof t!="string")throw Error(s(284));if(!i._owner)throw Error(s(290,t))}return t}function xa(t,n){throw t=Object.prototype.toString.call(n),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function qd(t){var n=t._init;return n(t._payload)}function Wd(t){function n(P,O){if(t){var L=P.deletions;L===null?(P.deletions=[O],P.flags|=16):L.push(O)}}function i(P,O){if(!t)return null;for(;O!==null;)n(P,O),O=O.sibling;return null}function l(P,O){for(P=new Map;O!==null;)O.key!==null?P.set(O.key,O):P.set(O.index,O),O=O.sibling;return P}function c(P,O){return P=er(P,O),P.index=0,P.sibling=null,P}function p(P,O,L){return P.index=L,t?(L=P.alternate,L!==null?(L=L.index,L<O?(P.flags|=2,O):L):(P.flags|=2,O)):(P.flags|=1048576,O)}function y(P){return t&&P.alternate===null&&(P.flags|=2),P}function b(P,O,L,le){return O===null||O.tag!==6?(O=Cc(L,P.mode,le),O.return=P,O):(O=c(O,L),O.return=P,O)}function A(P,O,L,le){var we=L.type;return we===F?se(P,O,L.props.children,le,L.key):O!==null&&(O.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ee&&qd(we)===O.type)?(le=c(O,L.props),le.ref=so(P,O,L),le.return=P,le):(le=$a(L.type,L.key,L.props,null,P.mode,le),le.ref=so(P,O,L),le.return=P,le)}function V(P,O,L,le){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=Tc(L,P.mode,le),O.return=P,O):(O=c(O,L.children||[]),O.return=P,O)}function se(P,O,L,le,we){return O===null||O.tag!==7?(O=Er(L,P.mode,le,we),O.return=P,O):(O=c(O,L),O.return=P,O)}function ie(P,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Cc(""+O,P.mode,L),O.return=P,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case N:return L=$a(O.type,O.key,O.props,null,P.mode,L),L.ref=so(P,null,O),L.return=P,L;case M:return O=Tc(O,P.mode,L),O.return=P,O;case ee:var le=O._init;return ie(P,le(O._payload),L)}if(Ie(O)||Z(O))return O=Er(O,P.mode,L,null),O.return=P,O;xa(P,O)}return null}function te(P,O,L,le){var we=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return we!==null?null:b(P,O,""+L,le);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case N:return L.key===we?A(P,O,L,le):null;case M:return L.key===we?V(P,O,L,le):null;case ee:return we=L._init,te(P,O,we(L._payload),le)}if(Ie(L)||Z(L))return we!==null?null:se(P,O,L,le,null);xa(P,L)}return null}function he(P,O,L,le,we){if(typeof le=="string"&&le!==""||typeof le=="number")return P=P.get(L)||null,b(O,P,""+le,we);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case N:return P=P.get(le.key===null?L:le.key)||null,A(O,P,le,we);case M:return P=P.get(le.key===null?L:le.key)||null,V(O,P,le,we);case ee:var Ce=le._init;return he(P,O,L,Ce(le._payload),we)}if(Ie(le)||Z(le))return P=P.get(L)||null,se(O,P,le,we,null);xa(O,le)}return null}function me(P,O,L,le){for(var we=null,Ce=null,Te=O,be=O=0,Dt=null;Te!==null&&be<L.length;be++){Te.index>be?(Dt=Te,Te=null):Dt=Te.sibling;var ze=te(P,Te,L[be],le);if(ze===null){Te===null&&(Te=Dt);break}t&&Te&&ze.alternate===null&&n(P,Te),O=p(ze,O,be),Ce===null?we=ze:Ce.sibling=ze,Ce=ze,Te=Dt}if(be===L.length)return i(P,Te),it&&wr(P,be),we;if(Te===null){for(;be<L.length;be++)Te=ie(P,L[be],le),Te!==null&&(O=p(Te,O,be),Ce===null?we=Te:Ce.sibling=Te,Ce=Te);return it&&wr(P,be),we}for(Te=l(P,Te);be<L.length;be++)Dt=he(Te,P,be,L[be],le),Dt!==null&&(t&&Dt.alternate!==null&&Te.delete(Dt.key===null?be:Dt.key),O=p(Dt,O,be),Ce===null?we=Dt:Ce.sibling=Dt,Ce=Dt);return t&&Te.forEach(function(tr){return n(P,tr)}),it&&wr(P,be),we}function ve(P,O,L,le){var we=Z(L);if(typeof we!="function")throw Error(s(150));if(L=we.call(L),L==null)throw Error(s(151));for(var Ce=we=null,Te=O,be=O=0,Dt=null,ze=L.next();Te!==null&&!ze.done;be++,ze=L.next()){Te.index>be?(Dt=Te,Te=null):Dt=Te.sibling;var tr=te(P,Te,ze.value,le);if(tr===null){Te===null&&(Te=Dt);break}t&&Te&&tr.alternate===null&&n(P,Te),O=p(tr,O,be),Ce===null?we=tr:Ce.sibling=tr,Ce=tr,Te=Dt}if(ze.done)return i(P,Te),it&&wr(P,be),we;if(Te===null){for(;!ze.done;be++,ze=L.next())ze=ie(P,ze.value,le),ze!==null&&(O=p(ze,O,be),Ce===null?we=ze:Ce.sibling=ze,Ce=ze);return it&&wr(P,be),we}for(Te=l(P,Te);!ze.done;be++,ze=L.next())ze=he(Te,P,be,ze.value,le),ze!==null&&(t&&ze.alternate!==null&&Te.delete(ze.key===null?be:ze.key),O=p(ze,O,be),Ce===null?we=ze:Ce.sibling=ze,Ce=ze);return t&&Te.forEach(function(Hv){return n(P,Hv)}),it&&wr(P,be),we}function mt(P,O,L,le){if(typeof L=="object"&&L!==null&&L.type===F&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case N:e:{for(var we=L.key,Ce=O;Ce!==null;){if(Ce.key===we){if(we=L.type,we===F){if(Ce.tag===7){i(P,Ce.sibling),O=c(Ce,L.props.children),O.return=P,P=O;break e}}else if(Ce.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ee&&qd(we)===Ce.type){i(P,Ce.sibling),O=c(Ce,L.props),O.ref=so(P,Ce,L),O.return=P,P=O;break e}i(P,Ce);break}else n(P,Ce);Ce=Ce.sibling}L.type===F?(O=Er(L.props.children,P.mode,le,L.key),O.return=P,P=O):(le=$a(L.type,L.key,L.props,null,P.mode,le),le.ref=so(P,O,L),le.return=P,P=le)}return y(P);case M:e:{for(Ce=L.key;O!==null;){if(O.key===Ce)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){i(P,O.sibling),O=c(O,L.children||[]),O.return=P,P=O;break e}else{i(P,O);break}else n(P,O);O=O.sibling}O=Tc(L,P.mode,le),O.return=P,P=O}return y(P);case ee:return Ce=L._init,mt(P,O,Ce(L._payload),le)}if(Ie(L))return me(P,O,L,le);if(Z(L))return ve(P,O,L,le);xa(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,O!==null&&O.tag===6?(i(P,O.sibling),O=c(O,L),O.return=P,P=O):(i(P,O),O=Cc(L,P.mode,le),O.return=P,P=O),y(P)):i(P,O)}return mt}var ai=Wd(!0),Bd=Wd(!1),ka=Us(null),Ca=null,li=null,Mu=null;function Iu(){Mu=li=Ca=null}function Pu(t){var n=ka.current;nt(ka),t._currentValue=n}function Fu(t,n,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===i)break;t=t.return}}function ui(t,n){Ca=t,Mu=li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(en=!0),t.firstContext=null)}function bn(t){var n=t._currentValue;if(Mu!==t)if(t={context:t,memoizedValue:n,next:null},li===null){if(Ca===null)throw Error(s(308));li=t,Ca.dependencies={lanes:0,firstContext:t}}else li=li.next=t;return n}var xr=null;function Lu(t){xr===null?xr=[t]:xr.push(t)}function Ud(t,n,i,l){var c=n.interleaved;return c===null?(i.next=i,Lu(n)):(i.next=c.next,c.next=i),n.interleaved=i,Cs(t,l)}function Cs(t,n){t.lanes|=n;var i=t.alternate;for(i!==null&&(i.lanes|=n),i=t,t=t.return;t!==null;)t.childLanes|=n,i=t.alternate,i!==null&&(i.childLanes|=n),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Hs=!1;function ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $d(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function Gs(t,n,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,Cs(t,i)}return c=l.interleaved,c===null?(n.next=n,Lu(l)):(n.next=c.next,c.next=n),l.interleaved=n,Cs(t,i)}function Ta(t,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194240)!==0)){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Zl(t,i)}}function Qd(t,n){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var y={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=y:p=p.next=y,i=i.next}while(i!==null);p===null?c=p=n:p=p.next=n}else c=p=n;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:l.shared,effects:l.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=n:t.next=n,i.lastBaseUpdate=n}function Sa(t,n,i,l){var c=t.updateQueue;Hs=!1;var p=c.firstBaseUpdate,y=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var A=b,V=A.next;A.next=null,y===null?p=V:y.next=V,y=A;var se=t.alternate;se!==null&&(se=se.updateQueue,b=se.lastBaseUpdate,b!==y&&(b===null?se.firstBaseUpdate=V:b.next=V,se.lastBaseUpdate=A))}if(p!==null){var ie=c.baseState;y=0,se=V=A=null,b=p;do{var te=b.lane,he=b.eventTime;if((l&te)===te){se!==null&&(se=se.next={eventTime:he,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var me=t,ve=b;switch(te=n,he=i,ve.tag){case 1:if(me=ve.payload,typeof me=="function"){ie=me.call(he,ie,te);break e}ie=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ve.payload,te=typeof me=="function"?me.call(he,ie,te):me,te==null)break e;ie=Y({},ie,te);break e;case 2:Hs=!0}}b.callback!==null&&b.lane!==0&&(t.flags|=64,te=c.effects,te===null?c.effects=[b]:te.push(b))}else he={eventTime:he,lane:te,tag:b.tag,payload:b.payload,callback:b.callback,next:null},se===null?(V=se=he,A=ie):se=se.next=he,y|=te;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;te=b,b=te.next,te.next=null,c.lastBaseUpdate=te,c.shared.pending=null}}while(!0);if(se===null&&(A=ie),c.baseState=A,c.firstBaseUpdate=V,c.lastBaseUpdate=se,n=c.shared.interleaved,n!==null){c=n;do y|=c.lane,c=c.next;while(c!==n)}else p===null&&(c.shared.lanes=0);Tr|=y,t.lanes=y,t.memoizedState=ie}}function Hd(t,n,i){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var l=t[n],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(s(191,c));c.call(l)}}}var ro={},ns=Us(ro),io=Us(ro),oo=Us(ro);function kr(t){if(t===ro)throw Error(s(174));return t}function Vu(t,n){switch(Xe(oo,n),Xe(io,t),Xe(ns,ro),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ge(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Ge(n,t)}nt(ns),Xe(ns,n)}function ci(){nt(ns),nt(io),nt(oo)}function Gd(t){kr(oo.current);var n=kr(ns.current),i=Ge(n,t.type);n!==i&&(Xe(io,t),Xe(ns,i))}function zu(t){io.current===t&&(nt(ns),nt(io))}var ut=Us(0);function ba(t){for(var n=t;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var qu=[];function Wu(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var Na=z.ReactCurrentDispatcher,Bu=z.ReactCurrentBatchConfig,Cr=0,ct=null,St=null,At=null,Ea=!1,ao=!1,lo=0,mv=0;function Vt(){throw Error(s(321))}function Uu(t,n){if(n===null)return!1;for(var i=0;i<n.length&&i<t.length;i++)if(!Ln(t[i],n[i]))return!1;return!0}function $u(t,n,i,l,c,p){if(Cr=p,ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Na.current=t===null||t.memoizedState===null?_v:wv,t=i(l,c),ao){p=0;do{if(ao=!1,lo=0,25<=p)throw Error(s(301));p+=1,At=St=null,n.updateQueue=null,Na.current=xv,t=i(l,c)}while(ao)}if(Na.current=Oa,n=St!==null&&St.next!==null,Cr=0,At=St=ct=null,Ea=!1,n)throw Error(s(300));return t}function Qu(){var t=lo!==0;return lo=0,t}function ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ct.memoizedState=At=t:At=At.next=t,At}function Nn(){if(St===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var n=At===null?ct.memoizedState:At.next;if(n!==null)At=n,St=t;else{if(t===null)throw Error(s(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},At===null?ct.memoizedState=At=t:At=At.next=t}return At}function uo(t,n){return typeof n=="function"?n(t):n}function Hu(t){var n=Nn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=t;var l=St,c=l.baseQueue,p=i.pending;if(p!==null){if(c!==null){var y=c.next;c.next=p.next,p.next=y}l.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,l=l.baseState;var b=y=null,A=null,V=p;do{var se=V.lane;if((Cr&se)===se)A!==null&&(A=A.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),l=V.hasEagerState?V.eagerState:t(l,V.action);else{var ie={lane:se,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};A===null?(b=A=ie,y=l):A=A.next=ie,ct.lanes|=se,Tr|=se}V=V.next}while(V!==null&&V!==p);A===null?y=l:A.next=b,Ln(l,n.memoizedState)||(en=!0),n.memoizedState=l,n.baseState=y,n.baseQueue=A,i.lastRenderedState=l}if(t=i.interleaved,t!==null){c=t;do p=c.lane,ct.lanes|=p,Tr|=p,c=c.next;while(c!==t)}else c===null&&(i.lanes=0);return[n.memoizedState,i.dispatch]}function Gu(t){var n=Nn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=t;var l=i.dispatch,c=i.pending,p=n.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do p=t(p,y.action),y=y.next;while(y!==c);Ln(p,n.memoizedState)||(en=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),i.lastRenderedState=p}return[p,l]}function Yd(){}function Xd(t,n){var i=ct,l=Nn(),c=n(),p=!Ln(l.memoizedState,c);if(p&&(l.memoizedState=c,en=!0),l=l.queue,Yu(Jd.bind(null,i,l,t),[t]),l.getSnapshot!==n||p||At!==null&&At.memoizedState.tag&1){if(i.flags|=2048,co(9,Zd.bind(null,i,l,c,n),void 0,null),Ot===null)throw Error(s(349));(Cr&30)!==0||Kd(i,n,c)}return c}function Kd(t,n,i){t.flags|=16384,t={getSnapshot:n,value:i},n=ct.updateQueue,n===null?(n={lastEffect:null,stores:null},ct.updateQueue=n,n.stores=[t]):(i=n.stores,i===null?n.stores=[t]:i.push(t))}function Zd(t,n,i,l){n.value=i,n.getSnapshot=l,ef(n)&&tf(t)}function Jd(t,n,i){return i(function(){ef(n)&&tf(t)})}function ef(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!Ln(t,i)}catch{return!0}}function tf(t){var n=Cs(t,1);n!==null&&Wn(n,t,1,-1)}function nf(t){var n=ss();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:t},n.queue=t,t=t.dispatch=yv.bind(null,ct,t),[n.memoizedState,t]}function co(t,n,i,l){return t={tag:t,create:n,destroy:i,deps:l,next:null},n=ct.updateQueue,n===null?(n={lastEffect:null,stores:null},ct.updateQueue=n,n.lastEffect=t.next=t):(i=n.lastEffect,i===null?n.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,n.lastEffect=t)),t}function sf(){return Nn().memoizedState}function Ra(t,n,i,l){var c=ss();ct.flags|=t,c.memoizedState=co(1|n,i,void 0,l===void 0?null:l)}function Aa(t,n,i,l){var c=Nn();l=l===void 0?null:l;var p=void 0;if(St!==null){var y=St.memoizedState;if(p=y.destroy,l!==null&&Uu(l,y.deps)){c.memoizedState=co(n,i,p,l);return}}ct.flags|=t,c.memoizedState=co(1|n,i,p,l)}function rf(t,n){return Ra(8390656,8,t,n)}function Yu(t,n){return Aa(2048,8,t,n)}function of(t,n){return Aa(4,2,t,n)}function af(t,n){return Aa(4,4,t,n)}function lf(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function uf(t,n,i){return i=i!=null?i.concat([t]):null,Aa(4,4,lf.bind(null,n,t),i)}function Xu(){}function cf(t,n){var i=Nn();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&Uu(n,l[1])?l[0]:(i.memoizedState=[t,n],t)}function hf(t,n){var i=Nn();n=n===void 0?null:n;var l=i.memoizedState;return l!==null&&n!==null&&Uu(n,l[1])?l[0]:(t=t(),i.memoizedState=[t,n],t)}function df(t,n,i){return(Cr&21)===0?(t.baseState&&(t.baseState=!1,en=!0),t.memoizedState=i):(Ln(i,n)||(i=qh(),ct.lanes|=i,Tr|=i,t.baseState=!0),n)}function gv(t,n){var i=Qe;Qe=i!==0&&4>i?i:4,t(!0);var l=Bu.transition;Bu.transition={};try{t(!1),n()}finally{Qe=i,Bu.transition=l}}function ff(){return Nn().memoizedState}function vv(t,n,i){var l=Zs(t);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},pf(t))mf(n,i);else if(i=Ud(t,n,i,l),i!==null){var c=Ht();Wn(i,t,l,c),gf(i,n,l)}}function yv(t,n,i){var l=Zs(t),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(pf(t))mf(n,c);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var y=n.lastRenderedState,b=p(y,i);if(c.hasEagerState=!0,c.eagerState=b,Ln(b,y)){var A=n.interleaved;A===null?(c.next=c,Lu(n)):(c.next=A.next,A.next=c),n.interleaved=c;return}}catch{}finally{}i=Ud(t,n,c,l),i!==null&&(c=Ht(),Wn(i,t,l,c),gf(i,n,l))}}function pf(t){var n=t.alternate;return t===ct||n!==null&&n===ct}function mf(t,n){ao=Ea=!0;var i=t.pending;i===null?n.next=n:(n.next=i.next,i.next=n),t.pending=n}function gf(t,n,i){if((i&4194240)!==0){var l=n.lanes;l&=t.pendingLanes,i|=l,n.lanes=i,Zl(t,i)}}var Oa={readContext:bn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},_v={readContext:bn,useCallback:function(t,n){return ss().memoizedState=[t,n===void 0?null:n],t},useContext:bn,useEffect:rf,useImperativeHandle:function(t,n,i){return i=i!=null?i.concat([t]):null,Ra(4194308,4,lf.bind(null,n,t),i)},useLayoutEffect:function(t,n){return Ra(4194308,4,t,n)},useInsertionEffect:function(t,n){return Ra(4,2,t,n)},useMemo:function(t,n){var i=ss();return n=n===void 0?null:n,t=t(),i.memoizedState=[t,n],t},useReducer:function(t,n,i){var l=ss();return n=i!==void 0?i(n):n,l.memoizedState=l.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},l.queue=t,t=t.dispatch=vv.bind(null,ct,t),[l.memoizedState,t]},useRef:function(t){var n=ss();return t={current:t},n.memoizedState=t},useState:nf,useDebugValue:Xu,useDeferredValue:function(t){return ss().memoizedState=t},useTransition:function(){var t=nf(!1),n=t[0];return t=gv.bind(null,t[1]),ss().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,i){var l=ct,c=ss();if(it){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Ot===null)throw Error(s(349));(Cr&30)!==0||Kd(l,n,i)}c.memoizedState=i;var p={value:i,getSnapshot:n};return c.queue=p,rf(Jd.bind(null,l,p,t),[t]),l.flags|=2048,co(9,Zd.bind(null,l,p,i,n),void 0,null),i},useId:function(){var t=ss(),n=Ot.identifierPrefix;if(it){var i=ks,l=xs;i=(l&~(1<<32-Fn(l)-1)).toString(32)+i,n=":"+n+"R"+i,i=lo++,0<i&&(n+="H"+i.toString(32)),n+=":"}else i=mv++,n=":"+n+"r"+i.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},wv={readContext:bn,useCallback:cf,useContext:bn,useEffect:Yu,useImperativeHandle:uf,useInsertionEffect:of,useLayoutEffect:af,useMemo:hf,useReducer:Hu,useRef:sf,useState:function(){return Hu(uo)},useDebugValue:Xu,useDeferredValue:function(t){var n=Nn();return df(n,St.memoizedState,t)},useTransition:function(){var t=Hu(uo)[0],n=Nn().memoizedState;return[t,n]},useMutableSource:Yd,useSyncExternalStore:Xd,useId:ff,unstable_isNewReconciler:!1},xv={readContext:bn,useCallback:cf,useContext:bn,useEffect:Yu,useImperativeHandle:uf,useInsertionEffect:of,useLayoutEffect:af,useMemo:hf,useReducer:Gu,useRef:sf,useState:function(){return Gu(uo)},useDebugValue:Xu,useDeferredValue:function(t){var n=Nn();return St===null?n.memoizedState=t:df(n,St.memoizedState,t)},useTransition:function(){var t=Gu(uo)[0],n=Nn().memoizedState;return[t,n]},useMutableSource:Yd,useSyncExternalStore:Xd,useId:ff,unstable_isNewReconciler:!1};function Vn(t,n){if(t&&t.defaultProps){n=Y({},n),t=t.defaultProps;for(var i in t)n[i]===void 0&&(n[i]=t[i]);return n}return n}function Ku(t,n,i,l){n=t.memoizedState,i=i(l,n),i=i==null?n:Y({},n,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Da={isMounted:function(t){return(t=t._reactInternals)?pt(t)===t:!1},enqueueSetState:function(t,n,i){t=t._reactInternals;var l=Ht(),c=Zs(t),p=Ts(l,c);p.payload=n,i!=null&&(p.callback=i),n=Gs(t,p,c),n!==null&&(Wn(n,t,c,l),Ta(n,t,c))},enqueueReplaceState:function(t,n,i){t=t._reactInternals;var l=Ht(),c=Zs(t),p=Ts(l,c);p.tag=1,p.payload=n,i!=null&&(p.callback=i),n=Gs(t,p,c),n!==null&&(Wn(n,t,c,l),Ta(n,t,c))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var i=Ht(),l=Zs(t),c=Ts(i,l);c.tag=2,n!=null&&(c.callback=n),n=Gs(t,c,l),n!==null&&(Wn(n,t,l,i),Ta(n,t,l))}};function vf(t,n,i,l,c,p,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,y):n.prototype&&n.prototype.isPureReactComponent?!Xi(i,l)||!Xi(c,p):!0}function yf(t,n,i){var l=!1,c=$s,p=n.contextType;return typeof p=="object"&&p!==null?p=bn(p):(c=Jt(n)?yr:jt.current,l=n.contextTypes,p=(l=l!=null)?si(t,c):$s),n=new n(i,p),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Da,t.stateNode=n,n._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=p),n}function _f(t,n,i,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,l),n.state!==t&&Da.enqueueReplaceState(n,n.state,null)}function Zu(t,n,i,l){var c=t.stateNode;c.props=i,c.state=t.memoizedState,c.refs={},ju(t);var p=n.contextType;typeof p=="object"&&p!==null?c.context=bn(p):(p=Jt(n)?yr:jt.current,c.context=si(t,p)),c.state=t.memoizedState,p=n.getDerivedStateFromProps,typeof p=="function"&&(Ku(t,n,p,i),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(n=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),n!==c.state&&Da.enqueueReplaceState(c,c.state,null),Sa(t,i,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,n){try{var i="",l=n;do i+=ae(l),l=l.return;while(l);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:n,stack:c,digest:null}}function Ju(t,n,i){return{value:t,source:null,stack:i??null,digest:n??null}}function ec(t,n){try{console.error(n.value)}catch(i){setTimeout(function(){throw i})}}var kv=typeof WeakMap=="function"?WeakMap:Map;function wf(t,n,i){i=Ts(-1,i),i.tag=3,i.payload={element:null};var l=n.value;return i.callback=function(){Va||(Va=!0,mc=l),ec(t,n)},i}function xf(t,n,i){i=Ts(-1,i),i.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=n.value;i.payload=function(){return l(c)},i.callback=function(){ec(t,n)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){ec(t,n),typeof l!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var y=n.stack;this.componentDidCatch(n.value,{componentStack:y!==null?y:""})}),i}function kf(t,n,i){var l=t.pingCache;if(l===null){l=t.pingCache=new kv;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(i)||(c.add(i),t=Fv.bind(null,t,n,i),n.then(t,t))}function Cf(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Tf(t,n,i,l,c){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(n=Ts(-1,1),n.tag=2,Gs(i,n,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=c,t)}var Cv=z.ReactCurrentOwner,en=!1;function Qt(t,n,i,l){n.child=t===null?Bd(n,null,i,l):ai(n,t.child,i,l)}function Sf(t,n,i,l,c){i=i.render;var p=n.ref;return ui(n,c),l=$u(t,n,i,l,p,c),i=Qu(),t!==null&&!en?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Ss(t,n,c)):(it&&i&&Eu(n),n.flags|=1,Qt(t,n,l,c),n.child)}function bf(t,n,i,l,c){if(t===null){var p=i.type;return typeof p=="function"&&!kc(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(n.tag=15,n.type=p,Nf(t,n,p,l,c)):(t=$a(i.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,(t.lanes&c)===0){var y=p.memoizedProps;if(i=i.compare,i=i!==null?i:Xi,i(y,l)&&t.ref===n.ref)return Ss(t,n,c)}return n.flags|=1,t=er(p,l),t.ref=n.ref,t.return=n,n.child=t}function Nf(t,n,i,l,c){if(t!==null){var p=t.memoizedProps;if(Xi(p,l)&&t.ref===n.ref)if(en=!1,n.pendingProps=l=p,(t.lanes&c)!==0)(t.flags&131072)!==0&&(en=!0);else return n.lanes=t.lanes,Ss(t,n,c)}return tc(t,n,i,l,c)}function Ef(t,n,i){var l=n.pendingProps,c=l.children,p=t!==null?t.memoizedState:null;if(l.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(fi,gn),gn|=i;else{if((i&1073741824)===0)return t=p!==null?p.baseLanes|i:i,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Xe(fi,gn),gn|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=p!==null?p.baseLanes:i,Xe(fi,gn),gn|=l}else p!==null?(l=p.baseLanes|i,n.memoizedState=null):l=i,Xe(fi,gn),gn|=l;return Qt(t,n,c,i),n.child}function Rf(t,n){var i=n.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(n.flags|=512,n.flags|=2097152)}function tc(t,n,i,l,c){var p=Jt(i)?yr:jt.current;return p=si(n,p),ui(n,c),i=$u(t,n,i,l,p,c),l=Qu(),t!==null&&!en?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~c,Ss(t,n,c)):(it&&l&&Eu(n),n.flags|=1,Qt(t,n,i,c),n.child)}function Af(t,n,i,l,c){if(Jt(i)){var p=!0;ga(n)}else p=!1;if(ui(n,c),n.stateNode===null)Ia(t,n),yf(n,i,l),Zu(n,i,l,c),l=!0;else if(t===null){var y=n.stateNode,b=n.memoizedProps;y.props=b;var A=y.context,V=i.contextType;typeof V=="object"&&V!==null?V=bn(V):(V=Jt(i)?yr:jt.current,V=si(n,V));var se=i.getDerivedStateFromProps,ie=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function";ie||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==l||A!==V)&&_f(n,y,l,V),Hs=!1;var te=n.memoizedState;y.state=te,Sa(n,l,y,c),A=n.memoizedState,b!==l||te!==A||Zt.current||Hs?(typeof se=="function"&&(Ku(n,i,se,l),A=n.memoizedState),(b=Hs||vf(n,i,b,l,te,A,V))?(ie||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(n.flags|=4194308)):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=A),y.props=l,y.state=A,y.context=V,l=b):(typeof y.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{y=n.stateNode,$d(t,n),b=n.memoizedProps,V=n.type===n.elementType?b:Vn(n.type,b),y.props=V,ie=n.pendingProps,te=y.context,A=i.contextType,typeof A=="object"&&A!==null?A=bn(A):(A=Jt(i)?yr:jt.current,A=si(n,A));var he=i.getDerivedStateFromProps;(se=typeof he=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b!==ie||te!==A)&&_f(n,y,l,A),Hs=!1,te=n.memoizedState,y.state=te,Sa(n,l,y,c);var me=n.memoizedState;b!==ie||te!==me||Zt.current||Hs?(typeof he=="function"&&(Ku(n,i,he,l),me=n.memoizedState),(V=Hs||vf(n,i,V,l,te,me,A)||!1)?(se||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(l,me,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(l,me,A)),typeof y.componentDidUpdate=="function"&&(n.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof y.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=me),y.props=l,y.state=me,y.context=A,l=V):(typeof y.componentDidUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(n.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&te===t.memoizedState||(n.flags|=1024),l=!1)}return nc(t,n,i,l,p,c)}function nc(t,n,i,l,c,p){Rf(t,n);var y=(n.flags&128)!==0;if(!l&&!y)return c&&Id(n,i,!1),Ss(t,n,p);l=n.stateNode,Cv.current=n;var b=y&&typeof i.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,t!==null&&y?(n.child=ai(n,t.child,null,p),n.child=ai(n,null,b,p)):Qt(t,n,b,p),n.memoizedState=l.state,c&&Id(n,i,!0),n.child}function Of(t){var n=t.stateNode;n.pendingContext?Dd(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Dd(t,n.context,!1),Vu(t,n.containerInfo)}function Df(t,n,i,l,c){return oi(),Du(c),n.flags|=256,Qt(t,n,i,l),n.child}var sc={dehydrated:null,treeContext:null,retryLane:0};function rc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mf(t,n,i){var l=n.pendingProps,c=ut.current,p=!1,y=(n.flags&128)!==0,b;if((b=y)||(b=t!==null&&t.memoizedState===null?!1:(c&2)!==0),b?(p=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Xe(ut,c&1),t===null)return Ou(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(y=l.children,t=l.fallback,p?(l=n.mode,p=n.child,y={mode:"hidden",children:y},(l&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=y):p=Qa(y,l,0,null),t=Er(t,l,i,null),p.return=n,t.return=n,p.sibling=t,n.child=p,n.child.memoizedState=rc(i),n.memoizedState=sc,t):ic(n,y));if(c=t.memoizedState,c!==null&&(b=c.dehydrated,b!==null))return Tv(t,n,y,l,b,c,i);if(p){p=l.fallback,y=n.mode,c=t.child,b=c.sibling;var A={mode:"hidden",children:l.children};return(y&1)===0&&n.child!==c?(l=n.child,l.childLanes=0,l.pendingProps=A,n.deletions=null):(l=er(c,A),l.subtreeFlags=c.subtreeFlags&14680064),b!==null?p=er(b,p):(p=Er(p,y,i,null),p.flags|=2),p.return=n,l.return=n,l.sibling=p,n.child=l,l=p,p=n.child,y=t.child.memoizedState,y=y===null?rc(i):{baseLanes:y.baseLanes|i,cachePool:null,transitions:y.transitions},p.memoizedState=y,p.childLanes=t.childLanes&~i,n.memoizedState=sc,l}return p=t.child,t=p.sibling,l=er(p,{mode:"visible",children:l.children}),(n.mode&1)===0&&(l.lanes=i),l.return=n,l.sibling=null,t!==null&&(i=n.deletions,i===null?(n.deletions=[t],n.flags|=16):i.push(t)),n.child=l,n.memoizedState=null,l}function ic(t,n){return n=Qa({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Ma(t,n,i,l){return l!==null&&Du(l),ai(n,t.child,null,i),t=ic(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Tv(t,n,i,l,c,p,y){if(i)return n.flags&256?(n.flags&=-257,l=Ju(Error(s(422))),Ma(t,n,y,l)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(p=l.fallback,c=n.mode,l=Qa({mode:"visible",children:l.children},c,0,null),p=Er(p,c,y,null),p.flags|=2,l.return=n,p.return=n,l.sibling=p,n.child=l,(n.mode&1)!==0&&ai(n,t.child,null,y),n.child.memoizedState=rc(y),n.memoizedState=sc,p);if((n.mode&1)===0)return Ma(t,n,y,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var b=l.dgst;return l=b,p=Error(s(419)),l=Ju(p,l,void 0),Ma(t,n,y,l)}if(b=(y&t.childLanes)!==0,en||b){if(l=Ot,l!==null){switch(y&-y){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|y))!==0?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,Cs(t,c),Wn(l,t,c,-1))}return xc(),l=Ju(Error(s(421))),Ma(t,n,y,l)}return c.data==="$?"?(n.flags|=128,n.child=t.child,n=Lv.bind(null,t),c._reactRetry=n,null):(t=p.treeContext,mn=Bs(c.nextSibling),pn=n,it=!0,jn=null,t!==null&&(Tn[Sn++]=xs,Tn[Sn++]=ks,Tn[Sn++]=_r,xs=t.id,ks=t.overflow,_r=n),n=ic(n,l.children),n.flags|=4096,n)}function If(t,n,i){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Fu(t.return,n,i)}function oc(t,n,i,l,c){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(p.isBackwards=n,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=i,p.tailMode=c)}function Pf(t,n,i){var l=n.pendingProps,c=l.revealOrder,p=l.tail;if(Qt(t,n,l.children,i),l=ut.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&If(t,i,n);else if(t.tag===19)If(t,i,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(Xe(ut,l),(n.mode&1)===0)n.memoizedState=null;else switch(c){case"forwards":for(i=n.child,c=null;i!==null;)t=i.alternate,t!==null&&ba(t)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),oc(n,!1,c,i,p);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&ba(t)===null){n.child=c;break}t=c.sibling,c.sibling=i,i=c,c=t}oc(n,!0,i,null,p);break;case"together":oc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ia(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Ss(t,n,i){if(t!==null&&(n.dependencies=t.dependencies),Tr|=n.lanes,(i&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(s(153));if(n.child!==null){for(t=n.child,i=er(t,t.pendingProps),n.child=i,i.return=n;t.sibling!==null;)t=t.sibling,i=i.sibling=er(t,t.pendingProps),i.return=n;i.sibling=null}return n.child}function Sv(t,n,i){switch(n.tag){case 3:Of(n),oi();break;case 5:Gd(n);break;case 1:Jt(n.type)&&ga(n);break;case 4:Vu(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,c=n.memoizedProps.value;Xe(ka,l._currentValue),l._currentValue=c;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(Xe(ut,ut.current&1),n.flags|=128,null):(i&n.child.childLanes)!==0?Mf(t,n,i):(Xe(ut,ut.current&1),t=Ss(t,n,i),t!==null?t.sibling:null);Xe(ut,ut.current&1);break;case 19:if(l=(i&n.childLanes)!==0,(t.flags&128)!==0){if(l)return Pf(t,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Xe(ut,ut.current),l)break;return null;case 22:case 23:return n.lanes=0,Ef(t,n,i)}return Ss(t,n,i)}var Ff,ac,Lf,jf;Ff=function(t,n){for(var i=n.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},ac=function(){},Lf=function(t,n,i,l){var c=t.memoizedProps;if(c!==l){t=n.stateNode,kr(ns.current);var p=null;switch(i){case"input":c=In(t,c),l=In(t,l),p=[];break;case"select":c=Y({},c,{value:void 0}),l=Y({},l,{value:void 0}),p=[];break;case"textarea":c=wt(t,c),l=wt(t,l),p=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=fa)}cs(i,l);var y;i=null;for(V in c)if(!l.hasOwnProperty(V)&&c.hasOwnProperty(V)&&c[V]!=null)if(V==="style"){var b=c[V];for(y in b)b.hasOwnProperty(y)&&(i||(i={}),i[y]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(a.hasOwnProperty(V)?p||(p=[]):(p=p||[]).push(V,null));for(V in l){var A=l[V];if(b=c!=null?c[V]:void 0,l.hasOwnProperty(V)&&A!==b&&(A!=null||b!=null))if(V==="style")if(b){for(y in b)!b.hasOwnProperty(y)||A&&A.hasOwnProperty(y)||(i||(i={}),i[y]="");for(y in A)A.hasOwnProperty(y)&&b[y]!==A[y]&&(i||(i={}),i[y]=A[y])}else i||(p||(p=[]),p.push(V,i)),i=A;else V==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,b=b?b.__html:void 0,A!=null&&b!==A&&(p=p||[]).push(V,A)):V==="children"?typeof A!="string"&&typeof A!="number"||(p=p||[]).push(V,""+A):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(a.hasOwnProperty(V)?(A!=null&&V==="onScroll"&&tt("scroll",t),p||b===A||(p=[])):(p=p||[]).push(V,A))}i&&(p=p||[]).push("style",i);var V=p;(n.updateQueue=V)&&(n.flags|=4)}},jf=function(t,n,i,l){i!==l&&(n.flags|=4)};function ho(t,n){if(!it)switch(t.tailMode){case"hidden":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function zt(t){var n=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(n)for(var c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=i,n}function bv(t,n,i){var l=n.pendingProps;switch(Ru(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(n),null;case 1:return Jt(n.type)&&ma(),zt(n),null;case 3:return l=n.stateNode,ci(),nt(Zt),nt(jt),Wu(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(wa(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,jn!==null&&(yc(jn),jn=null))),ac(t,n),zt(n),null;case 5:zu(n);var c=kr(oo.current);if(i=n.type,t!==null&&n.stateNode!=null)Lf(t,n,i,l,c),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(s(166));return zt(n),null}if(t=kr(ns.current),wa(n)){l=n.stateNode,i=n.type;var p=n.memoizedProps;switch(l[ts]=n,l[to]=p,t=(n.mode&1)!==0,i){case"dialog":tt("cancel",l),tt("close",l);break;case"iframe":case"object":case"embed":tt("load",l);break;case"video":case"audio":for(c=0;c<Zi.length;c++)tt(Zi[c],l);break;case"source":tt("error",l);break;case"img":case"image":case"link":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"input":ce(l,p),tt("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!p.multiple},tt("invalid",l);break;case"textarea":Ut(l,p),tt("invalid",l)}cs(i,p),c=null;for(var y in p)if(p.hasOwnProperty(y)){var b=p[y];y==="children"?typeof b=="string"?l.textContent!==b&&(p.suppressHydrationWarning!==!0&&da(l.textContent,b,t),c=["children",b]):typeof b=="number"&&l.textContent!==""+b&&(p.suppressHydrationWarning!==!0&&da(l.textContent,b,t),c=["children",""+b]):a.hasOwnProperty(y)&&b!=null&&y==="onScroll"&&tt("scroll",l)}switch(i){case"input":_t(l),Ee(l,p,!0);break;case"textarea":_t(l),xt(l);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(l.onclick=fa)}l=c,n.updateQueue=l,l!==null&&(n.flags|=4)}else{y=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lt(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=y.createElement(i,{is:l.is}):(t=y.createElement(i),i==="select"&&(y=t,l.multiple?y.multiple=!0:l.size&&(y.size=l.size))):t=y.createElementNS(t,i),t[ts]=n,t[to]=l,Ff(t,n,!1,!1),n.stateNode=t;e:{switch(y=hs(i,l),i){case"dialog":tt("cancel",t),tt("close",t),c=l;break;case"iframe":case"object":case"embed":tt("load",t),c=l;break;case"video":case"audio":for(c=0;c<Zi.length;c++)tt(Zi[c],t);c=l;break;case"source":tt("error",t),c=l;break;case"img":case"image":case"link":tt("error",t),tt("load",t),c=l;break;case"details":tt("toggle",t),c=l;break;case"input":ce(t,l),c=In(t,l),tt("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Y({},l,{value:void 0}),tt("invalid",t);break;case"textarea":Ut(t,l),c=wt(t,l),tt("invalid",t);break;default:c=l}cs(i,c),b=c;for(p in b)if(b.hasOwnProperty(p)){var A=b[p];p==="style"?hn(t,A):p==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Zn(t,A)):p==="children"?typeof A=="string"?(i!=="textarea"||A!=="")&&cn(t,A):typeof A=="number"&&cn(t,""+A):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?A!=null&&p==="onScroll"&&tt("scroll",t):A!=null&&j(t,p,A,y))}switch(i){case"input":_t(t),Ee(t,l,!1);break;case"textarea":_t(t),xt(t);break;case"option":l.value!=null&&t.setAttribute("value",""+oe(l.value));break;case"select":t.multiple=!!l.multiple,p=l.value,p!=null?Ze(t,!!l.multiple,p,!1):l.defaultValue!=null&&Ze(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=fa)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return zt(n),null;case 6:if(t&&n.stateNode!=null)jf(t,n,t.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(s(166));if(i=kr(oo.current),kr(ns.current),wa(n)){if(l=n.stateNode,i=n.memoizedProps,l[ts]=n,(p=l.nodeValue!==i)&&(t=pn,t!==null))switch(t.tag){case 3:da(l.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&da(l.nodeValue,i,(t.mode&1)!==0)}p&&(n.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[ts]=n,n.stateNode=l}return zt(n),null;case 13:if(nt(ut),l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&mn!==null&&(n.mode&1)!==0&&(n.flags&128)===0)zd(),oi(),n.flags|=98560,p=!1;else if(p=wa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!p)throw Error(s(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ts]=n}else oi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;zt(n),p=!1}else jn!==null&&(yc(jn),jn=null),p=!0;if(!p)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=i,n):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(ut.current&1)!==0?bt===0&&(bt=3):xc())),n.updateQueue!==null&&(n.flags|=4),zt(n),null);case 4:return ci(),ac(t,n),t===null&&Ji(n.stateNode.containerInfo),zt(n),null;case 10:return Pu(n.type._context),zt(n),null;case 17:return Jt(n.type)&&ma(),zt(n),null;case 19:if(nt(ut),p=n.memoizedState,p===null)return zt(n),null;if(l=(n.flags&128)!==0,y=p.rendering,y===null)if(l)ho(p,!1);else{if(bt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(y=ba(t),y!==null){for(n.flags|=128,ho(p,!1),l=y.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=i,i=n.child;i!==null;)p=i,t=l,p.flags&=14680066,y=p.alternate,y===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=y.childLanes,p.lanes=y.lanes,p.child=y.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=y.memoizedProps,p.memoizedState=y.memoizedState,p.updateQueue=y.updateQueue,p.type=y.type,t=y.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Xe(ut,ut.current&1|2),n.child}t=t.sibling}p.tail!==null&&rt()>pi&&(n.flags|=128,l=!0,ho(p,!1),n.lanes=4194304)}else{if(!l)if(t=ba(y),t!==null){if(n.flags|=128,l=!0,i=t.updateQueue,i!==null&&(n.updateQueue=i,n.flags|=4),ho(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!it)return zt(n),null}else 2*rt()-p.renderingStartTime>pi&&i!==1073741824&&(n.flags|=128,l=!0,ho(p,!1),n.lanes=4194304);p.isBackwards?(y.sibling=n.child,n.child=y):(i=p.last,i!==null?i.sibling=y:n.child=y,p.last=y)}return p.tail!==null?(n=p.tail,p.rendering=n,p.tail=n.sibling,p.renderingStartTime=rt(),n.sibling=null,i=ut.current,Xe(ut,l?i&1|2:i&1),n):(zt(n),null);case 22:case 23:return wc(),l=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(n.flags|=8192),l&&(n.mode&1)!==0?(gn&1073741824)!==0&&(zt(n),n.subtreeFlags&6&&(n.flags|=8192)):zt(n),null;case 24:return null;case 25:return null}throw Error(s(156,n.tag))}function Nv(t,n){switch(Ru(n),n.tag){case 1:return Jt(n.type)&&ma(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return ci(),nt(Zt),nt(jt),Wu(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return zu(n),null;case 13:if(nt(ut),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(s(340));oi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return nt(ut),null;case 4:return ci(),null;case 10:return Pu(n.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var Pa=!1,qt=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,pe=null;function di(t,n){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){dt(t,n,l)}else i.current=null}function lc(t,n,i){try{i()}catch(l){dt(t,n,l)}}var Vf=!1;function Rv(t,n){if(wu=ta,t=gd(),du(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var y=0,b=-1,A=-1,V=0,se=0,ie=t,te=null;t:for(;;){for(var he;ie!==i||c!==0&&ie.nodeType!==3||(b=y+c),ie!==p||l!==0&&ie.nodeType!==3||(A=y+l),ie.nodeType===3&&(y+=ie.nodeValue.length),(he=ie.firstChild)!==null;)te=ie,ie=he;for(;;){if(ie===t)break t;if(te===i&&++V===c&&(b=y),te===p&&++se===l&&(A=y),(he=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=he}i=b===-1||A===-1?null:{start:b,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(xu={focusedElem:t,selectionRange:i},ta=!1,pe=n;pe!==null;)if(n=pe,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,pe=t;else for(;pe!==null;){n=pe;try{var me=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ve=me.memoizedProps,mt=me.memoizedState,P=n.stateNode,O=P.getSnapshotBeforeUpdate(n.elementType===n.type?ve:Vn(n.type,ve),mt);P.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var L=n.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(le){dt(n,n.return,le)}if(t=n.sibling,t!==null){t.return=n.return,pe=t;break}pe=n.return}return me=Vf,Vf=!1,me}function fo(t,n,i){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var p=c.destroy;c.destroy=void 0,p!==void 0&&lc(n,i,p)}c=c.next}while(c!==l)}}function Fa(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var l=i.create;i.destroy=l()}i=i.next}while(i!==n)}}function uc(t){var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof n=="function"?n(t):n.current=t}}function zf(t){var n=t.alternate;n!==null&&(t.alternate=null,zf(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[ts],delete n[to],delete n[Su],delete n[hv],delete n[dv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qf(t){return t.tag===5||t.tag===3||t.tag===4}function Wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cc(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.nodeType===8?i.parentNode.insertBefore(t,n):i.insertBefore(t,n):(i.nodeType===8?(n=i.parentNode,n.insertBefore(t,i)):(n=i,n.appendChild(t)),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=fa));else if(l!==4&&(t=t.child,t!==null))for(cc(t,n,i),t=t.sibling;t!==null;)cc(t,n,i),t=t.sibling}function hc(t,n,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?i.insertBefore(t,n):i.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(hc(t,n,i),t=t.sibling;t!==null;)hc(t,n,i),t=t.sibling}var Pt=null,zn=!1;function Ys(t,n,i){for(i=i.child;i!==null;)Bf(t,n,i),i=i.sibling}function Bf(t,n,i){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(gr,i)}catch{}switch(i.tag){case 5:qt||di(i,n);case 6:var l=Pt,c=zn;Pt=null,Ys(t,n,i),Pt=l,zn=c,Pt!==null&&(zn?(t=Pt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Pt.removeChild(i.stateNode));break;case 18:Pt!==null&&(zn?(t=Pt,i=i.stateNode,t.nodeType===8?Tu(t.parentNode,i):t.nodeType===1&&Tu(t,i),Ui(t)):Tu(Pt,i.stateNode));break;case 4:l=Pt,c=zn,Pt=i.stateNode.containerInfo,zn=!0,Ys(t,n,i),Pt=l,zn=c;break;case 0:case 11:case 14:case 15:if(!qt&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var p=c,y=p.destroy;p=p.tag,y!==void 0&&((p&2)!==0||(p&4)!==0)&&lc(i,n,y),c=c.next}while(c!==l)}Ys(t,n,i);break;case 1:if(!qt&&(di(i,n),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(b){dt(i,n,b)}Ys(t,n,i);break;case 21:Ys(t,n,i);break;case 22:i.mode&1?(qt=(l=qt)||i.memoizedState!==null,Ys(t,n,i),qt=l):Ys(t,n,i);break;default:Ys(t,n,i)}}function Uf(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Ev),n.forEach(function(l){var c=jv.bind(null,t,l);i.has(l)||(i.add(l),l.then(c,c))})}}function qn(t,n){var i=n.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var p=t,y=n,b=y;e:for(;b!==null;){switch(b.tag){case 5:Pt=b.stateNode,zn=!1;break e;case 3:Pt=b.stateNode.containerInfo,zn=!0;break e;case 4:Pt=b.stateNode.containerInfo,zn=!0;break e}b=b.return}if(Pt===null)throw Error(s(160));Bf(p,y,c),Pt=null,zn=!1;var A=c.alternate;A!==null&&(A.return=null),c.return=null}catch(V){dt(c,n,V)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)$f(n,t),n=n.sibling}function $f(t,n){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(n,t),rs(t),l&4){try{fo(3,t,t.return),Fa(3,t)}catch(ve){dt(t,t.return,ve)}try{fo(5,t,t.return)}catch(ve){dt(t,t.return,ve)}}break;case 1:qn(n,t),rs(t),l&512&&i!==null&&di(i,i.return);break;case 5:if(qn(n,t),rs(t),l&512&&i!==null&&di(i,i.return),t.flags&32){var c=t.stateNode;try{cn(c,"")}catch(ve){dt(t,t.return,ve)}}if(l&4&&(c=t.stateNode,c!=null)){var p=t.memoizedProps,y=i!==null?i.memoizedProps:p,b=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{b==="input"&&p.type==="radio"&&p.name!=null&&ye(c,p),hs(b,y);var V=hs(b,p);for(y=0;y<A.length;y+=2){var se=A[y],ie=A[y+1];se==="style"?hn(c,ie):se==="dangerouslySetInnerHTML"?Zn(c,ie):se==="children"?cn(c,ie):j(c,se,ie,V)}switch(b){case"input":Ne(c,p);break;case"textarea":ln(c,p);break;case"select":var te=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var he=p.value;he!=null?Ze(c,!!p.multiple,he,!1):te!==!!p.multiple&&(p.defaultValue!=null?Ze(c,!!p.multiple,p.defaultValue,!0):Ze(c,!!p.multiple,p.multiple?[]:"",!1))}c[to]=p}catch(ve){dt(t,t.return,ve)}}break;case 6:if(qn(n,t),rs(t),l&4){if(t.stateNode===null)throw Error(s(162));c=t.stateNode,p=t.memoizedProps;try{c.nodeValue=p}catch(ve){dt(t,t.return,ve)}}break;case 3:if(qn(n,t),rs(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{Ui(n.containerInfo)}catch(ve){dt(t,t.return,ve)}break;case 4:qn(n,t),rs(t);break;case 13:qn(n,t),rs(t),c=t.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(pc=rt())),l&4&&Uf(t);break;case 22:if(se=i!==null&&i.memoizedState!==null,t.mode&1?(qt=(V=qt)||se,qn(n,t),qt=V):qn(n,t),rs(t),l&8192){if(V=t.memoizedState!==null,(t.stateNode.isHidden=V)&&!se&&(t.mode&1)!==0)for(pe=t,se=t.child;se!==null;){for(ie=pe=se;pe!==null;){switch(te=pe,he=te.child,te.tag){case 0:case 11:case 14:case 15:fo(4,te,te.return);break;case 1:di(te,te.return);var me=te.stateNode;if(typeof me.componentWillUnmount=="function"){l=te,i=te.return;try{n=l,me.props=n.memoizedProps,me.state=n.memoizedState,me.componentWillUnmount()}catch(ve){dt(l,i,ve)}}break;case 5:di(te,te.return);break;case 22:if(te.memoizedState!==null){Gf(ie);continue}}he!==null?(he.return=te,pe=he):Gf(ie)}se=se.sibling}e:for(se=null,ie=t;;){if(ie.tag===5){if(se===null){se=ie;try{c=ie.stateNode,V?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(b=ie.stateNode,A=ie.memoizedProps.style,y=A!=null&&A.hasOwnProperty("display")?A.display:null,b.style.display=Ps("display",y))}catch(ve){dt(t,t.return,ve)}}}else if(ie.tag===6){if(se===null)try{ie.stateNode.nodeValue=V?"":ie.memoizedProps}catch(ve){dt(t,t.return,ve)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===t)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===t)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===t)break e;se===ie&&(se=null),ie=ie.return}se===ie&&(se=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:qn(n,t),rs(t),l&4&&Uf(t);break;case 21:break;default:qn(n,t),rs(t)}}function rs(t){var n=t.flags;if(n&2){try{e:{for(var i=t.return;i!==null;){if(qf(i)){var l=i;break e}i=i.return}throw Error(s(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(cn(c,""),l.flags&=-33);var p=Wf(t);hc(t,p,c);break;case 3:case 4:var y=l.stateNode.containerInfo,b=Wf(t);cc(t,b,y);break;default:throw Error(s(161))}}catch(A){dt(t,t.return,A)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Av(t,n,i){pe=t,Qf(t)}function Qf(t,n,i){for(var l=(t.mode&1)!==0;pe!==null;){var c=pe,p=c.child;if(c.tag===22&&l){var y=c.memoizedState!==null||Pa;if(!y){var b=c.alternate,A=b!==null&&b.memoizedState!==null||qt;b=Pa;var V=qt;if(Pa=y,(qt=A)&&!V)for(pe=c;pe!==null;)y=pe,A=y.child,y.tag===22&&y.memoizedState!==null?Yf(c):A!==null?(A.return=y,pe=A):Yf(c);for(;p!==null;)pe=p,Qf(p),p=p.sibling;pe=c,Pa=b,qt=V}Hf(t)}else(c.subtreeFlags&8772)!==0&&p!==null?(p.return=c,pe=p):Hf(t)}}function Hf(t){for(;pe!==null;){var n=pe;if((n.flags&8772)!==0){var i=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:qt||Fa(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!qt)if(i===null)l.componentDidMount();else{var c=n.elementType===n.type?i.memoizedProps:Vn(n.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var p=n.updateQueue;p!==null&&Hd(n,p,l);break;case 3:var y=n.updateQueue;if(y!==null){if(i=null,n.child!==null)switch(n.child.tag){case 5:i=n.child.stateNode;break;case 1:i=n.child.stateNode}Hd(n,y,i)}break;case 5:var b=n.stateNode;if(i===null&&n.flags&4){i=b;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&i.focus();break;case"img":A.src&&(i.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var V=n.alternate;if(V!==null){var se=V.memoizedState;if(se!==null){var ie=se.dehydrated;ie!==null&&Ui(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}qt||n.flags&512&&uc(n)}catch(te){dt(n,n.return,te)}}if(n===t){pe=null;break}if(i=n.sibling,i!==null){i.return=n.return,pe=i;break}pe=n.return}}function Gf(t){for(;pe!==null;){var n=pe;if(n===t){pe=null;break}var i=n.sibling;if(i!==null){i.return=n.return,pe=i;break}pe=n.return}}function Yf(t){for(;pe!==null;){var n=pe;try{switch(n.tag){case 0:case 11:case 15:var i=n.return;try{Fa(4,n)}catch(A){dt(n,i,A)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var c=n.return;try{l.componentDidMount()}catch(A){dt(n,c,A)}}var p=n.return;try{uc(n)}catch(A){dt(n,p,A)}break;case 5:var y=n.return;try{uc(n)}catch(A){dt(n,y,A)}}}catch(A){dt(n,n.return,A)}if(n===t){pe=null;break}var b=n.sibling;if(b!==null){b.return=n.return,pe=b;break}pe=n.return}}var Ov=Math.ceil,La=z.ReactCurrentDispatcher,dc=z.ReactCurrentOwner,En=z.ReactCurrentBatchConfig,Fe=0,Ot=null,Ct=null,Ft=0,gn=0,fi=Us(0),bt=0,po=null,Tr=0,ja=0,fc=0,mo=null,tn=null,pc=0,pi=1/0,bs=null,Va=!1,mc=null,Xs=null,za=!1,Ks=null,qa=0,go=0,gc=null,Wa=-1,Ba=0;function Ht(){return(Fe&6)!==0?rt():Wa!==-1?Wa:Wa=rt()}function Zs(t){return(t.mode&1)===0?1:(Fe&2)!==0&&Ft!==0?Ft&-Ft:pv.transition!==null?(Ba===0&&(Ba=qh()),Ba):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:Xh(t.type)),t)}function Wn(t,n,i,l){if(50<go)throw go=0,gc=null,Error(s(185));Vi(t,i,l),((Fe&2)===0||t!==Ot)&&(t===Ot&&((Fe&2)===0&&(ja|=i),bt===4&&Js(t,Ft)),nn(t,l),i===1&&Fe===0&&(n.mode&1)===0&&(pi=rt()+500,va&&Qs()))}function nn(t,n){var i=t.callbackNode;pg(t,n);var l=Zo(t,t===Ot?Ft:0);if(l===0)i!==null&&B(i),t.callbackNode=null,t.callbackPriority=0;else if(n=l&-l,t.callbackPriority!==n){if(i!=null&&B(i),n===1)t.tag===0?fv(Kf.bind(null,t)):Pd(Kf.bind(null,t)),uv(function(){(Fe&6)===0&&Qs()}),i=null;else{switch(Wh(l)){case 1:i=Hr;break;case 4:i=Fi;break;case 16:i=mr;break;case 536870912:i=Li;break;default:i=mr}i=ip(i,Xf.bind(null,t))}t.callbackPriority=n,t.callbackNode=i}}function Xf(t,n){if(Wa=-1,Ba=0,(Fe&6)!==0)throw Error(s(327));var i=t.callbackNode;if(mi()&&t.callbackNode!==i)return null;var l=Zo(t,t===Ot?Ft:0);if(l===0)return null;if((l&30)!==0||(l&t.expiredLanes)!==0||n)n=Ua(t,l);else{n=l;var c=Fe;Fe|=2;var p=Jf();(Ot!==t||Ft!==n)&&(bs=null,pi=rt()+500,br(t,n));do try{Iv();break}catch(b){Zf(t,b)}while(!0);Iu(),La.current=p,Fe=c,Ct!==null?n=0:(Ot=null,Ft=0,n=bt)}if(n!==0){if(n===2&&(c=Xl(t),c!==0&&(l=c,n=vc(t,c))),n===1)throw i=po,br(t,0),Js(t,l),nn(t,rt()),i;if(n===6)Js(t,l);else{if(c=t.current.alternate,(l&30)===0&&!Dv(c)&&(n=Ua(t,l),n===2&&(p=Xl(t),p!==0&&(l=p,n=vc(t,p))),n===1))throw i=po,br(t,0),Js(t,l),nn(t,rt()),i;switch(t.finishedWork=c,t.finishedLanes=l,n){case 0:case 1:throw Error(s(345));case 2:Nr(t,tn,bs);break;case 3:if(Js(t,l),(l&130023424)===l&&(n=pc+500-rt(),10<n)){if(Zo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){Ht(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=Cu(Nr.bind(null,t,tn,bs),n);break}Nr(t,tn,bs);break;case 4:if(Js(t,l),(l&4194240)===l)break;for(n=t.eventTimes,c=-1;0<l;){var y=31-Fn(l);p=1<<y,y=n[y],y>c&&(c=y),l&=~p}if(l=c,l=rt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Ov(l/1960))-l,10<l){t.timeoutHandle=Cu(Nr.bind(null,t,tn,bs),l);break}Nr(t,tn,bs);break;case 5:Nr(t,tn,bs);break;default:throw Error(s(329))}}}return nn(t,rt()),t.callbackNode===i?Xf.bind(null,t):null}function vc(t,n){var i=mo;return t.current.memoizedState.isDehydrated&&(br(t,n).flags|=256),t=Ua(t,n),t!==2&&(n=tn,tn=i,n!==null&&yc(n)),t}function yc(t){tn===null?tn=t:tn.push.apply(tn,t)}function Dv(t){for(var n=t;;){if(n.flags&16384){var i=n.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],p=c.getSnapshot;c=c.value;try{if(!Ln(p(),c))return!1}catch{return!1}}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Js(t,n){for(n&=~fc,n&=~ja,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var i=31-Fn(n),l=1<<i;t[i]=-1,n&=~l}}function Kf(t){if((Fe&6)!==0)throw Error(s(327));mi();var n=Zo(t,0);if((n&1)===0)return nn(t,rt()),null;var i=Ua(t,n);if(t.tag!==0&&i===2){var l=Xl(t);l!==0&&(n=l,i=vc(t,l))}if(i===1)throw i=po,br(t,0),Js(t,n),nn(t,rt()),i;if(i===6)throw Error(s(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Nr(t,tn,bs),nn(t,rt()),null}function _c(t,n){var i=Fe;Fe|=1;try{return t(n)}finally{Fe=i,Fe===0&&(pi=rt()+500,va&&Qs())}}function Sr(t){Ks!==null&&Ks.tag===0&&(Fe&6)===0&&mi();var n=Fe;Fe|=1;var i=En.transition,l=Qe;try{if(En.transition=null,Qe=1,t)return t()}finally{Qe=l,En.transition=i,Fe=n,(Fe&6)===0&&Qs()}}function wc(){gn=fi.current,nt(fi)}function br(t,n){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,lv(i)),Ct!==null)for(i=Ct.return;i!==null;){var l=i;switch(Ru(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ma();break;case 3:ci(),nt(Zt),nt(jt),Wu();break;case 5:zu(l);break;case 4:ci();break;case 13:nt(ut);break;case 19:nt(ut);break;case 10:Pu(l.type._context);break;case 22:case 23:wc()}i=i.return}if(Ot=t,Ct=t=er(t.current,null),Ft=gn=n,bt=0,po=null,fc=ja=Tr=0,tn=mo=null,xr!==null){for(n=0;n<xr.length;n++)if(i=xr[n],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,p=i.pending;if(p!==null){var y=p.next;p.next=c,l.next=y}i.pending=l}xr=null}return t}function Zf(t,n){do{var i=Ct;try{if(Iu(),Na.current=Oa,Ea){for(var l=ct.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Ea=!1}if(Cr=0,At=St=ct=null,ao=!1,lo=0,dc.current=null,i===null||i.return===null){bt=1,po=n,Ct=null;break}e:{var p=t,y=i.return,b=i,A=n;if(n=Ft,b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=A,se=b,ie=se.tag;if((se.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=se.alternate;te?(se.updateQueue=te.updateQueue,se.memoizedState=te.memoizedState,se.lanes=te.lanes):(se.updateQueue=null,se.memoizedState=null)}var he=Cf(y);if(he!==null){he.flags&=-257,Tf(he,y,b,p,n),he.mode&1&&kf(p,V,n),n=he,A=V;var me=n.updateQueue;if(me===null){var ve=new Set;ve.add(A),n.updateQueue=ve}else me.add(A);break e}else{if((n&1)===0){kf(p,V,n),xc();break e}A=Error(s(426))}}else if(it&&b.mode&1){var mt=Cf(y);if(mt!==null){(mt.flags&65536)===0&&(mt.flags|=256),Tf(mt,y,b,p,n),Du(hi(A,b));break e}}p=A=hi(A,b),bt!==4&&(bt=2),mo===null?mo=[p]:mo.push(p),p=y;do{switch(p.tag){case 3:p.flags|=65536,n&=-n,p.lanes|=n;var P=wf(p,A,n);Qd(p,P);break e;case 1:b=A;var O=p.type,L=p.stateNode;if((p.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Xs===null||!Xs.has(L)))){p.flags|=65536,n&=-n,p.lanes|=n;var le=xf(p,b,n);Qd(p,le);break e}}p=p.return}while(p!==null)}tp(i)}catch(we){n=we,Ct===i&&i!==null&&(Ct=i=i.return);continue}break}while(!0)}function Jf(){var t=La.current;return La.current=Oa,t===null?Oa:t}function xc(){(bt===0||bt===3||bt===2)&&(bt=4),Ot===null||(Tr&268435455)===0&&(ja&268435455)===0||Js(Ot,Ft)}function Ua(t,n){var i=Fe;Fe|=2;var l=Jf();(Ot!==t||Ft!==n)&&(bs=null,br(t,n));do try{Mv();break}catch(c){Zf(t,c)}while(!0);if(Iu(),Fe=i,La.current=l,Ct!==null)throw Error(s(261));return Ot=null,Ft=0,bt}function Mv(){for(;Ct!==null;)ep(Ct)}function Iv(){for(;Ct!==null&&!$o();)ep(Ct)}function ep(t){var n=rp(t.alternate,t,gn);t.memoizedProps=t.pendingProps,n===null?tp(t):Ct=n,dc.current=null}function tp(t){var n=t;do{var i=n.alternate;if(t=n.return,(n.flags&32768)===0){if(i=bv(i,n,gn),i!==null){Ct=i;return}}else{if(i=Nv(i,n),i!==null){i.flags&=32767,Ct=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{bt=6,Ct=null;return}}if(n=n.sibling,n!==null){Ct=n;return}Ct=n=t}while(n!==null);bt===0&&(bt=5)}function Nr(t,n,i){var l=Qe,c=En.transition;try{En.transition=null,Qe=1,Pv(t,n,i,l)}finally{En.transition=c,Qe=l}return null}function Pv(t,n,i,l){do mi();while(Ks!==null);if((Fe&6)!==0)throw Error(s(327));i=t.finishedWork;var c=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(s(177));t.callbackNode=null,t.callbackPriority=0;var p=i.lanes|i.childLanes;if(mg(t,p),t===Ot&&(Ct=Ot=null,Ft=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||za||(za=!0,ip(mr,function(){return mi(),null})),p=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||p){p=En.transition,En.transition=null;var y=Qe;Qe=1;var b=Fe;Fe|=4,dc.current=null,Rv(t,i),$f(i,t),tv(xu),ta=!!wu,xu=wu=null,t.current=i,Av(i),Qo(),Fe=b,Qe=y,En.transition=p}else t.current=i;if(za&&(za=!1,Ks=t,qa=c),p=t.pendingLanes,p===0&&(Xs=null),Yo(i.stateNode),nn(t,rt()),n!==null)for(l=t.onRecoverableError,i=0;i<n.length;i++)c=n[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(Va)throw Va=!1,t=mc,mc=null,t;return(qa&1)!==0&&t.tag!==0&&mi(),p=t.pendingLanes,(p&1)!==0?t===gc?go++:(go=0,gc=t):go=0,Qs(),null}function mi(){if(Ks!==null){var t=Wh(qa),n=En.transition,i=Qe;try{if(En.transition=null,Qe=16>t?16:t,Ks===null)var l=!1;else{if(t=Ks,Ks=null,qa=0,(Fe&6)!==0)throw Error(s(331));var c=Fe;for(Fe|=4,pe=t.current;pe!==null;){var p=pe,y=p.child;if((pe.flags&16)!==0){var b=p.deletions;if(b!==null){for(var A=0;A<b.length;A++){var V=b[A];for(pe=V;pe!==null;){var se=pe;switch(se.tag){case 0:case 11:case 15:fo(8,se,p)}var ie=se.child;if(ie!==null)ie.return=se,pe=ie;else for(;pe!==null;){se=pe;var te=se.sibling,he=se.return;if(zf(se),se===V){pe=null;break}if(te!==null){te.return=he,pe=te;break}pe=he}}}var me=p.alternate;if(me!==null){var ve=me.child;if(ve!==null){me.child=null;do{var mt=ve.sibling;ve.sibling=null,ve=mt}while(ve!==null)}}pe=p}}if((p.subtreeFlags&2064)!==0&&y!==null)y.return=p,pe=y;else e:for(;pe!==null;){if(p=pe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:fo(9,p,p.return)}var P=p.sibling;if(P!==null){P.return=p.return,pe=P;break e}pe=p.return}}var O=t.current;for(pe=O;pe!==null;){y=pe;var L=y.child;if((y.subtreeFlags&2064)!==0&&L!==null)L.return=y,pe=L;else e:for(y=O;pe!==null;){if(b=pe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Fa(9,b)}}catch(we){dt(b,b.return,we)}if(b===y){pe=null;break e}var le=b.sibling;if(le!==null){le.return=b.return,pe=le;break e}pe=b.return}}if(Fe=c,Qs(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(gr,t)}catch{}l=!0}return l}finally{Qe=i,En.transition=n}}return!1}function np(t,n,i){n=hi(i,n),n=wf(t,n,1),t=Gs(t,n,1),n=Ht(),t!==null&&(Vi(t,1,n),nn(t,n))}function dt(t,n,i){if(t.tag===3)np(t,t,i);else for(;n!==null;){if(n.tag===3){np(n,t,i);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Xs===null||!Xs.has(l))){t=hi(i,t),t=xf(n,t,1),n=Gs(n,t,1),t=Ht(),n!==null&&(Vi(n,1,t),nn(n,t));break}}n=n.return}}function Fv(t,n,i){var l=t.pingCache;l!==null&&l.delete(n),n=Ht(),t.pingedLanes|=t.suspendedLanes&i,Ot===t&&(Ft&i)===i&&(bt===4||bt===3&&(Ft&130023424)===Ft&&500>rt()-pc?br(t,0):fc|=i),nn(t,n)}function sp(t,n){n===0&&((t.mode&1)===0?n=1:(n=Ko,Ko<<=1,(Ko&130023424)===0&&(Ko=4194304)));var i=Ht();t=Cs(t,n),t!==null&&(Vi(t,n,i),nn(t,i))}function Lv(t){var n=t.memoizedState,i=0;n!==null&&(i=n.retryLane),sp(t,i)}function jv(t,n){var i=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(s(314))}l!==null&&l.delete(n),sp(t,i)}var rp;rp=function(t,n,i){if(t!==null)if(t.memoizedProps!==n.pendingProps||Zt.current)en=!0;else{if((t.lanes&i)===0&&(n.flags&128)===0)return en=!1,Sv(t,n,i);en=(t.flags&131072)!==0}else en=!1,it&&(n.flags&1048576)!==0&&Fd(n,_a,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Ia(t,n),t=n.pendingProps;var c=si(n,jt.current);ui(n,i),c=$u(null,n,l,t,c,i);var p=Qu();return n.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Jt(l)?(p=!0,ga(n)):p=!1,n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ju(n),c.updater=Da,n.stateNode=c,c._reactInternals=n,Zu(n,l,t,i),n=nc(null,n,l,!0,p,i)):(n.tag=0,it&&p&&Eu(n),Qt(null,n,c,i),n=n.child),n;case 16:l=n.elementType;e:{switch(Ia(t,n),t=n.pendingProps,c=l._init,l=c(l._payload),n.type=l,c=n.tag=zv(l),t=Vn(l,t),c){case 0:n=tc(null,n,l,t,i);break e;case 1:n=Af(null,n,l,t,i);break e;case 11:n=Sf(null,n,l,t,i);break e;case 14:n=bf(null,n,l,Vn(l.type,t),i);break e}throw Error(s(306,l,""))}return n;case 0:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vn(l,c),tc(t,n,l,c,i);case 1:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vn(l,c),Af(t,n,l,c,i);case 3:e:{if(Of(n),t===null)throw Error(s(387));l=n.pendingProps,p=n.memoizedState,c=p.element,$d(t,n),Sa(n,l,null,i);var y=n.memoizedState;if(l=y.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){c=hi(Error(s(423)),n),n=Df(t,n,l,i,c);break e}else if(l!==c){c=hi(Error(s(424)),n),n=Df(t,n,l,i,c);break e}else for(mn=Bs(n.stateNode.containerInfo.firstChild),pn=n,it=!0,jn=null,i=Bd(n,null,l,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(oi(),l===c){n=Ss(t,n,i);break e}Qt(t,n,l,i)}n=n.child}return n;case 5:return Gd(n),t===null&&Ou(n),l=n.type,c=n.pendingProps,p=t!==null?t.memoizedProps:null,y=c.children,ku(l,c)?y=null:p!==null&&ku(l,p)&&(n.flags|=32),Rf(t,n),Qt(t,n,y,i),n.child;case 6:return t===null&&Ou(n),null;case 13:return Mf(t,n,i);case 4:return Vu(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=ai(n,null,l,i):Qt(t,n,l,i),n.child;case 11:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vn(l,c),Sf(t,n,l,c,i);case 7:return Qt(t,n,n.pendingProps,i),n.child;case 8:return Qt(t,n,n.pendingProps.children,i),n.child;case 12:return Qt(t,n,n.pendingProps.children,i),n.child;case 10:e:{if(l=n.type._context,c=n.pendingProps,p=n.memoizedProps,y=c.value,Xe(ka,l._currentValue),l._currentValue=y,p!==null)if(Ln(p.value,y)){if(p.children===c.children&&!Zt.current){n=Ss(t,n,i);break e}}else for(p=n.child,p!==null&&(p.return=n);p!==null;){var b=p.dependencies;if(b!==null){y=p.child;for(var A=b.firstContext;A!==null;){if(A.context===l){if(p.tag===1){A=Ts(-1,i&-i),A.tag=2;var V=p.updateQueue;if(V!==null){V=V.shared;var se=V.pending;se===null?A.next=A:(A.next=se.next,se.next=A),V.pending=A}}p.lanes|=i,A=p.alternate,A!==null&&(A.lanes|=i),Fu(p.return,i,n),b.lanes|=i;break}A=A.next}}else if(p.tag===10)y=p.type===n.type?null:p.child;else if(p.tag===18){if(y=p.return,y===null)throw Error(s(341));y.lanes|=i,b=y.alternate,b!==null&&(b.lanes|=i),Fu(y,i,n),y=p.sibling}else y=p.child;if(y!==null)y.return=p;else for(y=p;y!==null;){if(y===n){y=null;break}if(p=y.sibling,p!==null){p.return=y.return,y=p;break}y=y.return}p=y}Qt(t,n,c.children,i),n=n.child}return n;case 9:return c=n.type,l=n.pendingProps.children,ui(n,i),c=bn(c),l=l(c),n.flags|=1,Qt(t,n,l,i),n.child;case 14:return l=n.type,c=Vn(l,n.pendingProps),c=Vn(l.type,c),bf(t,n,l,c,i);case 15:return Nf(t,n,n.type,n.pendingProps,i);case 17:return l=n.type,c=n.pendingProps,c=n.elementType===l?c:Vn(l,c),Ia(t,n),n.tag=1,Jt(l)?(t=!0,ga(n)):t=!1,ui(n,i),yf(n,l,c),Zu(n,l,c,i),nc(null,n,l,!0,t,i);case 19:return Pf(t,n,i);case 22:return Ef(t,n,i)}throw Error(s(156,n.tag))};function ip(t,n){return U(t,n)}function Vv(t,n,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,n,i,l){return new Vv(t,n,i,l)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zv(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Q)return 11;if(t===ne)return 14}return 2}function er(t,n){var i=t.alternate;return i===null?(i=Rn(t.tag,n,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=n,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,n=t.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function $a(t,n,i,l,c,p){var y=2;if(l=t,typeof t=="function")kc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case F:return Er(i.children,c,p,n);case D:y=8,c|=8;break;case X:return t=Rn(12,i,n,c|2),t.elementType=X,t.lanes=p,t;case re:return t=Rn(13,i,n,c),t.elementType=re,t.lanes=p,t;case K:return t=Rn(19,i,n,c),t.elementType=K,t.lanes=p,t;case J:return Qa(i,c,p,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:y=10;break e;case G:y=9;break e;case Q:y=11;break e;case ne:y=14;break e;case ee:y=16,l=null;break e}throw Error(s(130,t==null?t:typeof t,""))}return n=Rn(y,i,n,c),n.elementType=t,n.type=l,n.lanes=p,n}function Er(t,n,i,l){return t=Rn(7,t,l,n),t.lanes=i,t}function Qa(t,n,i,l){return t=Rn(22,t,l,n),t.elementType=J,t.lanes=i,t.stateNode={isHidden:!1},t}function Cc(t,n,i){return t=Rn(6,t,null,n),t.lanes=i,t}function Tc(t,n,i){return n=Rn(4,t.children!==null?t.children:[],t.key,n),n.lanes=i,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function qv(t,n,i,l,c){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Sc(t,n,i,l,c,p,y,b,A){return t=new qv(t,n,i,b,A),n===1?(n=1,p===!0&&(n|=8)):n=0,p=Rn(3,null,null,n),t.current=p,p.stateNode=t,p.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ju(p),t}function Wv(t,n,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:l==null?null:""+l,children:t,containerInfo:n,implementation:i}}function op(t){if(!t)return $s;t=t._reactInternals;e:{if(pt(t)!==t||t.tag!==1)throw Error(s(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Jt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(s(171))}if(t.tag===1){var i=t.type;if(Jt(i))return Md(t,i,n)}return n}function ap(t,n,i,l,c,p,y,b,A){return t=Sc(i,l,!0,t,c,p,y,b,A),t.context=op(null),i=t.current,l=Ht(),c=Zs(i),p=Ts(l,c),p.callback=n??null,Gs(i,p,c),t.current.lanes=c,Vi(t,c,l),nn(t,l),t}function Ha(t,n,i,l){var c=n.current,p=Ht(),y=Zs(c);return i=op(i),n.context===null?n.context=i:n.pendingContext=i,n=Ts(p,y),n.payload={element:t},l=l===void 0?null:l,l!==null&&(n.callback=l),t=Gs(c,n,y),t!==null&&(Wn(t,c,y,p),Ta(t,c,y)),y}function Ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<n?i:n}}function bc(t,n){lp(t,n),(t=t.alternate)&&lp(t,n)}function Bv(){return null}var up=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nc(t){this._internalRoot=t}Ya.prototype.render=Nc.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(s(409));Ha(t,n,null,null)},Ya.prototype.unmount=Nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Sr(function(){Ha(null,t,null,null)}),n[_s]=null}};function Ya(t){this._internalRoot=t}Ya.prototype.unstable_scheduleHydration=function(t){if(t){var n=$h();t={blockedOn:null,target:t,priority:n};for(var i=0;i<zs.length&&n!==0&&n<zs[i].priority;i++);zs.splice(i,0,t),i===0&&Gh(t)}};function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cp(){}function Uv(t,n,i,l,c){if(c){if(typeof l=="function"){var p=l;l=function(){var V=Ga(y);p.call(V)}}var y=ap(n,l,t,0,null,!1,!1,"",cp);return t._reactRootContainer=y,t[_s]=y.current,Ji(t.nodeType===8?t.parentNode:t),Sr(),y}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var b=l;l=function(){var V=Ga(A);b.call(V)}}var A=Sc(t,0,!1,null,null,!1,!1,"",cp);return t._reactRootContainer=A,t[_s]=A.current,Ji(t.nodeType===8?t.parentNode:t),Sr(function(){Ha(n,A,i,l)}),A}function Ka(t,n,i,l,c){var p=i._reactRootContainer;if(p){var y=p;if(typeof c=="function"){var b=c;c=function(){var A=Ga(y);b.call(A)}}Ha(n,y,t,c)}else y=Uv(i,n,t,c,l);return Ga(y)}Bh=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var i=ji(n.pendingLanes);i!==0&&(Zl(n,i|1),nn(n,rt()),(Fe&6)===0&&(pi=rt()+500,Qs()))}break;case 13:Sr(function(){var l=Cs(t,1);if(l!==null){var c=Ht();Wn(l,t,1,c)}}),bc(t,1)}},Jl=function(t){if(t.tag===13){var n=Cs(t,134217728);if(n!==null){var i=Ht();Wn(n,t,134217728,i)}bc(t,134217728)}},Uh=function(t){if(t.tag===13){var n=Zs(t),i=Cs(t,n);if(i!==null){var l=Ht();Wn(i,t,n,l)}bc(t,n)}},$h=function(){return Qe},Qh=function(t,n){var i=Qe;try{return Qe=t,n()}finally{Qe=i}},ps=function(t,n,i){switch(n){case"input":if(Ne(t,i),n=i.name,i.type==="radio"&&n!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<i.length;n++){var l=i[n];if(l!==t&&l.form===t.form){var c=pa(l);if(!c)throw Error(s(90));Et(l),Ne(l,c)}}}break;case"textarea":ln(t,i);break;case"select":n=i.value,n!=null&&Ze(t,!!i.multiple,n,!1)}},Rt=_c,Jn=Sr;var $v={usingClientEntryPoint:!1,Events:[no,ti,pa,Be,kt,_c]},vo={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qv={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ys(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||Bv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Za.isDisabled&&Za.supportsFiber)try{gr=Za.inject(Qv),dn=Za}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$v,sn.createPortal=function(t,n){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ec(n))throw Error(s(200));return Wv(t,n,null,i)},sn.createRoot=function(t,n){if(!Ec(t))throw Error(s(299));var i=!1,l="",c=up;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),n=Sc(t,1,!1,null,null,i,!1,l,c),t[_s]=n.current,Ji(t.nodeType===8?t.parentNode:t),new Nc(n)},sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=ys(n),t=t===null?null:t.stateNode,t},sn.flushSync=function(t){return Sr(t)},sn.hydrate=function(t,n,i){if(!Xa(n))throw Error(s(200));return Ka(null,t,n,!0,i)},sn.hydrateRoot=function(t,n,i){if(!Ec(t))throw Error(s(405));var l=i!=null&&i.hydratedSources||null,c=!1,p="",y=up;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(y=i.onRecoverableError)),n=ap(n,null,t,1,i??null,c,!1,p,y),t[_s]=n.current,Ji(t),l)for(t=0;t<l.length;t++)i=l[t],c=i._getVersion,c=c(i._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[i,c]:n.mutableSourceEagerHydrationData.push(i,c);return new Ya(n)},sn.render=function(t,n,i){if(!Xa(n))throw Error(s(200));return Ka(null,t,n,!1,i)},sn.unmountComponentAtNode=function(t){if(!Xa(t))throw Error(s(40));return t._reactRootContainer?(Sr(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1},sn.unstable_batchedUpdates=_c,sn.unstable_renderSubtreeIntoContainer=function(t,n,i,l){if(!Xa(i))throw Error(s(200));if(t==null||t._reactInternals===void 0)throw Error(s(38));return Ka(t,n,i,!1,l)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var yp;function ey(){if(yp)return Oc.exports;yp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Oc.exports=Jv(),Oc.exports}var _p;function ty(){if(_p)return Ja;_p=1;var o=ey();return Ja.createRoot=o.createRoot,Ja.hydrateRoot=o.hydrateRoot,Ja}var ny=ty();const Gp="15.1.22",wp=(o,e,s)=>({endTime:e,insertTime:s,type:"exponentialRampToValue",value:o}),xp=(o,e,s)=>({endTime:e,insertTime:s,type:"linearRampToValue",value:o}),jc=(o,e)=>({startTime:e,type:"setValue",value:o}),Yp=(o,e,s)=>({duration:s,startTime:e,type:"setValueCurve",values:o}),Xp=(o,e,{startTime:s,target:r,timeConstant:a})=>r+(e-r)*Math.exp((s-o)/a),_i=o=>o.type==="exponentialRampToValue",ol=o=>o.type==="linearRampToValue",sr=o=>_i(o)||ol(o),Yc=o=>o.type==="setValue",Es=o=>o.type==="setValueCurve",al=(o,e,s,r)=>{const a=o[e];return a===void 0?r:sr(a)||Yc(a)?a.value:Es(a)?a.values[a.values.length-1]:Xp(s,al(o,e-1,a.startTime,r),a)},kp=(o,e,s,r,a)=>s===void 0?[r.insertTime,a]:sr(s)?[s.endTime,s.value]:Yc(s)?[s.startTime,s.value]:Es(s)?[s.startTime+s.duration,s.values[s.values.length-1]]:[s.startTime,al(o,e-1,s.startTime,a)],Vc=o=>o.type==="cancelAndHold",zc=o=>o.type==="cancelScheduledValues",nr=o=>Vc(o)||zc(o)?o.cancelTime:_i(o)||ol(o)?o.endTime:o.startTime,Cp=(o,e,s,{endTime:r,value:a})=>s===a?a:0<s&&0<a||s<0&&a<0?s*(a/s)**((o-e)/(r-e)):0,Tp=(o,e,s,{endTime:r,value:a})=>s+(o-e)/(r-e)*(a-s),sy=(o,e)=>{const s=Math.floor(e),r=Math.ceil(e);return s===r?o[s]:(1-(e-s))*o[s]+(1-(r-e))*o[r]},ry=(o,{duration:e,startTime:s,values:r})=>{const a=(o-s)/e*(r.length-1);return sy(r,a)},el=o=>o.type==="setTarget";class iy{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const s=nr(e);if(Vc(e)||zc(e)){const r=this._automationEvents.findIndex(u=>zc(e)&&Es(u)?u.startTime+u.duration>=s:nr(u)>=s),a=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Vc(e)){const u=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&sr(a)){if(u!==void 0&&el(u))throw new Error("The internal list is malformed.");const h=u===void 0?a.insertTime:Es(u)?u.startTime+u.duration:nr(u),d=u===void 0?this._defaultValue:Es(u)?u.values[u.values.length-1]:u.value,f=_i(a)?Cp(s,h,d,a):Tp(s,h,d,a),m=_i(a)?wp(f,s,this._currenTime):xp(f,s,this._currenTime);this._automationEvents.push(m)}if(u!==void 0&&el(u)&&this._automationEvents.push(jc(this.getValue(s),s)),u!==void 0&&Es(u)&&u.startTime+u.duration>s){const h=s-u.startTime,d=(u.values.length-1)/u.duration,f=Math.max(2,1+Math.ceil(h*d)),m=h/(f-1)*d,g=u.values.slice(0,f);if(m<1)for(let v=1;v<f;v+=1){const w=m*v%1;g[v]=u.values[v-1]*(1-w)+u.values[v]*w}this._automationEvents[this._automationEvents.length-1]=Yp(g,u.startTime,h)}}}else{const r=this._automationEvents.findIndex(h=>nr(h)>s),a=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(a!==void 0&&Es(a)&&nr(a)+a.duration>s)return!1;const u=_i(e)?wp(e.value,e.endTime,this._currenTime):ol(e)?xp(e.value,s,this._currenTime):e;if(r===-1)this._automationEvents.push(u);else{if(Es(e)&&s+e.duration>nr(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,u)}}return!0}flush(e){const s=this._automationEvents.findIndex(r=>nr(r)>e);if(s>1){const r=this._automationEvents.slice(s-1),a=r[0];el(a)&&r.unshift(jc(al(this._automationEvents,s-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const s=this._automationEvents.findIndex(h=>nr(h)>e),r=this._automationEvents[s],a=(s===-1?this._automationEvents.length:s)-1,u=this._automationEvents[a];if(u!==void 0&&el(u)&&(r===void 0||!sr(r)||r.insertTime>e))return Xp(e,al(this._automationEvents,a-1,u.startTime,this._defaultValue),u);if(u!==void 0&&Yc(u)&&(r===void 0||!sr(r)))return u.value;if(u!==void 0&&Es(u)&&(r===void 0||!sr(r)||u.startTime+u.duration>e))return e<u.startTime+u.duration?ry(e,u):u.values[u.values.length-1];if(u!==void 0&&sr(u)&&(r===void 0||!sr(r)))return u.value;if(r!==void 0&&_i(r)){const[h,d]=kp(this._automationEvents,a,u,r,this._defaultValue);return Cp(e,h,d,r)}if(r!==void 0&&ol(r)){const[h,d]=kp(this._automationEvents,a,u,r,this._defaultValue);return Tp(e,h,d,r)}return this._defaultValue}}const oy=o=>({cancelTime:o,type:"cancelAndHold"}),ay=o=>({cancelTime:o,type:"cancelScheduledValues"}),ly=(o,e)=>({endTime:e,type:"exponentialRampToValue",value:o}),uy=(o,e)=>({endTime:e,type:"linearRampToValue",value:o}),cy=(o,e,s)=>({startTime:e,target:o,timeConstant:s,type:"setTarget"}),hy=()=>new DOMException("","AbortError"),dy=o=>(e,s,[r,a,u],h)=>{o(e[a],[s,r,u],d=>d[0]===s&&d[1]===r,h)},fy=o=>(e,s,r)=>{const a=[];for(let u=0;u<r.numberOfInputs;u+=1)a.push(new Set);o.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:s})},py=o=>(e,s)=>{o.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:s})},Ti=new WeakSet,Kp=new WeakMap,Xc=new WeakMap,Zp=new WeakMap,Kc=new WeakMap,Sl=new WeakMap,Jp=new WeakMap,qc=new WeakMap,Wc=new WeakMap,Bc=new WeakMap,em={construct(){return em}},my=o=>{try{const e=new Proxy(o,em);new e}catch{return!1}return!0},Sp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,bp=(o,e)=>{const s=[];let r=o.replace(/^[\s]+/,""),a=r.match(Sp);for(;a!==null;){const u=a[1].slice(1,-1),h=a[0].replace(/([\s]+)?;?$/,"").replace(u,new URL(u,e).toString());s.push(h),r=r.slice(a[0].length).replace(/^[\s]+/,""),a=r.match(Sp)}return[s.join(";"),r]},Np=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Ep=o=>{if(!my(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},gy=(o,e,s,r,a,u,h,d,f,m,g,v,w)=>{let _=0;return(x,k,C={credentials:"omit"})=>{const R=g.get(x);if(R!==void 0&&R.has(k))return Promise.resolve();const I=m.get(x);if(I!==void 0){const N=I.get(k);if(N!==void 0)return N}const j=u(x),z=j.audioWorklet===void 0?a(k).then(([N,M])=>{const[F,D]=bp(N,M),X=`${F};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${D}
})})(window,'_AWGS')`;return s(X)}).then(()=>{const N=w._AWGS.pop();if(N===void 0)throw new SyntaxError;r(j.currentTime,j.sampleRate,()=>N(class{},void 0,(M,F)=>{if(M.trim()==="")throw e();const D=Wc.get(j);if(D!==void 0){if(D.has(M))throw e();Ep(F),Np(F.parameterDescriptors),D.set(M,F)}else Ep(F),Np(F.parameterDescriptors),Wc.set(j,new Map([[M,F]]))},j.sampleRate,void 0,void 0))}):Promise.all([a(k),Promise.resolve(o(v,v))]).then(([[N,M],F])=>{const D=_+1;_=D;const[X,W]=bp(N,M),K=`${X};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${F?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${F?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${F?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${D}',class extends AudioWorkletProcessor{process(){return !1}})`,ne=new Blob([K],{type:"application/javascript; charset=utf-8"}),ee=URL.createObjectURL(ne);return j.audioWorklet.addModule(ee,C).then(()=>{if(d(j))return j;const J=h(j);return J.audioWorklet.addModule(ee,C).then(()=>J)}).then(J=>{if(f===null)throw new SyntaxError;try{new f(J,`__sac${D}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ee))});return I===void 0?m.set(x,new Map([[k,z]])):I.set(k,z),z.then(()=>{const N=g.get(x);N===void 0?g.set(x,new Set([k])):N.add(k)}).finally(()=>{const N=m.get(x);N!==void 0&&N.delete(k)}),z}},Qn=(o,e)=>{const s=o.get(e);if(s===void 0)throw new Error("A value with the given key could not be found.");return s},bl=(o,e)=>{const s=Array.from(o).filter(e);if(s.length>1)throw Error("More than one element was found.");if(s.length===0)throw Error("No element was found.");const[r]=s;return o.delete(r),r},tm=(o,e,s,r)=>{const a=Qn(o,e),u=bl(a,h=>h[0]===s&&h[1]===r);return a.size===0&&o.delete(e),u},Eo=o=>Qn(Jp,o),Si=o=>{if(Ti.has(o))throw new Error("The AudioNode is already stored.");Ti.add(o),Eo(o).forEach(e=>e(!0))},nm=o=>"port"in o,Ro=o=>{if(!Ti.has(o))throw new Error("The AudioNode is not stored.");Ti.delete(o),Eo(o).forEach(e=>e(!1))},Uc=(o,e)=>{!nm(o)&&e.every(s=>s.size===0)&&Ro(o)},vy=(o,e,s,r,a,u,h,d,f,m,g,v,w)=>{const _=new WeakMap;return(x,k,C,R,I)=>{const{activeInputs:j,passiveInputs:z}=u(k),{outputs:N}=u(x),M=d(x),F=D=>{const X=f(k),W=f(x);if(D){const G=tm(z,x,C,R);o(j,x,G,!1),!I&&!v(x)&&s(W,X,C,R),w(k)&&Si(k)}else{const G=r(j,x,C,R);e(z,R,G,!1),!I&&!v(x)&&a(W,X,C,R);const Q=h(k);if(Q===0)g(k)&&Uc(k,j);else{const re=_.get(k);re!==void 0&&clearTimeout(re),_.set(k,setTimeout(()=>{g(k)&&Uc(k,j)},Q*1e3))}}};return m(N,[k,C,R],D=>D[0]===k&&D[1]===C&&D[2]===R,!0)?(M.add(F),g(x)?o(j,x,[C,R,F],!0):e(z,R,[x,C,F],!0),!0):!1}},yy=o=>(e,s,[r,a,u],h)=>{const d=e.get(r);d===void 0?e.set(r,new Set([[a,s,u]])):o(d,[a,s,u],f=>f[0]===a&&f[1]===s,h)},_y=o=>(e,s)=>{const r=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.connect(r).connect(e.destination);const a=()=>{s.removeEventListener("ended",a),s.disconnect(r),r.disconnect()};s.addEventListener("ended",a)},wy=o=>(e,s)=>{o(e).add(s)},xy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},ky=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...xy,...f},v=r(m,g),w=u(m)?e():null;super(d,!1,v,w),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,s()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,s()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},Bt=(o,e)=>o.context===e,Cy=(o,e,s)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Bt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=o(h,m)}return r.set(h,d),await s(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},ll=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},as=()=>new DOMException("","IndexSizeError"),Zc=o=>{o.getChannelData=(e=>s=>{try{return e.call(o,s)}catch(r){throw r.code===12?as():r}})(o.getChannelData)},Ty={numberOfChannels:1},Sy=(o,e,s,r,a,u,h,d)=>{let f=null;return class sm{constructor(g){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:w,sampleRate:_}={...Ty,...g};f===null&&(f=new a(1,1,44100));const x=r!==null&&e(u,u)?new r({length:v,numberOfChannels:w,sampleRate:_}):f.createBuffer(w,v,_);if(x.numberOfChannels===0)throw s();return typeof x.copyFromChannel!="function"?(h(x),Zc(x)):e(ll,()=>ll(x))||d(x),o.add(x),x}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===sm.prototype||o.has(g)}}},rn=-34028234663852886e22,Gt=-rn,Rs=o=>Ti.has(o),by={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Ny=(o,e,s,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),w={...by,...g},_=a(v,w),x=h(v),k=x?e():null;super(m,!1,_,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=w.buffer!==null,this._nativeAudioBufferSourceNode=_,this._onended=null,this._playbackRate=s(this,x,_.playbackRate,Gt,rn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioBufferSourceNode.onended=g;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===g?m:v}get playbackRate(){return this._playbackRate}start(m=0,g=0,v){if(this._nativeAudioBufferSourceNode.start(m,g,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[m,g]:[m,g,v]),this.context.state!=="closed"){Si(this);const w=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",w),Rs(this)&&Ro(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",w)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},Ey=(o,e,s,r,a)=>()=>{const u=new WeakMap;let h=null,d=null;const f=async(m,g)=>{let v=s(m);const w=Bt(v,g);if(!w){const _={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=e(g,_),h!==null&&v.start(...h),d!==null&&v.stop(d)}return u.set(g,v),w?await o(g,m.playbackRate,v.playbackRate):await r(g,m.playbackRate,v.playbackRate),await a(m,g,v),v};return{set start(m){h=m},set stop(m){d=m},render(m,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):f(m,g)}}},Ry=o=>"playbackRate"in o,Ay=o=>"frequency"in o&&"gain"in o,Oy=o=>"offset"in o,Dy=o=>!("frequency"in o)&&"gain"in o,My=o=>"detune"in o&&"frequency"in o&&!("gain"in o),Iy=o=>"pan"in o,Yt=o=>Qn(Kp,o),Ao=o=>Qn(Zp,o),$c=(o,e)=>{const{activeInputs:s}=Yt(o);s.forEach(a=>a.forEach(([u])=>{e.includes(o)||$c(u,[...e,o])}));const r=Ry(o)?[o.playbackRate]:nm(o)?Array.from(o.parameters.values()):Ay(o)?[o.Q,o.detune,o.frequency,o.gain]:Oy(o)?[o.offset]:Dy(o)?[o.gain]:My(o)?[o.detune,o.frequency]:Iy(o)?[o.pan]:[];for(const a of r){const u=Ao(a);u!==void 0&&u.activeInputs.forEach(([h])=>$c(h,e))}Rs(o)&&Ro(o)},rm=o=>{$c(o.destination,[])},Py=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),Fy=(o,e,s,r,a,u,h,d,f)=>class extends o{constructor(g={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new f(g)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?s():x}if(v===null)throw r();if(!Py(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&v.sampleRate!==g.sampleRate)throw s();super(v,2);const{latencyHint:w}=g,{sampleRate:_}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:w==="balanced"?512/_:w==="interactive"||w===void 0?256/_:w==="playback"?1024/_:Math.max(2,Math.min(128,Math.round(w*_/128)))*128/_,this._nativeAudioContext=v,f.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",x)};v.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),rm(this)}))}createMediaElementSource(g){return new a(this,{mediaElement:g})}createMediaStreamDestination(){return new u(this)}createMediaStreamSource(g){return new h(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,v)=>{const w=()=>{this._nativeAudioContext.removeEventListener("statechange",w),this._nativeAudioContext.state==="running"?g():this.resume().then(g,v)};this._nativeAudioContext.addEventListener("statechange",w)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?e():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?e():g})}},Ly=(o,e,s,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),w=h(v),_=a(v,g,w),x=w?e(d):null;super(m,!1,_,x),this._isNodeOfNativeOfflineAudioContext=w,this._nativeAudioDestinationNode=_}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw s();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},jy=o=>{const e=new WeakMap,s=async(r,a)=>{const u=a.destination;return e.set(a,u),await o(r,a,u),u};return{render(r,a){const u=e.get(a);return u!==void 0?Promise.resolve(u):s(r,a)}}},Vy=(o,e,s,r,a,u,h,d)=>(f,m)=>{const g=m.listener,v=()=>{const N=new Float32Array(1),M=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),F=h(m);let D=!1,X=[0,0,-1,0,1,0],W=[0,0,0];const G=()=>{if(D)return;D=!0;const ne=r(m,256,9,0);ne.onaudioprocess=({inputBuffer:ee})=>{const J=[u(ee,N,0),u(ee,N,1),u(ee,N,2),u(ee,N,3),u(ee,N,4),u(ee,N,5)];J.some((Z,Y)=>Z!==X[Y])&&(g.setOrientation(...J),X=J);const H=[u(ee,N,6),u(ee,N,7),u(ee,N,8)];H.some((Z,Y)=>Z!==W[Y])&&(g.setPosition(...H),W=H)},M.connect(ne)},Q=ne=>ee=>{ee!==X[ne]&&(X[ne]=ee,g.setOrientation(...X))},re=ne=>ee=>{ee!==W[ne]&&(W[ne]=ee,g.setPosition(...W))},K=(ne,ee,J)=>{const H=s(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee});H.connect(M,0,ne),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return ee}});const Z=o({context:f},F,H.offset,Gt,rn);return d(Z,"value",Y=>()=>Y.call(Z),Y=>E=>{try{Y.call(Z,E)}catch(q){if(q.code!==9)throw q}G(),F&&J(E)}),Z.cancelAndHoldAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.setTargetAtTime),Z.setValueAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.setValueAtTime),Z.setValueCurveAtTime=(Y=>F?()=>{throw a()}:(...E)=>{const q=Y.apply(Z,E);return G(),q})(Z.setValueCurveAtTime),Z};return{forwardX:K(0,0,Q(0)),forwardY:K(1,0,Q(1)),forwardZ:K(2,-1,Q(2)),positionX:K(6,0,re(0)),positionY:K(7,0,re(1)),positionZ:K(8,0,re(2)),upX:K(3,0,Q(3)),upY:K(4,1,Q(4)),upZ:K(5,0,Q(5))}},{forwardX:w,forwardY:_,forwardZ:x,positionX:k,positionY:C,positionZ:R,upX:I,upY:j,upZ:z}=g.forwardX===void 0?v():g;return{get forwardX(){return w},get forwardY(){return _},get forwardZ(){return x},get positionX(){return k},get positionY(){return C},get positionZ(){return R},get upX(){return I},get upY(){return j},get upZ(){return z}}},ul=o=>"context"in o,Oo=o=>ul(o[0]),Wr=(o,e,s,r)=>{for(const a of o)if(s(a)){if(r)return!1;throw Error("The set contains at least one similar element.")}return o.add(e),!0},Rp=(o,e,[s,r],a)=>{Wr(o,[e,s,r],u=>u[0]===e&&u[1]===s,a)},Ap=(o,[e,s,r],a)=>{const u=o.get(e);u===void 0?o.set(e,new Set([[s,r]])):Wr(u,[s,r],h=>h[0]===s,a)},Ri=o=>"inputs"in o,cl=(o,e,s,r)=>{if(Ri(e)){const a=e.inputs[r];return o.connect(a,s,0),[a,s,0]}return o.connect(e,s,r),[e,s,r]},im=(o,e,s)=>{for(const r of o)if(r[0]===e&&r[1]===s)return o.delete(r),r;return null},zy=(o,e,s)=>bl(o,r=>r[0]===e&&r[1]===s),om=(o,e)=>{if(!Eo(o).delete(e))throw new Error("Missing the expected event listener.")},am=(o,e,s)=>{const r=Qn(o,e),a=bl(r,u=>u[0]===s);return r.size===0&&o.delete(e),a},hl=(o,e,s,r)=>{Ri(e)?o.disconnect(e.inputs[r],s,0):o.disconnect(e,s,r)},st=o=>Qn(Xc,o),xo=o=>Qn(Kc,o),Fr=o=>qc.has(o),rl=o=>!Ti.has(o),Op=(o,e)=>new Promise(s=>{if(e!==null)s(!0);else{const r=o.createScriptProcessor(256,1,1),a=o.createGain(),u=o.createBuffer(1,2,44100),h=u.getChannelData(0);h[0]=1,h[1]=1;const d=o.createBufferSource();d.buffer=u,d.loop=!0,d.connect(r).connect(o.destination),d.connect(a),d.disconnect(a),r.onaudioprocess=f=>{const m=f.inputBuffer.getChannelData(0);Array.prototype.some.call(m,g=>g===1)?s(!0):s(!1),d.stop(),r.onaudioprocess=null,d.disconnect(r),r.disconnect(o.destination)},d.start()}}),Ic=(o,e)=>{const s=new Map;for(const r of o)for(const a of r){const u=s.get(a);s.set(a,u===void 0?1:u+1)}s.forEach((r,a)=>e(a,r))},dl=o=>"context"in o,qy=o=>{const e=new Map;o.connect=(s=>(r,a=0,u=0)=>{const h=dl(r)?s(r,a,u):s(r,a),d=e.get(r);return d===void 0?e.set(r,[{input:u,output:a}]):d.every(f=>f.input!==u||f.output!==a)&&d.push({input:u,output:a}),h})(o.connect.bind(o)),o.disconnect=(s=>(r,a,u)=>{if(s.apply(o),r===void 0)e.clear();else if(typeof r=="number")for(const[h,d]of e){const f=d.filter(m=>m.output!==r);f.length===0?e.delete(h):e.set(h,f)}else if(e.has(r))if(a===void 0)e.delete(r);else{const h=e.get(r);if(h!==void 0){const d=h.filter(f=>f.output!==a&&(f.input!==u||u===void 0));d.length===0?e.delete(r):e.set(r,d)}}for(const[h,d]of e)d.forEach(f=>{dl(h)?o.connect(h,f.output,f.input):o.connect(h,f.output)})})(o.disconnect)},Wy=(o,e,s,r)=>{const{activeInputs:a,passiveInputs:u}=Ao(e),{outputs:h}=Yt(o),d=Eo(o),f=m=>{const g=st(o),v=xo(e);if(m){const w=am(u,o,s);Rp(a,o,w,!1),!r&&!Fr(o)&&g.connect(v,s)}else{const w=zy(a,o,s);Ap(u,w,!1),!r&&!Fr(o)&&g.disconnect(v,s)}};return Wr(h,[e,s],m=>m[0]===e&&m[1]===s,!0)?(d.add(f),Rs(o)?Rp(a,o,[s,f],!0):Ap(u,[o,s,f],!0),!0):!1},By=(o,e,s,r)=>{const{activeInputs:a,passiveInputs:u}=Yt(e),h=im(a[r],o,s);return h===null?[tm(u,o,s,r)[2],!1]:[h[2],!0]},Uy=(o,e,s)=>{const{activeInputs:r,passiveInputs:a}=Ao(e),u=im(r,o,s);return u===null?[am(a,o,s)[1],!1]:[u[2],!0]},Jc=(o,e,s,r,a)=>{const[u,h]=By(o,s,r,a);if(u!==null&&(om(o,u),h&&!e&&!Fr(o)&&hl(st(o),st(s),r,a)),Rs(s)){const{activeInputs:d}=Yt(s);Uc(s,d)}},eh=(o,e,s,r)=>{const[a,u]=Uy(o,s,r);a!==null&&(om(o,a),u&&!e&&!Fr(o)&&st(o).disconnect(xo(s),r))},$y=(o,e)=>{const s=Yt(o),r=[];for(const a of s.outputs)Oo(a)?Jc(o,e,...a):eh(o,e,...a),r.push(a[0]);return s.outputs.clear(),r},Qy=(o,e,s)=>{const r=Yt(o),a=[];for(const u of r.outputs)u[1]===s&&(Oo(u)?Jc(o,e,...u):eh(o,e,...u),a.push(u[0]),r.outputs.delete(u));return a},Hy=(o,e,s,r,a)=>{const u=Yt(o);return Array.from(u.outputs).filter(h=>h[0]===s&&(r===void 0||h[1]===r)&&(a===void 0||h[2]===a)).map(h=>(Oo(h)?Jc(o,e,...h):eh(o,e,...h),u.outputs.delete(h),h[0]))},Gy=(o,e,s,r,a,u,h,d,f,m,g,v,w,_,x,k)=>class extends m{constructor(R,I,j,z){super(j),this._context=R,this._nativeAudioNode=j;const N=g(R);v(N)&&s(Op,()=>Op(N,k))!==!0&&qy(j),Xc.set(this,j),Jp.set(this,new Set),R.state!=="closed"&&I&&Si(this),o(this,z,j)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(R){this._nativeAudioNode.channelCount=R}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(R){this._nativeAudioNode.channelCountMode=R}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(R){this._nativeAudioNode.channelInterpretation=R}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(R,I=0,j=0){if(I<0||I>=this._nativeAudioNode.numberOfOutputs)throw a();const z=g(this._context),N=x(z);if(w(R)||_(R))throw u();if(ul(R)){const D=st(R);try{const W=cl(this._nativeAudioNode,D,I,j),G=rl(this);(N||G)&&this._nativeAudioNode.disconnect(...W),this.context.state!=="closed"&&!G&&rl(R)&&Si(R)}catch(W){throw W.code===12?u():W}if(e(this,R,I,j,N)){const W=f([this],R);Ic(W,r(N))}return R}const M=xo(R);if(M.name==="playbackRate"&&M.maxValue===1024)throw h();try{this._nativeAudioNode.connect(M,I),(N||rl(this))&&this._nativeAudioNode.disconnect(M,I)}catch(D){throw D.code===12?u():D}if(Wy(this,R,I,N)){const D=f([this],R);Ic(D,r(N))}}disconnect(R,I,j){let z;const N=g(this._context),M=x(N);if(R===void 0)z=$y(this,M);else if(typeof R=="number"){if(R<0||R>=this.numberOfOutputs)throw a();z=Qy(this,M,R)}else{if(I!==void 0&&(I<0||I>=this.numberOfOutputs)||ul(R)&&j!==void 0&&(j<0||j>=R.numberOfInputs))throw a();if(z=Hy(this,M,R,I,j),z.length===0)throw u()}for(const F of z){const D=f([this],F);Ic(D,d)}}},Yy=(o,e,s,r,a,u,h,d,f,m,g,v,w)=>(_,x,k,C=null,R=null)=>{const I=k.value,j=new iy(I),z=x?r(j):null,N={get defaultValue(){return I},get maxValue(){return C===null?k.maxValue:C},get minValue(){return R===null?k.minValue:R},get value(){return k.value},set value(M){k.value=M,N.setValueAtTime(M,_.context.currentTime)},cancelAndHoldAtTime(M){if(typeof k.cancelAndHoldAtTime=="function")z===null&&j.flush(_.context.currentTime),j.add(a(M)),k.cancelAndHoldAtTime(M);else{const F=Array.from(j).pop();z===null&&j.flush(_.context.currentTime),j.add(a(M));const D=Array.from(j).pop();k.cancelScheduledValues(M),F!==D&&D!==void 0&&(D.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(D.value,D.endTime):D.type==="linearRampToValue"?k.linearRampToValueAtTime(D.value,D.endTime):D.type==="setValue"?k.setValueAtTime(D.value,D.startTime):D.type==="setValueCurve"&&k.setValueCurveAtTime(D.values,D.startTime,D.duration))}return N},cancelScheduledValues(M){return z===null&&j.flush(_.context.currentTime),j.add(u(M)),k.cancelScheduledValues(M),N},exponentialRampToValueAtTime(M,F){if(M===0)throw new RangeError;if(!Number.isFinite(F)||F<0)throw new RangeError;const D=_.context.currentTime;return z===null&&j.flush(D),Array.from(j).length===0&&(j.add(m(I,D)),k.setValueAtTime(I,D)),j.add(h(M,F)),k.exponentialRampToValueAtTime(M,F),N},linearRampToValueAtTime(M,F){const D=_.context.currentTime;return z===null&&j.flush(D),Array.from(j).length===0&&(j.add(m(I,D)),k.setValueAtTime(I,D)),j.add(d(M,F)),k.linearRampToValueAtTime(M,F),N},setTargetAtTime(M,F,D){return z===null&&j.flush(_.context.currentTime),j.add(f(M,F,D)),k.setTargetAtTime(M,F,D),N},setValueAtTime(M,F){return z===null&&j.flush(_.context.currentTime),j.add(m(M,F)),k.setValueAtTime(M,F),N},setValueCurveAtTime(M,F,D){const X=M instanceof Float32Array?M:new Float32Array(M);if(v!==null&&v.name==="webkitAudioContext"){const W=F+D,G=_.context.sampleRate,Q=Math.ceil(F*G),re=Math.floor(W*G),K=re-Q,ne=new Float32Array(K);for(let J=0;J<K;J+=1){const H=(X.length-1)/D*((Q+J)/G-F),Z=Math.floor(H),Y=Math.ceil(H);ne[J]=Z===Y?X[Z]:(1-(H-Z))*X[Z]+(1-(Y-H))*X[Y]}z===null&&j.flush(_.context.currentTime),j.add(g(ne,F,D)),k.setValueCurveAtTime(ne,F,D);const ee=re/G;ee<W&&w(N,ne[ne.length-1],ee),w(N,X[X.length-1],W)}else z===null&&j.flush(_.context.currentTime),j.add(g(X,F,D)),k.setValueCurveAtTime(X,F,D);return N}};return s.set(N,k),e.set(N,_),o(N,z),N},Xy=o=>({replay(e){for(const s of o)if(s.type==="exponentialRampToValue"){const{endTime:r,value:a}=s;e.exponentialRampToValueAtTime(a,r)}else if(s.type==="linearRampToValue"){const{endTime:r,value:a}=s;e.linearRampToValueAtTime(a,r)}else if(s.type==="setTarget"){const{startTime:r,target:a,timeConstant:u}=s;e.setTargetAtTime(a,r,u)}else if(s.type==="setValue"){const{startTime:r,value:a}=s;e.setValueAtTime(a,r)}else if(s.type==="setValueCurve"){const{duration:r,startTime:a,values:u}=s;e.setValueCurveAtTime(u,a,r)}else throw new Error("Can't apply an unknown automation.")}});class lm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,s=null){return this._map.forEach((r,a)=>e.call(s,r,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Ky={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Zy=(o,e,s,r,a,u,h,d,f,m,g,v,w,_)=>class extends e{constructor(k,C,R){var I;const j=d(k),z=f(j),N=g({...Ky,...R});w(N);const M=Wc.get(j),F=M==null?void 0:M.get(C),D=z||j.state!=="closed"?j:(I=h(j))!==null&&I!==void 0?I:j,X=a(D,z?null:k.baseLatency,m,C,F,N),W=z?r(C,N,F):null;super(k,!0,X,W);const G=[];X.parameters.forEach((re,K)=>{const ne=s(this,z,re);G.push([K,ne])}),this._nativeAudioWorkletNode=X,this._onprocessorerror=null,this._parameters=new lm(G),z&&o(j,this);const{activeInputs:Q}=u(this);v(X,Q)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(k){const C=typeof k=="function"?_(this,k):null;this._nativeAudioWorkletNode.onprocessorerror=C;const R=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=R!==null&&R===C?k:R}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function fl(o,e,s,r,a){if(typeof o.copyFromChannel=="function")e[s].byteLength===0&&(e[s]=new Float32Array(128)),o.copyFromChannel(e[s],r,a);else{const u=o.getChannelData(r);if(e[s].byteLength===0)e[s]=u.slice(a,a+128);else{const h=new Float32Array(u.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[s].set(h)}}}const um=(o,e,s,r,a)=>{typeof o.copyToChannel=="function"?e[s].byteLength!==0&&o.copyToChannel(e[s],r,a):e[s].byteLength!==0&&o.getChannelData(r).set(e[s],a)},pl=(o,e)=>{const s=[];for(let r=0;r<o;r+=1){const a=[],u=typeof e=="number"?e:e[r];for(let h=0;h<u;h+=1)a.push(new Float32Array(128));s.push(a)}return s},Jy=(o,e)=>{const s=Qn(Bc,o),r=st(e);return Qn(s,r)},e_=async(o,e,s,r,a,u,h)=>{const d=e===null?Math.ceil(o.context.length/128)*128:e.length,f=r.channelCount*r.numberOfInputs,m=a.reduce((C,R)=>C+R,0),g=m===0?null:s.createBuffer(m,d,s.sampleRate);if(u===void 0)throw new Error("Missing the processor constructor.");const v=Yt(o),w=await Jy(s,o),_=pl(r.numberOfInputs,r.channelCount),x=pl(r.numberOfOutputs,a),k=Array.from(o.parameters.keys()).reduce((C,R)=>({...C,[R]:new Float32Array(128)}),{});for(let C=0;C<d;C+=128){if(r.numberOfInputs>0&&e!==null)for(let R=0;R<r.numberOfInputs;R+=1)for(let I=0;I<r.channelCount;I+=1)fl(e,_[R],I,I,C);u.parameterDescriptors!==void 0&&e!==null&&u.parameterDescriptors.forEach(({name:R},I)=>{fl(e,k,R,f+I,C)});for(let R=0;R<r.numberOfInputs;R+=1)for(let I=0;I<a[R];I+=1)x[R][I].byteLength===0&&(x[R][I]=new Float32Array(128));try{const R=_.map((j,z)=>v.activeInputs[z].size===0?[]:j),I=h(C/s.sampleRate,s.sampleRate,()=>w.process(R,x,k));if(g!==null)for(let j=0,z=0;j<r.numberOfOutputs;j+=1){for(let N=0;N<a[j];N+=1)um(g,x[j],N,z+N,C);z+=a[j]}if(!I)break}catch(R){o.dispatchEvent(new ErrorEvent("processorerror",{colno:R.colno,filename:R.filename,lineno:R.lineno,message:R.message}));break}}return g},t_=(o,e,s,r,a,u,h,d,f,m,g,v,w,_,x,k)=>(C,R,I)=>{const j=new WeakMap;let z=null;const N=async(M,F)=>{let D=g(M),X=null;const W=Bt(D,F),G=Array.isArray(R.outputChannelCount)?R.outputChannelCount:Array.from(R.outputChannelCount);if(v===null){const Q=G.reduce((ee,J)=>ee+J,0),re=a(F,{channelCount:Math.max(1,Q),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Q)}),K=[];for(let ee=0;ee<M.numberOfOutputs;ee+=1)K.push(r(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:G[ee]}));const ne=h(F,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1});ne.connect=e.bind(null,K),ne.disconnect=f.bind(null,K),X=[re,K,ne]}else W||(D=new v(F,C));if(j.set(F,X===null?D:X[2]),X!==null){if(z===null){if(I===void 0)throw new Error("Missing the processor constructor.");if(w===null)throw new Error("Missing the native OfflineAudioContext constructor.");const J=M.channelCount*M.numberOfInputs,H=I.parameterDescriptors===void 0?0:I.parameterDescriptors.length,Z=J+H;z=e_(M,Z===0?null:await(async()=>{const E=new w(Z,Math.ceil(M.context.length/128)*128,F.sampleRate),q=[],de=[];for(let fe=0;fe<R.numberOfInputs;fe+=1)q.push(h(E,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1})),de.push(a(E,{channelCount:R.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:R.channelCount}));const _e=await Promise.all(Array.from(M.parameters.values()).map(async fe=>{const ke=u(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe.value});return await _(E,fe,ke.offset),ke})),ae=r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,J+H)});for(let fe=0;fe<R.numberOfInputs;fe+=1){q[fe].connect(de[fe]);for(let ke=0;ke<R.channelCount;ke+=1)de[fe].connect(ae,ke,fe*R.channelCount+ke)}for(const[fe,ke]of _e.entries())ke.connect(ae,0,J+fe),ke.start(0);return ae.connect(E.destination),await Promise.all(q.map(fe=>x(M,E,fe))),k(E)})(),F,R,G,I,m)}const Q=await z,re=s(F,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[K,ne,ee]=X;Q!==null&&(re.buffer=Q,re.start(0)),re.connect(K);for(let J=0,H=0;J<M.numberOfOutputs;J+=1){const Z=ne[J];for(let Y=0;Y<G[J];Y+=1)K.connect(Z,H+Y,Y);H+=G[J]}return ee}if(W)for(const[Q,re]of M.parameters.entries())await o(F,re,D.parameters.get(Q));else for(const[Q,re]of M.parameters.entries())await _(F,re,D.parameters.get(Q));return await x(M,F,D),D};return{render(M,F){d(F,M);const D=j.get(F);return D!==void 0?Promise.resolve(D):N(M,F)}}},n_=(o,e,s,r,a,u,h,d,f,m,g,v,w,_,x,k,C,R,I,j)=>class extends x{constructor(N,M){super(N,M),this._nativeContext=N,this._audioWorklet=o===void 0?void 0:{addModule:(F,D)=>o(this,F,D)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(N,M,F){return new s({length:M,numberOfChannels:N,sampleRate:F})}createBufferSource(){return new r(this)}createChannelMerger(N=6){return new u(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new h(this,{numberOfOutputs:N})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(N=1){return new g(this,{maxDelayTime:N})}createDynamicsCompressor(){return new v(this)}createGain(){return new w(this)}createIIRFilter(N,M){return new _(this,{feedback:M,feedforward:N})}createOscillator(){return new k(this)}createPanner(){return new C(this)}createPeriodicWave(N,M,F={disableNormalization:!1}){return new R(this,{...F,imag:M,real:N})}createStereoPanner(){return new I(this)}createWaveShaper(){return new j(this)}decodeAudioData(N,M,F){return m(this._nativeContext,N).then(D=>(typeof M=="function"&&M(D),D),D=>{throw typeof F=="function"&&F(D),D})}},s_={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},r_=(o,e,s,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),w={...s_,...g},_=a(v,w),x=h(v),k=x?s():null;super(m,!1,_,k),this._Q=e(this,x,_.Q,Gt,rn),this._detune=e(this,x,_.detune,1200*Math.log2(Gt),-1200*Math.log2(Gt)),this._frequency=e(this,x,_.frequency,m.sampleRate/2,0),this._gain=e(this,x,_.gain,40*Math.log10(Gt),rn),this._nativeBiquadFilterNode=_,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,g,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,g,v)}catch(w){throw w.code===11?r():w}if(m.length!==g.length||g.length!==v.length)throw r()}},i_=(o,e,s,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=s(d);const g=Bt(m,f);if(!g){const v={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=e(f,v)}return u.set(f,m),g?(await o(f,d.Q,m.Q),await o(f,d.detune,m.detune),await o(f,d.frequency,m.frequency),await o(f,d.gain,m.gain)):(await r(f,d.Q,m.Q),await r(f,d.detune,m.detune),await r(f,d.frequency,m.frequency),await r(f,d.gain,m.gain)),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},o_=(o,e)=>(s,r)=>{const a=e.get(s);if(a!==void 0)return a;const u=o.get(s);if(u!==void 0)return u;try{const h=r();return h instanceof Promise?(o.set(s,h),h.catch(()=>!1).then(d=>(o.delete(s),e.set(s,d),d))):(e.set(s,h),h)}catch{return e.set(s,!1),!1}},a_={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},l_=(o,e,s,r,a)=>class extends o{constructor(h,d){const f=r(h),m={...a_,...d},g=s(f,m),v=a(f)?e():null;super(h,!1,g,v)}},u_=(o,e,s)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Bt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=o(h,m)}return r.set(h,d),await s(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},c_={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},h_=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g=u({...c_,...f}),v=s(m,g),w=a(m)?e():null;super(d,!1,v,w)}},d_=(o,e,s)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Bt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=o(h,m)}return r.set(h,d),await s(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},f_=o=>(e,s,r)=>o(s,e,r),p_=o=>(e,s,r=0,a=0)=>{const u=e[r];if(u===void 0)throw o();return dl(s)?u.connect(s,0,a):u.connect(s,0)},m_=o=>(e,s)=>{const r=o(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return r.buffer=a,r.loop=!0,r.connect(s),r.start(),()=>{r.stop(),r.disconnect(s)}},g_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},v_=(o,e,s,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...g_,...m},w=r(g,v),_=u(g),x=_?s():null;super(f,!1,w,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=w,this._offset=e(this,_,w.offset,Gt,rn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeConstantSourceNode.onended=m;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===m?f:g}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){Si(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),Rs(this)&&Ro(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},y_=(o,e,s,r,a)=>()=>{const u=new WeakMap;let h=null,d=null;const f=async(m,g)=>{let v=s(m);const w=Bt(v,g);if(!w){const _={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=e(g,_),h!==null&&v.start(h),d!==null&&v.stop(d)}return u.set(g,v),w?await o(g,m.offset,v.offset):await r(g,m.offset,v.offset),await a(m,g,v),v};return{set start(m){h=m},set stop(m){d=m},render(m,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):f(m,g)}}},__=o=>e=>(o[0]=e,o[0]),w_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},x_=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g={...w_,...f},v=s(m,g),_=a(m)?e():null;super(d,!1,v,_),this._isBufferNullified=!1,this._nativeConvolverNode=v,g.buffer!==null&&u(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,u(this,0)}else this._isBufferNullified=!1,u(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},k_=(o,e,s)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Bt(d,h)){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=o(h,m)}return r.set(h,d),Ri(d)?await s(u,h,d.inputs[0]):await s(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},C_=(o,e)=>(s,r,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(s,r,a)}catch(u){throw u.name==="SyntaxError"?o():u}},T_=()=>new DOMException("","DataCloneError"),Dp=o=>{const{port1:e,port2:s}=new MessageChannel;return new Promise(r=>{const a=()=>{s.onmessage=null,e.close(),s.close(),r()};s.onmessage=()=>a();try{e.postMessage(o,[o])}catch{}finally{a()}})},S_=(o,e,s,r,a,u,h,d,f,m,g)=>(v,w)=>{const _=h(v)?v:u(v);if(a.has(w)){const x=s();return Promise.reject(x)}try{a.add(w)}catch{}return e(f,()=>f(_))?_.decodeAudioData(w).then(x=>(Dp(w).catch(()=>{}),e(d,()=>d(x))||g(x),o.add(x),x)):new Promise((x,k)=>{const C=async()=>{try{await Dp(w)}catch{}},R=I=>{k(I),C()};try{_.decodeAudioData(w,I=>{typeof I.copyFromChannel!="function"&&(m(I),Zc(I)),o.add(I),C().then(()=>x(I))},I=>{R(I===null?r():I)})}catch(I){R(I)}})},b_=(o,e,s,r,a,u,h,d)=>(f,m)=>{const g=e.get(f);if(g===void 0)throw new Error("Missing the expected cycle count.");const v=u(f.context),w=d(v);if(g===m){if(e.delete(f),!w&&h(f)){const _=r(f),{outputs:x}=s(f);for(const k of x)if(Oo(k)){const C=r(k[0]);o(_,C,k[1],k[2])}else{const C=a(k[0]);_.connect(C,k[1])}}}else e.set(f,g-m)},N_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},E_=(o,e,s,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...N_,...m},w=r(g,v),_=u(g),x=_?s(v.maxDelayTime):null;super(f,!1,w,x),this._delayTime=e(this,_,w.delayTime),h(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},R_=(o,e,s,r,a)=>u=>{const h=new WeakMap,d=async(f,m)=>{let g=s(f);const v=Bt(g,m);if(!v){const w={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:u};g=e(m,w)}return h.set(m,g),v?await o(m,f.delayTime,g.delayTime):await r(m,f.delayTime,g.delayTime),await a(f,m,g),g};return{render(f,m){const g=h.get(m);return g!==void 0?Promise.resolve(g):d(f,m)}}},A_=o=>(e,s,r,a)=>o(e[a],u=>u[0]===s&&u[1]===r),O_=o=>(e,s)=>{o(e).delete(s)},D_=o=>"delayTime"in o,M_=(o,e,s)=>function r(a,u){const h=ul(u)?u:s(o,u);if(D_(h))return[];if(a[0]===h)return[a];if(a.includes(h))return[];const{outputs:d}=e(h);return Array.from(d).map(f=>r([...a,h],f[0])).reduce((f,m)=>f.concat(m),[])},tl=(o,e,s)=>{const r=e[s];if(r===void 0)throw o();return r},I_=o=>(e,s=void 0,r=void 0,a=0)=>s===void 0?e.forEach(u=>u.disconnect()):typeof s=="number"?tl(o,e,s).disconnect():dl(s)?r===void 0?e.forEach(u=>u.disconnect(s)):a===void 0?tl(o,e,r).disconnect(s,0):tl(o,e,r).disconnect(s,0,a):r===void 0?e.forEach(u=>u.disconnect(s)):tl(o,e,r).disconnect(s,0),P_={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},F_=(o,e,s,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),w={...P_,...g},_=r(v,w),x=h(v),k=x?s():null;super(m,!1,_,k),this._attack=e(this,x,_.attack),this._knee=e(this,x,_.knee),this._nativeDynamicsCompressorNode=_,this._ratio=e(this,x,_.ratio),this._release=e(this,x,_.release),this._threshold=e(this,x,_.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=g,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},L_=(o,e,s,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=s(d);const g=Bt(m,f);if(!g){const v={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=e(f,v)}return u.set(f,m),g?(await o(f,d.attack,m.attack),await o(f,d.knee,m.knee),await o(f,d.ratio,m.ratio),await o(f,d.release,m.release),await o(f,d.threshold,m.threshold)):(await r(f,d.attack,m.attack),await r(f,d.knee,m.knee),await r(f,d.ratio,m.ratio),await r(f,d.release,m.release),await r(f,d.threshold,m.threshold)),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},j_=()=>new DOMException("","EncodingError"),V_=o=>e=>new Promise((s,r)=>{if(o===null){r(new SyntaxError);return}const a=o.document.head;if(a===null)r(new SyntaxError);else{const u=o.document.createElement("script"),h=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(h),f=o.onerror,m=()=>{o.onerror=f,URL.revokeObjectURL(d)};o.onerror=(g,v,w,_,x)=>{if(v===d||v===o.location.href&&w===1&&_===1)return m(),r(x),!1;if(f!==null)return f(g,v,w,_,x)},u.onerror=()=>{m(),r(new SyntaxError)},u.onload=()=>{m(),s()},u.src=d,u.type="module",a.appendChild(u)}}),z_=o=>class{constructor(s){this._nativeEventTarget=s,this._listeners=new WeakMap}addEventListener(s,r,a){if(r!==null){let u=this._listeners.get(r);u===void 0&&(u=o(this,r),typeof r=="function"&&this._listeners.set(r,u)),this._nativeEventTarget.addEventListener(s,u,a)}}dispatchEvent(s){return this._nativeEventTarget.dispatchEvent(s)}removeEventListener(s,r,a){const u=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(s,u===void 0?null:u,a)}},q_=o=>(e,s,r)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(e*s)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},W_=o=>async e=>{try{const s=await fetch(e);if(s.ok)return[await s.text(),s.url]}catch{}throw o()},B_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},U_=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...B_,...f},v=r(m,g),w=u(m),_=w?s():null;super(d,!1,v,_),this._gain=e(this,w,v.gain,Gt,rn)}get gain(){return this._gain}},$_=(o,e,s,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=s(d);const g=Bt(m,f);if(!g){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=e(f,v)}return u.set(f,m),g?await o(f,d.gain,m.gain):await r(f,d.gain,m.gain),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},Q_=(o,e)=>s=>e(o,s),H_=o=>e=>{const s=o(e);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return s.renderer},G_=o=>e=>{var s;return(s=o.get(e))!==null&&s!==void 0?s:0},Y_=o=>e=>{const s=o(e);if(s.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return s.renderer},X_=o=>e=>o.get(e),Mt=()=>new DOMException("","InvalidStateError"),K_=o=>e=>{const s=o.get(e);if(s===void 0)throw Mt();return s},Z_=(o,e)=>s=>{let r=o.get(s);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),o.set(s,r),r},J_=o=>e=>{const s=o.get(e);if(s===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return s},Nl=()=>new DOMException("","InvalidAccessError"),e0=o=>{o.getFrequencyResponse=(e=>(s,r,a)=>{if(s.length!==r.length||r.length!==a.length)throw Nl();return e.call(o,s,r,a)})(o.getFrequencyResponse)},t0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},n0=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g=a(m),v={...t0,...f},w=e(m,g?null:d.baseLatency,v),_=g?s(v.feedback,v.feedforward):null;super(d,!1,w,_),e0(w),this._nativeIIRFilterNode=w,u(this,1)}getFrequencyResponse(d,f,m){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,m)}},cm=(o,e,s,r,a,u,h,d,f,m,g)=>{const v=m.length;let w=d;for(let _=0;_<v;_+=1){let x=s[0]*m[_];for(let k=1;k<a;k+=1){const C=w-k&f-1;x+=s[k]*u[C],x-=o[k]*h[C]}for(let k=a;k<r;k+=1)x+=s[k]*u[w-k&f-1];for(let k=a;k<e;k+=1)x-=o[k]*h[w-k&f-1];u[w]=m[_],h[w]=x,w=w+1&f-1,g[_]=x}return w},s0=(o,e,s,r)=>{const a=s instanceof Float64Array?s:new Float64Array(s),u=r instanceof Float64Array?r:new Float64Array(r),h=a.length,d=u.length,f=Math.min(h,d);if(a[0]!==1){for(let x=0;x<h;x+=1)u[x]/=a[0];for(let x=1;x<d;x+=1)a[x]/=a[0]}const m=32,g=new Float32Array(m),v=new Float32Array(m),w=e.createBuffer(o.numberOfChannels,o.length,o.sampleRate),_=o.numberOfChannels;for(let x=0;x<_;x+=1){const k=o.getChannelData(x),C=w.getChannelData(x);g.fill(0),v.fill(0),cm(a,h,u,d,f,g,v,0,m,k,C)}return w},r0=(o,e,s,r,a)=>(u,h)=>{const d=new WeakMap;let f=null;const m=async(g,v)=>{let w=null,_=e(g);const x=Bt(_,v);if(v.createIIRFilter===void 0?w=o(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(_=v.createIIRFilter(h,u)),d.set(v,w===null?_:w),w!==null){if(f===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new s(g.context.destination.channelCount,g.context.length,v.sampleRate);f=(async()=>{await r(g,C,C.destination);const R=await a(C);return s0(R,v,u,h)})()}const k=await f;return w.buffer=k,w.start(0),w}return await r(g,v,_),_};return{render(g,v){const w=d.get(v);return w!==void 0?Promise.resolve(w):m(g,v)}}},i0=(o,e,s,r,a,u)=>h=>(d,f)=>{const m=o.get(d);if(m===void 0){if(!h&&u(d)){const g=r(d),{outputs:v}=s(d);for(const w of v)if(Oo(w)){const _=r(w[0]);e(g,_,w[1],w[2])}else{const _=a(w[0]);g.disconnect(_,w[1])}}o.set(d,f)}else o.set(d,m+f)},o0=(o,e)=>s=>{const r=o.get(s);return e(r)||e(s)},a0=(o,e)=>s=>o.has(s)||e(s),l0=(o,e)=>s=>o.has(s)||e(s),u0=(o,e)=>s=>{const r=o.get(s);return e(r)||e(s)},c0=o=>e=>o!==null&&e instanceof o,h0=o=>e=>o!==null&&typeof o.AudioNode=="function"&&e instanceof o.AudioNode,d0=o=>e=>o!==null&&typeof o.AudioParam=="function"&&e instanceof o.AudioParam,f0=(o,e)=>s=>o(s)||e(s),p0=o=>e=>o!==null&&e instanceof o,m0=o=>o!==null&&o.isSecureContext,g0=(o,e,s,r)=>class extends o{constructor(u,h){const d=s(u),f=e(d,h);if(r(d))throw TypeError();super(u,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},v0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},y0=(o,e,s,r)=>class extends o{constructor(u,h){const d=s(u);if(r(d))throw new TypeError;const f={...v0,...h},m=e(d,f);super(u,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},_0=(o,e,s,r)=>class extends o{constructor(u,h){const d=s(u),f=e(d,h);if(r(d))throw new TypeError;super(u,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},w0=(o,e,s)=>class extends o{constructor(a,u){const h=s(a),d=e(h,u);super(a,!0,d,null)}},x0=(o,e,s,r,a,u)=>class extends s{constructor(d,f){super(d),this._nativeContext=d,Sl.set(this,d),r(d)&&a.set(d,new Set),this._destination=new o(this,f),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f=typeof d=="function"?u(this,d):null;this._nativeContext.onstatechange=f;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===f?d:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},ko=o=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const s=o.decodeAudioData(e.buffer,()=>{});return s===void 0?!1:(s.catch(()=>{}),!0)}catch{}return!1},k0=(o,e)=>(s,r,a)=>{const u=new Set;return s.connect=(h=>(d,f=0,m=0)=>{const g=u.size===0;if(e(d))return h.call(s,d,f,m),o(u,[d,f,m],v=>v[0]===d&&v[1]===f&&v[2]===m,!0),g&&r(),d;h.call(s,d,f),o(u,[d,f],v=>v[0]===d&&v[1]===f,!0),g&&r()})(s.connect),s.disconnect=(h=>(d,f,m)=>{const g=u.size>0;if(d===void 0)h.apply(s),u.clear();else if(typeof d=="number"){h.call(s,d);for(const w of u)w[1]===d&&u.delete(w)}else{e(d)?h.call(s,d,f,m):h.call(s,d,f);for(const w of u)w[0]===d&&(f===void 0||w[1]===f)&&(m===void 0||w[2]===m)&&u.delete(w)}const v=u.size===0;g&&v&&a()})(s.disconnect),s},at=(o,e,s)=>{const r=e[s];r!==void 0&&r!==o[s]&&(o[s]=r)},Nt=(o,e)=>{at(o,e,"channelCount"),at(o,e,"channelCountMode"),at(o,e,"channelInterpretation")},Mp=o=>typeof o.getFloatTimeDomainData=="function",C0=o=>{o.getFloatTimeDomainData=e=>{const s=new Uint8Array(e.length);o.getByteTimeDomainData(s);const r=Math.max(s.length,o.fftSize);for(let a=0;a<r;a+=1)e[a]=(s[a]-128)*.0078125;return e}},T0=(o,e)=>(s,r)=>{const a=s.createAnalyser();if(Nt(a,r),!(r.maxDecibels>r.minDecibels))throw e();return at(a,r,"fftSize"),at(a,r,"maxDecibels"),at(a,r,"minDecibels"),at(a,r,"smoothingTimeConstant"),o(Mp,()=>Mp(a))||C0(a),a},S0=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,ft=(o,e,s)=>{const r=e[s];r!==void 0&&r!==o[s].value&&(o[s].value=r)},b0=o=>{o.start=(e=>{let s=!1;return(r=0,a=0,u)=>{if(s)throw Mt();e.call(o,r,a,u),s=!0}})(o.start)},th=o=>{o.start=(e=>(s=0,r=0,a)=>{if(typeof a=="number"&&a<0||r<0||s<0)throw new RangeError("The parameters can't be negative.");e.call(o,s,r,a)})(o.start)},nh=o=>{o.stop=(e=>(s=0)=>{if(s<0)throw new RangeError("The parameter can't be negative.");e.call(o,s)})(o.stop)},N0=(o,e,s,r,a,u,h,d,f,m,g)=>(v,w)=>{const _=v.createBufferSource();return Nt(_,w),ft(_,w,"playbackRate"),at(_,w,"buffer"),at(_,w,"loop"),at(_,w,"loopEnd"),at(_,w,"loopStart"),e(s,()=>s(v))||b0(_),e(r,()=>r(v))||f(_),e(a,()=>a(v))||m(_,v),e(u,()=>u(v))||th(_),e(h,()=>h(v))||g(_,v),e(d,()=>d(v))||nh(_),o(v,_),_},E0=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,R0=(o,e)=>(s,r,a)=>{const u=s.destination;if(u.channelCount!==r)try{u.channelCount=r}catch{}a&&u.channelCountMode!=="explicit"&&(u.channelCountMode="explicit"),u.maxChannelCount===0&&Object.defineProperty(u,"maxChannelCount",{value:r});const h=o(s,{channelCount:r,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:1});return e(h,"channelCount",d=>()=>d.call(h),d=>f=>{d.call(h,f);try{u.channelCount=f}catch(m){if(f>u.maxChannelCount)throw m}}),e(h,"channelCountMode",d=>()=>d.call(h),d=>f=>{d.call(h,f),u.channelCountMode=f}),e(h,"channelInterpretation",d=>()=>d.call(h),d=>f=>{d.call(h,f),u.channelInterpretation=f}),Object.defineProperty(h,"maxChannelCount",{get:()=>u.maxChannelCount}),h.connect(u),h},A0=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,O0=o=>{const{port1:e}=new MessageChannel;try{e.postMessage(o)}finally{e.close()}},D0=(o,e,s,r,a)=>(u,h,d,f,m,g)=>{if(d!==null)try{const v=new d(u,f,g),w=new Map;let _=null;if(Object.defineProperties(v,{channelCount:{get:()=>g.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>_,set:x=>{typeof _=="function"&&v.removeEventListener("processorerror",_),_=typeof x=="function"?x:null,typeof _=="function"&&v.addEventListener("processorerror",_)}}}),v.addEventListener=(x=>(...k)=>{if(k[0]==="processorerror"){const C=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(C!==null){const R=w.get(k[1]);R!==void 0?k[1]=R:(k[1]=I=>{I.type==="error"?(Object.defineProperties(I,{type:{value:"processorerror"}}),C(I)):C(new ErrorEvent(k[0],{...I}))},w.set(C,k[1]))}}return x.call(v,"error",k[1],k[2]),x.call(v,...k)})(v.addEventListener),v.removeEventListener=(x=>(...k)=>{if(k[0]==="processorerror"){const C=w.get(k[1]);C!==void 0&&(w.delete(k[1]),k[1]=C)}return x.call(v,"error",k[1],k[2]),x.call(v,k[0],k[1],k[2])})(v.removeEventListener),g.numberOfOutputs!==0){const x=s(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(x).connect(u.destination),a(v,()=>x.disconnect(),()=>x.connect(u.destination))}return v}catch(v){throw v.code===11?r():v}if(m===void 0)throw r();return O0(g),e(u,h,m,g)},hm=(o,e)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*e))))),M0=o=>new Promise((e,s)=>{const{port1:r,port2:a}=new MessageChannel;r.onmessage=({data:u})=>{r.close(),a.close(),e(u)},r.onmessageerror=({data:u})=>{r.close(),a.close(),s(u)},a.postMessage(o)}),I0=async(o,e)=>{const s=await M0(e);return new o(s)},P0=(o,e,s,r)=>{let a=Bc.get(o);a===void 0&&(a=new WeakMap,Bc.set(o,a));const u=I0(s,r);return a.set(e,u),u},F0=(o,e,s,r,a,u,h,d,f,m,g,v,w)=>(_,x,k,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw f();const R=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(R.some(ce=>ce<1))throw f();if(R.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw f();const I=C.channelCount*C.numberOfInputs,j=R.reduce((ce,ye)=>ce+ye,0),z=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length;if(I+z>6||j>6)throw f();const N=new MessageChannel,M=[],F=[];for(let ce=0;ce<C.numberOfInputs;ce+=1)M.push(h(_,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),F.push(a(_,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const D=[];if(k.parameterDescriptors!==void 0)for(const{defaultValue:ce,maxValue:ye,minValue:Ne,name:Ee}of k.parameterDescriptors){const Ae=u(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[Ee]!==void 0?C.parameterData[Ee]:ce===void 0?0:ce});Object.defineProperties(Ae.offset,{defaultValue:{get:()=>ce===void 0?0:ce},maxValue:{get:()=>ye===void 0?Gt:ye},minValue:{get:()=>Ne===void 0?rn:Ne}}),D.push(Ae)}const X=r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,I+z)}),W=hm(x,_.sampleRate),G=d(_,W,I+z,Math.max(1,j)),Q=a(_,{channelCount:Math.max(1,j),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,j)}),re=[];for(let ce=0;ce<C.numberOfOutputs;ce+=1)re.push(r(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[ce]}));for(let ce=0;ce<C.numberOfInputs;ce+=1){M[ce].connect(F[ce]);for(let ye=0;ye<C.channelCount;ye+=1)F[ce].connect(X,ye,ce*C.channelCount+ye)}const K=new lm(k.parameterDescriptors===void 0?[]:k.parameterDescriptors.map(({name:ce},ye)=>{const Ne=D[ye];return Ne.connect(X,0,I+ye),Ne.start(0),[ce,Ne.offset]}));X.connect(G);let ne=C.channelInterpretation,ee=null;const J=C.numberOfOutputs===0?[G]:re,H={get bufferSize(){return W},get channelCount(){return C.channelCount},set channelCount(ce){throw s()},get channelCountMode(){return C.channelCountMode},set channelCountMode(ce){throw s()},get channelInterpretation(){return ne},set channelInterpretation(ce){for(const ye of M)ye.channelInterpretation=ce;ne=ce},get context(){return G.context},get inputs(){return M},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return ee},set onprocessorerror(ce){typeof ee=="function"&&H.removeEventListener("processorerror",ee),ee=typeof ce=="function"?ce:null,typeof ee=="function"&&H.addEventListener("processorerror",ee)},get parameters(){return K},get port(){return N.port2},addEventListener(...ce){return G.addEventListener(ce[0],ce[1],ce[2])},connect:o.bind(null,J),disconnect:m.bind(null,J),dispatchEvent(...ce){return G.dispatchEvent(ce[0])},removeEventListener(...ce){return G.removeEventListener(ce[0],ce[1],ce[2])}},Z=new Map;N.port1.addEventListener=(ce=>(...ye)=>{if(ye[0]==="message"){const Ne=typeof ye[1]=="function"?ye[1]:typeof ye[1]=="object"&&ye[1]!==null&&typeof ye[1].handleEvent=="function"?ye[1].handleEvent:null;if(Ne!==null){const Ee=Z.get(ye[1]);Ee!==void 0?ye[1]=Ee:(ye[1]=Ae=>{g(_.currentTime,_.sampleRate,()=>Ne(Ae))},Z.set(Ne,ye[1]))}}return ce.call(N.port1,ye[0],ye[1],ye[2])})(N.port1.addEventListener),N.port1.removeEventListener=(ce=>(...ye)=>{if(ye[0]==="message"){const Ne=Z.get(ye[1]);Ne!==void 0&&(Z.delete(ye[1]),ye[1]=Ne)}return ce.call(N.port1,ye[0],ye[1],ye[2])})(N.port1.removeEventListener);let Y=null;Object.defineProperty(N.port1,"onmessage",{get:()=>Y,set:ce=>{typeof Y=="function"&&N.port1.removeEventListener("message",Y),Y=typeof ce=="function"?ce:null,typeof Y=="function"&&(N.port1.addEventListener("message",Y),N.port1.start())}}),k.prototype.port=N.port1;let E=null;P0(_,H,k,C).then(ce=>E=ce);const de=pl(C.numberOfInputs,C.channelCount),_e=pl(C.numberOfOutputs,R),ae=k.parameterDescriptors===void 0?[]:k.parameterDescriptors.reduce((ce,{name:ye})=>({...ce,[ye]:new Float32Array(128)}),{});let fe=!0;const ke=()=>{C.numberOfOutputs>0&&G.disconnect(Q);for(let ce=0,ye=0;ce<C.numberOfOutputs;ce+=1){const Ne=re[ce];for(let Ee=0;Ee<R[ce];Ee+=1)Q.disconnect(Ne,ye+Ee,Ee);ye+=R[ce]}},oe=new Map;G.onaudioprocess=({inputBuffer:ce,outputBuffer:ye})=>{if(E!==null){const Ne=v(H);for(let Ee=0;Ee<W;Ee+=128){for(let Ae=0;Ae<C.numberOfInputs;Ae+=1)for(let Ie=0;Ie<C.channelCount;Ie+=1)fl(ce,de[Ae],Ie,Ie,Ee);k.parameterDescriptors!==void 0&&k.parameterDescriptors.forEach(({name:Ae},Ie)=>{fl(ce,ae,Ae,I+Ie,Ee)});for(let Ae=0;Ae<C.numberOfInputs;Ae+=1)for(let Ie=0;Ie<R[Ae];Ie+=1)_e[Ae][Ie].byteLength===0&&(_e[Ae][Ie]=new Float32Array(128));try{const Ae=de.map((Ze,wt)=>{if(Ne[wt].size>0)return oe.set(wt,W/128),Ze;const ln=oe.get(wt);return ln===void 0?[]:(Ze.every(xt=>xt.every(lt=>lt===0))&&(ln===1?oe.delete(wt):oe.set(wt,ln-1)),Ze)});fe=g(_.currentTime+Ee/_.sampleRate,_.sampleRate,()=>E.process(Ae,_e,ae));for(let Ze=0,wt=0;Ze<C.numberOfOutputs;Ze+=1){for(let Ut=0;Ut<R[Ze];Ut+=1)um(ye,_e[Ze],Ut,wt+Ut,Ee);wt+=R[Ze]}}catch(Ae){fe=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:Ae.colno,filename:Ae.filename,lineno:Ae.lineno,message:Ae.message}))}if(!fe){for(let Ae=0;Ae<C.numberOfInputs;Ae+=1){M[Ae].disconnect(F[Ae]);for(let Ie=0;Ie<C.channelCount;Ie+=1)F[Ee].disconnect(X,Ie,Ae*C.channelCount+Ie)}if(k.parameterDescriptors!==void 0){const Ae=k.parameterDescriptors.length;for(let Ie=0;Ie<Ae;Ie+=1){const Ze=D[Ie];Ze.disconnect(X,0,I+Ie),Ze.stop()}}X.disconnect(G),G.onaudioprocess=null,Re?ke():Et();break}}}};let Re=!1;const We=h(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),_t=()=>G.connect(We).connect(_.destination),Et=()=>{G.disconnect(We),We.disconnect()},wn=()=>{if(fe){Et(),C.numberOfOutputs>0&&G.connect(Q);for(let ce=0,ye=0;ce<C.numberOfOutputs;ce+=1){const Ne=re[ce];for(let Ee=0;Ee<R[ce];Ee+=1)Q.connect(Ne,ye+Ee,Ee);ye+=R[ce]}}Re=!0},In=()=>{fe&&(_t(),ke()),Re=!1};return _t(),w(H,wn,In)},dm=(o,e)=>{const s=o.createBiquadFilter();return Nt(s,e),ft(s,e,"Q"),ft(s,e,"detune"),ft(s,e,"frequency"),ft(s,e,"gain"),at(s,e,"type"),s},L0=(o,e)=>(s,r)=>{const a=s.createChannelMerger(r.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&e(s,a),Nt(a,r),a},j0=o=>{const e=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>e,set:s=>{if(s!==e)throw Mt()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:s=>{if(s!=="explicit")throw Mt()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:s=>{if(s!=="discrete")throw Mt()}})},Do=(o,e)=>{const s=o.createChannelSplitter(e.numberOfOutputs);return Nt(s,e),j0(s),s},V0=(o,e,s,r,a)=>(u,h)=>{if(u.createConstantSource===void 0)return s(u,h);const d=u.createConstantSource();return Nt(d,h),ft(d,h,"offset"),e(r,()=>r(u))||th(d),e(a,()=>a(u))||nh(d),o(u,d),d},Ai=(o,e)=>(o.connect=e.connect.bind(e),o.disconnect=e.disconnect.bind(e),o),z0=(o,e,s,r)=>(a,{offset:u,...h})=>{const d=a.createBuffer(1,2,44100),f=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=s(a,{...h,gain:u}),g=d.getChannelData(0);g[0]=1,g[1]=1,f.buffer=d,f.loop=!0;const v={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(x){m.channelCount=x},get channelCountMode(){return m.channelCountMode},set channelCountMode(x){m.channelCountMode=x},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(x){m.channelInterpretation=x},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return f.onended},set onended(x){f.onended=x},addEventListener(...x){return f.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return f.dispatchEvent(x[0])},removeEventListener(...x){return f.removeEventListener(x[0],x[1],x[2])},start(x=0){f.start.call(f,x)},stop(x=0){f.stop.call(f,x)}},w=()=>f.connect(m),_=()=>f.disconnect(m);return o(a,f),r(Ai(v,m),w,_)},q0=(o,e)=>(s,r)=>{const a=s.createConvolver();if(Nt(a,r),r.disableNormalization===a.normalize&&(a.normalize=!r.disableNormalization),at(a,r,"buffer"),r.channelCount>2||(e(a,"channelCount",u=>()=>u.call(a),u=>h=>{if(h>2)throw o();return u.call(a,h)}),r.channelCountMode==="max"))throw o();return e(a,"channelCountMode",u=>()=>u.call(a),u=>h=>{if(h==="max")throw o();return u.call(a,h)}),a},fm=(o,e)=>{const s=o.createDelay(e.maxDelayTime);return Nt(s,e),ft(s,e,"delayTime"),s},W0=o=>(e,s)=>{const r=e.createDynamicsCompressor();if(Nt(r,s),s.channelCount>2||s.channelCountMode==="max")throw o();return ft(r,s,"attack"),ft(r,s,"knee"),ft(r,s,"ratio"),ft(r,s,"release"),ft(r,s,"threshold"),r},an=(o,e)=>{const s=o.createGain();return Nt(s,e),ft(s,e,"gain"),s},B0=o=>(e,s,r)=>{if(e.createIIRFilter===void 0)return o(e,s,r);const a=e.createIIRFilter(r.feedforward,r.feedback);return Nt(a,r),a};function U0(o,e){const s=e[0]*e[0]+e[1]*e[1];return[(o[0]*e[0]+o[1]*e[1])/s,(o[1]*e[0]-o[0]*e[1])/s]}function $0(o,e){return[o[0]*e[0]-o[1]*e[1],o[0]*e[1]+o[1]*e[0]]}function Ip(o,e){let s=[0,0];for(let r=o.length-1;r>=0;r-=1)s=$0(s,e),s[0]+=o[r];return s}const Q0=(o,e,s,r)=>(a,u,{channelCount:h,channelCountMode:d,channelInterpretation:f,feedback:m,feedforward:g})=>{const v=hm(u,a.sampleRate),w=m instanceof Float64Array?m:new Float64Array(m),_=g instanceof Float64Array?g:new Float64Array(g),x=w.length,k=_.length,C=Math.min(x,k);if(x===0||x>20)throw r();if(w[0]===0)throw e();if(k===0||k>20)throw r();if(_[0]===0)throw e();if(w[0]!==1){for(let D=0;D<k;D+=1)_[D]/=w[0];for(let D=1;D<x;D+=1)w[D]/=w[0]}const R=s(a,v,h,h);R.channelCount=h,R.channelCountMode=d,R.channelInterpretation=f;const I=32,j=[],z=[],N=[];for(let D=0;D<h;D+=1){j.push(0);const X=new Float32Array(I),W=new Float32Array(I);X.fill(0),W.fill(0),z.push(X),N.push(W)}R.onaudioprocess=D=>{const X=D.inputBuffer,W=D.outputBuffer,G=X.numberOfChannels;for(let Q=0;Q<G;Q+=1){const re=X.getChannelData(Q),K=W.getChannelData(Q);j[Q]=cm(w,x,_,k,C,z[Q],N[Q],j[Q],I,re,K)}};const M=a.sampleRate/2;return Ai({get bufferSize(){return v},get channelCount(){return R.channelCount},set channelCount(D){R.channelCount=D},get channelCountMode(){return R.channelCountMode},set channelCountMode(D){R.channelCountMode=D},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(D){R.channelInterpretation=D},get context(){return R.context},get inputs(){return[R]},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},addEventListener(...D){return R.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return R.dispatchEvent(D[0])},getFrequencyResponse(D,X,W){if(D.length!==X.length||X.length!==W.length)throw o();const G=D.length;for(let Q=0;Q<G;Q+=1){const re=-Math.PI*(D[Q]/M),K=[Math.cos(re),Math.sin(re)],ne=Ip(_,K),ee=Ip(w,K),J=U0(ne,ee);X[Q]=Math.sqrt(J[0]*J[0]+J[1]*J[1]),W[Q]=Math.atan2(J[1],J[0])}},removeEventListener(...D){return R.removeEventListener(D[0],D[1],D[2])}},R)},H0=(o,e)=>o.createMediaElementSource(e.mediaElement),G0=(o,e)=>{const s=o.createMediaStreamDestination();return Nt(s,e),s.numberOfOutputs===1&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s},Y0=(o,{mediaStream:e})=>{const s=e.getAudioTracks();s.sort((u,h)=>u.id<h.id?-1:u.id>h.id?1:0);const r=s.slice(0,1),a=o.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(a,"mediaStream",{value:e}),a},X0=(o,e)=>(s,{mediaStreamTrack:r})=>{if(typeof s.createMediaStreamTrackSource=="function")return s.createMediaStreamTrackSource(r);const a=new MediaStream([r]),u=s.createMediaStreamSource(a);if(r.kind!=="audio")throw o();if(e(s))throw new TypeError;return u},K0=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,Z0=(o,e,s,r,a,u)=>(h,d)=>{const f=h.createOscillator();return Nt(f,d),ft(f,d,"detune"),ft(f,d,"frequency"),d.periodicWave!==void 0?f.setPeriodicWave(d.periodicWave):at(f,d,"type"),e(s,()=>s(h))||th(f),e(r,()=>r(h))||u(f,h),e(a,()=>a(h))||nh(f),o(h,f),f},J0=o=>(e,s)=>{const r=e.createPanner();return r.orientationX===void 0?o(e,s):(Nt(r,s),ft(r,s,"orientationX"),ft(r,s,"orientationY"),ft(r,s,"orientationZ"),ft(r,s,"positionX"),ft(r,s,"positionY"),ft(r,s,"positionZ"),at(r,s,"coneInnerAngle"),at(r,s,"coneOuterAngle"),at(r,s,"coneOuterGain"),at(r,s,"distanceModel"),at(r,s,"maxDistance"),at(r,s,"panningModel"),at(r,s,"refDistance"),at(r,s,"rolloffFactor"),r)},ew=(o,e,s,r,a,u,h,d,f,m)=>(g,{coneInnerAngle:v,coneOuterAngle:w,coneOuterGain:_,distanceModel:x,maxDistance:k,orientationX:C,orientationY:R,orientationZ:I,panningModel:j,positionX:z,positionY:N,positionZ:M,refDistance:F,rolloffFactor:D,...X})=>{const W=g.createPanner();if(X.channelCount>2||X.channelCountMode==="max")throw h();Nt(W,X);const G={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Q=s(g,{...G,channelInterpretation:"speakers",numberOfInputs:6}),re=r(g,{...X,gain:1}),K=r(g,{...G,gain:1}),ne=r(g,{...G,gain:0}),ee=r(g,{...G,gain:0}),J=r(g,{...G,gain:0}),H=r(g,{...G,gain:0}),Z=r(g,{...G,gain:0}),Y=a(g,256,6,1),E=u(g,{...G,curve:new Float32Array([1,1]),oversample:"none"});let q=[C,R,I],de=[z,N,M];const _e=new Float32Array(1);Y.onaudioprocess=({inputBuffer:oe})=>{const Re=[f(oe,_e,0),f(oe,_e,1),f(oe,_e,2)];Re.some((_t,Et)=>_t!==q[Et])&&(W.setOrientation(...Re),q=Re);const We=[f(oe,_e,3),f(oe,_e,4),f(oe,_e,5)];We.some((_t,Et)=>_t!==de[Et])&&(W.setPosition(...We),de=We)},Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const ae={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(oe){if(oe>2)throw h();re.channelCount=oe,W.channelCount=oe},get channelCountMode(){return W.channelCountMode},set channelCountMode(oe){if(oe==="max")throw h();re.channelCountMode=oe,W.channelCountMode=oe},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(oe){re.channelInterpretation=oe,W.channelInterpretation=oe},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(oe){W.coneInnerAngle=oe},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(oe){W.coneOuterAngle=oe},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(oe){if(oe<0||oe>1)throw e();W.coneOuterGain=oe},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(oe){W.distanceModel=oe},get inputs(){return[re]},get maxDistance(){return W.maxDistance},set maxDistance(oe){if(oe<0)throw new RangeError;W.maxDistance=oe},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return K.gain},get orientationY(){return ne.gain},get orientationZ(){return ee.gain},get panningModel(){return W.panningModel},set panningModel(oe){W.panningModel=oe},get positionX(){return J.gain},get positionY(){return H.gain},get positionZ(){return Z.gain},get refDistance(){return W.refDistance},set refDistance(oe){if(oe<0)throw new RangeError;W.refDistance=oe},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(oe){if(oe<0)throw new RangeError;W.rolloffFactor=oe},addEventListener(...oe){return re.addEventListener(oe[0],oe[1],oe[2])},dispatchEvent(...oe){return re.dispatchEvent(oe[0])},removeEventListener(...oe){return re.removeEventListener(oe[0],oe[1],oe[2])}};v!==ae.coneInnerAngle&&(ae.coneInnerAngle=v),w!==ae.coneOuterAngle&&(ae.coneOuterAngle=w),_!==ae.coneOuterGain&&(ae.coneOuterGain=_),x!==ae.distanceModel&&(ae.distanceModel=x),k!==ae.maxDistance&&(ae.maxDistance=k),C!==ae.orientationX.value&&(ae.orientationX.value=C),R!==ae.orientationY.value&&(ae.orientationY.value=R),I!==ae.orientationZ.value&&(ae.orientationZ.value=I),j!==ae.panningModel&&(ae.panningModel=j),z!==ae.positionX.value&&(ae.positionX.value=z),N!==ae.positionY.value&&(ae.positionY.value=N),M!==ae.positionZ.value&&(ae.positionZ.value=M),F!==ae.refDistance&&(ae.refDistance=F),D!==ae.rolloffFactor&&(ae.rolloffFactor=D),(q[0]!==1||q[1]!==0||q[2]!==0)&&W.setOrientation(...q),(de[0]!==0||de[1]!==0||de[2]!==0)&&W.setPosition(...de);const fe=()=>{re.connect(W),o(re,E,0,0),E.connect(K).connect(Q,0,0),E.connect(ne).connect(Q,0,1),E.connect(ee).connect(Q,0,2),E.connect(J).connect(Q,0,3),E.connect(H).connect(Q,0,4),E.connect(Z).connect(Q,0,5),Q.connect(Y).connect(g.destination)},ke=()=>{re.disconnect(W),d(re,E,0,0),E.disconnect(K),K.disconnect(Q),E.disconnect(ne),ne.disconnect(Q),E.disconnect(ee),ee.disconnect(Q),E.disconnect(J),J.disconnect(Q),E.disconnect(H),H.disconnect(Q),E.disconnect(Z),Z.disconnect(Q),Q.disconnect(Y),Y.disconnect(g.destination)};return m(Ai(ae,W),fe,ke)},tw=o=>(e,{disableNormalization:s,imag:r,real:a})=>{const u=r instanceof Float32Array?r:new Float32Array(r),h=a instanceof Float32Array?a:new Float32Array(a),d=e.createPeriodicWave(h,u,{disableNormalization:s});if(Array.from(r).length<2)throw o();return d},Mo=(o,e,s,r)=>o.createScriptProcessor(e,s,r),nw=(o,e)=>(s,r)=>{const a=r.channelCountMode;if(a==="clamped-max")throw e();if(s.createStereoPanner===void 0)return o(s,r);const u=s.createStereoPanner();return Nt(u,r),ft(u,r,"pan"),Object.defineProperty(u,"channelCountMode",{get:()=>a,set:h=>{if(h!==a)throw e()}}),u},sw=(o,e,s,r,a,u)=>{const d=new Float32Array([1,1]),f=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...m,oversample:"none"},v=(x,k,C,R)=>{const I=new Float32Array(16385),j=new Float32Array(16385);for(let X=0;X<16385;X+=1){const W=X/16384*f;I[X]=Math.cos(W),j[X]=Math.sin(W)}const z=s(x,{...m,gain:0}),N=r(x,{...g,curve:I}),M=r(x,{...g,curve:d}),F=s(x,{...m,gain:0}),D=r(x,{...g,curve:j});return{connectGraph(){k.connect(z),k.connect(M.inputs===void 0?M:M.inputs[0]),k.connect(F),M.connect(C),C.connect(N.inputs===void 0?N:N.inputs[0]),C.connect(D.inputs===void 0?D:D.inputs[0]),N.connect(z.gain),D.connect(F.gain),z.connect(R,0,0),F.connect(R,0,1)},disconnectGraph(){k.disconnect(z),k.disconnect(M.inputs===void 0?M:M.inputs[0]),k.disconnect(F),M.disconnect(C),C.disconnect(N.inputs===void 0?N:N.inputs[0]),C.disconnect(D.inputs===void 0?D:D.inputs[0]),N.disconnect(z.gain),D.disconnect(F.gain),z.disconnect(R,0,0),F.disconnect(R,0,1)}}},w=(x,k,C,R)=>{const I=new Float32Array(16385),j=new Float32Array(16385),z=new Float32Array(16385),N=new Float32Array(16385),M=Math.floor(16385/2);for(let J=0;J<16385;J+=1)if(J>M){const H=(J-M)/(16384-M)*f;I[J]=Math.cos(H),j[J]=Math.sin(H),z[J]=0,N[J]=1}else{const H=J/(16384-M)*f;I[J]=1,j[J]=0,z[J]=Math.cos(H),N[J]=Math.sin(H)}const F=e(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),D=s(x,{...m,gain:0}),X=r(x,{...g,curve:I}),W=s(x,{...m,gain:0}),G=r(x,{...g,curve:j}),Q=r(x,{...g,curve:d}),re=s(x,{...m,gain:0}),K=r(x,{...g,curve:z}),ne=s(x,{...m,gain:0}),ee=r(x,{...g,curve:N});return{connectGraph(){k.connect(F),k.connect(Q.inputs===void 0?Q:Q.inputs[0]),F.connect(D,0),F.connect(W,0),F.connect(re,1),F.connect(ne,1),Q.connect(C),C.connect(X.inputs===void 0?X:X.inputs[0]),C.connect(G.inputs===void 0?G:G.inputs[0]),C.connect(K.inputs===void 0?K:K.inputs[0]),C.connect(ee.inputs===void 0?ee:ee.inputs[0]),X.connect(D.gain),G.connect(W.gain),K.connect(re.gain),ee.connect(ne.gain),D.connect(R,0,0),re.connect(R,0,0),W.connect(R,0,1),ne.connect(R,0,1)},disconnectGraph(){k.disconnect(F),k.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),F.disconnect(D,0),F.disconnect(W,0),F.disconnect(re,1),F.disconnect(ne,1),Q.disconnect(C),C.disconnect(X.inputs===void 0?X:X.inputs[0]),C.disconnect(G.inputs===void 0?G:G.inputs[0]),C.disconnect(K.inputs===void 0?K:K.inputs[0]),C.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),X.disconnect(D.gain),G.disconnect(W.gain),K.disconnect(re.gain),ee.disconnect(ne.gain),D.disconnect(R,0,0),re.disconnect(R,0,0),W.disconnect(R,0,1),ne.disconnect(R,0,1)}}},_=(x,k,C,R,I)=>{if(k===1)return v(x,C,R,I);if(k===2)return w(x,C,R,I);throw a()};return(x,{channelCount:k,channelCountMode:C,pan:R,...I})=>{if(C==="max")throw a();const j=o(x,{...I,channelCount:1,channelCountMode:C,numberOfInputs:2}),z=s(x,{...I,channelCount:k,channelCountMode:C,gain:1}),N=s(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:R});let{connectGraph:M,disconnectGraph:F}=_(x,k,z,N,j);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const D={get bufferSize(){},get channelCount(){return z.channelCount},set channelCount(Q){z.channelCount!==Q&&(X&&F(),{connectGraph:M,disconnectGraph:F}=_(x,Q,z,N,j),X&&M()),z.channelCount=Q},get channelCountMode(){return z.channelCountMode},set channelCountMode(Q){if(Q==="clamped-max"||Q==="max")throw a();z.channelCountMode=Q},get channelInterpretation(){return z.channelInterpretation},set channelInterpretation(Q){z.channelInterpretation=Q},get context(){return z.context},get inputs(){return[z]},get numberOfInputs(){return z.numberOfInputs},get numberOfOutputs(){return z.numberOfOutputs},get pan(){return N.gain},addEventListener(...Q){return z.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return z.dispatchEvent(Q[0])},removeEventListener(...Q){return z.removeEventListener(Q[0],Q[1],Q[2])}};let X=!1;const W=()=>{M(),X=!0},G=()=>{F(),X=!1};return u(Ai(D,j),W,G)}},rw=(o,e,s,r,a,u,h)=>(d,f)=>{const m=d.createWaveShaper();if(u!==null&&u.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return s(d,f);Nt(m,f);const g=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(g!==null&&g.length<2)throw e();at(m,{curve:g},"curve"),at(m,f,"oversample");let v=null,w=!1;return h(m,"curve",k=>()=>k.call(m),k=>C=>(k.call(m,C),w&&(r(C)&&v===null?v=o(d,m):!r(C)&&v!==null&&(v(),v=null)),C)),a(m,()=>{w=!0,r(m.curve)&&(v=o(d,m))},()=>{w=!1,v!==null&&(v(),v=null)})},iw=(o,e,s,r,a)=>(u,{curve:h,oversample:d,...f})=>{const m=u.createWaveShaper(),g=u.createWaveShaper();Nt(m,f),Nt(g,f);const v=s(u,{...f,gain:1}),w=s(u,{...f,gain:-1}),_=s(u,{...f,gain:1}),x=s(u,{...f,gain:-1});let k=null,C=!1,R=null;const I={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(N){v.channelCount=N,w.channelCount=N,m.channelCount=N,_.channelCount=N,g.channelCount=N,x.channelCount=N},get channelCountMode(){return m.channelCountMode},set channelCountMode(N){v.channelCountMode=N,w.channelCountMode=N,m.channelCountMode=N,_.channelCountMode=N,g.channelCountMode=N,x.channelCountMode=N},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(N){v.channelInterpretation=N,w.channelInterpretation=N,m.channelInterpretation=N,_.channelInterpretation=N,g.channelInterpretation=N,x.channelInterpretation=N},get context(){return m.context},get curve(){return R},set curve(N){if(N!==null&&N.length<2)throw e();if(N===null)m.curve=N,g.curve=N;else{const M=N.length,F=new Float32Array(M+2-M%2),D=new Float32Array(M+2-M%2);F[0]=N[0],D[0]=-N[M-1];const X=Math.ceil((M+1)/2),W=(M+1)/2-1;for(let G=1;G<X;G+=1){const Q=G/X*W,re=Math.floor(Q),K=Math.ceil(Q);F[G]=re===K?N[re]:(1-(Q-re))*N[re]+(1-(K-Q))*N[K],D[G]=re===K?-N[M-1-re]:-((1-(Q-re))*N[M-1-re])-(1-(K-Q))*N[M-1-K]}F[X]=M%2===1?N[X-1]:(N[X-2]+N[X-1])/2,m.curve=F,g.curve=D}R=N,C&&(r(R)&&k===null?k=o(u,v):k!==null&&(k(),k=null))},get inputs(){return[v]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(N){m.oversample=N,g.oversample=N},addEventListener(...N){return v.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return v.dispatchEvent(N[0])},removeEventListener(...N){return v.removeEventListener(N[0],N[1],N[2])}};h!==null&&(I.curve=h instanceof Float32Array?h:new Float32Array(h)),d!==I.oversample&&(I.oversample=d);const j=()=>{v.connect(m).connect(_),v.connect(w).connect(g).connect(x).connect(_),C=!0,r(R)&&(k=o(u,v))},z=()=>{v.disconnect(m),m.disconnect(_),v.disconnect(w),w.disconnect(g),g.disconnect(x),x.disconnect(_),C=!1,k!==null&&(k(),k=null)};return a(Ai(I,_),j,z)},Kt=()=>new DOMException("","NotSupportedError"),ow={numberOfChannels:1},aw=(o,e,s,r,a)=>class extends o{constructor(h,d,f){let m;if(typeof h=="number"&&d!==void 0&&f!==void 0)m={length:d,numberOfChannels:h,sampleRate:f};else if(typeof h=="object")m=h;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:v,sampleRate:w}={...ow,...m},_=r(v,g,w);e(ko,()=>ko(_))||_.addEventListener("statechange",(()=>{let x=0;const k=C=>{this._state==="running"&&(x>0?(_.removeEventListener("statechange",k),C.stopImmediatePropagation(),this._waitForThePromiseToSettle(C)):x+=1)};return k})()),super(_,v),this._length=g,this._nativeOfflineAudioContext=_,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(s()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,rm(this)}))}_waitForThePromiseToSettle(h){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(h):setTimeout(()=>this._waitForThePromiseToSettle(h))}},lw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},uw=(o,e,s,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...lw,...m},w=s(g,v),_=u(g),x=_?r():null,k=f.sampleRate/2;super(f,!1,w,x),this._detune=e(this,_,w.detune,153600,-153600),this._frequency=e(this,_,w.frequency,k,-k),this._nativeOscillatorNode=w,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeOscillatorNode.onended=m;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===m?f:g}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){Si(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),Rs(this)&&Ro(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},cw=(o,e,s,r,a)=>()=>{const u=new WeakMap;let h=null,d=null,f=null;const m=async(g,v)=>{let w=s(g);const _=Bt(w,v);if(!_){const x={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,detune:w.detune.value,frequency:w.frequency.value,periodicWave:h===null?void 0:h,type:w.type};w=e(v,x),d!==null&&w.start(d),f!==null&&w.stop(f)}return u.set(v,w),_?(await o(v,g.detune,w.detune),await o(v,g.frequency,w.frequency)):(await r(v,g.detune,w.detune),await r(v,g.frequency,w.frequency)),await a(g,v,w),w};return{set periodicWave(g){h=g},set start(g){d=g},set stop(g){f=g},render(g,v){const w=u.get(v);return w!==void 0?Promise.resolve(w):m(g,v)}}},hw={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},dw=(o,e,s,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...hw,...m},w=s(g,v),_=u(g),x=_?r():null;super(f,!1,w,x),this._nativePannerNode=w,this._orientationX=e(this,_,w.orientationX,Gt,rn),this._orientationY=e(this,_,w.orientationY,Gt,rn),this._orientationZ=e(this,_,w.orientationZ,Gt,rn),this._positionX=e(this,_,w.positionX,Gt,rn),this._positionY=e(this,_,w.positionY,Gt,rn),this._positionZ=e(this,_,w.positionZ,Gt,rn),h(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},fw=(o,e,s,r,a,u,h,d,f,m)=>()=>{const g=new WeakMap;let v=null;const w=async(_,x)=>{let k=null,C=u(_);const R={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},I={...R,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},j=Bt(C,x);if("bufferSize"in C)k=r(x,{...R,gain:1});else if(!j){const z={...I,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=a(x,z)}if(g.set(x,k===null?C:k),k!==null){if(v===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const G=new h(6,_.context.length,x.sampleRate),Q=e(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});Q.connect(G.destination),v=(async()=>{const re=await Promise.all([_.orientationX,_.orientationY,_.orientationZ,_.positionX,_.positionY,_.positionZ].map(async(K,ne)=>{const ee=s(G,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ne===0?1:0});return await d(G,K,ee.offset),ee}));for(let K=0;K<6;K+=1)re[K].connect(Q,0,K),re[K].start(0);return m(G)})()}const z=await v,N=r(x,{...R,gain:1});await f(_,x,N);const M=[];for(let G=0;G<z.numberOfChannels;G+=1)M.push(z.getChannelData(G));let F=[M[0][0],M[1][0],M[2][0]],D=[M[3][0],M[4][0],M[5][0]],X=r(x,{...R,gain:1}),W=a(x,{...I,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:D[0],positionY:D[1],positionZ:D[2]});N.connect(X).connect(W.inputs[0]),W.connect(k);for(let G=128;G<z.length;G+=128){const Q=[M[0][G],M[1][G],M[2][G]],re=[M[3][G],M[4][G],M[5][G]];if(Q.some((K,ne)=>K!==F[ne])||re.some((K,ne)=>K!==D[ne])){F=Q,D=re;const K=G/x.sampleRate;X.gain.setValueAtTime(0,K),X=r(x,{...R,gain:0}),W=a(x,{...I,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:D[0],positionY:D[1],positionZ:D[2]}),X.gain.setValueAtTime(1,K),N.connect(X).connect(W.inputs[0]),W.connect(k)}}return k}return j?(await o(x,_.orientationX,C.orientationX),await o(x,_.orientationY,C.orientationY),await o(x,_.orientationZ,C.orientationZ),await o(x,_.positionX,C.positionX),await o(x,_.positionY,C.positionY),await o(x,_.positionZ,C.positionZ)):(await d(x,_.orientationX,C.orientationX),await d(x,_.orientationY,C.orientationY),await d(x,_.orientationZ,C.orientationZ),await d(x,_.positionX,C.positionX),await d(x,_.positionY,C.positionY),await d(x,_.positionZ,C.positionZ)),Ri(C)?await f(_,x,C.inputs[0]):await f(_,x,C),C};return{render(_,x){const k=g.get(x);return k!==void 0?Promise.resolve(k):w(_,x)}}},pw={disableNormalization:!1},mw=(o,e,s,r)=>class pm{constructor(u,h){const d=e(u),f=r({...pw,...h}),m=o(d,f);return s.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===pm.prototype||s.has(u)}},gw=(o,e)=>(s,r,a)=>(o(r).replay(a),e(r,s,a)),vw=(o,e,s)=>async(r,a,u)=>{const h=o(r);await Promise.all(h.activeInputs.map((d,f)=>Array.from(d).map(async([m,g])=>{const w=await e(m).render(m,a),_=r.context.destination;!s(m)&&(r!==_||!s(r))&&w.connect(u,g,f)})).reduce((d,f)=>[...d,...f],[]))},yw=(o,e,s)=>async(r,a,u)=>{const h=e(r);await Promise.all(Array.from(h.activeInputs).map(async([d,f])=>{const g=await o(d).render(d,a);s(d)||g.connect(u,f)}))},_w=(o,e,s,r)=>a=>o(ko,()=>ko(a))?Promise.resolve(o(r,r)).then(u=>{if(!u){const h=s(a,512,0,1);a.oncomplete=()=>{h.onaudioprocess=null,h.disconnect()},h.onaudioprocess=()=>a.currentTime,h.connect(a.destination)}return a.startRendering()}):new Promise(u=>{const h=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{h.disconnect(),u(d.renderedBuffer)},h.connect(a.destination),a.startRendering()}),ww=o=>(e,s)=>{o.set(e,s)},xw=o=>(e,s)=>o.set(e,s),kw=(o,e,s,r,a,u,h,d)=>(f,m)=>s(f).render(f,m).then(()=>Promise.all(Array.from(r(m)).map(g=>s(g).render(g,m)))).then(()=>a(m)).then(g=>(typeof g.copyFromChannel!="function"?(h(g),Zc(g)):e(u,()=>u(g))||d(g),o.add(g),g)),Cw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Tw=(o,e,s,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...Cw,...f},v=s(m,g),w=u(m),_=w?r():null;super(d,!1,v,_),this._pan=e(this,w,v.pan)}get pan(){return this._pan}},Sw=(o,e,s,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=s(d);const g=Bt(m,f);if(!g){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=e(f,v)}return u.set(f,m),g?await o(f,d.pan,m.pan):await r(f,d.pan,m.pan),Ri(m)?await a(d,f,m.inputs[0]):await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},bw=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},Nw=(o,e)=>async()=>{if(o===null)return!0;if(e===null)return!1;const s=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),a=URL.createObjectURL(s);let u=!1,h=!1;try{await r.audioWorklet.addModule(a);const d=new o(r,"a",{numberOfOutputs:0}),f=r.createOscillator();d.port.onmessage=()=>u=!0,d.onprocessorerror=()=>h=!0,f.connect(d),f.start(0),await r.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(a)}return u&&!h},Ew=(o,e)=>()=>{if(e===null)return Promise.resolve(!1);const s=new e(1,1,44100),r=o(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{s.oncomplete=()=>{r.disconnect(),a(s.currentTime!==0)},s.startRendering()})},Rw=()=>new DOMException("","UnknownError"),Aw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ow=(o,e,s,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...Aw,...m},w=s(g,v),x=u(g)?r():null;super(f,!0,w,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=w,h(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},Dw=(o,e,s)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Bt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=o(h,m)}return r.set(h,d),Ri(d)?await s(u,h,d.inputs[0]):await s(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},Mw=()=>typeof window>"u"?null:window,Iw=(o,e)=>s=>{s.copyFromChannel=(r,a,u=0)=>{const h=o(u),d=o(a);if(d>=s.numberOfChannels)throw e();const f=s.length,m=s.getChannelData(d),g=r.length;for(let v=h<0?-h:0;v+h<f&&v<g;v+=1)r[v]=m[v+h]},s.copyToChannel=(r,a,u=0)=>{const h=o(u),d=o(a);if(d>=s.numberOfChannels)throw e();const f=s.length,m=s.getChannelData(d),g=r.length;for(let v=h<0?-h:0;v+h<f&&v<g;v+=1)m[v+h]=r[v]}},Pw=o=>e=>{e.copyFromChannel=(s=>(r,a,u=0)=>{const h=o(u),d=o(a);if(h<e.length)return s.call(e,r,d,h)})(e.copyFromChannel),e.copyToChannel=(s=>(r,a,u=0)=>{const h=o(u),d=o(a);if(h<e.length)return s.call(e,r,d,h)})(e.copyToChannel)},Fw=o=>(e,s)=>{const r=s.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),o(e,"buffer",a=>()=>{const u=a.call(e);return u===r?null:u},a=>u=>a.call(e,u===null?r:u))},Lw=(o,e)=>(s,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const a=s.createBufferSource();e(r,()=>{const d=r.numberOfInputs;for(let f=0;f<d;f+=1)a.connect(r,0,f)},()=>a.disconnect(r))},mm=(o,e,s)=>o.copyFromChannel===void 0?o.getChannelData(s)[0]:(o.copyFromChannel(e,s),e[0]),gm=o=>{if(o===null)return!1;const e=o.length;return e%2!==0?o[Math.floor(e/2)]!==0:o[e/2-1]+o[e/2]!==0},Io=(o,e,s,r)=>{let a=o;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:u,set:h}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(o,e,{get:s(u),set:r(h)})},jw=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),Vw=o=>({...o,channelCount:o.numberOfOutputs}),zw=o=>{const{imag:e,real:s}=o;return e===void 0?s===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(s,()=>0),real:s}:s===void 0?{...o,imag:e,real:Array.from(e,()=>0)}:{...o,imag:e,real:s}},vm=(o,e,s)=>{try{o.setValueAtTime(e,s)}catch(r){if(r.code!==9)throw r;vm(o,e,s+1e-7)}},qw=o=>{const e=o.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Ww=o=>{const e=o.createBufferSource(),s=o.createBuffer(1,1,44100);e.buffer=s;try{e.start(0,1)}catch{return!1}return!0},Bw=o=>{const e=o.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},sh=o=>{const e=o.createOscillator();try{e.start(-1)}catch(s){return s instanceof RangeError}return!1},ym=o=>{const e=o.createBuffer(1,1,44100),s=o.createBufferSource();s.buffer=e,s.start(),s.stop();try{return s.stop(),!0}catch{return!1}},rh=o=>{const e=o.createOscillator();try{e.stop(-1)}catch(s){return s instanceof RangeError}return!1},Uw=o=>{const{port1:e,port2:s}=new MessageChannel;try{e.postMessage(o)}finally{e.close(),s.close()}},$w=o=>{o.start=(e=>(s=0,r=0,a)=>{const u=o.buffer,h=u===null?r:Math.min(u.duration,r);u!==null&&h>u.duration-.5/o.context.sampleRate?e.call(o,s,0,0):e.call(o,s,h,a)})(o.start)},_m=(o,e)=>{const s=e.createGain();o.connect(s);const r=(a=>()=>{a.call(o,s),o.removeEventListener("ended",r)})(o.disconnect);o.addEventListener("ended",r),Ai(o,s),o.stop=(a=>{let u=!1;return(h=0)=>{if(u)try{a.call(o,h)}catch{s.gain.setValueAtTime(0,h)}else a.call(o,h),u=!0}})(o.stop)},Oi=(o,e)=>s=>{const r={value:o};return Object.defineProperties(s,{currentTarget:r,target:r}),typeof e=="function"?e.call(o,s):e.handleEvent.call(o,s)},Qw=dy(Wr),Hw=yy(Wr),Gw=A_(bl),wm=new WeakMap,Yw=G_(wm),Yn=o_(new Map,new WeakMap),is=Mw(),xm=T0(Yn,as),ih=H_(Yt),Lt=vw(Yt,ih,Fr),Xw=Cy(xm,st,Lt),Ke=K_(Sl),Os=K0(is),He=p0(Os),km=new WeakMap,Cm=z_(Oi),Po=E0(is),oh=c0(Po),ah=h0(is),Tm=d0(is),Co=A0(is),yt=Gy(fy(Kp),vy(Qw,Hw,cl,Gw,hl,Yt,Yw,Eo,st,Wr,Rs,Fr,rl),Yn,i0(qc,hl,Yt,st,xo,Rs),as,Nl,Kt,b_(cl,qc,Yt,st,xo,Ke,Rs,He),M_(km,Yt,Qn),Cm,Ke,oh,ah,Tm,He,Co),Kw=ky(yt,Xw,as,xm,Ke,He),lh=new WeakSet,Pp=S0(is),Sm=__(new Uint32Array(1)),uh=Iw(Sm,as),ch=Pw(Sm),bm=Sy(lh,Yn,Kt,Pp,Os,bw(Pp),uh,ch),El=_y(an),Nm=yw(ih,Ao,Fr),ls=f_(Nm),Di=N0(El,Yn,qw,Ww,Bw,sh,ym,rh,$w,Fw(Io),_m),us=gw(Y_(Ao),Nm),Zw=Ey(ls,Di,st,us,Lt),Xn=Yy(py(Zp),km,Kc,Xy,oy,ay,ly,uy,cy,jc,Yp,Po,vm),Jw=Ny(yt,Zw,Xn,Mt,Di,Ke,He,Oi),e1=Ly(yt,jy,as,Mt,R0(an,Io),Ke,He,Lt),t1=i_(ls,dm,st,us,Lt),Br=xw(wm),n1=r_(yt,Xn,t1,Nl,dm,Ke,He,Br),lr=k0(Wr,ah),s1=Lw(Mt,lr),ur=L0(Po,s1),r1=u_(ur,st,Lt),i1=l_(yt,r1,ur,Ke,He),o1=d_(Do,st,Lt),a1=h_(yt,o1,Do,Ke,He,Vw),l1=z0(El,Di,an,lr),Mi=V0(El,Yn,l1,sh,rh),u1=y_(ls,Mi,st,us,Lt),c1=v_(yt,Xn,u1,Mi,Ke,He,Oi),Em=q0(Kt,Io),h1=k_(Em,st,Lt),d1=x_(yt,h1,Em,Ke,He,Br),f1=R_(ls,fm,st,us,Lt),p1=E_(yt,Xn,f1,fm,Ke,He,Br),Rm=W0(Kt),m1=L_(ls,Rm,st,us,Lt),g1=F_(yt,Xn,m1,Rm,Kt,Ke,He,Br),v1=$_(ls,an,st,us,Lt),y1=U_(yt,Xn,v1,an,Ke,He),_1=Q0(Nl,Mt,Mo,Kt),Rl=_w(Yn,an,Mo,Ew(an,Os)),w1=r0(Di,st,Os,Lt,Rl),x1=B0(_1),k1=n0(yt,x1,w1,Ke,He,Br),C1=Vy(Xn,ur,Mi,Mo,Kt,mm,He,Io),Am=new WeakMap,T1=x0(e1,C1,Cm,He,Am,Oi),Om=Z0(El,Yn,sh,ym,rh,_m),S1=cw(ls,Om,st,us,Lt),b1=uw(yt,Xn,Om,S1,Ke,He,Oi),Dm=m_(Di),N1=iw(Dm,Mt,an,gm,lr),Al=rw(Dm,Mt,N1,gm,lr,Po,Io),E1=ew(cl,Mt,ur,an,Mo,Al,Kt,hl,mm,lr),Mm=J0(E1),R1=fw(ls,ur,Mi,an,Mm,st,Os,us,Lt,Rl),A1=dw(yt,Xn,Mm,R1,Ke,He,Br),O1=tw(as),D1=mw(O1,Ke,new WeakSet,zw),M1=sw(ur,Do,an,Al,Kt,lr),Im=nw(M1,Kt),I1=Sw(ls,Im,st,us,Lt),P1=Tw(yt,Xn,Im,I1,Ke,He),F1=Dw(Al,st,Lt),L1=Ow(yt,Mt,Al,F1,Ke,He,Br),Pm=m0(is),hh=q_(is),Fm=new WeakMap,j1=Z_(Fm,Os),V1=Pm?gy(Yn,Kt,V_(is),hh,W_(hy),Ke,j1,He,Co,new WeakMap,new WeakMap,Nw(Co,Os),is):void 0,z1=f0(oh,He),q1=S_(lh,Yn,T_,j_,new WeakSet,Ke,z1,ll,ko,uh,ch),Lm=n_(V1,Kw,bm,Jw,n1,i1,a1,c1,d1,q1,p1,g1,y1,k1,T1,b1,A1,D1,P1,L1),W1=g0(yt,H0,Ke,He),B1=y0(yt,G0,Ke,He),U1=_0(yt,Y0,Ke,He),$1=X0(Mt,He),Q1=w0(yt,$1,Ke),H1=Fy(Lm,Mt,Kt,Rw,W1,B1,U1,Q1,Po),dh=J_(Am),G1=wy(dh),jm=p_(as),Y1=O_(dh),Vm=I_(as),zm=new WeakMap,X1=Q_(zm,Qn),K1=F0(jm,as,Mt,ur,Do,Mi,an,Mo,Kt,Vm,hh,X1,lr),Z1=D0(Mt,K1,an,Kt,lr),J1=t_(ls,jm,Di,ur,Do,Mi,an,Y1,Vm,hh,st,Co,Os,us,Lt,Rl),ex=X_(Fm),tx=ww(zm),Fp=Pm?Zy(G1,yt,Xn,J1,Z1,Yt,ex,Ke,He,Co,jw,tx,Uw,Oi):void 0,nx=C_(Kt,Os),sx=kw(lh,Yn,ih,dh,Rl,ll,uh,ch),rx=aw(Lm,Yn,Mt,nx,sx),ix=o0(Sl,oh),ox=a0(Xc,ah),ax=l0(Kc,Tm),lx=u0(Sl,He);function Dn(o){return o===void 0}function Me(o){return o!==void 0}function ux(o){return typeof o=="function"}function Hn(o){return typeof o=="number"}function Dr(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function qm(o){return typeof o=="boolean"}function _n(o){return Array.isArray(o)}function As(o){return typeof o=="string"}function nl(o){return As(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function Se(o,e){if(!o)throw new Error(e)}function yn(o,e,s=1/0){if(!(e<=o&&o<=s))throw new RangeError(`Value must be within [${e}, ${s}], got: ${o}`)}function Wm(o){!o.isOffline&&o.state!=="running"&&Fo('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Bm=!1,Lp=!1;function jp(o){Bm=o}function cx(o){Dn(o)&&Bm&&!Lp&&(Lp=!0,Fo("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Um=console;function hx(...o){Um.log(...o)}function Fo(...o){Um.warn(...o)}function dx(o){return new H1(o)}function fx(o,e,s){return new rx(o,e,s)}const vn=typeof self=="object"?self:null,px=vn&&(vn.hasOwnProperty("AudioContext")||vn.hasOwnProperty("webkitAudioContext"));function mx(o,e,s){return Se(Me(Fp),"AudioWorkletNode only works in a secure context (https or localhost)"),new(o instanceof(vn==null?void 0:vn.BaseAudioContext)?vn==null?void 0:vn.AudioWorkletNode:Fp)(o,e,s)}function Kn(o,e,s,r){var a=arguments.length,u=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,s):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,e,s,r);else for(var d=o.length-1;d>=0;d--)(h=o[d])&&(u=(a<3?h(u):a>3?h(e,s,u):h(e,s))||u);return a>3&&u&&Object.defineProperty(e,s,u),u}function vt(o,e,s,r){function a(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function d(g){try{m(r.next(g))}catch(v){h(v)}}function f(g){try{m(r.throw(g))}catch(v){h(v)}}function m(g){g.done?u(g.value):a(g.value).then(d,f)}m((r=r.apply(o,e||[])).next())})}class gx{constructor(e,s,r,a){this._callback=e,this._type=s,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),s=URL.createObjectURL(e),r=new Worker(s);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var s;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((s=this._worker)===null||s===void 0||s.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Lr(o){return ax(o)}function ir(o){return ox(o)}function il(o){return lx(o)}function yi(o){return ix(o)}function vx(o){return o instanceof bm}function yx(o,e){return o==="value"||Lr(e)||ir(e)||vx(e)}function Mr(o,...e){if(!e.length)return o;const s=e.shift();if(Dr(o)&&Dr(s))for(const r in s)yx(r,s[r])?o[r]=s[r]:Dr(s[r])?(o[r]||Object.assign(o,{[r]:{}}),Mr(o[r],s[r])):Object.assign(o,{[r]:s[r]});return Mr(o,...e)}function _x(o,e){return o.length===e.length&&o.every((s,r)=>e[r]===s)}function ge(o,e,s=[],r){const a={},u=Array.from(e);if(Dr(u[0])&&r&&!Reflect.has(u[0],r)&&(Object.keys(u[0]).some(d=>Reflect.has(o,d))||(Mr(a,{[r]:u[0]}),s.splice(s.indexOf(r),1),u.shift())),u.length===1&&Dr(u[0]))Mr(a,u[0]);else for(let h=0;h<s.length;h++)Me(u[h])&&(a[s[h]]=u[h]);return Mr(o,a)}function wx(o){return o.constructor.getDefaults()}function Ir(o,e){return Dn(o)?e:o}function Qc(o,e){return e.forEach(s=>{Reflect.has(o,s)&&delete o[s]}),o}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Ds{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||vn&&this.toString()===vn.TONE_DEBUG_CLASS)&&hx(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Ds.version=Gp;const fh=1e-6;function bi(o,e){return o>e+fh}function Hc(o,e){return bi(o,e)||Bn(o,e)}function ml(o,e){return o+fh<e}function Bn(o,e){return Math.abs(o-e)<fh}function xx(o,e,s){return Math.max(Math.min(o,s),e)}class Mn extends Ds{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ge(Mn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Se(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const s=this._timeline[this.length-1];Se(Hc(e.time,s.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const s=this._search(e.time);this._timeline.splice(s+1,0,e)}if(this.length>this.memory){const s=this.length-this.memory;this._timeline.splice(0,s)}return this}remove(e){const s=this._timeline.indexOf(e);return s!==-1&&this._timeline.splice(s,1),this}get(e,s="time"){const r=this._search(e,s);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,s="time"){const r=this._search(e,s);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const s=this._timeline.length;if(s>0&&this._timeline[s-1].time<e)return this._timeline[s-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let s=this._search(e);if(s>=0)if(Bn(this._timeline[s].time,e)){for(let r=s;r>=0&&Bn(this._timeline[r].time,e);r--)s=r;this._timeline=this._timeline.slice(0,s)}else this._timeline=this._timeline.slice(0,s+1);else this._timeline=[]}else this._timeline.length===1&&Hc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const s=this._search(e);return s>=0&&(this._timeline=this._timeline.slice(s+1)),this}previousEvent(e){const s=this._timeline.indexOf(e);return s>0?this._timeline[s-1]:null}_search(e,s="time"){if(this._timeline.length===0)return-1;let r=0;const a=this._timeline.length;let u=a;if(a>0&&this._timeline[a-1][s]<=e)return a-1;for(;r<u;){let h=Math.floor(r+(u-r)/2);const d=this._timeline[h],f=this._timeline[h+1];if(Bn(d[s],e)){for(let m=h;m<this._timeline.length;m++){const g=this._timeline[m];if(Bn(g[s],e))h=m;else break}return h}else{if(ml(d[s],e)&&bi(f[s],e))return h;bi(d[s],e)?u=h:r=h+1}}return-1}_iterate(e,s=0,r=this._timeline.length-1){this._timeline.slice(s,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,s){const r=this._search(e);return r!==-1&&this._iterate(s,0,r),this}forEachAfter(e,s){const r=this._search(e);return this._iterate(s,r+1),this}forEachBetween(e,s,r){let a=this._search(e),u=this._search(s);return a!==-1&&u!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[u].time===s&&(u-=1),this._iterate(r,a,u)):a===-1&&this._iterate(r,0,u),this}forEachFrom(e,s){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(s,r+1),this}forEachAtTime(e,s){const r=this._search(e);if(r!==-1&&Bn(this._timeline[r].time,e)){let a=r;for(let u=r;u>=0&&Bn(this._timeline[u].time,e);u--)a=u;this._iterate(u=>{s(u)},a,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const $m=[];function Ol(o){$m.push(o)}function kx(o){$m.forEach(e=>e(o))}const Qm=[];function Dl(o){Qm.push(o)}function Cx(o){Qm.forEach(e=>e(o))}class Lo extends Ds{constructor(){super(...arguments),this.name="Emitter"}on(e,s){return e.split(/\W+/).forEach(a=>{Dn(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(s)}),this}once(e,s){const r=(...a)=>{s(...a),this.off(e,r)};return this.on(e,r),this}off(e,s){return e.split(/\W+/).forEach(a=>{if(Dn(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(Dn(s))this._events[a]=[];else{const u=this._events[a];for(let h=u.length-1;h>=0;h--)u[h]===s&&u.splice(h,1)}}),this}emit(e,...s){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let a=0,u=r.length;a<u;a++)r[a].apply(this,s)}return this}static mixin(e){["on","once","off","emit"].forEach(s=>{const r=Object.getOwnPropertyDescriptor(Lo.prototype,s);Object.defineProperty(e.prototype,s,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class Hm extends Lo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class jo extends Hm{constructor(){var e,s;super(),this.name="Context",this._constants=new Map,this._timeouts=new Mn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=ge(jo.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=dx({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new gx(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((s=arguments[0])===null||s===void 0)&&s.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(kx(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,s,r){return this._context.createBuffer(e,s,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,s){return this._context.createIIRFilter(e,s)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,s,r){return this._context.createPeriodicWave(e,s,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Se(yi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Se(yi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Se(yi(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Se(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Se(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Se(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Se(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,s){return mx(this.rawContext,e,s)}addAudioWorkletModule(e){return vt(this,void 0,void 0,function*(){Se(Me(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return vt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return yi(this._context)?this._context.resume():Promise.resolve()}close(){return vt(this,void 0,void 0,function*(){yi(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Cx(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const s=this._context.createBuffer(1,128,this._context.sampleRate),r=s.getChannelData(0);for(let u=0;u<r.length;u++)r[u]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=s,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,s=>{s.callback(),this._timeouts.remove(s)})}setTimeout(e,s){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+s}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(s=>{s.id===e&&this._timeouts.remove(s)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,s){const r=++this._timeoutIds,a=()=>{const u=this.now();this._timeouts.add({callback:()=>{e(),a()},id:r,time:u+s})};return a(),r}}class Tx extends Hm{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,s,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,s){return{}}createPanner(){return{}}createPeriodicWave(e,s,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,s){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return vt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,s){return 0}clearTimeout(e){return this}setInterval(e,s){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Ve(o,e){_n(e)?e.forEach(s=>Ve(o,s)):Object.defineProperty(o,e,{enumerable:!0,writable:!1})}function ph(o,e){_n(e)?e.forEach(s=>ph(o,s)):Object.defineProperty(o,e,{writable:!0})}const qe=()=>{};class Ye extends Ds{constructor(){super(),this.name="ToneAudioBuffer",this.onload=qe;const e=ge(Ye.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,As(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:qe,onload:qe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Wt().sampleRate}set(e){return e instanceof Ye?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return vt(this,void 0,void 0,function*(){const s=Ye.load(e).then(r=>{this.set(r),this.onload(this)});Ye.downloads.push(s);try{yield s}finally{const r=Ye.downloads.indexOf(s);Ye.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const s=_n(e)&&e[0].length>0,r=s?e.length:1,a=s?e[0].length:e.length,u=Wt(),h=u.createBuffer(r,a,u.sampleRate),d=!s&&r===1?[e]:e;for(let f=0;f<r;f++)h.copyToChannel(d[f],f);return this._buffer=h,this}toMono(e){if(Hn(e))this.fromArray(this.toArray(e));else{let s=new Float32Array(this.length);const r=this.numberOfChannels;for(let a=0;a<r;a++){const u=this.toArray(a);for(let h=0;h<u.length;h++)s[h]+=u[h]}s=s.map(a=>a/r),this.fromArray(s)}return this}toArray(e){if(Hn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const s=[];for(let r=0;r<this.numberOfChannels;r++)s[r]=this.getChannelData(r);return s}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,s=this.duration){Se(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),a=Math.floor(s*this.sampleRate);Se(r<a,"The start time must be less than the end time");const u=a-r,h=Wt().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)h.copyToChannel(this.getChannelData(d).subarray(r,a),d);return new Ye(h)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ye().fromArray(e)}static fromUrl(e){return vt(this,void 0,void 0,function*(){return yield new Ye().load(e)})}static load(e){return vt(this,void 0,void 0,function*(){const s=Ye.baseUrl===""||Ye.baseUrl.endsWith("/")?Ye.baseUrl:Ye.baseUrl+"/",r=yield fetch(s+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const a=yield r.arrayBuffer();return yield Wt().decodeAudioData(a)})}static supportsType(e){const s=e.split("."),r=s[s.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return vt(this,void 0,void 0,function*(){for(yield Promise.resolve();Ye.downloads.length;)yield Ye.downloads[0]})}}Ye.baseUrl="";Ye.downloads=[];class Ml extends jo{constructor(){super({clockSource:"offline",context:il(arguments[0])?arguments[0]:fx(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:il(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=il(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return vt(this,void 0,void 0,function*(){let s=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,s++;const r=Math.floor(this.sampleRate/128);e&&s%r===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return vt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const s=yield this._context.startRendering();return new Ye(s)})}close(){return Promise.resolve()}}const Gm=new Tx;let Ar=Gm;function Wt(){return Ar===Gm&&px&&Sx(new jo),Ar}function Sx(o,e=!1){e&&Ar.dispose(),yi(o)?Ar=new jo(o):il(o)?Ar=new Ml(o):Ar=o}function bx(){return Ar.resume()}if(vn&&!vn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Gp} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function gl(o){return Math.pow(10,o/20)}function Ym(o){return 20*(Math.log(o)/Math.LN10)}function Xm(o){return Math.pow(2,o/12)}let Il=440;function Nx(){return Il}function Ex(o){Il=o}function Or(o){return Math.round(Km(o))}function Km(o){return 69+12*Math.log2(o/Il)}function Zm(o){return Il*Math.pow(2,(o-69)/12)}class mh extends Ds{constructor(e,s,r){super(),this.defaultUnits="s",this._val=s,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,s)=>{const r=parseInt(e,10),a=s==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/r)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const s=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(s)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,s,r)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),s&&s!=="0"&&(a+=this._beatsToUnits(parseFloat(s))),r&&r!=="0"&&(a+=this._beatsToUnits(parseFloat(r)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof mh&&this.fromType(this._val),Dn(this._val))return this._noArg();if(As(this._val)&&Dn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Dr(this._val)){let e=0;for(const s in this._val)if(Me(this._val[s])){const r=this._val[s],a=new this.constructor(this.context,s).valueOf()*r;e+=a}return e}if(Me(this._units)){const e=this._expressions[this._units],s=this._val.toString().trim().match(e.regexp);return s?e.method.apply(this,s.slice(1)):e.method.call(this,this._val)}else return As(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class $n extends mh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const s=new $n(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(s))},regexp:/^@(.+)/}})}quantize(e,s=1){const r=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),d=Math.round(a/r)*r-a;return a+d*s}toNotation(){const e=this.toSeconds(),s=["1m"];for(let u=1;u<9;u++){const h=Math.pow(2,u);s.push(h+"n."),s.push(h+"n"),s.push(h+"t")}s.push("0");let r=s[0],a=new $n(this.context,s[0]).toSeconds();return s.forEach(u=>{const h=new $n(this.context,u).toSeconds();Math.abs(h-e)<Math.abs(a-e)&&(r=u,a=h)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let s=this.valueOf()/e;s=parseFloat(s.toFixed(4));const r=Math.floor(s/this._getTimeSignature());let a=s%1*4;s=Math.floor(s)%this._getTimeSignature();const u=a.toString();return u.length>3&&(a=parseFloat(parseFloat(u).toFixed(3))),[r,s,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Or(this.toFrequency())}_now(){return this.context.now()}}class on extends $n{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Nx()}static set A4(e){Ex(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:on.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,s){const a=Rx[e.toLowerCase()]+(parseInt(s,10)+1)*12;return this.defaultUnits==="midi"?a:on.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,s,r){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),s&&s!=="0"&&(a*=this._beatsToUnits(parseFloat(s))),r&&r!=="0"&&(a*=this._beatsToUnits(parseFloat(r)/4)),a}}})}transpose(e){return new on(this.context,this.valueOf()*Xm(e))}harmonize(e){return e.map(s=>this.transpose(s))}toMidi(){return Or(this.valueOf())}toNote(){const e=this.toFrequency(),s=Math.log2(e/on.A4);let r=Math.round(12*s)+57;const a=Math.floor(r/12);return a<0&&(r+=-12*a),Ax[r%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),s=this.valueOf()/e;return Math.floor(s*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Zm(e)}static ftom(e){return Or(e)}}const Rx={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Ax=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function gi(o,e){return new on(Wt(),o,e)}class _o extends $n{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class It extends Ds{constructor(){super();const e=ge(It.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Wt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return cx(e),new $n(this.context,e).toSeconds()}toFrequency(e){return new on(this.context,e).toFrequency()}toTicks(e){return new _o(this.context,e).toTicks()}_getPartialProperties(e){const s=this.get();return Object.keys(s).forEach(r=>{Dn(e[r])&&delete s[r]}),s}get(){const e=wx(this);return Object.keys(e).forEach(s=>{if(Reflect.has(this,s)){const r=this[s];Me(r)&&Me(r.value)&&Me(r.setValueAtTime)?e[s]=r.value:r instanceof It?e[s]=r._getPartialProperties(e[s]):_n(r)||Hn(r)||As(r)||qm(r)?e[s]=r:delete e[s]}}),e}set(e){return Object.keys(e).forEach(s=>{Reflect.has(this,s)&&Me(this[s])&&(this[s]&&Me(this[s].value)&&Me(this[s].setValueAtTime)?this[s].value!==e[s]&&(this[s].value=e[s]):this[s]instanceof It?this[s].set(e[s]):this[s]=e[s])}),this}}class Pl extends Mn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const s=this.get(e);return s!==null?s.state:this._initial}setStateAtTime(e,s,r){return yn(s,0),this.add(Object.assign({},r,{state:e,time:s})),this}getLastState(e,s){const r=this._search(s);for(let a=r;a>=0;a--){const u=this._timeline[a];if(u.state===e)return u}}getNextState(e,s){const r=this._search(s);if(r!==-1)for(let a=r;a<this._timeline.length;a++){const u=this._timeline[a];if(u.state===e)return u}}}class Le extends It{constructor(){const e=ge(Le.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Se(Me(e.param)&&(Lr(e.param)||e.param instanceof Le),"param must be an AudioParam");!Lr(e.param);)e.param=e.param._param;this._swappable=Me(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Mn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Me(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(It.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Me(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Me(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,s){return this.units===s}_assertRange(e){return Me(this.maxValue)&&Me(this.minValue)&&yn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?gl(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Ym(e):e}setValueAtTime(e,s){const r=this.toSeconds(s),a=this._fromType(e);return Se(isFinite(a)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(s)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,r),this}getValueAtTime(e){const s=Math.max(this.toSeconds(e),0),r=this._events.getAfter(s),a=this._events.get(s);let u=this._initialValue;if(a===null)u=this._initialValue;else if(a.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const h=this._events.getBefore(a.time);let d;h===null?d=this._initialValue:d=h.value,a.type==="setTargetAtTime"&&(u=this._exponentialApproach(a.time,d,a.value,a.constant,s))}else if(r===null)u=a.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let h=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?h=this._initialValue:h=d.value}r.type==="linearRampToValueAtTime"?u=this._linearInterpolate(a.time,h,r.time,r.value,s):u=this._exponentialInterpolate(a.time,h,r.time,r.value,s)}else u=a.value;return this._toType(u)}setRampPoint(e){e=this.toSeconds(e);let s=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(s)===0&&(s=this._toType(this._minOutput)),this.setValueAtTime(s,e),this}linearRampToValueAtTime(e,s){const r=this._fromType(e),a=this.toSeconds(s);return Se(isFinite(r)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(s)}`),this._assertRange(r),this._events.add({time:a,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(r,a),this}exponentialRampToValueAtTime(e,s){let r=this._fromType(e);r=Bn(r,0)?this._minOutput:r,this._assertRange(r);const a=this.toSeconds(s);return Se(isFinite(r)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(s)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(r,a),this}exponentialRampTo(e,s,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(s)),this}linearRampTo(e,s,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(s)),this}targetRampTo(e,s,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,s),this}exponentialApproachValueAtTime(e,s,r){s=this.toSeconds(s),r=this.toSeconds(r);const a=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,s,a),this.cancelAndHoldAtTime(s+r*.9),this.linearRampToValueAtTime(e,s+r),this}setTargetAtTime(e,s,r){const a=this._fromType(e);Se(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const u=this.toSeconds(s);return this._assertRange(a),Se(isFinite(a)&&isFinite(u),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(s)}`),this._events.add({constant:r,time:u,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,u,r),this._param.setTargetAtTime(a,u,r),this}setValueCurveAtTime(e,s,r,a=1){r=this.toSeconds(r),s=this.toSeconds(s);const u=this._fromType(e[0])*a;this.setValueAtTime(this._toType(u),s);const h=r/(e.length-1);for(let d=1;d<e.length;d++){const f=this._fromType(e[d])*a;this.linearRampToValueAtTime(this._toType(f),s+d*h)}return this}cancelScheduledValues(e){const s=this.toSeconds(e);return Se(isFinite(s),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(s),this._param.cancelScheduledValues(s),this.log(this.units,"cancelScheduledValues",s),this}cancelAndHoldAtTime(e){const s=this.toSeconds(e),r=this._fromType(this.getValueAtTime(s));Se(isFinite(s),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",s,"value="+r);const a=this._events.get(s),u=this._events.getAfter(s);return a&&Bn(a.time,s)?u?(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time)):(this._param.cancelAndHoldAtTime(s),this._events.cancel(s+this.sampleTime)):u&&(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time),u.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),s):u.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),s)),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}rampTo(e,s=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,s,r):this.linearRampTo(e,s,r),this}apply(e){const s=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(s),s);const r=this._events.get(s);if(r&&r.type==="setTargetAtTime"){const a=this._events.getAfter(r.time),u=a?a.time:s+2,h=(u-s)/10;for(let d=s;d<u;d+=h)e.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Se(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const s=this.input;return s.disconnect(this._param),this.apply(e),this._param=e,s.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,s,r,a,u){return r+(s-r)*Math.exp(-(u-e)/a)}_linearInterpolate(e,s,r,a,u){return s+(a-s)*((u-e)/(r-e))}_exponentialInterpolate(e,s,r,a,u){return s*Math.pow(a/s,(u-e)/(r-e))}}class xe extends It{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Me(this.input)?Lr(this.input)||this.input instanceof Le?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Me(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Me(e)&&(e instanceof xe||ir(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Se(e.length>0,"ToneAudioNode does not have any internal nodes");const s=e[0];return{channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const s=this._getChannelProperties();this._setChannelProperties(Object.assign(s,{channelInterpretation:e}))}connect(e,s=0,r=0){return Gn(this,e,s,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Fo("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,s=0,r=0){return Jm(this,e,s,r),this}chain(...e){return jr(this,...e),this}fan(...e){return e.forEach(s=>this.connect(s)),this}dispose(){return super.dispose(),Me(this.input)&&(this.input instanceof xe?this.input.dispose():ir(this.input)&&this.input.disconnect()),Me(this.output)&&(this.output instanceof xe?this.output.dispose():ir(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function jr(...o){const e=o.shift();o.reduce((s,r)=>(s instanceof xe?s.connect(r):ir(s)&&Gn(s,r),r),e)}function Gn(o,e,s=0,r=0){for(Se(Me(o),"Cannot connect from undefined node"),Se(Me(e),"Cannot connect to undefined node"),(e instanceof xe||ir(e))&&Se(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Se(o.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof xe||e instanceof Le;)Me(e.input)&&(e=e.input);for(;o instanceof xe;)Me(o.output)&&(o=o.output);Lr(e)?o.connect(e,s):o.connect(e,s,r)}function Jm(o,e,s=0,r=0){if(Me(e))for(;e instanceof xe;)e=e.input;for(;!ir(o);)Me(o.output)&&(o=o.output);Lr(e)?o.disconnect(e,s):ir(e)?o.disconnect(e,s,r):o.disconnect()}class Oe extends xe{constructor(){const e=ge(Oe.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Le({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Ve(this,"gain")}static getDefaults(){return Object.assign(xe.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ni extends xe{constructor(e){super(e),this.onended=qe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Oe({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(s){const r=this.toSeconds(s);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(xe.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:qe})}_startGain(e,s=1){Se(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(s,e+r):this._gainNode.gain.exponentialApproachValueAtTime(s,e,r)):this._gainNode.gain.setValueAtTime(s,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Se(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const s=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+s,this._stopTime=Math.max(this._stopTime,this.now()),s>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,s,e):this._gainNode.gain.targetRampTo(0,s,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?s*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==qe&&(this.onended(this),this.onended=qe,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Se(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=qe,this}}class gh extends Ni{constructor(){const e=ge(gh.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Gn(this._source,this._gainNode),this.offset=new Le({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ni.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const s=this.toSeconds(e);return this.log("start",s),this._startGain(s),this._source.start(s),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class $e extends xe{constructor(){const e=ge($e.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new gh({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(xe.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,s=0,r=0){return Fl(this,e,s,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,s){return this._param.setValueAtTime(e,s),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,s){return this._param.linearRampToValueAtTime(e,s),this}exponentialRampToValueAtTime(e,s){return this._param.exponentialRampToValueAtTime(e,s),this}exponentialRampTo(e,s,r){return this._param.exponentialRampTo(e,s,r),this}linearRampTo(e,s,r){return this._param.linearRampTo(e,s,r),this}targetRampTo(e,s,r){return this._param.targetRampTo(e,s,r),this}exponentialApproachValueAtTime(e,s,r){return this._param.exponentialApproachValueAtTime(e,s,r),this}setTargetAtTime(e,s,r){return this._param.setTargetAtTime(e,s,r),this}setValueCurveAtTime(e,s,r,a){return this._param.setValueCurveAtTime(e,s,r,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,s,r){return this._param.rampTo(e,s,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Fl(o,e,s,r){(e instanceof Le||Lr(e)||e instanceof $e&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof $e&&(e.overridden=!0)),Gn(o,e,s,r)}class vh extends Le{constructor(){const e=ge(vh.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Mn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Le.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,s,r){s=this.toSeconds(s),this.setRampPoint(s);const a=this._fromType(e),u=this._events.get(s),h=Math.round(Math.max(1/r,1));for(let d=0;d<=h;d++){const f=r*d+s,m=this._exponentialApproach(u.time,u.value,a,r,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}setValueAtTime(e,s){const r=this.toSeconds(s);super.setValueAtTime(e,s);const a=this._events.get(r),u=this._events.previousEvent(a),h=this._getTicksUntilEvent(u,r);return a.ticks=Math.max(h,0),this}linearRampToValueAtTime(e,s){const r=this.toSeconds(s);super.linearRampToValueAtTime(e,s);const a=this._events.get(r),u=this._events.previousEvent(a),h=this._getTicksUntilEvent(u,r);return a.ticks=Math.max(h,0),this}exponentialRampToValueAtTime(e,s){s=this.toSeconds(s);const r=this._fromType(e),a=this._events.get(s),u=Math.round(Math.max((s-a.time)*10,1)),h=(s-a.time)/u;for(let d=0;d<=u;d++){const f=h*d+a.time,m=this._exponentialInterpolate(a.time,a.value,s,r,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}_getTicksUntilEvent(e,s){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Dn(e.ticks)){const h=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(h,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(s));const u=this._events.get(s);return u&&u.time===s&&u.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(s-this.sampleTime))),.5*(s-e.time)*(r+a)+e.ticks}getTicksAtTime(e){const s=this.toSeconds(e),r=this._events.get(s);return Math.max(this._getTicksUntilEvent(r,s),0)}getDurationOfTicks(e,s){const r=this.toSeconds(s),a=this.getTicksAtTime(s);return this.getTimeOfTick(a+e)-r}getTimeOfTick(e){const s=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(s&&s.ticks===e)return s.time;if(s&&r&&r.type==="linearRampToValueAtTime"&&s.value!==r.value){const a=this._fromType(this.getValueAtTime(s.time)),h=(this._fromType(this.getValueAtTime(r.time))-a)/(r.time-s.time),d=Math.sqrt(Math.pow(a,2)-2*h*(s.ticks-e)),f=(-a+d)/h,m=(-a-d)/h;return(f>0?f:m)+s.time}else return s?s.value===0?1/0:s.time+(e-s.ticks)/s.value:e/this._initialValue}ticksToTime(e,s){return this.getDurationOfTicks(e,s)}timeToTicks(e,s){const r=this.toSeconds(s),a=this.toSeconds(e),u=this.getTicksAtTime(r);return this.getTicksAtTime(r+a)-u}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const s=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(s,0)}}class yh extends $e{constructor(){const e=ge(yh.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new vh({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign($e.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,s){return this._param.ticksToTime(e,s)}timeToTicks(e,s){return this._param.timeToTicks(e,s)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,s){return this._param.getDurationOfTicks(e,s)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class _h extends It{constructor(){const e=ge(_h.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Pl,this._tickOffset=new Mn,this._ticksAtTime=new Mn,this._secondsAtTime=new Mn,this.frequency=new yh({context:this.context,units:e.units,value:e.frequency}),Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},It.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,s){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Me(s)&&this.setTicksAtTime(s,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="stopped"){const r=this._state.get(s);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(s),this._state.setStateAtTime("stopped",s),this.setTicksAtTime(0,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}pause(e){const s=this.toSeconds(e);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const s=this.toSeconds(e),r=this._state.getLastState("stopped",s),a=this._ticksAtTime.get(s),u={state:"paused",time:s};this._state.add(u);let h=a||r,d=a?a.ticks:0,f=null;return this._state.forEachBetween(h.time,s+this.sampleTime,m=>{let g=h.time;const v=this._tickOffset.get(m.time);v&&v.time>=h.time&&(d=v.ticks,g=v.time),h.state==="started"&&m.state!=="started"&&(d+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(g),m.time!==u.time&&(f={state:m.state,time:m.time,ticks:d})),h=m}),this._state.remove(u),f&&this._ticksAtTime.add(f),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const s=this.now(),r=this.frequency.timeToTicks(e,s);this.setTicksAtTime(r,s)}getSecondsAtTime(e){e=this.toSeconds(e);const s=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const a=this._secondsAtTime.get(e);let u=a||s,h=a?a.seconds:0,d=null;return this._state.forEachBetween(u.time,e+this.sampleTime,f=>{let m=u.time;const g=this._tickOffset.get(f.time);g&&g.time>=u.time&&(h=g.seconds,m=g.time),u.state==="started"&&f.state!=="started"&&(h+=f.time-m,f.time!==r.time&&(d={state:f.state,time:f.time,seconds:h})),u=f}),this._state.remove(r),d&&this._secondsAtTime.add(d),h}setTicksAtTime(e,s){return s=this.toSeconds(s),this._tickOffset.cancel(s),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,s),ticks:e,time:s}),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,s=this.now()){const r=this._tickOffset.get(s),a=this._state.get(s),u=Math.max(r.time,a.time),h=this.frequency.getTicksAtTime(u)+e-r.ticks;return this.frequency.getTimeOfTick(h)}forEachTickBetween(e,s,r){let a=this._state.get(e);this._state.forEachBetween(e,s,h=>{a&&a.state==="started"&&h.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),h.time-this.sampleTime,r),a=h});let u=null;if(a&&a.state==="started"){const h=Math.max(a.time,e),d=this.frequency.getTicksAtTime(h),f=this.frequency.getTicksAtTime(a.time),m=d-f;let g=Math.ceil(m)-m;g=Bn(g,1)?0:g;let v=this.frequency.getTimeOfTick(d+g);for(;v<s;){try{r(v,Math.round(this.getTicksAtTime(v)))}catch(w){u=w;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(u)throw u;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ll extends It{constructor(){const e=ge(Ll.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=qe,this._lastUpdate=0,this._state=new Pl("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new _h({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ve(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(It.getDefaults(),{callback:qe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,s){Wm(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,s),r<this._lastUpdate&&this.emit("start",r,s)),this}stop(e){const s=this.toSeconds(e);return this.log("stop",s),this._state.cancel(s),this._state.setStateAtTime("stopped",s),this._tickSource.stop(s),s<this._lastUpdate&&this.emit("stop",s),this}pause(e){const s=this.toSeconds(e);return this._state.getValueAtTime(s)==="started"&&(this._state.setStateAtTime("paused",s),this._tickSource.pause(s),s<this._lastUpdate&&this.emit("pause",s)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,s){return this._tickSource.setTicksAtTime(e,s),this}getTimeOfTick(e,s=this.now()){return this._tickSource.getTimeOfTick(e,s)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,s){const r=this.toSeconds(s),a=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(a+e,r)}_loop(){const e=this._lastUpdate,s=this.now();this._lastUpdate=s,this.log("loop",e,s),e!==s&&(this._state.forEachBetween(e,s,r=>{switch(r.state){case"started":const a=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,a);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,s,(r,a)=>{this.callback(r,a)}))}getStateAtTime(e){const s=this.toSeconds(e);return this._state.getValueAtTime(s)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Lo.mixin(Ll);class To extends xe{constructor(){const e=ge(To.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const s=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(s,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(s),this.delayTime=new Le({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Ve(this,"delayTime")}static getDefaults(){return Object.assign(xe.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ii extends xe{constructor(){const e=ge(Ii.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Oe({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Ve(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(xe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class wh extends xe{constructor(){const e=ge(wh.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ii({context:this.context}),this.output=new Oe({context:this.context}),this.volume=this.input.volume,jr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(xe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),jr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ol(o=>{o.destination=new wh({context:o})});Dl(o=>{o.destination.dispose()});class Ox extends xe{constructor(){super(...arguments),this.name="Listener",this.positionX=new Le({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Le({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Le({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Le({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Le({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Le({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Le({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Le({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Le({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(xe.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ol(o=>{o.listener=new Ox({context:o})});Dl(o=>{o.listener.dispose()});class xh extends Ds{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ge(xh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(s=>{this._loadingCount++;const r=e.urls[s];this.add(s,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:qe,onload:qe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Se(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,s])=>s.loaded)}add(e,s,r=qe,a=qe){return As(s)?(this.baseUrl&&s.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ye(this.baseUrl+s,r,a))):this._buffers.set(e.toString(),new Ye(s,r,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class vl extends on{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Or(super._frequencyToUnits(e))}_ticksToUnits(e){return Or(super._ticksToUnits(e))}_beatsToUnits(e){return Or(super._beatsToUnits(e))}_secondsToUnits(e){return Or(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Zm(this.toMidi())}transpose(e){return new vl(this.context,this.toMidi()+e)}}class An extends _o{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Dx extends It{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Mn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,s){return this._events.add({callback:e,time:this.toSeconds(s)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,s=>{e-s.time<=this.expiration&&s.callback(),this._events.remove(s)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ol(o=>{o.draw=new Dx({context:o})});Dl(o=>{o.draw.dispose()});class Mx extends Ds{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Se(Me(e.time),"Events must have a time property"),Se(Me(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let s=new Ix(e.time,e.time+e.duration,e);for(this._root===null?this._root=s:this._root.insert(s),this._length++;s!==null;)s.updateHeight(),s.updateMax(),this._rebalance(s),s=s.parent;return this}remove(e){if(this._root!==null){const s=[];this._root.search(e.time,s);for(const r of s)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,s=>this.remove(s)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,s){e.parent!==null?(e.isLeftChild()?e.parent.left=s:e.parent.right=s,this._rebalance(e.parent)):this._setRoot(s)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const s=e.getBalance();let r,a=null;if(s>0)if(e.left.right===null)r=e.left,r.right=e.right,a=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,a=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,a=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,a=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const s=e.parent,r=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),s!==null?r?s.left=a:s.right=a:this._setRoot(a)}_rotateRight(e){const s=e.parent,r=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),s!==null?r?s.left=a:s.right=a:this._setRoot(a)}_rebalance(e){const s=e.getBalance();s>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):s<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const s=[];if(this._root.search(e,s),s.length>0){let r=s[0];for(let a=1;a<s.length;a++)s[a].low>r.low&&(r=s[a]);return r.event}}return null}forEach(e){if(this._root!==null){const s=[];this._root.traverse(r=>s.push(r)),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,s){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(a=>{a.event&&s(a.event)})}return this}forEachFrom(e,s){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(a=>{a.event&&s(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Ix{constructor(e,s,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=s,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,s){e>this.max||(this.left!==null&&this.left.search(e,s),this.low<=e&&this.high>e&&s.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,s))}searchAfter(e,s){this.low>=e&&(s.push(this),this.left!==null&&this.left.searchAfter(e,s)),this.right!==null&&this.right.searchAfter(e,s)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Px extends Ds{constructor(e){super(),this.name="TimelineValue",this._timeline=new Mn({memory:10}),this._initialValue=e}set(e,s){return this._timeline.add({value:e,time:s}),this}get(e){const s=this._timeline.get(e);return s?s.value:this._initialValue}}class os extends xe{constructor(){super(ge(os.getDefaults(),arguments,["context"]))}connect(e,s=0,r=0){return Fl(this,e,s,r),this}}class Ur extends os{constructor(){const e=ge(Ur.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,_n(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):ux(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign($e.getDefaults(),{length:1024})}setMap(e,s=1024){const r=new Float32Array(s);for(let a=0,u=s;a<u;a++){const h=a/(u-1)*2-1;r[a]=e(h,a)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const s=["none","2x","4x"].some(r=>r.includes(e));Se(s,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class kh extends os{constructor(){const e=ge(kh.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Ur({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(os.getDefaults(),{value:1})}_expFunc(e){return s=>Math.pow(Math.abs(s),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class or{constructor(e,s){this.id=or._eventId++,this._remainderTime=0;const r=Object.assign(or.getDefaults(),s);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:qe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const s=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*s),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}or._eventId=0;class Ch extends or{constructor(e,s){super(e,s),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Ch.getDefaults(),s);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},or.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return ml(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new An(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){ml(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new An(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const s=this.transport.getTicksAtTime(e);bi(s,this.time)&&(this._nextTick=this.floatTime+Math.ceil((s-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class jl extends It{constructor(){const e=ge(jl.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Px(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Mn,this._repeatedEvents=new Mx,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Ll({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Ve(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(It.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,s){if(this._loop.get(e)&&s>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),s=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&s%this._ppq!==0&&s%(this._swingTicks*2)!==0){const r=s%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(r*Math.PI)*this._swingAmount;e+=new An(this.context,this._swingTicks*2/3).toSeconds()*a}jp(!0),this._timeline.forEachAtTime(s,r=>r.invoke(e)),jp(!1)}schedule(e,s){const r=new or(this,{callback:e,time:new _o(this.context,s).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,s,r,a=1/0){const u=new Ch(this,{callback:e,duration:new $n(this.context,a).toTicks(),interval:new $n(this.context,s).toTicks(),time:new _o(this.context,r).toTicks()});return this._addEvent(u,this._repeatedEvents)}scheduleOnce(e,s){const r=new or(this,{callback:e,once:!0,time:new _o(this.context,s).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const s=this._scheduledEvents[e.toString()];s.timeline.remove(s.event),s.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,s){return this._scheduledEvents[e.id.toString()]={event:e,timeline:s},s.add(e),e.id}cancel(e=0){const s=this.toTicks(e);return this._timeline.forEachFrom(s,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(s,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,s)=>{s=new An(this.context,s).toSeconds(),this.emit("start",e,s)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,s){this.context.resume();let r;return Me(s)&&(r=this.toTicks(s)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){_n(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new $n(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new $n(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,s){return this.loopStart=e,this.loopEnd=s,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new An(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),s=this._clock.getTicksAtTime(e);return new An(this.context,s).toBarsBeatsSixteenths()}set position(e){const s=this.toTicks(e);this.ticks=s}get seconds(){return this._clock.seconds}set seconds(e){const s=this.now(),r=this._clock.frequency.timeToTicks(e,s);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const s=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(s),a=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,s),u=s+a;this.emit("stop",u),this._clock.setTicksAtTime(e,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this.emit("ticks",s),this._clock.setTicksAtTime(e,s)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const s=this.now(),r=this.getTicksAtTime(s),a=e-r%e;return this._clock.nextTickTime(a,s)}}syncSignal(e,s){const r=this.now();let a=this.bpm,u=1/(60/a.getValueAtTime(r)/this.PPQ),h=[];if(e.units==="time"){const f=.015625/u,m=new Oe(f),g=new kh(-1),v=new Oe(f);a.chain(m,g,v),a=v,u=1/u,h=[m,g,v]}s||(e.getValueAtTime(r)!==0?s=e.getValueAtTime(r)/u:s=0);const d=new Oe(s);return a.connect(d),d.connect(e._param),h.push(d),this._syncedSignals.push({initial:e.value,nodes:h,signal:e}),e.value=0,this}unsyncSignal(e){for(let s=this._syncedSignals.length-1;s>=0;s--){const r=this._syncedSignals[s];r.signal===e&&(r.nodes.forEach(a=>a.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(s,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),ph(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Lo.mixin(jl);Ol(o=>{o.transport=new jl({context:o})});Dl(o=>{o.transport.dispose()});class Xt extends xe{constructor(e){super(e),this.input=void 0,this._state=new Pl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=qe,this._syncedStop=qe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ii({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(xe.getDefaults(),{mute:!1,onstop:qe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,s,r){let a=Dn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Se(bi(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,s,r);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const u=this._state.get(a);u&&(u.offset=this.toSeconds(Ir(s,0)),u.duration=r?this.toSeconds(r):void 0);const h=this.context.transport.schedule(d=>{this._start(d,s,r)},a);this._scheduled.push(h),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else Wm(this.context),this._start(a,s,r);return this}stop(e){let s=Dn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(s=this._clampToCurrentTime(s),this._state.getValueAtTime(s)==="started"||Me(this._state.getNextState("started",s))){if(this.log("stop",s),!this._synced)this._stop(s);else{const r=this.context.transport.schedule(this._stop.bind(this),s);this._scheduled.push(r)}this._state.cancel(s),this._state.setStateAtTime("stopped",s)}return this}restart(e,s,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,s,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,s)=>{if(bi(s,0)){const r=this._state.get(s);if(r&&r.state==="started"&&r.time!==s){const a=s-this.toSeconds(r.time);let u;r.duration&&(u=this.toSeconds(r.duration)-a),this._start(e,this.toSeconds(r.offset)+a,u)}}},this._syncedStop=e=>{const s=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(s)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=qe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vo extends Ni{constructor(){const e=ge(Vo.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Gn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Le({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ye(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ni.getDefaults(),{url:new Ye,loop:!1,loopEnd:0,loopStart:0,onload:qe,onerror:qe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,s,r,a=1){Se(this.buffer.loaded,"buffer is either not set or not loaded");const u=this.toSeconds(e);this._startGain(u,a),this.loop?s=Ir(s,this.loopStart):s=Ir(s,0);let h=Math.max(this.toSeconds(s),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),m=d-f;Hc(h,d)&&(h=(h-f)%m+f),Bn(h,this.buffer.duration)&&(h=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,ml(h,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,h)),Me(r)){let d=this.toSeconds(r);d=Math.max(d,0),this.stop(u+d)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class So extends Xt{constructor(){const e=ge(So.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Xt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Se(e in Vp,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const s=this.now();this._stop(s),this._start(s)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const s=Vp[this._type];this._source=new Vo({url:s,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(s.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const vi=44100*5,Pc=2,Ns={brown:null,pink:null,white:null},Vp={get brown(){if(!Ns.brown){const o=[];for(let e=0;e<Pc;e++){const s=new Float32Array(vi);o[e]=s;let r=0;for(let a=0;a<vi;a++){const u=Math.random()*2-1;s[a]=(r+.02*u)/1.02,r=s[a],s[a]*=3.5}}Ns.brown=new Ye().fromArray(o)}return Ns.brown},get pink(){if(!Ns.pink){const o=[];for(let e=0;e<Pc;e++){const s=new Float32Array(vi);o[e]=s;let r,a,u,h,d,f,m;r=a=u=h=d=f=m=0;for(let g=0;g<vi;g++){const v=Math.random()*2-1;r=.99886*r+v*.0555179,a=.99332*a+v*.0750759,u=.969*u+v*.153852,h=.8665*h+v*.3104856,d=.55*d+v*.5329522,f=-.7616*f-v*.016898,s[g]=r+a+u+h+d+f+m+v*.5362,s[g]*=.11,m=v*.115926}}Ns.pink=new Ye().fromArray(o)}return Ns.pink},get white(){if(!Ns.white){const o=[];for(let e=0;e<Pc;e++){const s=new Float32Array(vi);o[e]=s;for(let r=0;r<vi;r++)s[r]=Math.random()*2-1}Ns.white=new Ye().fromArray(o)}return Ns.white}};function $r(o,e){return vt(this,void 0,void 0,function*(){const s=e/o.context.sampleRate,r=new Ml(1,s,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/s,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Th extends Ni{constructor(){const e=ge(Th.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Gn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Le({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Le({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ni.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const s=this.toSeconds(e);return this.log("start",s),this._startGain(s),this._oscillator.start(s),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ht extends Xt{constructor(){const e=ge(ht.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new $e({context:this.context,units:"frequency",value:e.frequency}),Ve(this,"frequency"),this.detune=new $e({context:this.context,units:"cents",value:e.detune}),Ve(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Xt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const s=this.toSeconds(e),r=new Th({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(e){const s=this.toSeconds(e);this._oscillator&&this._oscillator.stop(s)}_restart(e){const s=this.toSeconds(e);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return ht._periodicWaveCache.find(s=>s.phase===this._phase&&_x(s.partials,this._partials));{const e=ht._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const s=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&s)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Me(r)){const{partials:a,wave:u}=r;this._wave=u,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,u]=this._getRealImaginary(e,this._phase),h=this.context.createPeriodicWave(a,u);this._wave=h,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),ht._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),ht._periodicWaveCache.length>100&&ht._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){yn(e,0);let s=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(s=r[1]),this._type!=="custom")e===0?this.type=s:this.type=s+e.toString();else{const a=new Float32Array(e);this._partials.forEach((u,h)=>a[h]=u),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,s){let a=2048;const u=new Float32Array(a),h=new Float32Array(a);let d=1;if(e==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[u,h]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(d=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let f=1;f<a;++f){const m=2/(f*Math.PI);let g;switch(e){case"sine":g=f<=d?1:0,this._partials[f-1]=g;break;case"square":g=f&1?2*m:0,this._partials[f-1]=g;break;case"sawtooth":g=m*(f&1?1:-1),this._partials[f-1]=g;break;case"triangle":f&1?g=2*(m*m)*(f-1>>1&1?-1:1):g=0,this._partials[f-1]=g;break;case"custom":g=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}g!==0?(u[f]=-g*Math.sin(s*f),h[f]=g*Math.cos(s*f)):(u[f]=0,h[f]=0)}return[u,h]}_inverseFFT(e,s,r){let a=0;const u=e.length;for(let h=0;h<u;h++)a+=e[h]*Math.cos(h*r)+s[h]*Math.sin(h*r);return a}getInitialValue(){const[e,s]=this._getRealImaginary(this._type,0);let r=0;const a=Math.PI*2,u=32;for(let h=0;h<u;h++)r=Math.max(this._inverseFFT(e,s,h/u*a),r);return xx(-this._inverseFFT(e,s,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ht._periodicWaveCache=[];class eg extends os{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ur({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Vr extends $e{constructor(){const e=ge(Vr.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Oe({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign($e.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Vl extends Xt{constructor(){const e=ge(Vl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new eg({context:this.context}),this._modulationNode=new Oe({context:this.context}),this._carrier=new ht({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ht({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Vr({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ve(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ht.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class zl extends Xt{constructor(){const e=ge(zl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Oe({context:this.context,gain:0}),this._carrier=new ht({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new $e({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ht({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Vr({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Vr({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ve(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ht.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class zo extends Xt{constructor(){const e=ge(zo.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Oe({context:this.context,gain:0}),this._thresh=new Ur({context:this.context,mapping:s=>s<=0?-1:1}),this.width=new $e({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ht({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ve(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Xt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class ql extends Xt{constructor(){const e=ge(ql.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new $e({context:this.context,units:"frequency",value:e.frequency}),this.detune=new $e({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Ve(this,["frequency","detune"])}static getDefaults(){return Object.assign(ht.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(s=>s.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(s=>s.stop(e))}_restart(e){this._forEach(s=>s.restart(e))}_forEach(e){for(let s=0;s<this._oscillators.length;s++)e(this._oscillators[s],s)}get type(){return this._type}set type(e){this._type=e,this._forEach(s=>s.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const s=-e/2,r=e/(this._oscillators.length-1);this._forEach((a,u)=>a.detune.value=s+r*u)}}get count(){return this._oscillators.length}set count(e){if(yn(e,1),this._oscillators.length!==e){this._forEach(s=>s.dispose()),this._oscillators=[];for(let s=0;s<e;s++){const r=new ht({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+s/e*360,partialCount:this._partialCount,onstop:s===0?()=>this.onstop(this):qe});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[s]=r}this.spread=this._spread,this.state==="started"&&this._forEach(s=>s.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((s,r)=>s.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(s=>s.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(s=>s.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(s=>s.partialCount=e),this._type=this._oscillators[0].type}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Wl extends Xt{constructor(){const e=ge(Wl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Vr({context:this.context,value:2}),this._pulse=new zo({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ht({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ve(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Xt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const zp={am:Vl,fat:ql,fm:zl,oscillator:ht,pulse:zo,pwm:Wl};class yl extends Xt{constructor(){const e=ge(yl.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new $e({context:this.context,units:"frequency",value:e.frequency}),this.detune=new $e({context:this.context,units:"cents",value:e.detune}),Ve(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ht.getDefaults(),zl.getDefaults(),Vl.getDefaults(),ql.getDefaults(),zo.getDefaults(),Wl.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(s=>this._sourceType===s)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const s=zp[e],r=this.now();if(this._oscillator){const a=this._oscillator;a.stop(r),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new s({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let s="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(s=this._oscillator.type),e==="fm"?this.type="fm"+s:e==="am"?this.type="am"+s:e==="fat"?this.type="fat"+s:e==="oscillator"?this.type=s:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,s){return e instanceof zp[s]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Hn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Hn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&As(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return vt(this,arguments,void 0,function*(e=1024){return $r(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Sh extends $e{constructor(){super(ge(Sh.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Oe({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,jr(this._constantSource,this._sum)}static getDefaults(){return Object.assign($e.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Bl extends os{constructor(){const e=ge(Bl.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Vr({context:this.context,value:e.max-e.min}),this._add=this.output=new Sh({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(os.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class bh extends os{constructor(){super(ge(bh.getDefaults(),arguments)),this.name="Zero",this._gain=new Oe({context:this.context}),this.output=this._gain,this.input=void 0,Gn(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),Jm(this.context.getConstant(0),this._gain),this}}class zr extends xe{constructor(){const e=ge(zr.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Le.prototype._fromType,this._toType=Le.prototype._toType,this._is=Le.prototype._is,this._clampValue=Le.prototype._clampValue,this._oscillator=new ht(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Oe({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new $e({context:this.context,units:"audioRange",value:0}),this._zeros=new bh({context:this.context}),this._a2g=new eg({context:this.context}),this._scaler=this.output=new Bl({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ve(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(ht.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const s=this.min,r=this.max;this._units=e,this.min=s,this.max=r}get state(){return this._oscillator.state}connect(e,s,r){return(e instanceof Le||e instanceof $e)&&(this.convert=e.convert,this.units=e.units),Fl(this,e,s,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function tg(o,e=1/0){const s=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){yn(u,o,e),s.set(this,u)}})}}function Ms(o,e=1/0){const s=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return s.get(this)},set:function(u){yn(this.toSeconds(u),o,e),s.set(this,u)}})}}class Ul extends Xt{constructor(){const e=ge(Ul.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Ye({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Xt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:qe,onerror:qe,playbackRate:1,reverse:!1})}load(e){return vt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=qe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,s,r){return super.start(e,s,r),this}_start(e,s,r){this._loop?s=Ir(s,this._loopStart):s=Ir(s,0);const a=this.toSeconds(s),u=r;r=Ir(r,Math.max(this._buffer.duration-a,0));let h=this.toSeconds(r);h=h/this._playbackRate,e=this.toSeconds(e);const d=new Vo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+h),this._state.setStateAtTime("stopped",e+h,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&Dn(u)?d.start(e,a):d.start(e,a,h-this.toSeconds(this.fadeOut))}_stop(e){const s=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(s))}restart(e,s,r){return super.restart(e,s,r),this}_restart(e,s,r){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,s,r)}seek(e,s){const r=this.toSeconds(s);if(this._state.getValueAtTime(r)==="started"){const a=this.toSeconds(e);this._stop(r),this._start(r,a)}return this}setLoopPoints(e,s){return this.loopStart=e,this.loopEnd=s,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&yn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&yn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(s=>{s.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(s=>{s.loop=e}),e)){const s=this._state.getNextState("stopped",this.now());s&&this._state.cancel(s.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const s=this.now(),r=this._state.getNextState("stopped",s);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,s)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Kn([Ms(0)],Ul.prototype,"fadeIn",void 0);Kn([Ms(0)],Ul.prototype,"fadeOut",void 0);class Fx extends os{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ur({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Is extends xe{constructor(){const e=ge(Is.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new $e({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(xe.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,s){if(As(e))return e;{let r;for(r in sl)if(sl[r][s]===e)return r;return e}}_setCurve(e,s,r){if(As(r)&&Reflect.has(sl,r)){const a=sl[r];Dr(a)?e!=="_decayCurve"&&(this[e]=a[s]):this[e]=a}else if(_n(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,s=1){this.log("triggerAttack",e,s),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const u=this.toSeconds(this.decay),h=this.getValueAtTime(e);if(h>0){const d=1/a;a=(1-h)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(s,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(s,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(s,a,e);else{this._sig.cancelAndHoldAtTime(e);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=h&&h<=d[f]){d=this._attackCurve.slice(f),d[0]=h;break}this._sig.setValueCurveAtTime(d,e,a,s)}if(u&&this.sustain<1){const d=s*this.sustain,f=e+a;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,u+f):this._sig.exponentialApproachValueAtTime(d,f,u)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const s=this.getValueAtTime(e);if(s>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Se(_n(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,s))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,s,r=1){return s=this.toSeconds(s),this.triggerAttack(s,r),this.triggerRelease(s+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,s=0,r=0){return Fl(this,e,s,r),this}asArray(){return vt(this,arguments,void 0,function*(e=1024){const s=e/this.context.sampleRate,r=new Ml(1,s,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),u=a+this.toSeconds(this.release),h=u*.1,d=u+h,f=new this.constructor(Object.assign(this.get(),{attack:s*this.toSeconds(this.attack)/d,decay:s*this.toSeconds(this.decay)/d,release:s*this.toSeconds(this.release)/d,context:r}));return f._sig.toDestination(),f.triggerAttackRelease(s*(a+h)/d,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Kn([Ms(0)],Is.prototype,"attack",void 0);Kn([Ms(0)],Is.prototype,"decay",void 0);Kn([tg(0,1)],Is.prototype,"sustain",void 0);Kn([Ms(0)],Is.prototype,"release",void 0);const sl=(()=>{let e,s;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const a=[],u=6.4;for(e=0;e<127;e++){s=e/127;const w=Math.sin(s*(Math.PI*2)*u-Math.PI/2)+1;a[e]=w/10+s*.83}a[127]=1;const h=[],d=5;for(e=0;e<128;e++)h[e]=Math.ceil(e/127*d)/d;const f=[];for(e=0;e<128;e++)s=e/127,f[e]=.5*(1-Math.cos(Math.PI*s));const m=[];for(e=0;e<128;e++){s=e/127;const w=Math.pow(s,3)*4+.2,_=Math.cos(w*Math.PI*2*s);m[e]=Math.abs(_*(1-s))}function g(w){const _=new Array(w.length);for(let x=0;x<w.length;x++)_[x]=1-w[x];return _}function v(w){return w.slice(0).reverse()}return{bounce:{In:g(m),Out:m},cosine:{In:r,Out:v(r)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:g(a)},sine:{In:f,Out:g(f)},step:{In:h,Out:g(h)}}})();class ar extends xe{constructor(){const e=ge(ar.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=s=>this._original_triggerRelease(s),this._volume=this.output=new Ii({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Ve(this,"volume")}static getDefaults(){return Object.assign(xe.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,s){const r=this["_original_"+e]=this[e];this[e]=(...a)=>{const u=a[s],h=this.context.transport.schedule(d=>{a[s]=d,r.apply(this,a)},u);this._scheduledEvents.push(h)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,s,r,a){const u=this.toSeconds(r),h=this.toSeconds(s);return this.triggerAttack(e,u,a),this.triggerRelease(u+h),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class qr extends ar{constructor(){const e=ge(qr.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ar.getDefaults(),{detune:0,onsilence:qe,portamento:0})}triggerAttack(e,s,r=1){this.log("triggerAttack",e,s,r);const a=this.toSeconds(s);return this._triggerEnvelopeAttack(a,r),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const s=this.toSeconds(e);return this._triggerEnvelopeRelease(s),this}setNote(e,s){const r=this.toSeconds(s),a=e instanceof on?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const u=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,u,r)}else this.frequency.setValueAtTime(a,r);return this}}Kn([Ms(0)],qr.prototype,"portamento",void 0);class bo extends Is{constructor(){super(ge(bo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Oe({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}let _l=class ng extends qr{constructor(){const e=ge(ng.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new yl(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new bo(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Ve(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(qr.getDefaults(),{envelope:Object.assign(Qc(Is.getDefaults(),Object.keys(xe.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Qc(yl.getDefaults(),[...Object.keys(Xt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,s){if(this.envelope.triggerAttack(e,s),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class wl extends xe{constructor(){const e=ge(wl.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Le({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Le({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Le({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Le({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(xe.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Se(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const s=new Float32Array(e);for(let h=0;h<e;h++){const f=Math.pow(h/e,2)*19980+20;s[h]=f}const r=new Float32Array(e),a=new Float32Array(e),u=this.context.createBiquadFilter();return u.type=this.type,u.Q.value=this.Q.value,u.frequency.value=this.frequency.value,u.gain.value=this.gain.value,u.getFrequencyResponse(s,r,a),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class xl extends xe{constructor(){const e=ge(xl.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Oe({context:this.context}),this.output=new Oe({context:this.context}),this._filters=[],this._filters=[],this.Q=new $e({context:this.context,units:"positive",value:e.Q}),this.frequency=new $e({context:this.context,units:"frequency",value:e.frequency}),this.detune=new $e({context:this.context,units:"cents",value:e.detune}),this.gain=new $e({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Ve(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(xe.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Se(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const s=Hn(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let a=r.indexOf(s);Se(a!==-1,`rolloff can only be ${r.join(", ")}`),a+=1,this._rolloff=s,this.input.disconnect(),this._filters.forEach(u=>u.disconnect()),this._filters=new Array(a);for(let u=0;u<a;u++){const h=new wl({context:this.context});h.type=this._type,this.frequency.connect(h.frequency),this.detune.connect(h.detune),this.Q.connect(h.Q),this.gain.connect(h.gain),this._filters[u]=h}this._internalChannels=this._filters,jr(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const s=new wl({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{s.getFrequencyResponse(e).forEach((u,h)=>r[h]*=u)}),s.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),ph(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class $l extends _l{constructor(){const e=ge($l.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Ve(this,["oscillator","envelope"])}static getDefaults(){return Mr(qr.getDefaults(),_l.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,s){const r=this.toSeconds(s),a=this.toFrequency(e instanceof on?e.toFrequency():e),u=a*this.octaves;return this.oscillator.frequency.setValueAtTime(u,r),this.oscillator.frequency.exponentialRampToValueAtTime(a,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Kn([tg(0)],$l.prototype,"octaves",void 0);Kn([Ms(0)],$l.prototype,"pitchDecay",void 0);const sg=new Set;function Nh(o){sg.add(o)}function rg(o,e){const s=`registerProcessor("${o}", ${e})`;sg.add(s)}const Lx=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Nh(Lx);const jx=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Nh(jx);const Vx=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Nh(Vx);const zx="feedback-comb-filter",qx=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;rg(zx,qx);class Eh extends ar{constructor(){const e=ge(Eh.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Se(!Hn(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const s=e.voice.getDefaults();this.options=Object.assign(s,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ar.getDefaults(),{maxPolyphony:32,options:{},voice:_l})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const s=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(s,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Se(e instanceof qr,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Fo("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),s=this._voices.indexOf(e);this._voices.splice(s,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,s,r){e.forEach(a=>{const u=new vl(this.context,a).toMidi(),h=this._getNextAvailableVoice();h&&(h.triggerAttack(a,s,r),this._activeVoices.push({midi:u,voice:h,released:!1}),this.log("triggerAttack",a,s))})}_triggerRelease(e,s){e.forEach(r=>{const a=new vl(this.context,r).toMidi(),u=this._activeVoices.find(({midi:h,released:d})=>h===a&&!d);u&&(u.voice.triggerRelease(s),u.released=!0,this.log("triggerRelease",r,s))})}_scheduleEvent(e,s,r,a){Se(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(s,r,a):this._triggerRelease(s,r):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,s,r,a)},r-this.now())}triggerAttack(e,s,r){Array.isArray(e)||(e=[e]);const a=this.toSeconds(s);return this._scheduleEvent("attack",e,a,r),this}triggerRelease(e,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(s);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,s,r,a){const u=this.toSeconds(r);if(this.triggerAttack(e,u,a),_n(s)){Se(_n(e),"If the duration is an array, the notes must also be an array"),e=e;for(let h=0;h<e.length;h++){const d=s[Math.min(h,s.length-1)],f=this.toSeconds(d);Se(f>0,"The duration must be greater than 0"),this.triggerRelease(e[h],u+f)}}else{const h=this.toSeconds(s);Se(h>0,"The duration must be greater than 0"),this.triggerRelease(e,u+h)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const s=Qc(e,["onsilence","context"]);return this.options=Mr(this.options,s),this._voices.forEach(r=>r.set(s)),this._dummyVoice.set(s),this}get(){return this._dummyVoice.get()}releaseAll(e){const s=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(s)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Ql extends ar{constructor(){const e=ge(Ql.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const s={};Object.keys(e.urls).forEach(r=>{const a=parseInt(r,10);if(Se(nl(r)||Hn(a)&&isFinite(a),`url key is neither a note or midi pitch: ${r}`),nl(r)){const u=new on(this.context,r).toMidi();s[u]=e.urls[r]}else Hn(a)&&isFinite(a)&&(s[a]=e.urls[a])}),this._buffers=new xh({urls:s,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ar.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:qe,onerror:qe,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,s,r=1){return this.log("triggerAttack",e,s,r),Array.isArray(e)||(e=[e]),e.forEach(a=>{const u=Km(new on(this.context,a).toFrequency()),h=Math.round(u),d=u-h,f=this._findClosest(h),m=h-f,g=this._buffers.get(m),v=Xm(f+d),w=new Vo({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);w.start(s,0,g.duration/v,r),_n(this._activeSources.get(h))||this._activeSources.set(h,[]),this._activeSources.get(h).push(w),w.onended=()=>{if(this._activeSources&&this._activeSources.has(h)){const _=this._activeSources.get(h),x=_.indexOf(w);x!==-1&&_.splice(x,1)}}}),this}triggerRelease(e,s){return this.log("triggerRelease",e,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const a=new on(this.context,r).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const u=this._activeSources.get(a);s=this.toSeconds(s),u.forEach(h=>{h.stop(s)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const s=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(s)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,s,r,a=1){const u=this.toSeconds(r);return this.triggerAttack(e,u,a),_n(s)?(Se(_n(e),"notes must be an array when duration is array"),e.forEach((h,d)=>{const f=s[Math.min(d,s.length-1)];this.triggerRelease(h,u+this.toSeconds(f))})):this.triggerRelease(e,u+this.toSeconds(s)),this}add(e,s,r){if(Se(nl(e)||isFinite(e),`note must be a pitch or midi: ${e}`),nl(e)){const a=new on(this.context,e).toMidi();this._buffers.add(a,s,r)}else this._buffers.add(e,s,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(s=>s.dispose())}),this._activeSources.clear(),this}}Kn([Ms(0)],Ql.prototype,"attack",void 0);Kn([Ms(0)],Ql.prototype,"release",void 0);class Rh extends It{constructor(){const e=ge(Rh.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Pl("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(It.getDefaults(),{callback:qe,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,s=>{let r;if(s.state==="started"){s.id!==-1&&this.context.transport.clear(s.id);const a=s.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Hn(this._loop)&&this._loop>1){r=1/0,Hn(this._loop)&&(r=this._loop*this._getLoopDuration());const u=this._state.getAfter(a);u!==null&&(r=Math.min(r,u.time-a)),r!==1/0&&(r=new An(this.context,r));const h=new An(this.context,this._getLoopDuration());s.id=this.context.transport.scheduleRepeat(this._tick.bind(this),h,new An(this.context,a),r)}else s.id=this.context.transport.schedule(this._tick.bind(this),new An(this.context,a))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const s=this.toTicks(e);return this._state.getValueAtTime(s)==="stopped"&&(this._state.add({id:-1,state:"started",time:s}),this._rescheduleEvents(s)),this}stop(e){this.cancel(e);const s=this.toTicks(e);if(this._state.getValueAtTime(s)==="started"){this._state.setStateAtTime("stopped",s,{id:-1});const r=this._state.getBefore(s);let a=s;r!==null&&(a=r.time),this._rescheduleEvents(a)}return this}cancel(e){e=Ir(e,-1/0);const s=this.toTicks(e);return this._state.forEachFrom(s,r=>{this.context.transport.clear(r.id)}),this._state.cancel(s),this}_tick(e){const s=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(s)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;qm(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new An(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new An(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,s=this._state.get(e);if(s!==null&&s.state==="started"){const r=this._getLoopDuration();return(e-s.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Ah extends It{constructor(){const e=ge(Ah.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new Rh({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(It.getDefaults(),{interval:"4n",callback:qe,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class Hl extends xe{constructor(){const e=ge(Hl.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Fx({context:this.context}),this.a=new Oe({context:this.context,gain:0}),this.b=new Oe({context:this.context,gain:0}),this.output=new Oe({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new $e({context:this.context,units:"normalRange",value:e.fade}),Ve(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Gn(this._split,this.a.gain,0),Gn(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(xe.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Ei extends xe{constructor(e){super(e),this.name="Effect",this._dryWet=new Hl({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Oe({context:this.context}),this.effectReturn=new Oe({context:this.context}),this.input=new Oe({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ve(this,"wet")}static getDefaults(){return Object.assign(xe.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Oh extends xe{constructor(){const e=ge(Oh.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Le({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Ve(this,"pan")}static getDefaults(){return Object.assign(xe.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Wx="bit-crusher",Bx=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;rg(Wx,Bx);class qo extends xe{constructor(){const e=ge(qo.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(xe.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Wo extends xe{constructor(){const e=ge(Wo.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(xe.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class kl extends xe{constructor(e){super(e),this.name="StereoEffect",this.input=new Oe({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Hl({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new qo({context:this.context,channels:2}),this._merge=new Wo({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ve(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),jr(...e),Gn(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),jr(...e),Gn(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(xe.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class qp extends kl{constructor(e){super(e),this.feedback=new $e({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Oe({context:this.context}),this._feedbackR=new Oe({context:this.context}),this._feedbackSplit=new qo({context:this.context,channels:2}),this._feedbackMerge=new Wo({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ve(this,["feedback"])}static getDefaults(){return Object.assign(kl.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Dh extends qp{constructor(){const e=ge(Dh.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new zr({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new zr({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new To({context:this.context}),this._delayNodeR=new To({context:this.context}),this.frequency=this._lfoL.frequency,Ve(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(qp.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const s=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-s,0),this._lfoL.max=this._delayTime+s,this._lfoR.min=Math.max(this._delayTime-s,0),this._lfoR.max=this._delayTime+s}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Mh extends Ei{constructor(){const e=ge(Mh.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new Ur({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(Ei.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const s=e*100,r=Math.PI/180;this._shaper.setMap(a=>Math.abs(a)<.001?0:(3+s)*a*20*r/(Math.PI+s*Math.abs(a)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Wp extends Ei{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Oe({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Ve(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Ei.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ih extends Wp{constructor(){const e=ge(Ih.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new To({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Ve(this,"delayTime")}static getDefaults(){return Object.assign(Wp.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Ph extends kl{constructor(){const e=ge(Ph.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(e),this.name="Phaser",this._lfoL=new zr({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new zr({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new $e({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),Ve(this,["frequency","Q"])}static getDefaults(){return Object.assign(kl.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,s){const r=[];for(let a=0;a<e;a++){const u=this.context.createBiquadFilter();u.type="allpass",this.Q.connect(u.Q),s.connect(u.frequency),r.push(u)}return r}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const s=this._baseFrequency*Math.pow(2,e);this._lfoL.max=s,this._lfoR.max=s}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class Fh extends Ei{constructor(){const e=ge(Fh.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const s=this.toSeconds(e.decay);yn(s,.001),this._decay=s;const r=this.toSeconds(e.preDelay);yn(r,0),this._preDelay=r,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Ei.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),yn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),yn(e,0),this._preDelay=e,this.generate()}generate(){return vt(this,void 0,void 0,function*(){const e=this.ready,s=new Ml(2,this._decay+this._preDelay,this.context.sampleRate),r=new So({context:s}),a=new So({context:s}),u=new Wo({context:s});r.connect(u,0,0),a.connect(u,0,1);const h=new Oe({context:s}).toDestination();u.connect(h),r.start(0),a.start(0),h.gain.setValueAtTime(0,0),h.gain.setValueAtTime(1,this._preDelay),h.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const d=s.render();return this.ready=d.then(qe),yield e,this._convolver.buffer=(yield d).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Bo extends xe{constructor(){const e=ge(Bo.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Oe({context:this.context}),this._split=new qo({context:this.context,channels:e.channels}),this.input.connect(this._split),yn(e.channels,1);for(let s=0;s<e.channels;s++)this._analysers[s]=this.context.createAnalyser(),this._split.connect(this._analysers[s],s,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(xe.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,s)=>{const r=this._buffers[s];this._type==="fft"?e.getFloatFrequencyData(r):this._type==="waveform"&&e.getFloatTimeDomainData(r)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((s,r)=>{s.fftSize=e*2,this._buffers[r]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){Se(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(s=>s.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class No extends xe{constructor(){super(ge(No.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Bo({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Lh extends No{constructor(){const e=ge(Lh.getDefaults(),arguments,["smoothing"]);super(e),this.name="Meter",this.input=this.output=this._analyser=new Bo({context:this.context,size:256,type:"waveform",channels:e.channelCount}),this.smoothing=e.smoothing,this.normalRange=e.normalRange,this._rms=new Array(e.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(No.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Fo("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),r=(this.channels===1?[e]:e).map((a,u)=>{const h=a.reduce((f,m)=>f+m*m,0),d=Math.sqrt(h/a.length);return this._rms[u]=Math.max(d,this._rms[u]*this.smoothing),this.normalRange?this._rms[u]:Ym(this._rms[u])});return this.channels===1?r[0]:r}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class jh extends No{constructor(){const e=ge(jh.getDefaults(),arguments,["size"]);super(e),this.name="FFT",this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(xe.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(s=>this.normalRange?gl(s):s)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return Se(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(this.size*2)}}class Tt extends xe{constructor(){const e=ge(Tt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Oe({context:this.context}),Tt._allSolos.has(this.context)||Tt._allSolos.set(this.context,new Set),Tt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(xe.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Tt._allSolos.get(this.context).forEach(s=>s._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Tt._soloed.has(this.context)||Tt._soloed.set(this.context,new Set),Tt._soloed.get(this.context).add(this)}_removeSolo(){Tt._soloed.has(this.context)&&Tt._soloed.get(this.context).delete(this)}_isSoloed(){return Tt._soloed.has(this.context)&&Tt._soloed.get(this.context).has(this)}_noSolos(){return!Tt._soloed.has(this.context)||Tt._soloed.has(this.context)&&Tt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Tt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Tt._allSolos=new Map;Tt._soloed=new Map;class Vh extends xe{constructor(){const e=ge(Vh.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Oh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ii({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(xe.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class wi extends xe{constructor(){const e=ge(wi.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Tt({solo:e.solo,context:this.context}),this._panVol=this.output=new Vh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ve(this,["pan","volume"])}static getDefaults(){return Object.assign(xe.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return wi.buses.has(e)||wi.buses.set(e,new Oe({context:this.context})),wi.buses.get(e)}send(e,s=0){const r=this._getBus(e),a=new Oe({context:this.context,units:"decibels",gain:s});return this.connect(a),a.connect(r),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}wi.buses=new Map;function Rr(){return Wt().now()}Wt().transport;function rr(){return Wt().transport}Wt().destination;Wt().destination;function Ux(){return Wt().destination}Wt().listener;Wt().draw;function $x(){return Wt().draw}Wt();const gt={volume:-12,attack:.01,release:.3,waveform:"sawtooth",octave:3,mono:!1},ot={lowpass:{frequency:2e4,Q:1},highpass:{frequency:20,Q:1},reverb:{decay:1.5,wet:0},delay:{time:.25,feedback:.3,wet:0},distortion:{amount:0,wet:.5}},xi={rate:2,depth:0,waveform:"sine"},Qx=[{target:"filterCutoff",amount:0,enabled:!1}],On={waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},Cl={enabled:!1,time:.1},Un={attack:.01,decay:.2,sustain:.5,release:.3,amount:0},Pr={rate:1.5,depth:.5,wet:0},ki={rate:.5,depth:.5,wet:0},ig={enabled:!1,pattern:"up",rate:"1/8",octaves:1},Gl={bpm:120},zh=2;function Hx(){const[o,e]=S.useState({isInitialized:!1,activeNotes:0}),s=S.useRef(null),r=S.useRef(null),a=S.useRef(null),u=S.useRef(null),h=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useRef(null),g=S.useRef(null),v=S.useRef(null),w=S.useRef(null),_=S.useRef(null),x=S.useRef(null),k=S.useRef(null),C=S.useRef(null),R=S.useRef(null),I=S.useRef(null),j=S.useRef(null),z=S.useRef(null),N=S.useRef(null),M=S.useRef(null),F=S.useRef(null),D=S.useRef(null),X=S.useRef(null),W=S.useRef(new Set),G=S.useRef(440),Q=S.useRef(gt.octave),re=S.useRef(Cl.enabled),K=S.useRef(Cl.time),ne=S.useRef(0),ee=S.useRef(2),J=S.useRef(On.subOscOctave),H=S.useRef(Un.amount),Z=S.useRef(gt.waveform),Y=S.useRef(gt.mono),E=S.useRef([]),q=S.useRef(!1),de=S.useRef(null),_e=S.useCallback(async()=>{o.isInitialized||(await bx(),_.current=new Oe(1),s.current=new Eh(_l,{oscillator:{type:gt.waveform},envelope:{attack:gt.attack,decay:.1,sustain:.9,release:gt.release}}),s.current.maxPolyphony=4,s.current.connect(_.current),r.current=new ht({type:"sine",frequency:220}),a.current=new Oe(On.subOscLevel),u.current=new bo({attack:gt.attack,decay:.1,sustain:.9,release:gt.release}),r.current.connect(u.current),u.current.connect(a.current),a.current.connect(_.current),h.current=new So(On.noiseType),d.current=new Oe(On.noiseLevel),f.current=new bo({attack:gt.attack,decay:.1,sustain:.9,release:gt.release}),h.current.connect(f.current),f.current.connect(d.current),d.current.connect(_.current),m.current=new Is({attack:Un.attack,decay:Un.decay,sustain:Un.sustain,release:Un.release}),g.current=new Bl(0,5e3),m.current.connect(g.current),v.current=new zr({frequency:xi.rate,min:-1,max:1,type:xi.waveform}),w.current=new Oe(xi.depth),de.current=new Oe(0),R.current=new $e({value:ot.lowpass.frequency,units:"frequency"}),k.current=new xl({frequency:ot.lowpass.frequency,type:"lowpass",Q:ot.lowpass.Q}),R.current.connect(k.current.frequency),C.current=new xl({frequency:ot.highpass.frequency,type:"highpass",Q:ot.highpass.Q}),I.current=new Mh({distortion:ot.distortion.amount,wet:ot.distortion.wet}),j.current=new Dh({frequency:Pr.rate,depth:Pr.depth,wet:Pr.wet}),z.current=new Ph({frequency:ki.rate,octaves:3,baseFrequency:350,wet:ki.wet}),N.current=new Ih({delayTime:ot.delay.time,feedback:ot.delay.feedback,wet:ot.delay.wet}),M.current=new Fh({decay:ot.reverb.decay,wet:ot.reverb.wet}),F.current=new Lh,D.current=new Bo("waveform",256),X.current=new jh(256),x.current=new Oe(gl(gt.volume)),v.current.connect(w.current),w.current.connect(de.current),de.current.connect(k.current.frequency),g.current.connect(k.current.frequency),_.current.chain(k.current,C.current,I.current,j.current,z.current,N.current,M.current,x.current,F.current,D.current,X.current,Ux()),r.current.start(),h.current.start(),v.current.start(),j.current.start(),e({isInitialized:!0,activeNotes:0}))},[o.isInitialized]),ae=S.useCallback($=>{const Pe=ne.current*ee.current;return $*Math.pow(2,Pe/12)},[]),fe=S.useCallback($=>{var $t,pt;if(!s.current)return;const Pe=ae($),Je=gi(Pe).toNote(),Ue=E.current.length===0;if(E.current.includes($)||E.current.push($),!Ue&&W.current.size>0){const et=Array.from(W.current)[0],Cn=ae(et),es=gi(Cn).toNote();s.current.triggerRelease(es,Rr()),W.current.delete(et)}if(Ue||re.current,s.current.triggerAttack(Je,Rr()),W.current.clear(),W.current.add($),G.current=$,r.current&&u.current){const et=Pe/Math.pow(2,Math.abs(J.current));re.current&&!Ue?r.current.frequency.rampTo(et,K.current):r.current.frequency.value=et,Ue&&u.current.triggerAttack()}Ue&&(($t=f.current)==null||$t.triggerAttack(),(pt=m.current)==null||pt.triggerAttack()),e(et=>({...et,activeNotes:1}))},[ae]),ke=S.useCallback($=>{var Ue,$t,pt;if(!s.current)return;E.current=E.current.filter(et=>et!==$);const Pe=ae($),Je=gi(Pe).toNote();if(s.current.triggerRelease(Je,Rr()),W.current.delete($),E.current.length>0){const et=E.current[E.current.length-1],Cn=ae(et),es=gi(Cn).toNote();if(s.current.triggerAttack(es,Rr()),W.current.add(et),G.current=et,r.current&&re.current){const ys=Cn/Math.pow(2,Math.abs(J.current));r.current.frequency.rampTo(ys,K.current)}}else(Ue=u.current)==null||Ue.triggerRelease(),($t=f.current)==null||$t.triggerRelease(),(pt=m.current)==null||pt.triggerRelease(),e(et=>({...et,activeNotes:0}))},[ae]),oe=S.useCallback($=>{if(!s.current)return;if(Y.current){fe($);return}const Pe=ae($),Je=gi(Pe).toNote();if(s.current.triggerAttack(Je,Rr()),W.current.add($),G.current=$,r.current&&u.current){const Ue=Pe/Math.pow(2,Math.abs(J.current));re.current&&W.current.size>1?r.current.frequency.rampTo(Ue,K.current):r.current.frequency.value=Ue,W.current.size===1&&u.current.triggerAttack()}f.current&&W.current.size===1&&f.current.triggerAttack(),m.current&&W.current.size===1&&m.current.triggerAttack(),e(Ue=>({...Ue,activeNotes:W.current.size}))},[ae,fe]),Re=S.useCallback($=>{var Ue,$t,pt;if(!s.current)return;if(Y.current){ke($);return}const Pe=ae($),Je=gi(Pe).toNote();s.current.triggerRelease(Je,Rr()),W.current.delete($),W.current.size===0&&!q.current&&((Ue=u.current)==null||Ue.triggerRelease(),($t=f.current)==null||$t.triggerRelease(),(pt=m.current)==null||pt.triggerRelease()),e(et=>({...et,activeNotes:W.current.size}))},[ae,ke]),We=S.useCallback(()=>{var $,Pe,Je;s.current&&(s.current.releaseAll(),W.current.clear(),E.current=[],q.current||(($=u.current)==null||$.triggerRelease(),(Pe=f.current)==null||Pe.triggerRelease(),(Je=m.current)==null||Je.triggerRelease()),e(Ue=>({...Ue,activeNotes:0})))},[]),_t=S.useCallback($=>{var Pe,Je,Ue;q.current=$,$||W.current.size===0&&((Pe=u.current)==null||Pe.triggerRelease(),(Je=f.current)==null||Je.triggerRelease(),(Ue=m.current)==null||Ue.triggerRelease())},[]),Et=S.useCallback($=>{x.current&&x.current.gain.rampTo(gl($),.1)},[]),wn=S.useCallback($=>{s.current&&(s.current.set({envelope:{attack:$}}),u.current&&(u.current.attack=$),f.current&&(f.current.attack=$))},[]),In=S.useCallback($=>{s.current&&(s.current.set({envelope:{release:$}}),u.current&&(u.current.release=$),f.current&&(f.current.release=$))},[]),ce=S.useCallback($=>{s.current&&(Z.current=$,s.current.set({oscillator:{type:$}}))},[]),ye=S.useCallback($=>{Q.current=$},[]),Ne=S.useCallback($=>{Y.current=$,$?s.current&&W.current.size>1&&(s.current.releaseAll(),W.current.clear(),E.current=[]):E.current=[]},[]),Ee=S.useCallback($=>{a.current&&a.current.gain.rampTo($,.1)},[]),Ae=S.useCallback($=>{if(J.current=$,!r.current)return;const Pe=G.current/Math.pow(2,Math.abs($));r.current.frequency.value=Pe},[]),Ie=S.useCallback($=>{d.current&&d.current.gain.rampTo($,.1)},[]),Ze=S.useCallback($=>{h.current&&(h.current.type=$)},[]),wt=S.useCallback($=>{re.current=$,s.current&&s.current.set({portamento:$?K.current:0})},[]),Ut=S.useCallback($=>{K.current=$,s.current&&re.current&&s.current.set({portamento:$})},[]),ln=S.useCallback($=>{if(ne.current=$,s.current){const Pe=$*ee.current*100;s.current.set({detune:Pe})}if(r.current){const Je=ae(G.current)/Math.pow(2,Math.abs(J.current));r.current.frequency.rampTo(Je,.05)}},[ae]),xt=S.useCallback($=>{ee.current=$},[]),lt=S.useCallback($=>{v.current&&v.current.frequency.rampTo($,.1)},[]),Ge=S.useCallback($=>{w.current&&w.current.gain.rampTo($,.1)},[]),un=S.useCallback($=>{v.current&&(v.current.type=$)},[]),Zn=S.useCallback(($,Pe,Je)=>{const Ue=Je?Pe:0;switch($){case"filterCutoff":de.current&&de.current.gain.rampTo(Ue*2e3,.1);break}},[]),cn=S.useCallback($=>{R.current&&R.current.rampTo($,.05)},[]),Pn=S.useCallback($=>{k.current&&k.current.Q.rampTo($,.1)},[]),cr=S.useCallback($=>{C.current&&C.current.frequency.rampTo($,.05)},[]),Ps=S.useCallback($=>{C.current&&C.current.Q.rampTo($,.1)},[]),hn=S.useCallback($=>{m.current&&(m.current.attack=$)},[]),hr=S.useCallback($=>{m.current&&(m.current.decay=$)},[]),cs=S.useCallback($=>{m.current&&(m.current.sustain=$)},[]),hs=S.useCallback($=>{m.current&&(m.current.release=$)},[]),ds=S.useCallback($=>{g.current&&(H.current=$,g.current.max=$*8e3)},[]),fs=S.useCallback($=>{I.current&&(I.current.distortion=$)},[]),ps=S.useCallback($=>{I.current&&I.current.wet.rampTo($,.1)},[]),xn=S.useCallback($=>{j.current&&j.current.frequency.rampTo($,.1)},[]),kn=S.useCallback($=>{j.current&&(j.current.depth=$)},[]),ue=S.useCallback($=>{j.current&&j.current.wet.rampTo($,.1)},[]),Be=S.useCallback($=>{z.current&&z.current.frequency.rampTo($,.1)},[]),kt=S.useCallback($=>{z.current&&(z.current.octaves=$*6)},[]),Rt=S.useCallback($=>{z.current&&z.current.wet.rampTo($,.1)},[]),Jn=S.useCallback($=>{N.current&&N.current.delayTime.rampTo($,.1)},[]),dr=S.useCallback($=>{N.current&&N.current.feedback.rampTo($,.1)},[]),Qr=S.useCallback($=>{N.current&&N.current.wet.rampTo($,.1)},[]),ms=S.useCallback($=>{M.current&&(M.current.decay=$)},[]),fr=S.useCallback($=>{M.current&&M.current.wet.rampTo($,.1)},[]),gs=S.useCallback(()=>{if(!F.current)return-60;const $=F.current.getValue();return typeof $=="number"?$:$[0]},[]),Pi=S.useCallback(()=>D.current?D.current.getValue():new Float32Array(256),[]),vs=S.useCallback(()=>X.current?X.current.getValue():new Float32Array(256),[]),Fs=S.useCallback(()=>G.current,[]);return S.useEffect(()=>()=>{var $,Pe,Je,Ue,$t,pt,et,Cn,es,ys,pr,U,B,$o,Qo,rt,Ho,Hr,Fi,mr,Go,Li,gr,dn,Yo;($=s.current)==null||$.dispose(),(Pe=r.current)==null||Pe.dispose(),(Je=a.current)==null||Je.dispose(),(Ue=u.current)==null||Ue.dispose(),($t=h.current)==null||$t.dispose(),(pt=d.current)==null||pt.dispose(),(et=f.current)==null||et.dispose(),(Cn=m.current)==null||Cn.dispose(),(es=g.current)==null||es.dispose(),(ys=v.current)==null||ys.dispose(),(pr=w.current)==null||pr.dispose(),(U=de.current)==null||U.dispose(),(B=_.current)==null||B.dispose(),($o=x.current)==null||$o.dispose(),(Qo=k.current)==null||Qo.dispose(),(rt=R.current)==null||rt.dispose(),(Ho=C.current)==null||Ho.dispose(),(Hr=I.current)==null||Hr.dispose(),(Fi=j.current)==null||Fi.dispose(),(mr=z.current)==null||mr.dispose(),(Go=N.current)==null||Go.dispose(),(Li=M.current)==null||Li.dispose(),(gr=F.current)==null||gr.dispose(),(dn=D.current)==null||dn.dispose(),(Yo=X.current)==null||Yo.dispose()},[]),{isInitialized:o.isInitialized,isPlaying:o.activeNotes>0,activeNotes:o.activeNotes,initializeAudio:_e,playNote:oe,stopNote:Re,stopAllNotes:We,setArpeggiating:_t,setVolume:Et,setAttack:wn,setRelease:In,setWaveform:ce,setOctave:ye,setMonoMode:Ne,setSubOscLevel:Ee,setSubOscOctave:Ae,setNoiseLevel:Ie,setNoiseType:Ze,setGlideEnabled:wt,setGlideTime:Ut,setPitchBend:ln,setPitchBendRange:xt,setLFORate:lt,setLFODepth:Ge,setLFOWaveform:un,setModRouting:Zn,setLowpassFrequency:cn,setLowpassQ:Pn,setHighpassFrequency:cr,setHighpassQ:Ps,setFilterEnvAttack:hn,setFilterEnvDecay:hr,setFilterEnvSustain:cs,setFilterEnvRelease:hs,setFilterEnvAmount:ds,setDistortionAmount:fs,setDistortionWet:ps,setChorusRate:xn,setChorusDepth:kn,setChorusWet:ue,setPhaserRate:Be,setPhaserDepth:kt,setPhaserWet:Rt,setDelayTime:Jn,setDelayFeedback:dr,setDelayWet:Qr,setReverbDecay:ms,setReverbWet:fr,getMeterLevel:gs,getWaveformData:Pi,getFFTData:vs,getCurrentFrequency:Fs}}const Bp=[{id:"init",name:"Init",category:"lead",params:{master:{volume:-12,attack:.01,release:.3,waveform:"sawtooth",octave:3,mono:!1},effects:{lowpass:{frequency:2e4,Q:1},highpass:{frequency:20,Q:1},reverb:{decay:1.5,wet:0},delay:{time:.25,feedback:.3,wet:0},distortion:{amount:0,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:2,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.01,decay:.2,sustain:.5,release:.3,amount:0},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"classic-bass",name:"Classic Bass",category:"bass",params:{master:{volume:-8,attack:.005,release:.2,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:800,Q:4},highpass:{frequency:30,Q:1},reverb:{decay:.5,wet:.1},delay:{time:.25,feedback:.1,wet:0},distortion:{amount:.2,wet:.8}},oscillator:{waveform:"sawtooth",subOscLevel:.6,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:.5,depth:.1,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.2,enabled:!0}],glide:{enabled:!0,time:.08},filterEnvelope:{attack:.01,decay:.3,sustain:.2,release:.2,amount:.5},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"acid-bass",name:"Acid Bass",category:"bass",params:{master:{volume:-6,attack:.001,release:.1,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:400,Q:12},highpass:{frequency:40,Q:1},reverb:{decay:.3,wet:.05},delay:{time:.375,feedback:.4,wet:.2},distortion:{amount:.4,wet:1}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:4,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!0,time:.05},filterEnvelope:{attack:.001,decay:.15,sustain:.1,release:.1,amount:.8},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/16",octaves:1},tempo:{bpm:130},pitchBendRange:2}},{id:"screaming-lead",name:"Screaming Lead",category:"lead",params:{master:{volume:-10,attack:.02,release:.4,waveform:"sawtooth",octave:4,mono:!0},effects:{lowpass:{frequency:5e3,Q:2},highpass:{frequency:100,Q:1},reverb:{decay:2,wet:.3},delay:{time:.375,feedback:.35,wet:.25},distortion:{amount:.3,wet:.6}},oscillator:{waveform:"sawtooth",subOscLevel:.2,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:5,depth:.15,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.3,enabled:!0}],glide:{enabled:!0,time:.15},filterEnvelope:{attack:.05,decay:.5,sustain:.6,release:.5,amount:.4},chorus:{rate:2,depth:.4,wet:.3},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"soft-pad",name:"Soft Pad",category:"pad",params:{master:{volume:-14,attack:.5,release:1.5,waveform:"triangle",octave:3,mono:!1},effects:{lowpass:{frequency:3e3,Q:.5},highpass:{frequency:80,Q:1},reverb:{decay:5,wet:.5},delay:{time:.5,feedback:.3,wet:.15},distortion:{amount:0,wet:.5}},oscillator:{waveform:"triangle",subOscLevel:.3,subOscOctave:-1,noiseLevel:.05,noiseType:"pink"},lfo:{rate:.3,depth:.2,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.15,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.8,decay:1,sustain:.7,release:1.5,amount:.3},chorus:{rate:.8,depth:.6,wet:.5},phaser:{rate:.2,depth:.3,wet:.2},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:90},pitchBendRange:2}},{id:"warm-strings",name:"Warm Strings",category:"pad",params:{master:{volume:-12,attack:.3,release:1,waveform:"square",octave:3,mono:!1},effects:{lowpass:{frequency:4e3,Q:1},highpass:{frequency:100,Q:1},reverb:{decay:3,wet:.4},delay:{time:.25,feedback:.2,wet:.1},distortion:{amount:0,wet:.5}},oscillator:{waveform:"square",subOscLevel:.15,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:.8,depth:.4,waveform:"triangle"},modRouting:[{target:"filterCutoff",amount:.2,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.4,decay:.5,sustain:.8,release:1,amount:.2},chorus:{rate:1,depth:.5,wet:.4},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"pluck-lead",name:"Pluck Lead",category:"lead",params:{master:{volume:-10,attack:.001,release:.5,waveform:"sawtooth",octave:4,mono:!1},effects:{lowpass:{frequency:8e3,Q:1},highpass:{frequency:80,Q:1},reverb:{decay:1.5,wet:.25},delay:{time:.25,feedback:.4,wet:.3},distortion:{amount:.1,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:.02,noiseType:"white"},lfo:{rate:2,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.001,decay:.2,sustain:.3,release:.4,amount:.6},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/16",octaves:2},tempo:{bpm:128},pitchBendRange:2}},{id:"wobble-bass",name:"Wobble Bass",category:"bass",params:{master:{volume:-8,attack:.01,release:.2,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:600,Q:8},highpass:{frequency:30,Q:1},reverb:{decay:.5,wet:.1},delay:{time:.25,feedback:.1,wet:0},distortion:{amount:.5,wet:1}},oscillator:{waveform:"sawtooth",subOscLevel:.4,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:3,depth:.7,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.8,enabled:!0}],glide:{enabled:!0,time:.05},filterEnvelope:{attack:.01,decay:.1,sustain:.8,release:.2,amount:.2},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:140},pitchBendRange:2}},{id:"laser-fx",name:"Laser FX",category:"fx",params:{master:{volume:-12,attack:.001,release:.8,waveform:"sawtooth",octave:5,mono:!0},effects:{lowpass:{frequency:15e3,Q:3},highpass:{frequency:200,Q:1},reverb:{decay:3,wet:.4},delay:{time:.125,feedback:.6,wet:.4},distortion:{amount:.2,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-2,noiseLevel:.1,noiseType:"white"},lfo:{rate:15,depth:.5,waveform:"sawtooth"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!0,time:.3},filterEnvelope:{attack:.001,decay:.5,sustain:.2,release:.8,amount:.7},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:2,depth:.8,wet:.5},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:12}},{id:"noise-sweep",name:"Noise Sweep",category:"fx",params:{master:{volume:-14,attack:.5,release:2,waveform:"sine",octave:3,mono:!1},effects:{lowpass:{frequency:2e3,Q:4},highpass:{frequency:100,Q:1},reverb:{decay:4,wet:.6},delay:{time:.375,feedback:.5,wet:.3},distortion:{amount:0,wet:.5}},oscillator:{waveform:"sine",subOscLevel:0,subOscOctave:-1,noiseLevel:.8,noiseType:"pink"},lfo:{rate:.1,depth:.8,waveform:"triangle"},modRouting:[{target:"filterCutoff",amount:.9,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:2,decay:1,sustain:.5,release:2,amount:.5},chorus:{rate:.5,depth:.3,wet:.3},phaser:{rate:.3,depth:.6,wet:.4},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:100},pitchBendRange:2}}],Up="web-monosynth-presets",wo={master:gt,effects:ot,oscillator:On,lfo:xi,modRouting:Qx,glide:Cl,filterEnvelope:Un,chorus:Pr,phaser:ki,arpeggiator:ig,tempo:Gl,pitchBendRange:zh};function Gx(o){const e={...wo};if(o.master&&typeof o.master=="object"){const s=o.master;e.master={volume:typeof s.volume=="number"?s.volume:gt.volume,attack:typeof s.attack=="number"?s.attack:gt.attack,release:typeof s.release=="number"?s.release:gt.release,waveform:s.waveform||gt.waveform,octave:typeof s.octave=="number"?s.octave:gt.octave,mono:typeof s.mono=="boolean"?s.mono:gt.mono}}if(o.effects&&typeof o.effects=="object"&&(e.effects=o.effects),o.oscillator&&typeof o.oscillator=="object"){const s=o.oscillator;e.oscillator={waveform:s.waveform||On.waveform,subOscLevel:typeof s.subOscLevel=="number"?s.subOscLevel:On.subOscLevel,subOscOctave:s.subOscOctave||On.subOscOctave,noiseLevel:typeof s.noiseLevel=="number"?s.noiseLevel:On.noiseLevel,noiseType:s.noiseType||On.noiseType}}if(o.lfo&&typeof o.lfo=="object"&&(e.lfo=o.lfo),o.modRouting&&Array.isArray(o.modRouting)){const s=o.modRouting.find(r=>r.target==="filterCutoff");s?e.modRouting=[{target:"filterCutoff",amount:typeof s.amount=="number"?s.amount:0,enabled:typeof s.enabled=="boolean"?s.enabled:!1}]:e.modRouting=[{target:"filterCutoff",amount:0,enabled:!1}]}if(o.glide&&typeof o.glide=="object"&&(e.glide=o.glide),o.filterEnvelope&&typeof o.filterEnvelope=="object"&&(e.filterEnvelope=o.filterEnvelope),o.chorus&&typeof o.chorus=="object"&&(e.chorus=o.chorus),o.phaser&&typeof o.phaser=="object"&&(e.phaser=o.phaser),o.arpeggiator&&typeof o.arpeggiator=="object"&&(e.arpeggiator=o.arpeggiator),o.tempo&&typeof o.tempo=="object"){const s=o.tempo;e.tempo={bpm:typeof s.bpm=="number"?s.bpm:Gl.bpm}}return e.pitchBendRange=typeof o.pitchBendRange=="number"?o.pitchBendRange:zh,e}function Yx(){const[o,e]=S.useState([]),[s,r]=S.useState(null);S.useEffect(()=>{try{const _=localStorage.getItem(Up);if(_){const k=JSON.parse(_).map(C=>({...C,params:Gx(C.params)}));e(k)}}catch(_){console.error("Failed to load presets from localStorage:",_)}},[]),S.useEffect(()=>{try{localStorage.setItem(Up,JSON.stringify(o))}catch(_){console.error("Failed to save presets to localStorage:",_)}},[o]);const a=[...Bp,...o],u=S.useCallback(_=>a.filter(x=>x.category===_),[a]),h=S.useCallback(_=>a.find(x=>x.id===_),[a]),d=S.useCallback((_,x,k)=>{const C={id:`user-${Date.now()}`,name:_,category:x,params:k};return e(R=>[...R,C]),r(C.id),C},[]),f=S.useCallback((_,x)=>{e(k=>k.map(C=>C.id===_?{...C,...x}:C))},[]),m=S.useCallback(_=>_.startsWith("user-")?(e(x=>x.filter(k=>k.id!==_)),r(null),!0):!1,[]),g=S.useCallback(_=>{const x=h(_);return x?(r(_),x.params):null},[h]),v=S.useCallback(()=>(r(null),wo),[]),w=S.useCallback(_=>_.startsWith("user-"),[]);return{presets:a,userPresets:o,factoryPresets:Bp,currentPresetId:s,getPresetsByCategory:u,getPresetById:h,savePreset:d,updatePreset:f,deletePreset:m,loadPreset:g,initPreset:v,isUserPreset:w}}function Xx(){const[o,e]=S.useState(Gl.bpm),[s,r]=S.useState(!1),a=S.useRef([]);S.useEffect(()=>{rr().bpm.value=o},[o]);const u=S.useCallback(w=>{const _=Math.max(40,Math.min(240,w));e(_),rr().bpm.value=_},[]),h=S.useCallback(()=>{rr().start(),r(!0)},[]),d=S.useCallback(()=>{rr().stop(),r(!1)},[]),f=S.useCallback(()=>{s?d():h()},[s,h,d]),m=S.useCallback(()=>{const w=performance.now(),x=a.current.filter(k=>w-k<2e3);if(x.push(w),a.current=x,x.length>=2){const k=[];for(let I=1;I<x.length;I++)k.push(x[I]-x[I-1]);const C=k.reduce((I,j)=>I+j,0)/k.length,R=Math.round(6e4/C);u(R)}},[u]),g=S.useCallback(w=>{const _=60/o;switch(w){case"1/4":return _;case"1/8":return _/2;case"1/16":return _/4;case"1/32":return _/8;default:return _/2}},[o]),v=S.useCallback(w=>{switch(w){case"1/4":return"4n";case"1/8":return"8n";case"1/16":return"16n";case"1/32":return"32n";default:return"8n"}},[]);return S.useEffect(()=>()=>{rr().stop()},[]),{bpm:o,setBpm:u,isPlaying:s,startTransport:h,stopTransport:d,toggleTransport:f,tapTempo:m,getNoteTime:g,getToneTime:v,transport:rr()}}function Kx({playNote:o,stopNote:e,stopAllNotes:s,getNoteTime:r,getToneTime:a,setArpeggiating:u}){const[h,d]=S.useState(ig),f=S.useRef([]),m=S.useRef(0),g=S.useRef(null),v=S.useRef(null),w=S.useRef(!1),_=S.useRef(o),x=S.useRef(e),k=S.useRef(r),C=S.useRef(a),R=S.useRef(u),I=S.useRef(h);S.useEffect(()=>{_.current=o,x.current=e,k.current=r,C.current=a,R.current=u,I.current=h},[o,e,r,a,u,h]);const j=S.useCallback(()=>{const K=[...f.current].sort((ee,J)=>ee-J);if(K.length===0)return[];const ne=[];for(let ee=0;ee<I.current.octaves;ee++){const J=Math.pow(2,ee);ne.push(...K.map(H=>H*J))}switch(I.current.pattern){case"up":return ne;case"down":return ne.reverse();case"upDown":return ne.length<=1?ne:[...ne,...ne.slice(1,-1).reverse()];case"random":for(let ee=ne.length-1;ee>0;ee--){const J=Math.floor(Math.random()*(ee+1));[ne[ee],ne[J]]=[ne[J],ne[ee]]}return ne;default:return ne}},[]),z=S.useCallback(()=>{v.current!==null&&(x.current(v.current),v.current=null)},[]),N=S.useCallback(()=>{if(w.current)return;w.current=!0,rr().state!=="started"&&rr().start(),R.current(!0);const K=C.current(I.current.rate);m.current=0,g.current=new Ah(ee=>{const J=j();if(J.length===0)return;z();const H=J[m.current%J.length];v.current=H,$x().schedule(()=>{_.current(H)},ee),m.current=(m.current+1)%J.length},K),g.current.start(0);const ne=j();if(ne.length>0){const ee=ne[0];v.current=ee,_.current(ee),m.current=1}},[j,z]),M=S.useCallback(()=>{w.current&&(w.current=!1,g.current&&(g.current.stop(),g.current.dispose(),g.current=null),z(),R.current(!1),s())},[s,z]),F=S.useCallback(K=>{f.current.includes(K)||f.current.push(K),I.current.enabled&&f.current.length===1&&!w.current&&N()},[N]),D=S.useCallback(K=>{f.current=f.current.filter(ne=>ne!==K),f.current.length===0&&M()},[M]),X=S.useCallback(()=>{f.current=[],M()},[M]),W=S.useCallback(K=>{d(ne=>({...ne,enabled:K})),I.current={...I.current,enabled:K},K?f.current.length>0&&!w.current&&N():M()},[N,M]),G=S.useCallback(K=>{d(ne=>({...ne,pattern:K})),I.current={...I.current,pattern:K},m.current=0},[]),Q=S.useCallback(K=>{if(d(ne=>({...ne,rate:K})),I.current={...I.current,rate:K},w.current&&g.current){const ne=C.current(K);g.current.interval=ne}},[]),re=S.useCallback(K=>{d(ne=>({...ne,octaves:K})),I.current={...I.current,octaves:K}},[]);return S.useEffect(()=>()=>{g.current&&(g.current.stop(),g.current.dispose())},[]),{params:h,addNote:F,removeNote:D,clearNotes:X,setEnabled:W,setPattern:G,setRate:Q,setOctaves:re,isActive:w.current}}const og=S.createContext(null);function ag(){const o=S.useContext(og);if(!o)throw new Error("useSynth must be used within a SynthProvider");return o}function Zx({children:o,getFrequency:e}){const s=Hx(),{isInitialized:r,isPlaying:a,initializeAudio:u,playNote:h,stopNote:d,stopAllNotes:f,setVolume:m,setAttack:g,setRelease:v,setWaveform:w,setOctave:_,setMonoMode:x,setSubOscLevel:k,setSubOscOctave:C,setNoiseLevel:R,setNoiseType:I,setGlideEnabled:j,setGlideTime:z,setPitchBend:N,setPitchBendRange:M,setLFORate:F,setLFODepth:D,setLFOWaveform:X,setModRouting:W,setLowpassFrequency:G,setLowpassQ:Q,setHighpassFrequency:re,setHighpassQ:K,setFilterEnvAttack:ne,setFilterEnvDecay:ee,setFilterEnvSustain:J,setFilterEnvRelease:H,setFilterEnvAmount:Z,setDistortionAmount:Y,setDistortionWet:E,setChorusRate:q,setChorusDepth:de,setChorusWet:_e,setPhaserRate:ae,setPhaserDepth:fe,setPhaserWet:ke,setDelayTime:oe,setDelayFeedback:Re,setDelayWet:We,setReverbDecay:_t,setReverbWet:Et,getMeterLevel:wn,getWaveformData:In,getFFTData:ce,setArpeggiating:ye}=s,[Ne,Ee]=S.useState(wo),[Ae,Ie]=S.useState(0),[Ze,wt]=S.useState(new Set),[Ut,ln]=S.useState(new Map),xt=Yx(),lt=Xx(),Ge=Kx({playNote:h,stopNote:d,stopAllNotes:f,getNoteTime:lt.getNoteTime,getToneTime:lt.getToneTime,setArpeggiating:ye}),un=Ge.params.enabled,Zn=S.useCallback(ue=>{un?Ge.addNote(ue):h(ue)},[un,Ge,h]),cn=S.useCallback(ue=>{un?Ge.removeNote(ue):d(ue)},[un,Ge,d]),Pn=S.useCallback(ue=>{const Be=e(ue,Ne.master.octave);Be&&(Zn(Be),wt(kt=>new Set(kt).add(ue)),ln(kt=>{const Rt=new Map(kt);return Rt.set(ue,Be),Rt}))},[Ne.master.octave,Zn,e]),cr=S.useCallback(ue=>{const Be=Ut.get(ue);Be&&(cn(Be),wt(kt=>{const Rt=new Set(kt);return Rt.delete(ue),Rt}),ln(kt=>{const Rt=new Map(kt);return Rt.delete(ue),Rt}))},[Ut,cn]),Ps=S.useCallback(ue=>{const Be=Math.max(0,Math.min(5,Ne.master.octave+(ue==="up"?1:-1)));Ee(kt=>({...kt,master:{...kt.master,octave:Be}})),_(Be)},[Ne.master.octave,_]),hn=S.useCallback(ue=>{m(ue.master.volume),g(ue.master.attack),v(ue.master.release),w(ue.master.waveform),_(ue.master.octave),x(ue.master.mono),k(ue.oscillator.subOscLevel),C(ue.oscillator.subOscOctave),R(ue.oscillator.noiseLevel),I(ue.oscillator.noiseType),j(ue.glide.enabled),z(ue.glide.time),M(ue.pitchBendRange),F(ue.lfo.rate),D(ue.lfo.depth),X(ue.lfo.waveform),ue.modRouting.forEach(Be=>{W(Be.target,Be.amount,Be.enabled)}),G(ue.effects.lowpass.frequency),Q(ue.effects.lowpass.Q),re(ue.effects.highpass.frequency),K(ue.effects.highpass.Q),ne(ue.filterEnvelope.attack),ee(ue.filterEnvelope.decay),J(ue.filterEnvelope.sustain),H(ue.filterEnvelope.release),Z(ue.filterEnvelope.amount),Y(ue.effects.distortion.amount),E(ue.effects.distortion.wet),q(ue.chorus.rate),de(ue.chorus.depth),_e(ue.chorus.wet),ae(ue.phaser.rate),fe(ue.phaser.depth),ke(ue.phaser.wet),oe(ue.effects.delay.time),Re(ue.effects.delay.feedback),We(ue.effects.delay.wet),_t(ue.effects.reverb.decay),Et(ue.effects.reverb.wet),lt.setBpm(ue.tempo.bpm),Ge.setEnabled(ue.arpeggiator.enabled),Ge.setPattern(ue.arpeggiator.pattern),Ge.setRate(ue.arpeggiator.rate),Ge.setOctaves(ue.arpeggiator.octaves)},[m,g,v,w,_,x,k,C,R,I,j,z,M,F,D,X,W,G,Q,re,K,ne,ee,J,H,Z,Y,E,q,de,_e,ae,fe,ke,oe,Re,We,_t,Et,lt,Ge]),hr=S.useCallback(ue=>{const Be=xt.loadPreset(ue);return Be&&(Ee(Be),hn(Be)),Be},[xt,hn]),cs=S.useCallback(()=>{const ue=xt.initPreset();return Ee(ue),hn(ue),ue},[xt,hn]),hs=S.useCallback(()=>{Ee(wo),hn(wo),Ie(0),N(0)},[hn,N]),ds=S.useCallback(()=>({...Ne,arpeggiator:Ge.params,tempo:{bpm:lt.bpm}}),[Ne,Ge.params,lt.bpm]),fs=S.useCallback((ue,Be,kt)=>{Ee(Rt=>({...Rt,modRouting:Rt.modRouting.map(Jn=>Jn.target===ue?{...Jn,amount:Be,enabled:kt}:Jn)})),W(ue,Be,kt)},[W]),ps=S.useCallback(ue=>{Ie(ue),N(ue)},[N]),xn=S.useCallback(ue=>{Ee(Be=>({...Be,pitchBendRange:ue})),M(ue)},[M]),kn={params:Ne,setParams:Ee,pitchBendValue:Ae,activeKeys:Ze,setActiveKeys:wt,isInitialized:r,isPlaying:a,initializeAudio:u,playNote:Zn,stopNote:cn,handleNoteOn:Pn,handleNoteOff:cr,handleOctaveChange:Ps,setVolume:m,setAttack:g,setRelease:v,setWaveform:w,setOctave:_,setMonoMode:x,setSubOscLevel:k,setSubOscOctave:C,setNoiseLevel:R,setNoiseType:I,setGlideEnabled:j,setGlideTime:z,setPitchBend:ps,setPitchBendRange:xn,setLFORate:F,setLFODepth:D,setLFOWaveform:X,setModRouting:W,setLowpassFrequency:G,setLowpassQ:Q,setHighpassFrequency:re,setHighpassQ:K,setFilterEnvAttack:ne,setFilterEnvDecay:ee,setFilterEnvSustain:J,setFilterEnvRelease:H,setFilterEnvAmount:Z,setDistortionAmount:Y,setDistortionWet:E,setChorusRate:q,setChorusDepth:de,setChorusWet:_e,setPhaserRate:ae,setPhaserDepth:fe,setPhaserWet:ke,setDelayTime:oe,setDelayFeedback:Re,setDelayWet:We,setReverbDecay:_t,setReverbWet:Et,getMeterLevel:wn,getWaveformData:In,getFFTData:ce,tempo:{bpm:lt.bpm,isPlaying:lt.isPlaying,setBpm:lt.setBpm,tapTempo:lt.tapTempo,toggleTransport:lt.toggleTransport,startTransport:lt.startTransport,stopTransport:lt.stopTransport,getNoteTime:lt.getNoteTime},arpeggiator:{params:Ge.params,setEnabled:Ge.setEnabled,setPattern:Ge.setPattern,setRate:Ge.setRate,setOctaves:Ge.setOctaves,clearNotes:Ge.clearNotes},presets:{presets:xt.presets,currentPresetId:xt.currentPresetId,loadPreset:xt.loadPreset,savePreset:xt.savePreset,deletePreset:xt.deletePreset,initPreset:xt.initPreset,isUserPreset:xt.isUserPreset},handleLoadPreset:hr,handleInitPreset:cs,handleReset:hs,getCurrentParams:ds,handleRoutingChange:fs};return T.jsx(og.Provider,{value:kn,children:o})}const Tl=[{code:"KeyA",noteName:"C",isBlack:!1,frequencies:{0:16.35,1:32.7,2:65.41,3:130.81,4:261.63,5:523.25}},{code:"KeyW",noteName:"C#",isBlack:!0,frequencies:{0:17.32,1:34.65,2:69.3,3:138.59,4:277.18,5:554.37}},{code:"KeyS",noteName:"D",isBlack:!1,frequencies:{0:18.35,1:36.71,2:73.42,3:146.83,4:293.66,5:587.33}},{code:"KeyE",noteName:"D#",isBlack:!0,frequencies:{0:19.45,1:38.89,2:77.78,3:155.56,4:311.13,5:622.25}},{code:"KeyD",noteName:"E",isBlack:!1,frequencies:{0:20.6,1:41.2,2:82.41,3:164.81,4:329.63,5:659.26}},{code:"KeyF",noteName:"F",isBlack:!1,frequencies:{0:21.83,1:43.65,2:87.31,3:174.61,4:349.23,5:698.46}},{code:"KeyT",noteName:"F#",isBlack:!0,frequencies:{0:23.12,1:46.25,2:92.5,3:185,4:369.99,5:739.99}},{code:"KeyG",noteName:"G",isBlack:!1,frequencies:{0:24.5,1:49,2:98,3:196,4:392,5:783.99}},{code:"KeyY",noteName:"G#",isBlack:!0,frequencies:{0:25.96,1:51.91,2:103.83,3:207.65,4:415.3,5:830.61}},{code:"KeyH",noteName:"A",isBlack:!1,frequencies:{0:27.5,1:55,2:110,3:220,4:440,5:880}},{code:"KeyU",noteName:"A#",isBlack:!0,frequencies:{0:29.14,1:58.27,2:116.54,3:233.08,4:466.16,5:932.33}},{code:"KeyJ",noteName:"B",isBlack:!1,frequencies:{0:30.87,1:61.74,2:123.47,3:246.94,4:493.88,5:987.77}},{code:"KeyK",noteName:"C",isBlack:!1,frequencies:{0:32.7,1:65.41,2:130.81,3:261.63,4:523.25,5:1046.5}},{code:"KeyO",noteName:"C#",isBlack:!0,frequencies:{0:34.65,1:69.3,2:138.59,3:277.18,4:554.37,5:1108.73}},{code:"KeyL",noteName:"D",isBlack:!1,frequencies:{0:36.71,1:73.42,2:146.83,3:293.66,4:587.33,5:1174.66}}],Fc=new Set(Tl.map(o=>o.code));function Jx(o){return Tl.find(e=>e.code===o)}function ek(o,e){const s=Jx(o);return(s==null?void 0:s.frequencies[e])??null}function tk({onNoteOn:o,onNoteOff:e,onOctaveChange:s,enabled:r=!0}){const a=S.useRef(new Set),u=S.useCallback(f=>{if(r&&!f.repeat){if((Fc.has(f.code)||f.code==="KeyZ"||f.code==="KeyX")&&f.preventDefault(),f.code==="KeyZ"){s("down");return}if(f.code==="KeyX"){s("up");return}Fc.has(f.code)&&!a.current.has(f.code)&&(a.current.add(f.code),o(f.code))}},[r,o,s]),h=S.useCallback(f=>{r&&Fc.has(f.code)&&(a.current.delete(f.code),e(f.code))},[r,e]),d=S.useCallback(()=>{a.current.forEach(f=>{e(f)}),a.current.clear()},[e]);return S.useEffect(()=>{if(r)return window.addEventListener("keydown",u),window.addEventListener("keyup",h),window.addEventListener("blur",d),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",h),window.removeEventListener("blur",d)}},[r,u,h,d]),{activeKeys:a.current}}function $p({noteName:o,keyCode:e,isBlack:s,isActive:r,onNoteOn:a,onNoteOff:u}){const h=e.replace("Key",""),d=S.useRef(!1),f=S.useCallback(()=>{d.current||(d.current=!0,a())},[a]),m=S.useCallback(()=>{d.current&&(d.current=!1,u())},[u]);return s?T.jsx("button",{className:`
          relative z-10 h-16 -mx-2 flex flex-col items-center justify-end pb-1
          rounded-b-md transition-all duration-75 touch-none select-none
          ${r?"bg-ableton-accent shadow-key-active":"bg-gradient-to-b from-gray-700 to-ableton-key-black hover:from-gray-600 hover:to-gray-800"}
          border border-gray-600
        `,onMouseDown:f,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchCancel:m,children:T.jsx("span",{className:`text-[10px] font-mono ${r?"text-white":"text-ableton-text-muted"}`,children:h})}):T.jsxs("button",{className:`
        relative h-24 flex flex-col items-center justify-end pb-2
        rounded-b-md transition-all duration-75 touch-none select-none
        ${r?"bg-ableton-accent shadow-key-active":"bg-gradient-to-b from-ableton-key-white to-gray-200 hover:from-gray-100 hover:to-gray-300"}
        border border-gray-300
      `,onMouseDown:f,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchCancel:m,children:[T.jsx("span",{className:`text-xs font-mono ${r?"text-white":"text-ableton-text-muted"} mb-1`,children:o}),T.jsx("span",{className:`text-[10px] font-mono ${r?"text-white/70":"text-ableton-text-muted/50"}`,children:h})]})}function nk({activeKeys:o,onNoteOn:e,onNoteOff:s,className:r=""}){const a=Tl.filter(d=>!d.isBlack),u=Tl.filter(d=>d.isBlack),h={KeyW:0,KeyE:1,KeyT:3,KeyY:4,KeyU:5,KeyO:7};return T.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg p-4 ${r}`,children:[T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"grid grid-cols-9 gap-0.5",children:a.map(d=>T.jsx($p,{noteName:d.noteName,keyCode:d.code,isBlack:!1,isActive:o.has(d.code),onNoteOn:()=>e(d.code),onNoteOff:()=>s(d.code)},d.code))}),T.jsx("div",{className:"absolute top-0 left-0 right-0 grid grid-cols-9 gap-0.5 pointer-events-none",children:a.map((d,f)=>{const m=u.find(g=>h[g.code]===f);return m?T.jsx("div",{className:"pointer-events-auto px-1",children:T.jsx($p,{noteName:m.noteName,keyCode:m.code,isBlack:!0,isActive:o.has(m.code),onNoteOn:()=>e(m.code),onNoteOff:()=>s(m.code)})},m.code):T.jsx("div",{className:"h-16"},`spacer-${f}`)})})]}),T.jsx("p",{className:"text-center text-xs text-ableton-text-muted mt-3 font-mono",children:"Use keyboard keys A-L (white) and W, E, T, Y, U, O (black) to play"})]})}function Uo({title:o,children:e,className:s=""}){return T.jsxs("div",{className:`module-panel ${s}`,children:[T.jsx("h3",{className:"module-title",children:o}),T.jsx("div",{className:"flex flex-wrap gap-4",children:e})]})}const Qp={sm:{knob:"w-10 h-10",text:"text-xs"},md:{knob:"w-14 h-14",text:"text-sm"},lg:{knob:"w-20 h-20",text:"text-base"}};function je({value:o,min:e,max:s,onChange:r,label:a,unit:u="",size:h="md",displayValue:d,defaultValue:f}){const m=S.useRef(null),[g,v]=S.useState(!1),w=S.useRef(0),_=S.useRef(0),x=(o-e)/(s-e),k=x*270-135,C=S.useCallback(()=>{f!==void 0&&r(f)},[f,r]),R=S.useCallback(j=>{j.preventDefault(),v(!0),w.current=j.clientY,_.current=o},[o]);S.useEffect(()=>{if(!g)return;const j=N=>{const M=w.current-N.clientY,D=(s-e)/150,X=Math.max(e,Math.min(s,_.current+M*D));r(X)},z=()=>{v(!1)};return window.addEventListener("mousemove",j),window.addEventListener("mouseup",z),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",z)}},[g,e,s,r]);const I=d?d(o):o.toFixed(1);return T.jsxs("div",{className:"knob-container",children:[T.jsx("span",{className:"knob-label",children:a}),T.jsxs("div",{ref:m,className:`${Qp[h].knob} relative cursor-grab active:cursor-grabbing select-none`,onMouseDown:R,onDoubleClick:C,title:f!==void 0?"Double-click to reset":void 0,children:[T.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",children:[T.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-ableton-border",strokeDasharray:"188.5 62.8",strokeDashoffset:"-31.4",strokeLinecap:"round"}),T.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-ableton-accent",strokeDasharray:`${x*188.5} 251.3`,strokeDashoffset:"-31.4",strokeLinecap:"round"})]}),T.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-b from-ableton-surface-light to-ableton-surface shadow-knob",style:{transform:`rotate(${k}deg)`},children:T.jsx("div",{className:"absolute top-1 left-1/2 -translate-x-1/2 w-0.5 h-2 bg-ableton-accent rounded-full"})})]}),T.jsxs("span",{className:`knob-value ${Qp[h].text}`,children:[I,u]})]})}const sk=[{type:"sine",label:"Sine",icon:T.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:T.jsx("path",{d:"M0 6 Q6 0 12 6 Q18 12 24 6",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"triangle",label:"Triangle",icon:T.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:T.jsx("path",{d:"M0 6 L6 0 L12 6 L18 12 L24 6",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"sawtooth",label:"Saw",icon:T.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:T.jsx("path",{d:"M0 12 L12 0 L12 12 L24 0",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"square",label:"Square",icon:T.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:T.jsx("path",{d:"M0 12 L0 0 L12 0 L12 12 L24 12 L24 0",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})}];function lg({value:o,onChange:e}){return T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("span",{className:"knob-label",children:"Waveform"}),T.jsx("div",{className:"flex gap-1 p-1 bg-ableton-bg rounded ring-1 ring-ableton-border",children:sk.map(({type:s,label:r,icon:a})=>T.jsx("button",{onClick:()=>e(s),className:`flex flex-col items-center gap-1 px-2 py-1.5 rounded transition-all ${o===s?"bg-ableton-accent text-white shadow-[inset_0_1px_0_rgba(255,255,255,0.2)]":"bg-ableton-surface text-ableton-text-muted hover:text-ableton-text-dim hover:bg-ableton-surface-light"}`,title:r,children:a},s))})]})}function rk({octave:o,onOctaveChange:e}){return T.jsxs("div",{className:"flex flex-col gap-2",children:[T.jsx("span",{className:"knob-label",children:"Octave"}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("button",{onClick:()=>e(Math.max(0,o-1)),disabled:o<=0,className:"w-6 h-6 rounded bg-ableton-surface-light text-ableton-text-dim hover:bg-ableton-border hover:text-ableton-text disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm font-mono",children:"-"}),T.jsx("span",{className:"w-8 text-center text-lg font-mono text-ableton-text",children:o}),T.jsx("button",{onClick:()=>e(Math.min(5,o+1)),disabled:o>=5,className:"w-6 h-6 rounded bg-ableton-surface-light text-ableton-text-dim hover:bg-ableton-border hover:text-ableton-text disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm font-mono",children:"+"})]}),T.jsx("span",{className:"text-xs text-ableton-text-muted font-mono",children:"Z/X keys"})]})}function Yl({label:o,value:e,onChange:s,size:r="md"}){const a=r==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-xs";return T.jsxs("div",{className:"flex flex-col items-center gap-1",children:[T.jsx("button",{className:`
          ${a}
          rounded font-bold uppercase tracking-wide transition-all
          ${e?"bg-ableton-green text-white ring-2 ring-ableton-green/50 shadow-[0_0_8px_rgba(29,185,84,0.4)]":"bg-ableton-surface text-ableton-text-muted hover:bg-ableton-surface-light hover:text-ableton-text-dim"}
        `,onClick:()=>s(!e),children:e?"ON":"OFF"}),T.jsx("span",{className:"text-xs text-ableton-text-secondary",children:o})]})}function Ci({label:o,value:e,options:s,onChange:r,size:a="md"}){const u=a==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-xs";return T.jsxs("div",{className:"flex flex-col items-center gap-1",children:[T.jsx("div",{className:"flex rounded bg-ableton-bg overflow-hidden ring-1 ring-ableton-border",children:s.map(h=>T.jsx("button",{className:`
              ${u}
              font-bold uppercase tracking-wide transition-all border-r border-ableton-border last:border-r-0
              ${e===h.value?"bg-ableton-accent text-white shadow-[inset_0_1px_0_rgba(255,255,255,0.2)]":"bg-ableton-surface text-ableton-text-muted hover:bg-ableton-surface-light hover:text-ableton-text-dim"}
            `,onClick:()=>r(h.value),children:h.label},String(h.value)))}),T.jsx("span",{className:"text-xs text-ableton-text-secondary",children:o})]})}function ik({value:o,onChange:e,onRelease:s,label:r="PITCH",height:a=120,springBack:u=!0}){const h=S.useRef(null),[d,f]=S.useState(!1),g=(o+1)/2*100,v=S.useCallback(_=>{if(!h.current)return;const x=h.current.getBoundingClientRect(),k=x.bottom-_,R=Math.max(0,Math.min(1,k/x.height))*2-1;e(R)},[e]),w=S.useCallback(_=>{f(!0),v(_.clientY)},[v]);return S.useEffect(()=>{if(!d)return;const _=k=>{v(k.clientY)},x=()=>{f(!1),u&&e(0),s==null||s()};return window.addEventListener("mousemove",_),window.addEventListener("mouseup",x),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",x)}},[d,v,u,e,s]),T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsxs("div",{ref:h,className:"relative w-8 rounded bg-ableton-surface cursor-pointer overflow-hidden",style:{height:a},onMouseDown:w,children:[T.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-px bg-ableton-accent"}),T.jsx("div",{className:"absolute left-1 right-1 bg-ableton-accent/30",style:{top:o>0?`${50-o*50}%`:"50%",bottom:o<0?`${50+o*50}%`:"50%"}}),T.jsx("div",{className:"absolute inset-0 flex flex-col justify-between py-1 pointer-events-none",children:[0,1,2,3,4].map(_=>T.jsx("div",{className:"w-full h-px bg-ableton-bg opacity-50"},_))}),T.jsx("div",{className:`absolute left-0 right-0 h-3 rounded-sm shadow-md transition-colors ${d?"bg-ableton-accent":"bg-ableton-text"}`,style:{bottom:`clamp(0px, calc(${g}% - 6px), calc(100% - 12px))`}})]}),T.jsx("span",{className:"text-xs text-ableton-text-secondary font-medium",children:r})]})}function ok({volume:o,attack:e,release:s,waveform:r,octave:a,mono:u,onVolumeChange:h,onAttackChange:d,onReleaseChange:f,onWaveformChange:m,onOctaveChange:g,onMonoChange:v,className:w=""}){return T.jsxs(Uo,{title:"Master",className:w,children:[T.jsx(je,{value:o,min:-60,max:0,onChange:h,label:"Volume",unit:"dB",displayValue:_=>_.toFixed(0),defaultValue:gt.volume}),T.jsx(je,{value:e,min:.001,max:2,onChange:d,label:"Attack",unit:"s",displayValue:_=>_.toFixed(2),defaultValue:gt.attack}),T.jsx(je,{value:s,min:.01,max:2,onChange:f,label:"Release",unit:"s",displayValue:_=>_.toFixed(2),defaultValue:gt.release}),T.jsx(lg,{value:r,onChange:m}),T.jsx(rk,{octave:a,onOctaveChange:g}),T.jsx(Yl,{label:"Mono",value:u,onChange:v,size:"sm"})]})}function Hp(o){return o>=1e3?`${(o/1e3).toFixed(1)}k`:o.toFixed(0)}function Lc(o){return o>=1?`${o.toFixed(1)}s`:`${(o*1e3).toFixed(0)}ms`}function ak({lowpassFreq:o,lowpassQ:e,highpassFreq:s,highpassQ:r,filterEnvelope:a,onLowpassFreqChange:u,onLowpassQChange:h,onHighpassFreqChange:d,onHighpassQChange:f,onFilterEnvAttackChange:m,onFilterEnvDecayChange:g,onFilterEnvSustainChange:v,onFilterEnvReleaseChange:w,onFilterEnvAmountChange:_,className:x=""}){return T.jsx(Uo,{title:"Filter",className:x,children:T.jsxs("div",{className:"flex flex-col gap-4",children:[T.jsxs("div",{className:"flex gap-3",children:[T.jsx(je,{value:o,min:20,max:2e4,onChange:u,label:"LP Freq",unit:"Hz",size:"sm",displayValue:Hp,defaultValue:ot.lowpass.frequency}),T.jsx(je,{value:e,min:.1,max:15,onChange:h,label:"LP Res",size:"sm",displayValue:k=>k.toFixed(1),defaultValue:ot.lowpass.Q})]}),T.jsxs("div",{className:"flex gap-3",children:[T.jsx(je,{value:s,min:20,max:5e3,onChange:d,label:"HP Freq",unit:"Hz",size:"sm",displayValue:Hp,defaultValue:ot.highpass.frequency}),T.jsx(je,{value:r,min:.1,max:15,onChange:f,label:"HP Res",size:"sm",displayValue:k=>k.toFixed(1),defaultValue:ot.highpass.Q})]}),T.jsxs("div",{className:"border-t border-ableton-bg pt-3",children:[T.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Filter Envelope"}),T.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[T.jsx(je,{value:a.attack,min:.001,max:2,onChange:m,label:"A",size:"sm",displayValue:Lc,defaultValue:Un.attack}),T.jsx(je,{value:a.decay,min:.001,max:2,onChange:g,label:"D",size:"sm",displayValue:Lc,defaultValue:Un.decay}),T.jsx(je,{value:a.sustain,min:0,max:1,onChange:v,label:"S",size:"sm",displayValue:k=>`${(k*100).toFixed(0)}%`,defaultValue:Un.sustain}),T.jsx(je,{value:a.release,min:.001,max:3,onChange:w,label:"R",size:"sm",displayValue:Lc,defaultValue:Un.release}),T.jsx(je,{value:a.amount,min:0,max:1,onChange:_,label:"Amt",size:"sm",displayValue:k=>`${(k*100).toFixed(0)}%`,defaultValue:Un.amount})]})]})]})})}function lk({decay:o,wet:e,onDecayChange:s,onWetChange:r,className:a=""}){return T.jsxs(Uo,{title:"Reverb",className:a,children:[T.jsx(je,{value:o,min:.1,max:10,onChange:s,label:"Decay",unit:"s",displayValue:u=>u.toFixed(1),defaultValue:ot.reverb.decay}),T.jsx(je,{value:e,min:0,max:1,onChange:r,label:"Mix",displayValue:u=>`${Math.round(u*100)}%`,defaultValue:ot.reverb.wet})]})}function uk({time:o,feedback:e,wet:s,onTimeChange:r,onFeedbackChange:a,onWetChange:u,className:h=""}){return T.jsxs(Uo,{title:"Delay",className:h,children:[T.jsx(je,{value:o,min:.01,max:1,onChange:r,label:"Time",unit:"s",displayValue:d=>d.toFixed(2),defaultValue:ot.delay.time}),T.jsx(je,{value:e,min:0,max:.9,onChange:a,label:"Feedback",displayValue:d=>`${Math.round(d*100)}%`,defaultValue:ot.delay.feedback}),T.jsx(je,{value:s,min:0,max:1,onChange:u,label:"Mix",displayValue:d=>`${Math.round(d*100)}%`,defaultValue:ot.delay.wet})]})}function ck({amount:o,wet:e,onAmountChange:s,onWetChange:r,className:a=""}){return T.jsxs(Uo,{title:"Distortion",className:a,children:[T.jsx(je,{value:o,min:0,max:1,onChange:s,label:"Drive",displayValue:u=>`${Math.round(u*100)}%`,defaultValue:ot.distortion.amount}),T.jsx(je,{value:e,min:0,max:1,onChange:r,label:"Mix",displayValue:u=>`${Math.round(u*100)}%`,defaultValue:ot.distortion.wet})]})}function hk({params:o,onWaveformChange:e,onSubOscLevelChange:s,onSubOscOctaveChange:r,onNoiseLevelChange:a,onNoiseTypeChange:u}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Oscillator"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"flex justify-center",children:T.jsx(lg,{value:o.waveform,onChange:e})}),T.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[T.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Sub Osc"}),T.jsxs("div",{className:"flex items-center justify-center gap-4",children:[T.jsx(je,{label:"Level",value:o.subOscLevel,min:0,max:1,onChange:s,size:"sm",defaultValue:On.subOscLevel}),T.jsx(Ci,{label:"Octave",value:o.subOscOctave,options:[{value:-1,label:"-1"},{value:-2,label:"-2"}],onChange:r,size:"sm"})]})]}),T.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[T.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Noise"}),T.jsxs("div",{className:"flex items-center justify-center gap-4",children:[T.jsx(je,{label:"Level",value:o.noiseLevel,min:0,max:1,onChange:a,size:"sm",defaultValue:On.noiseLevel}),T.jsx(Ci,{label:"Type",value:o.noiseType,options:[{value:"white",label:"WHT"},{value:"pink",label:"PNK"}],onChange:u,size:"sm"})]})]})]})]})}const dk=[{value:"sine",label:"SIN"},{value:"triangle",label:"TRI"},{value:"square",label:"SQR"},{value:"sawtooth",label:"SAW"}];function fk({lfoParams:o,modRouting:e,onRateChange:s,onDepthChange:r,onWaveformChange:a,onRoutingChange:u}){const h=m=>e.find(g=>g.target===m)||{target:m,amount:0,enabled:!1},d=m=>{const g=h(m);u(m,g.amount,!g.enabled)},f=(m,g)=>{const v=h(m);u(m,g,v.enabled)};return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"LFO"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-center justify-center gap-4",children:[T.jsx(je,{label:"Rate",value:o.rate,min:.1,max:20,onChange:s,size:"sm",displayValue:m=>`${m.toFixed(1)} Hz`,defaultValue:xi.rate}),T.jsx(je,{label:"Depth",value:o.depth,min:0,max:1,onChange:r,size:"sm",defaultValue:xi.depth})]}),T.jsx("div",{className:"flex justify-center",children:T.jsx(Ci,{label:"Waveform",value:o.waveform,options:dk,onChange:a,size:"sm"})}),T.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[T.jsx("div",{className:"text-xs text-ableton-text-secondary mb-3 text-center",children:"Routing"}),T.jsx("div",{className:"flex justify-center",children:T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsx(Yl,{label:"",value:h("filterCutoff").enabled,onChange:()=>d("filterCutoff"),size:"sm"}),T.jsx(je,{label:"Filter",value:h("filterCutoff").amount,min:0,max:1,onChange:m=>f("filterCutoff",m),size:"sm",defaultValue:0})]})})]})]})]})}function pk({glideParams:o,pitchBendValue:e,pitchBendRange:s,onGlideEnabledChange:r,onGlideTimeChange:a,onPitchBendChange:u,onPitchBendRangeChange:h}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Pitch"}),T.jsxs("div",{className:"flex items-start justify-center gap-6",children:[T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsx(ik,{value:e,onChange:u,label:"BEND",height:100,springBack:!0}),T.jsx(je,{label:"Range",value:s,min:1,max:12,onChange:h,size:"sm",displayValue:d=>`${Math.round(d)} st`,defaultValue:zh})]}),T.jsxs("div",{className:"flex flex-col items-center gap-3",children:[T.jsx("div",{className:"text-xs text-ableton-text-secondary",children:"Glide"}),T.jsx(Yl,{label:"",value:o.enabled,onChange:r,size:"sm"}),T.jsx(je,{label:"Time",value:o.time,min:.01,max:2,onChange:a,size:"sm",displayValue:d=>`${(d*1e3).toFixed(0)}ms`,defaultValue:Cl.time})]})]})]})}function mk({params:o,onRateChange:e,onDepthChange:s,onWetChange:r}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Chorus"}),T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx(je,{label:"Rate",value:o.rate,min:.1,max:10,onChange:e,size:"sm",displayValue:a=>`${a.toFixed(1)} Hz`,defaultValue:Pr.rate}),T.jsx(je,{label:"Depth",value:o.depth,min:0,max:1,onChange:s,size:"sm",defaultValue:Pr.depth}),T.jsx(je,{label:"Mix",value:o.wet,min:0,max:1,onChange:r,size:"sm",defaultValue:Pr.wet})]})]})}function gk({params:o,onRateChange:e,onDepthChange:s,onWetChange:r}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Phaser"}),T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx(je,{label:"Rate",value:o.rate,min:.1,max:10,onChange:e,size:"sm",displayValue:a=>`${a.toFixed(1)} Hz`,defaultValue:ki.rate}),T.jsx(je,{label:"Depth",value:o.depth,min:0,max:1,onChange:s,size:"sm",defaultValue:ki.depth}),T.jsx(je,{label:"Mix",value:o.wet,min:0,max:1,onChange:r,size:"sm",defaultValue:ki.wet})]})]})}const vk=[{value:"up",label:"UP"},{value:"down",label:"DN"},{value:"upDown",label:"U/D"},{value:"random",label:"RND"}],yk=[{value:"1/4",label:"1/4"},{value:"1/8",label:"1/8"},{value:"1/16",label:"1/16"},{value:"1/32",label:"1/32"}],_k=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}];function wk({params:o,onEnabledChange:e,onPatternChange:s,onRateChange:r,onOctavesChange:a}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Arpeggiator"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"flex justify-center",children:T.jsx(Yl,{label:"Active",value:o.enabled,onChange:e})}),T.jsx("div",{className:"flex justify-center",children:T.jsx(Ci,{label:"Pattern",value:o.pattern,options:vk,onChange:s,size:"sm"})}),T.jsx("div",{className:"flex justify-center",children:T.jsx(Ci,{label:"Rate",value:o.rate,options:yk,onChange:r,size:"sm"})}),T.jsx("div",{className:"flex justify-center",children:T.jsx(Ci,{label:"Octaves",value:o.octaves,options:_k,onChange:a,size:"sm"})})]})]})}function xk({bpm:o,isPlaying:e,onBpmChange:s,onTapTempo:r,onToggleTransport:a}){return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Tempo"}),T.jsxs("div",{className:"space-y-4",children:[T.jsx("div",{className:"flex justify-center",children:T.jsx(je,{label:"BPM",value:o,min:40,max:240,onChange:s,size:"md",displayValue:u=>`${Math.round(u)}`,defaultValue:Gl.bpm})}),T.jsxs("div",{className:"flex items-center justify-center gap-3",children:[T.jsx("button",{className:`
              px-3 py-2 rounded text-xs font-medium uppercase tracking-wide transition-all
              ${e?"bg-green-600 text-white":"bg-ableton-surface-light text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg"}
            `,onClick:a,children:e?"Stop":"Play"}),T.jsx("button",{className:"px-3 py-2 rounded text-xs font-medium uppercase tracking-wide bg-ableton-surface-light text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg transition-all",onClick:r,children:"Tap"})]})]})]})}function ug(o,e=!0){const s=S.useRef(),r=S.useRef(o);S.useEffect(()=>{r.current=o},[o]),S.useEffect(()=>{if(!e)return;const a=()=>{r.current(),s.current=requestAnimationFrame(a)};return s.current=requestAnimationFrame(a),()=>{s.current&&cancelAnimationFrame(s.current)}},[e])}function kk({getMeterLevel:o,isPlaying:e,className:s="",compact:r=!1}){const[a,u]=S.useState(-60);ug(()=>{const f=o();u(m=>f>m?f:m-2)},e);const h=Math.max(0,Math.min(100,(a+60)/60*100)),d=()=>h>90?"bg-ableton-red":h>75?"bg-ableton-yellow":"bg-ableton-green";return r?T.jsxs("div",{className:`flex items-center gap-2 ${s}`,children:[T.jsx("span",{className:"text-[10px] font-semibold text-ableton-text-secondary uppercase tracking-wider",children:"Level"}),T.jsxs("div",{className:"relative flex-1 h-3 bg-ableton-bg rounded overflow-hidden min-w-[60px]",children:[T.jsx("div",{className:`absolute top-0 bottom-0 left-0 transition-all duration-75 ${d()}`,style:{width:`${h}%`}}),T.jsx("div",{className:"absolute inset-0 flex justify-between px-0.5",children:[0,1,2,3,4].map(f=>T.jsx("div",{className:"w-px bg-ableton-border/50"},f))})]}),T.jsx("span",{className:"text-[10px] font-mono text-ableton-text-muted tabular-nums w-12",children:a>-60?`${a.toFixed(0)}dB`:"-"})]}):T.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg p-4 flex flex-col items-center ${s}`,children:[T.jsx("h3",{className:"module-title mb-2",children:"Level"}),T.jsxs("div",{className:"relative w-6 h-32 bg-ableton-bg rounded overflow-hidden",children:[T.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[T.jsx("div",{className:"flex-1 bg-gradient-to-b from-ableton-red/20 to-transparent"}),T.jsx("div",{className:"flex-1 bg-gradient-to-b from-ableton-yellow/20 to-transparent"}),T.jsx("div",{className:"flex-[2] bg-gradient-to-b from-ableton-green/20 to-transparent"})]}),T.jsx("div",{className:`absolute bottom-0 left-0 right-0 transition-all duration-75 ${d()}`,style:{height:`${h}%`}}),T.jsx("div",{className:"absolute inset-0 flex flex-col justify-between py-1",children:[0,-6,-12,-24,-48].map(f=>T.jsx("div",{className:"h-px bg-ableton-border"},f))})]}),T.jsxs("div",{className:"flex flex-col justify-between h-32 text-[9px] font-mono text-ableton-text-muted -mt-32 ml-10",children:[T.jsx("span",{children:"0"}),T.jsx("span",{children:"-6"}),T.jsx("span",{children:"-12"}),T.jsx("span",{children:"-24"}),T.jsx("span",{children:"-48"})]}),T.jsx("span",{className:"mt-2 text-xs font-mono text-ableton-text tabular-nums",children:a>-60?`${a.toFixed(0)} dB`:"- dB"})]})}function Ck({getWaveformData:o,isPlaying:e,className:s="",compact:r=!1}){const a=S.useRef(null),[u,h]=S.useState({width:0,height:0});S.useEffect(()=>{const m=a.current;if(!m)return;const g=new ResizeObserver(v=>{for(const w of v){const{width:_,height:x}=w.contentRect;h({width:_,height:x}),m.width=_*window.devicePixelRatio,m.height=x*window.devicePixelRatio}});return g.observe(m),()=>g.disconnect()},[]),ug(()=>{const m=a.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const v=o(),w=window.devicePixelRatio;g.fillStyle="#1a1a1a",g.fillRect(0,0,m.width,m.height),g.strokeStyle="#3d3d3d",g.lineWidth=1,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2);const _=r?2:4;for(let k=0;k<=_;k++){const C=m.width/_*k;g.moveTo(C,0),g.lineTo(C,m.height)}g.stroke(),g.strokeStyle="#ff764d",g.lineWidth=(r?1.5:2)*w,g.lineCap="round",g.lineJoin="round",g.beginPath();const x=m.width/v.length;for(let k=0;k<v.length;k++){const C=k*x,R=(v[k]+1)/2*m.height;k===0?g.moveTo(C,R):g.lineTo(C,R)}g.stroke()},e),S.useEffect(()=>{if(e)return;const m=a.current;if(!m)return;const g=m.getContext("2d");if(!g)return;g.fillStyle="#1a1a1a",g.fillRect(0,0,m.width,m.height),g.strokeStyle="#3d3d3d",g.lineWidth=1,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2);const v=r?2:4;for(let w=0;w<=v;w++){const _=m.width/v*w;g.moveTo(_,0),g.lineTo(_,m.height)}g.stroke(),g.strokeStyle="#ff764d",g.lineWidth=(r?1.5:2)*window.devicePixelRatio,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2),g.stroke()},[e,u,r]);const d=r?"h-12":"h-24",f=r?"p-2":"p-4";return T.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg ${f} ${s}`,children:[!r&&T.jsx("h3",{className:"module-title mb-2",children:"Waveform"}),T.jsx("canvas",{ref:a,className:`w-full ${d} rounded bg-ableton-bg`,style:{imageRendering:"crisp-edges"}})]})}function Tk({getFFTData:o,isActive:e,compact:s=!1,className:r=""}){const a=S.useRef(null),u=S.useRef(null),h=S.useRef(),[d,f]=S.useState({width:200,height:s?48:80});S.useEffect(()=>{const v=u.current;if(!v)return;const w=new ResizeObserver(_=>{for(const x of _){const{width:k}=x.contentRect,C=s?48:80;f({width:k,height:C}),a.current&&(a.current.width=k,a.current.height=C)}});return w.observe(v),()=>w.disconnect()},[s]);const m=S.useCallback(()=>{const v=a.current;if(!v)return;const w=v.getContext("2d");if(!w)return;const{width:_,height:x}=d,k=o(),C=k.length;w.fillStyle="#1a1a1a",w.fillRect(0,0,_,x);const R=s?32:Math.min(64,C),I=_/R*.8,j=_/R*.2;for(let N=0;N<R;N++){const M=Math.floor(Math.pow(N/R,1.5)*C),F=k[M],D=Math.max(0,(F+100)/100),X=D*x*.9,W=30+N/R*30,G=80+D*20,Q=40+D*20;w.fillStyle=`hsl(${W}, ${G}%, ${Q}%)`,w.fillRect(N*(I+j),x-X,I,X)}w.strokeStyle="rgba(255, 255, 255, 0.1)",w.lineWidth=1;const z=s?2:4;for(let N=1;N<z;N++){const M=x/z*N;w.beginPath(),w.moveTo(0,M),w.lineTo(_,M),w.stroke()}e&&(h.current=requestAnimationFrame(m))},[o,e,d,s]);S.useEffect(()=>(e&&m(),()=>{h.current&&cancelAnimationFrame(h.current)}),[e,m]);const g=s?"p-2":"p-3";return T.jsxs("div",{ref:u,className:`bg-ableton-surface rounded-lg ${g} ${r}`,children:[!s&&T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-2",children:"Spectrum"}),T.jsx("canvas",{ref:a,width:d.width,height:d.height,className:"rounded bg-ableton-bg w-full"})]})}const Sk=[{value:"bass",label:"Bass"},{value:"lead",label:"Lead"},{value:"pad",label:"Pad"},{value:"fx",label:"FX"},{value:"user",label:"User"}];function bk({onSave:o,onCancel:e,initialName:s="",initialCategory:r="user"}){const[a,u]=S.useState(s),[h,d]=S.useState(r),f=m=>{m.preventDefault(),a.trim()&&o(a.trim(),h)};return T.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-6 w-80 shadow-xl",children:[T.jsx("h2",{className:"text-lg font-semibold text-ableton-text mb-4",children:"Save Preset"}),T.jsxs("form",{onSubmit:f,className:"space-y-4",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs text-ableton-text-secondary mb-1",children:"Name"}),T.jsx("input",{type:"text",value:a,onChange:m=>u(m.target.value),className:"w-full px-3 py-2 bg-ableton-bg rounded text-ableton-text text-sm focus:outline-none focus:ring-2 focus:ring-ableton-orange",placeholder:"My Preset",autoFocus:!0})]}),T.jsxs("div",{children:[T.jsx("label",{className:"block text-xs text-ableton-text-secondary mb-1",children:"Category"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:Sk.map(m=>T.jsx("button",{type:"button",className:`px-3 py-1 text-xs rounded transition-colors ${h===m.value?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>d(m.value),children:m.label},m.value))})]}),T.jsxs("div",{className:"flex gap-2 pt-2",children:[T.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-sm bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light rounded transition-colors",onClick:e,children:"Cancel"}),T.jsx("button",{type:"submit",disabled:!a.trim(),className:"flex-1 px-4 py-2 text-sm bg-ableton-orange text-ableton-bg hover:bg-ableton-orange/80 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]})]})]})})}const Nk=[{value:"bass",label:"Bass"},{value:"lead",label:"Lead"},{value:"pad",label:"Pad"},{value:"fx",label:"FX"},{value:"user",label:"User"}];function Ek({presets:o,currentPresetId:e,onLoadPreset:s,onSavePreset:r,onDeletePreset:a,onInitPreset:u,onReset:h,getCurrentParams:d,isUserPreset:f}){const[m,g]=S.useState("all"),[v,w]=S.useState(!1),[_,x]=S.useState(!1),k=m==="all"?o:o.filter(N=>N.category===m),C=e?o.find(N=>N.id===e):null,R=S.useCallback(N=>{s(N),x(!1)},[s]),I=S.useCallback((N,M)=>{const F=d();r(N,M,F),w(!1)},[d,r]),j=S.useCallback(()=>{e&&f(e)&&confirm("Delete this preset?")&&a(e)},[e,f,a]),z=S.useCallback(()=>{u()},[u]);return T.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[T.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Presets"}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex gap-1 overflow-x-auto",children:[T.jsx("button",{className:`px-2 py-1 text-xs rounded transition-colors ${m==="all"?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>g("all"),children:"All"}),Nk.map(N=>T.jsx("button",{className:`px-2 py-1 text-xs rounded transition-colors ${m===N.value?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>g(N.value),children:N.label},N.value))]}),T.jsxs("div",{className:"relative",children:[T.jsxs("button",{className:"w-full px-3 py-2 bg-ableton-bg rounded text-left text-sm text-ableton-text flex justify-between items-center hover:bg-ableton-surface-light transition-colors",onClick:()=>x(!_),children:[T.jsx("span",{className:"truncate",children:C?C.name:"-- Select Preset --"}),T.jsx("svg",{className:`w-4 h-4 transition-transform ${_?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),_&&T.jsx("div",{className:"absolute z-10 w-full mt-1 bg-ableton-bg rounded shadow-lg max-h-48 overflow-y-auto",children:k.map(N=>T.jsxs("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-ableton-surface-light transition-colors ${N.id===e?"text-ableton-orange":"text-ableton-text"}`,onClick:()=>R(N.id),children:[T.jsx("span",{className:"truncate block",children:N.name}),T.jsx("span",{className:"text-xs text-ableton-text-secondary capitalize",children:N.category})]},N.id))})]}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:z,children:"Init"}),T.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:h,children:"Reset"}),T.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:()=>w(!0),children:"Save"}),e&&f(e)&&T.jsx("button",{className:"px-3 py-2 text-xs font-medium uppercase tracking-wide bg-red-900/50 text-red-400 hover:bg-red-900 rounded transition-colors",onClick:j,children:"Del"})]})]}),v&&T.jsx(bk,{onSave:I,onCancel:()=>w(!1),initialName:(C==null?void 0:C.name)||"",initialCategory:(C==null?void 0:C.category)||"user"})]})}function Rk({onStart:o}){return T.jsxs("div",{className:"min-h-screen bg-ableton-bg flex flex-col items-center justify-center gap-6",children:[T.jsx("h1",{className:"text-4xl font-bold text-ableton-text",children:"Web PolySynth"}),T.jsxs("p",{className:"text-ableton-text-dim max-w-md text-center",children:["A 4-voice polyphonic synthesizer with LFO, sub-oscillator, filter envelope, chorus, phaser, delay, reverb, and arpeggiator - right in your browser.",T.jsx("br",{}),"Use your keyboard or click the keys to play chords."]}),T.jsx("button",{onClick:o,className:"px-8 py-4 bg-ableton-accent text-white rounded-lg text-xl font-semibold hover:bg-ableton-accent-hover transition-colors shadow-lg",children:"Click to Start"}),T.jsx("p",{className:"text-ableton-text-muted text-sm",children:"Audio requires user interaction to start"})]})}function Ak(){const o=ag(),{params:e,setParams:s,pitchBendValue:r,activeKeys:a,isInitialized:u,isPlaying:h,handleNoteOn:d,handleNoteOff:f,handleOctaveChange:m,setVolume:g,setAttack:v,setRelease:w,setWaveform:_,setOctave:x,setMonoMode:k,setSubOscLevel:C,setSubOscOctave:R,setNoiseLevel:I,setNoiseType:j,setGlideEnabled:z,setGlideTime:N,setPitchBend:M,setPitchBendRange:F,setLFORate:D,setLFODepth:X,setLFOWaveform:W,setLowpassFrequency:G,setLowpassQ:Q,setHighpassFrequency:re,setHighpassQ:K,setFilterEnvAttack:ne,setFilterEnvDecay:ee,setFilterEnvSustain:J,setFilterEnvRelease:H,setFilterEnvAmount:Z,setDistortionAmount:Y,setDistortionWet:E,setChorusRate:q,setChorusDepth:de,setChorusWet:_e,setPhaserRate:ae,setPhaserDepth:fe,setPhaserWet:ke,setDelayTime:oe,setDelayFeedback:Re,setDelayWet:We,setReverbDecay:_t,setReverbWet:Et,getMeterLevel:wn,getWaveformData:In,getFFTData:ce,tempo:ye,arpeggiator:Ne,presets:Ee,handleLoadPreset:Ae,handleInitPreset:Ie,handleReset:Ze,getCurrentParams:wt,handleRoutingChange:Ut}=o;tk({onNoteOn:d,onNoteOff:f,onOctaveChange:m,enabled:u});const ln=S.useCallback(U=>{s(B=>({...B,master:{...B.master,volume:U}})),g(U)},[s,g]),xt=S.useCallback(U=>{s(B=>({...B,master:{...B.master,attack:U}})),v(U)},[s,v]),lt=S.useCallback(U=>{s(B=>({...B,master:{...B.master,release:U}})),w(U)},[s,w]),Ge=S.useCallback(U=>{s(B=>({...B,master:{...B.master,waveform:U},oscillator:{...B.oscillator,waveform:U}})),_(U)},[s,_]),un=S.useCallback(U=>{s(B=>({...B,master:{...B.master,octave:U}})),x(U)},[s,x]),Zn=S.useCallback(U=>{s(B=>({...B,master:{...B.master,mono:U}})),k(U)},[s,k]),cn=S.useCallback(U=>{s(B=>({...B,oscillator:{...B.oscillator,subOscLevel:U}})),C(U)},[s,C]),Pn=S.useCallback(U=>{s(B=>({...B,oscillator:{...B.oscillator,subOscOctave:U}})),R(U)},[s,R]),cr=S.useCallback(U=>{s(B=>({...B,oscillator:{...B.oscillator,noiseLevel:U}})),I(U)},[s,I]),Ps=S.useCallback(U=>{s(B=>({...B,oscillator:{...B.oscillator,noiseType:U}})),j(U)},[s,j]),hn=S.useCallback(U=>{s(B=>({...B,glide:{...B.glide,enabled:U}})),z(U)},[s,z]),hr=S.useCallback(U=>{s(B=>({...B,glide:{...B.glide,time:U}})),N(U)},[s,N]),cs=S.useCallback(U=>{s(B=>({...B,pitchBendRange:U})),F(U)},[s,F]),hs=S.useCallback(U=>{s(B=>({...B,lfo:{...B.lfo,rate:U}})),D(U)},[s,D]),ds=S.useCallback(U=>{s(B=>({...B,lfo:{...B.lfo,depth:U}})),X(U)},[s,X]),fs=S.useCallback(U=>{s(B=>({...B,lfo:{...B.lfo,waveform:U}})),W(U)},[s,W]),ps=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,lowpass:{...B.effects.lowpass,frequency:U}}})),G(U)},[s,G]),xn=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,lowpass:{...B.effects.lowpass,Q:U}}})),Q(U)},[s,Q]),kn=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,highpass:{...B.effects.highpass,frequency:U}}})),re(U)},[s,re]),ue=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,highpass:{...B.effects.highpass,Q:U}}})),K(U)},[s,K]),Be=S.useCallback(U=>{s(B=>({...B,filterEnvelope:{...B.filterEnvelope,attack:U}})),ne(U)},[s,ne]),kt=S.useCallback(U=>{s(B=>({...B,filterEnvelope:{...B.filterEnvelope,decay:U}})),ee(U)},[s,ee]),Rt=S.useCallback(U=>{s(B=>({...B,filterEnvelope:{...B.filterEnvelope,sustain:U}})),J(U)},[s,J]),Jn=S.useCallback(U=>{s(B=>({...B,filterEnvelope:{...B.filterEnvelope,release:U}})),H(U)},[s,H]),dr=S.useCallback(U=>{s(B=>({...B,filterEnvelope:{...B.filterEnvelope,amount:U}})),Z(U)},[s,Z]),Qr=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,distortion:{...B.effects.distortion,amount:U}}})),Y(U)},[s,Y]),ms=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,distortion:{...B.effects.distortion,wet:U}}})),E(U)},[s,E]),fr=S.useCallback(U=>{s(B=>({...B,chorus:{...B.chorus,rate:U}})),q(U)},[s,q]),gs=S.useCallback(U=>{s(B=>({...B,chorus:{...B.chorus,depth:U}})),de(U)},[s,de]),Pi=S.useCallback(U=>{s(B=>({...B,chorus:{...B.chorus,wet:U}})),_e(U)},[s,_e]),vs=S.useCallback(U=>{s(B=>({...B,phaser:{...B.phaser,rate:U}})),ae(U)},[s,ae]),Fs=S.useCallback(U=>{s(B=>({...B,phaser:{...B.phaser,depth:U}})),fe(U)},[s,fe]),$=S.useCallback(U=>{s(B=>({...B,phaser:{...B.phaser,wet:U}})),ke(U)},[s,ke]),Pe=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,delay:{...B.effects.delay,time:U}}})),oe(U)},[s,oe]),Je=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,delay:{...B.effects.delay,feedback:U}}})),Re(U)},[s,Re]),Ue=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,delay:{...B.effects.delay,wet:U}}})),We(U)},[s,We]),$t=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,reverb:{...B.effects.reverb,decay:U}}})),_t(U)},[s,_t]),pt=S.useCallback(U=>{s(B=>({...B,effects:{...B.effects,reverb:{...B.effects.reverb,wet:U}}})),Et(U)},[s,Et]),et=S.useCallback(U=>{s(B=>({...B,tempo:{...B.tempo,bpm:U}})),ye.setBpm(U)},[s,ye]),Cn=S.useCallback(U=>{Ne.setEnabled(U),U||Ne.clearNotes()},[Ne]),es=S.useCallback(U=>{Ne.setPattern(U)},[Ne]),ys=S.useCallback(U=>{Ne.setRate(U)},[Ne]),pr=S.useCallback(U=>{Ne.setOctaves(U)},[Ne]);return T.jsxs("div",{className:"min-h-screen bg-ableton-bg p-3 md:p-4",children:[T.jsxs("header",{className:"mb-3 flex flex-col lg:flex-row lg:items-center gap-3",children:[T.jsxs("div",{className:"flex-shrink-0",children:[T.jsx("h1",{className:"text-xl font-bold text-ableton-text",children:"Web PolySynth"}),T.jsx("p",{className:"text-xs text-ableton-text-dim",children:"4-voice polyphonic"})]}),T.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[T.jsx(Ck,{className:"flex-1 min-w-0",getWaveformData:In,isPlaying:h,compact:!0}),T.jsx(Tk,{getFFTData:ce,isActive:u,compact:!0,className:"w-32 flex-shrink-0"}),T.jsx(kk,{getMeterLevel:wn,isPlaying:h,compact:!0,className:"w-32 flex-shrink-0"})]})]}),T.jsx("div",{className:"mb-3",children:T.jsx(nk,{activeKeys:a,onNoteOn:d,onNoteOff:f})}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[T.jsx(ok,{volume:e.master.volume,attack:e.master.attack,release:e.master.release,waveform:e.master.waveform,octave:e.master.octave,mono:e.master.mono,onVolumeChange:ln,onAttackChange:xt,onReleaseChange:lt,onWaveformChange:Ge,onOctaveChange:un,onMonoChange:Zn}),T.jsx(hk,{params:e.oscillator,onWaveformChange:Ge,onSubOscLevelChange:cn,onSubOscOctaveChange:Pn,onNoiseLevelChange:cr,onNoiseTypeChange:Ps}),T.jsx(pk,{glideParams:e.glide,pitchBendValue:r,pitchBendRange:e.pitchBendRange,onGlideEnabledChange:hn,onGlideTimeChange:hr,onPitchBendChange:M,onPitchBendRangeChange:cs}),T.jsx(ak,{lowpassFreq:e.effects.lowpass.frequency,lowpassQ:e.effects.lowpass.Q,highpassFreq:e.effects.highpass.frequency,highpassQ:e.effects.highpass.Q,filterEnvelope:e.filterEnvelope,onLowpassFreqChange:ps,onLowpassQChange:xn,onHighpassFreqChange:kn,onHighpassQChange:ue,onFilterEnvAttackChange:Be,onFilterEnvDecayChange:kt,onFilterEnvSustainChange:Rt,onFilterEnvReleaseChange:Jn,onFilterEnvAmountChange:dr}),T.jsx(fk,{lfoParams:e.lfo,modRouting:e.modRouting,onRateChange:hs,onDepthChange:ds,onWaveformChange:fs,onRoutingChange:Ut}),T.jsx(xk,{bpm:ye.bpm,isPlaying:ye.isPlaying,onBpmChange:et,onTapTempo:ye.tapTempo,onToggleTransport:ye.toggleTransport}),T.jsx(ck,{amount:e.effects.distortion.amount,wet:e.effects.distortion.wet,onAmountChange:Qr,onWetChange:ms}),T.jsx(mk,{params:e.chorus,onRateChange:fr,onDepthChange:gs,onWetChange:Pi}),T.jsx(gk,{params:e.phaser,onRateChange:vs,onDepthChange:Fs,onWetChange:$}),T.jsx(uk,{time:e.effects.delay.time,feedback:e.effects.delay.feedback,wet:e.effects.delay.wet,onTimeChange:Pe,onFeedbackChange:Je,onWetChange:Ue}),T.jsx(lk,{decay:e.effects.reverb.decay,wet:e.effects.reverb.wet,onDecayChange:$t,onWetChange:pt}),T.jsx(wk,{params:Ne.params,onEnabledChange:Cn,onPatternChange:es,onRateChange:ys,onOctavesChange:pr}),T.jsx("div",{className:"col-span-2 md:col-span-3 lg:col-span-6",children:T.jsx(Ek,{presets:Ee.presets,currentPresetId:Ee.currentPresetId,onLoadPreset:Ae,onSavePreset:Ee.savePreset,onDeletePreset:Ee.deletePreset,onInitPreset:Ie,onReset:Ze,getCurrentParams:wt,isUserPreset:Ee.isUserPreset})})]}),T.jsx("footer",{className:"mt-8 text-center text-xs text-ableton-text-muted",children:"Built with React, Tone.js, and Tailwind CSS"})]})}function Ok(){const o=ag();return o.isInitialized?T.jsx(Ak,{}):T.jsx(Rk,{onStart:o.initializeAudio})}function Dk(){return T.jsx(Zx,{getFrequency:ek,children:T.jsx(Ok,{})})}ny.createRoot(document.getElementById("root")).render(T.jsx(S.StrictMode,{children:T.jsx(Dk,{})}));
