var Jv=Object.defineProperty;var e_=(o,e,n)=>e in o?Jv(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var Oc=(o,e,n)=>e_(o,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var Mc={exports:{}},ho={},Dc={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function t_(){if(mp)return Re;mp=1;var o=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function y(E){return E===null||typeof E!="object"?null:(E=v&&E[v]||E["@@iterator"],typeof E=="function"?E:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function T(E,F,re){this.props=E,this.context=F,this.refs=k,this.updater=re||x}T.prototype.isReactComponent={},T.prototype.setState=function(E,F){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,F,"setState")},T.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function R(){}R.prototype=T.prototype;function q(E,F,re){this.props=E,this.context=F,this.refs=k,this.updater=re||x}var z=q.prototype=new R;z.constructor=q,w(z,T.prototype),z.isPureReactComponent=!0;var B=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function M(E,F,re){var ce,J={},fe=null,Ce=null;if(F!=null)for(ce in F.ref!==void 0&&(Ce=F.ref),F.key!==void 0&&(fe=""+F.key),F)N.call(F,ce)&&!L.hasOwnProperty(ce)&&(J[ce]=F[ce]);var ae=arguments.length-2;if(ae===1)J.children=re;else if(1<ae){for(var Ae=Array(ae),He=0;He<ae;He++)Ae[He]=arguments[He+2];J.children=Ae}if(E&&E.defaultProps)for(ce in ae=E.defaultProps,ae)J[ce]===void 0&&(J[ce]=ae[ce]);return{$$typeof:o,type:E,key:fe,ref:Ce,props:J,_owner:I.current}}function X(E,F){return{$$typeof:o,type:E.type,key:F,ref:E.ref,props:E.props,_owner:E._owner}}function U(E){return typeof E=="object"&&E!==null&&E.$$typeof===o}function H(E){var F={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(re){return F[re]})}var Q=/\/+/g;function ne(E,F){return typeof E=="object"&&E!==null&&E.key!=null?H(""+E.key):F.toString(36)}function se(E,F,re,ce,J){var fe=typeof E;(fe==="undefined"||fe==="boolean")&&(E=null);var Ce=!1;if(E===null)Ce=!0;else switch(fe){case"string":case"number":Ce=!0;break;case"object":switch(E.$$typeof){case o:case e:Ce=!0}}if(Ce)return Ce=E,J=J(Ce),E=ce===""?"."+ne(Ce,0):ce,B(J)?(re="",E!=null&&(re=E.replace(Q,"$&/")+"/"),se(J,F,re,"",function(He){return He})):J!=null&&(U(J)&&(J=X(J,re+(!J.key||Ce&&Ce.key===J.key?"":(""+J.key).replace(Q,"$&/")+"/")+E)),F.push(J)),1;if(Ce=0,ce=ce===""?".":ce+":",B(E))for(var ae=0;ae<E.length;ae++){fe=E[ae];var Ae=ce+ne(fe,ae);Ce+=se(fe,F,re,Ae,J)}else if(Ae=y(E),typeof Ae=="function")for(E=Ae.call(E),ae=0;!(fe=E.next()).done;)fe=fe.value,Ae=ce+ne(fe,ae++),Ce+=se(fe,F,re,Ae,J);else if(fe==="object")throw F=String(E),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Ce}function de(E,F,re){if(E==null)return E;var ce=[],J=0;return se(E,ce,"","",function(fe){return F.call(re,fe,J++)}),ce}function le(E){if(E._status===-1){var F=E._result;F=F(),F.then(function(re){(E._status===0||E._status===-1)&&(E._status=1,E._result=re)},function(re){(E._status===0||E._status===-1)&&(E._status=2,E._result=re)}),E._status===-1&&(E._status=0,E._result=F)}if(E._status===1)return E._result.default;throw E._result}var ie={current:null},G={transition:null},Z={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:G,ReactCurrentOwner:I};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:de,forEach:function(E,F,re){de(E,function(){F.apply(this,arguments)},re)},count:function(E){var F=0;return de(E,function(){F++}),F},toArray:function(E){return de(E,function(F){return F})||[]},only:function(E){if(!U(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Re.Component=T,Re.Fragment=n,Re.Profiler=a,Re.PureComponent=q,Re.StrictMode=r,Re.Suspense=f,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Re.act=Y,Re.cloneElement=function(E,F,re){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var ce=w({},E.props),J=E.key,fe=E.ref,Ce=E._owner;if(F!=null){if(F.ref!==void 0&&(fe=F.ref,Ce=I.current),F.key!==void 0&&(J=""+F.key),E.type&&E.type.defaultProps)var ae=E.type.defaultProps;for(Ae in F)N.call(F,Ae)&&!L.hasOwnProperty(Ae)&&(ce[Ae]=F[Ae]===void 0&&ae!==void 0?ae[Ae]:F[Ae])}var Ae=arguments.length-2;if(Ae===1)ce.children=re;else if(1<Ae){ae=Array(Ae);for(var He=0;He<Ae;He++)ae[He]=arguments[He+2];ce.children=ae}return{$$typeof:o,type:E.type,key:J,ref:fe,props:ce,_owner:Ce}},Re.createContext=function(E){return E={$$typeof:h,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:u,_context:E},E.Consumer=E},Re.createElement=M,Re.createFactory=function(E){var F=M.bind(null,E);return F.type=E,F},Re.createRef=function(){return{current:null}},Re.forwardRef=function(E){return{$$typeof:d,render:E}},Re.isValidElement=U,Re.lazy=function(E){return{$$typeof:g,_payload:{_status:-1,_result:E},_init:le}},Re.memo=function(E,F){return{$$typeof:m,type:E,compare:F===void 0?null:F}},Re.startTransition=function(E){var F=G.transition;G.transition={};try{E()}finally{G.transition=F}},Re.unstable_act=Y,Re.useCallback=function(E,F){return ie.current.useCallback(E,F)},Re.useContext=function(E){return ie.current.useContext(E)},Re.useDebugValue=function(){},Re.useDeferredValue=function(E){return ie.current.useDeferredValue(E)},Re.useEffect=function(E,F){return ie.current.useEffect(E,F)},Re.useId=function(){return ie.current.useId()},Re.useImperativeHandle=function(E,F,re){return ie.current.useImperativeHandle(E,F,re)},Re.useInsertionEffect=function(E,F){return ie.current.useInsertionEffect(E,F)},Re.useLayoutEffect=function(E,F){return ie.current.useLayoutEffect(E,F)},Re.useMemo=function(E,F){return ie.current.useMemo(E,F)},Re.useReducer=function(E,F,re){return ie.current.useReducer(E,F,re)},Re.useRef=function(E){return ie.current.useRef(E)},Re.useState=function(E){return ie.current.useState(E)},Re.useSyncExternalStore=function(E,F,re){return ie.current.useSyncExternalStore(E,F,re)},Re.useTransition=function(){return ie.current.useTransition()},Re.version="18.3.1",Re}var gp;function Kc(){return gp||(gp=1,Dc.exports=t_()),Dc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function n_(){if(vp)return ho;vp=1;var o=Kc(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(d,f,m){var g,v={},y=null,x=null;m!==void 0&&(y=""+m),f.key!==void 0&&(y=""+f.key),f.ref!==void 0&&(x=f.ref);for(g in f)r.call(f,g)&&!u.hasOwnProperty(g)&&(v[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:e,type:d,key:y,ref:x,props:v,_owner:a.current}}return ho.Fragment=n,ho.jsx=h,ho.jsxs=h,ho}var _p;function s_(){return _p||(_p=1,Mc.exports=n_()),Mc.exports}var C=s_(),S=Kc(),el={},Ic={exports:{}},Zt={},Pc={exports:{}},Fc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function r_(){return yp||(yp=1,(function(o){function e(G,Z){var Y=G.length;G.push(Z);e:for(;0<Y;){var E=Y-1>>>1,F=G[E];if(0<a(F,Z))G[E]=Z,G[Y]=F,Y=E;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var Z=G[0],Y=G.pop();if(Y!==Z){G[0]=Y;e:for(var E=0,F=G.length,re=F>>>1;E<re;){var ce=2*(E+1)-1,J=G[ce],fe=ce+1,Ce=G[fe];if(0>a(J,Y))fe<F&&0>a(Ce,J)?(G[E]=Ce,G[fe]=Y,E=fe):(G[E]=J,G[ce]=Y,E=ce);else if(fe<F&&0>a(Ce,Y))G[E]=Ce,G[fe]=Y,E=fe;else break e}}return Z}function a(G,Z){var Y=G.sortIndex-Z.sortIndex;return Y!==0?Y:G.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var h=Date,d=h.now();o.unstable_now=function(){return h.now()-d}}var f=[],m=[],g=1,v=null,y=3,x=!1,w=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(G){for(var Z=n(m);Z!==null;){if(Z.callback===null)r(m);else if(Z.startTime<=G)r(m),Z.sortIndex=Z.expirationTime,e(f,Z);else break;Z=n(m)}}function B(G){if(k=!1,z(G),!w)if(n(f)!==null)w=!0,le(N);else{var Z=n(m);Z!==null&&ie(B,Z.startTime-G)}}function N(G,Z){w=!1,k&&(k=!1,R(M),M=-1),x=!0;var Y=y;try{for(z(Z),v=n(f);v!==null&&(!(v.expirationTime>Z)||G&&!H());){var E=v.callback;if(typeof E=="function"){v.callback=null,y=v.priorityLevel;var F=E(v.expirationTime<=Z);Z=o.unstable_now(),typeof F=="function"?v.callback=F:v===n(f)&&r(f),z(Z)}else r(f);v=n(f)}if(v!==null)var re=!0;else{var ce=n(m);ce!==null&&ie(B,ce.startTime-Z),re=!1}return re}finally{v=null,y=Y,x=!1}}var I=!1,L=null,M=-1,X=5,U=-1;function H(){return!(o.unstable_now()-U<X)}function Q(){if(L!==null){var G=o.unstable_now();U=G;var Z=!0;try{Z=L(!0,G)}finally{Z?ne():(I=!1,L=null)}}else I=!1}var ne;if(typeof q=="function")ne=function(){q(Q)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,de=se.port2;se.port1.onmessage=Q,ne=function(){de.postMessage(null)}}else ne=function(){T(Q,0)};function le(G){L=G,I||(I=!0,ne())}function ie(G,Z){M=T(function(){G(o.unstable_now())},Z)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(G){G.callback=null},o.unstable_continueExecution=function(){w||x||(w=!0,le(N))},o.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<G?Math.floor(1e3/G):5},o.unstable_getCurrentPriorityLevel=function(){return y},o.unstable_getFirstCallbackNode=function(){return n(f)},o.unstable_next=function(G){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var Y=y;y=Z;try{return G()}finally{y=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(G,Z){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Y=y;y=G;try{return Z()}finally{y=Y}},o.unstable_scheduleCallback=function(G,Z,Y){var E=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?E+Y:E):Y=E,G){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Y+F,G={id:g++,callback:Z,priorityLevel:G,startTime:Y,expirationTime:F,sortIndex:-1},Y>E?(G.sortIndex=Y,e(m,G),n(f)===null&&G===n(m)&&(k?(R(M),M=-1):k=!0,ie(B,Y-E))):(G.sortIndex=F,e(f,G),w||x||(w=!0,le(N))),G},o.unstable_shouldYield=H,o.unstable_wrapCallback=function(G){var Z=y;return function(){var Y=y;y=Z;try{return G.apply(this,arguments)}finally{y=Y}}}})(Fc)),Fc}var wp;function i_(){return wp||(wp=1,Pc.exports=r_()),Pc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp;function o_(){if(xp)return Zt;xp=1;var o=Kc(),e=i_();function n(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,a={};function u(t,s){h(t,s),h(t+"Capture",s)}function h(t,s){for(a[t]=s,t=0;t<s.length;t++)r.add(s[t])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function y(t){return f.call(v,t)?!0:f.call(g,t)?!1:m.test(t)?v[t]=!0:(g[t]=!0,!1)}function x(t,s,i,l){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return l?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function w(t,s,i,l){if(s===null||typeof s>"u"||x(t,s,i,l))return!0;if(l)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(t,s,i,l,c,p,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=l,this.attributeNamespace=c,this.mustUseProperty=i,this.propertyName=t,this.type=s,this.sanitizeURL=p,this.removeEmptyString=_}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){T[t]=new k(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];T[s]=new k(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){T[t]=new k(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){T[t]=new k(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){T[t]=new k(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){T[t]=new k(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){T[t]=new k(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){T[t]=new k(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){T[t]=new k(t,5,!1,t.toLowerCase(),null,!1,!1)});var R=/[\-:]([a-z])/g;function q(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(R,q);T[s]=new k(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(R,q);T[s]=new k(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(R,q);T[s]=new k(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){T[t]=new k(t,1,!1,t.toLowerCase(),null,!1,!1)}),T.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){T[t]=new k(t,1,!1,t.toLowerCase(),null,!0,!0)});function z(t,s,i,l){var c=T.hasOwnProperty(s)?T[s]:null;(c!==null?c.type!==0:l||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(w(s,i,c,l)&&(i=null),l||c===null?y(s)&&(i===null?t.removeAttribute(s):t.setAttribute(s,""+i)):c.mustUseProperty?t[c.propertyName]=i===null?c.type===3?!1:"":i:(s=c.attributeName,l=c.attributeNamespace,i===null?t.removeAttribute(s):(c=c.type,i=c===3||c===4&&i===!0?"":""+i,l?t.setAttributeNS(l,s,i):t.setAttribute(s,i))))}var B=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),I=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),H=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),G=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=G&&t[G]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Object.assign,E;function F(t){if(E===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);E=s&&s[1]||""}return`
`+E+t}var re=!1;function ce(t,s){if(!t||re)return"";re=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(W){var l=W}Reflect.construct(t,[],s)}else{try{s.call()}catch(W){l=W}t.call(s.prototype)}else{try{throw Error()}catch(W){l=W}t()}}catch(W){if(W&&l&&typeof W.stack=="string"){for(var c=W.stack.split(`
`),p=l.stack.split(`
`),_=c.length-1,b=p.length-1;1<=_&&0<=b&&c[_]!==p[b];)b--;for(;1<=_&&0<=b;_--,b--)if(c[_]!==p[b]){if(_!==1||b!==1)do if(_--,b--,0>b||c[_]!==p[b]){var A=`
`+c[_].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=_&&0<=b);break}}}finally{re=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?F(t):""}function J(t){switch(t.tag){case 5:return F(t.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return t=ce(t.type,!1),t;case 11:return t=ce(t.type.render,!1),t;case 1:return t=ce(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case I:return"Portal";case X:return"Profiler";case M:return"StrictMode";case ne:return"Suspense";case se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case H:return(t.displayName||"Context")+".Consumer";case U:return(t._context.displayName||"Context")+".Provider";case Q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case de:return s=t.displayName||null,s!==null?s:fe(t.type)||"Memo";case le:s=t._payload,t=t._init;try{return fe(t(s))}catch{}}return null}function Ce(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ae(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ae(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function He(t){var s=Ae(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,p=i.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return c.call(this)},set:function(_){l=""+_,p.call(this,_)}}),Object.defineProperty(t,s,{enumerable:i.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function At(t){t._valueTracker||(t._valueTracker=He(t))}function Ut(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var i=s.getValue(),l="";return t&&(l=Ae(t)?t.checked?"true":"false":t.value),t=l,t!==i?(s.setValue(t),!0):!1}function Cn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qn(t,s){var i=s.checked;return Y({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function ue(t,s){var i=s.defaultValue==null?"":s.defaultValue,l=s.checked!=null?s.checked:s.defaultChecked;i=ae(s.value!=null?s.value:i),t._wrapperState={initialChecked:l,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function we(t,s){s=s.checked,s!=null&&z(t,"checked",s,!1)}function Be(t,s){we(t,s);var i=ae(s.value),l=s.type;if(i!=null)l==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?be(t,s.type,i):s.hasOwnProperty("defaultValue")&&be(t,s.type,ae(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Ve(t,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var l=s.type;if(!(l!=="submit"&&l!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,i||s===t.value||(t.value=s),t.defaultValue=s}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function be(t,s,i){(s!=="number"||Cn(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Me=Array.isArray;function et(t,s,i,l){if(t=t.options,s){s={};for(var c=0;c<i.length;c++)s["$"+i[c]]=!0;for(i=0;i<t.length;i++)c=s.hasOwnProperty("$"+t[i].value),t[i].selected!==c&&(t[i].selected=c),c&&l&&(t[i].defaultSelected=!0)}else{for(i=""+ae(i),s=null,c=0;c<t.length;c++){if(t[c].value===i){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}s!==null||t[c].disabled||(s=t[c])}s!==null&&(s.selected=!0)}}function St(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tn(t,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(n(92));if(Me(i)){if(1<i.length)throw Error(n(93));i=i[0]}s=i}s==null&&(s=""),i=s}t._wrapperState={initialValue:ae(i)}}function Sn(t,s){var i=ae(s.value),l=ae(s.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),s.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),l!=null&&(t.defaultValue=""+l)}function Jn(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function es(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xs(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?es(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ts,Zs=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,l,c){MSApp.execUnsafeLocalFunction(function(){return t(s,i,l,c)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ts=ts||document.createElement("div"),ts.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ts.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Wn(t,s){if(s){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=s;return}}t.textContent=s}var Bn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mr=["Webkit","ms","Moz","O"];Object.keys(Bn).forEach(function(t){Mr.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Bn[s]=Bn[t]})});function Dr(t,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||Bn.hasOwnProperty(t)&&Bn[t]?(""+s).trim():s+"px"}function Ir(t,s){t=t.style;for(var i in s)if(s.hasOwnProperty(i)){var l=i.indexOf("--")===0,c=Dr(i,s[i],l);i==="float"&&(i="cssFloat"),l?t.setProperty(i,c):t[i]=c}}var O=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V(t,s){if(s){if(O[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Ft(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bn=null;function ns(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Si=null,ks=null,Ts=null;function Vo(t){if(t=Xi(t)){if(typeof Si!="function")throw Error(n(280));var s=t.stateNode;s&&(s=ma(s),Si(t.stateNode,t.type,s))}}function zo(t){ks?Ts?Ts.push(t):Ts=[t]:ks=t}function qo(){if(ks){var t=ks,s=Ts;if(Ts=ks=null,Vo(t),s)for(t=0;t<s.length;t++)Vo(s[t])}}function Wo(t,s){return t(s)}function Bo(){}var bi=!1;function Uo(t,s,i){if(bi)return t(s,i);bi=!0;try{return Wo(t,s,i)}finally{bi=!1,(ks!==null||Ts!==null)&&(Bo(),qo())}}function Ks(t,s){var i=t.stateNode;if(i===null)return null;var l=ma(i);if(l===null)return null;i=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(n(231,s,typeof i));return i}var Ni=!1;if(d)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Ni=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Ni=!1}function Zl(t,s,i,l,c,p,_,b,A){var W=Array.prototype.slice.call(arguments,3);try{s.apply(i,W)}catch(ee){this.onError(ee)}}var er=!1,Pr=null,Fr=!1,Ei=null,$={onError:function(t){er=!0,Pr=t}};function De(t,s,i,l,c,p,_,b,A){er=!1,Pr=null,Zl.apply($,arguments)}function Ue(t,s,i,l,c,p,_,b,A){if(De.apply(this,arguments),er){if(er){var W=Pr;er=!1,Pr=null}else throw Error(n(198));Fr||(Fr=!0,Ei=W)}}function Ee(t){var s=t,i=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(i=s.return),t=s.return;while(t)}return s.tag===3?i:null}function lt(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function bt(t){if(Ee(t)!==t)throw Error(n(188))}function Xe(t){var s=t.alternate;if(!s){if(s=Ee(t),s===null)throw Error(n(188));return s!==t?null:t}for(var i=t,l=s;;){var c=i.return;if(c===null)break;var p=c.alternate;if(p===null){if(l=c.return,l!==null){i=l;continue}break}if(c.child===p.child){for(p=c.child;p;){if(p===i)return bt(c),t;if(p===l)return bt(c),s;p=p.sibling}throw Error(n(188))}if(i.return!==l.return)i=c,l=p;else{for(var _=!1,b=c.child;b;){if(b===i){_=!0,i=c,l=p;break}if(b===l){_=!0,l=c,i=p;break}b=b.sibling}if(!_){for(b=p.child;b;){if(b===i){_=!0,i=p,l=c;break}if(b===l){_=!0,l=p,i=c;break}b=b.sibling}if(!_)throw Error(n(189))}}if(i.alternate!==l)throw Error(n(190))}if(i.tag!==3)throw Error(n(188));return i.stateNode.current===i?t:s}function dn(t){return t=Xe(t),t!==null?ss(t):null}function ss(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=ss(t);if(s!==null)return s;t=t.sibling}return null}var tr=e.unstable_scheduleCallback,Ri=e.unstable_cancelCallback,$o=e.unstable_shouldYield,Qo=e.unstable_requestPaint,tt=e.unstable_now,Ho=e.unstable_getCurrentPriorityLevel,Lr=e.unstable_ImmediatePriority,Ai=e.unstable_UserBlockingPriority,nr=e.unstable_NormalPriority,Go=e.unstable_LowPriority,Oi=e.unstable_IdlePriority,sr=null,nn=null;function Yo(t){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(sr,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:vg,Xo=Math.log,gg=Math.LN2;function vg(t){return t>>>=0,t===0?32:31-(Xo(t)/gg|0)|0}var Zo=64,Ko=4194304;function Mi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Jo(t,s){var i=t.pendingLanes;if(i===0)return 0;var l=0,c=t.suspendedLanes,p=t.pingedLanes,_=i&268435455;if(_!==0){var b=_&~c;b!==0?l=Mi(b):(p&=_,p!==0&&(l=Mi(p)))}else _=i&~c,_!==0?l=Mi(_):p!==0&&(l=Mi(p));if(l===0)return 0;if(s!==0&&s!==l&&(s&c)===0&&(c=l&-l,p=s&-s,c>=p||c===16&&(p&4194240)!==0))return s;if((l&4)!==0&&(l|=i&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=l;0<s;)i=31-$t(s),c=1<<i,l|=t[i],s&=~c;return l}function _g(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yg(t,s){for(var i=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-$t(p),b=1<<_,A=c[_];A===-1?((b&i)===0||(b&l)!==0)&&(c[_]=_g(b,s)):A<=s&&(t.expiredLanes|=b),p&=~b}}function Kl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $h(){var t=Zo;return Zo<<=1,(Zo&4194240)===0&&(Zo=64),t}function Jl(t){for(var s=[],i=0;31>i;i++)s.push(t);return s}function Di(t,s,i){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-$t(s),t[s]=i}function wg(t,s){var i=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<i;){var c=31-$t(i),p=1<<c;s[c]=0,l[c]=-1,t[c]=-1,i&=~p}}function eu(t,s){var i=t.entangledLanes|=s;for(t=t.entanglements;i;){var l=31-$t(i),c=1<<l;c&s|t[l]&s&&(t[l]|=s),i&=~c}}var We=0;function Qh(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Hh,tu,Gh,Yh,Xh,nu=!1,ea=[],Cs=null,Ss=null,bs=null,Ii=new Map,Pi=new Map,Ns=[],xg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zh(t,s){switch(t){case"focusin":case"focusout":Cs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":bs=null;break;case"pointerover":case"pointerout":Ii.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(s.pointerId)}}function Fi(t,s,i,l,c,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:i,eventSystemFlags:l,nativeEvent:p,targetContainers:[c]},s!==null&&(s=Xi(s),s!==null&&tu(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,c!==null&&s.indexOf(c)===-1&&s.push(c),t)}function kg(t,s,i,l,c){switch(s){case"focusin":return Cs=Fi(Cs,t,s,i,l,c),!0;case"dragenter":return Ss=Fi(Ss,t,s,i,l,c),!0;case"mouseover":return bs=Fi(bs,t,s,i,l,c),!0;case"pointerover":var p=c.pointerId;return Ii.set(p,Fi(Ii.get(p)||null,t,s,i,l,c)),!0;case"gotpointercapture":return p=c.pointerId,Pi.set(p,Fi(Pi.get(p)||null,t,s,i,l,c)),!0}return!1}function Kh(t){var s=rr(t.target);if(s!==null){var i=Ee(s);if(i!==null){if(s=i.tag,s===13){if(s=lt(i),s!==null){t.blockedOn=s,Xh(t.priority,function(){Gh(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var i=ru(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);bn=l,i.target.dispatchEvent(l),bn=null}else return s=Xi(i),s!==null&&tu(s),t.blockedOn=i,!1;s.shift()}return!0}function Jh(t,s,i){ta(t)&&i.delete(s)}function Tg(){nu=!1,Cs!==null&&ta(Cs)&&(Cs=null),Ss!==null&&ta(Ss)&&(Ss=null),bs!==null&&ta(bs)&&(bs=null),Ii.forEach(Jh),Pi.forEach(Jh)}function Li(t,s){t.blockedOn===s&&(t.blockedOn=null,nu||(nu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Tg)))}function ji(t){function s(c){return Li(c,t)}if(0<ea.length){Li(ea[0],t);for(var i=1;i<ea.length;i++){var l=ea[i];l.blockedOn===t&&(l.blockedOn=null)}}for(Cs!==null&&Li(Cs,t),Ss!==null&&Li(Ss,t),bs!==null&&Li(bs,t),Ii.forEach(s),Pi.forEach(s),i=0;i<Ns.length;i++)l=Ns[i],l.blockedOn===t&&(l.blockedOn=null);for(;0<Ns.length&&(i=Ns[0],i.blockedOn===null);)Kh(i),i.blockedOn===null&&Ns.shift()}var jr=B.ReactCurrentBatchConfig,na=!0;function Cg(t,s,i,l){var c=We,p=jr.transition;jr.transition=null;try{We=1,su(t,s,i,l)}finally{We=c,jr.transition=p}}function Sg(t,s,i,l){var c=We,p=jr.transition;jr.transition=null;try{We=4,su(t,s,i,l)}finally{We=c,jr.transition=p}}function su(t,s,i,l){if(na){var c=ru(t,s,i,l);if(c===null)xu(t,s,l,sa,i),Zh(t,l);else if(kg(c,t,s,i,l))l.stopPropagation();else if(Zh(t,l),s&4&&-1<xg.indexOf(t)){for(;c!==null;){var p=Xi(c);if(p!==null&&Hh(p),p=ru(t,s,i,l),p===null&&xu(t,s,l,sa,i),p===c)break;c=p}c!==null&&l.stopPropagation()}else xu(t,s,l,null,i)}}var sa=null;function ru(t,s,i,l){if(sa=null,t=ns(l),t=rr(t),t!==null)if(s=Ee(t),s===null)t=null;else if(i=s.tag,i===13){if(t=lt(s),t!==null)return t;t=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return sa=t,null}function ed(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ho()){case Lr:return 1;case Ai:return 4;case nr:case Go:return 16;case Oi:return 536870912;default:return 16}default:return 16}}var Es=null,iu=null,ra=null;function td(){if(ra)return ra;var t,s=iu,i=s.length,l,c="value"in Es?Es.value:Es.textContent,p=c.length;for(t=0;t<i&&s[t]===c[t];t++);var _=i-t;for(l=1;l<=_&&s[i-l]===c[p-l];l++);return ra=c.slice(t,1<l?1-l:void 0)}function ia(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function oa(){return!0}function nd(){return!1}function sn(t){function s(i,l,c,p,_){this._reactName=i,this._targetInst=c,this.type=l,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(i=t[b],this[b]=i?i(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?oa:nd,this.isPropagationStopped=nd,this}return Y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=oa)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=oa)},persist:function(){},isPersistent:oa}),s}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ou=sn(Vr),Vi=Y({},Vr,{view:0,detail:0}),bg=sn(Vi),au,lu,zi,aa=Y({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zi&&(zi&&t.type==="mousemove"?(au=t.screenX-zi.screenX,lu=t.screenY-zi.screenY):lu=au=0,zi=t),au)},movementY:function(t){return"movementY"in t?t.movementY:lu}}),sd=sn(aa),Ng=Y({},aa,{dataTransfer:0}),Eg=sn(Ng),Rg=Y({},Vi,{relatedTarget:0}),uu=sn(Rg),Ag=Y({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=sn(Ag),Mg=Y({},Vr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Dg=sn(Mg),Ig=Y({},Vr,{data:0}),rd=sn(Ig),Pg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Lg[t])?!!s[t]:!1}function cu(){return jg}var Vg=Y({},Vi,{key:function(t){if(t.key){var s=Pg[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zg=sn(Vg),qg=Y({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=sn(qg),Wg=Y({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),Bg=sn(Wg),Ug=Y({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),$g=sn(Ug),Qg=Y({},aa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hg=sn(Qg),Gg=[9,13,27,32],hu=d&&"CompositionEvent"in window,qi=null;d&&"documentMode"in document&&(qi=document.documentMode);var Yg=d&&"TextEvent"in window&&!qi,od=d&&(!hu||qi&&8<qi&&11>=qi),ad=" ",ld=!1;function ud(t,s){switch(t){case"keyup":return Gg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zr=!1;function Xg(t,s){switch(t){case"compositionend":return cd(s);case"keypress":return s.which!==32?null:(ld=!0,ad);case"textInput":return t=s.data,t===ad&&ld?null:t;default:return null}}function Zg(t,s){if(zr)return t==="compositionend"||!hu&&ud(t,s)?(t=td(),ra=iu=Es=null,zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return od&&s.locale!=="ko"?null:s.data;default:return null}}var Kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Kg[t.type]:s==="textarea"}function dd(t,s,i,l){zo(l),s=da(s,"onChange"),0<s.length&&(i=new ou("onChange","change",null,i,l),t.push({event:i,listeners:s}))}var Wi=null,Bi=null;function Jg(t){Ad(t,0)}function la(t){var s=$r(t);if(Ut(s))return t}function ev(t,s){if(t==="change")return s}var fd=!1;if(d){var du;if(d){var fu="oninput"in document;if(!fu){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),fu=typeof pd.oninput=="function"}du=fu}else du=!1;fd=du&&(!document.documentMode||9<document.documentMode)}function md(){Wi&&(Wi.detachEvent("onpropertychange",gd),Bi=Wi=null)}function gd(t){if(t.propertyName==="value"&&la(Bi)){var s=[];dd(s,Bi,t,ns(t)),Uo(Jg,s)}}function tv(t,s,i){t==="focusin"?(md(),Wi=s,Bi=i,Wi.attachEvent("onpropertychange",gd)):t==="focusout"&&md()}function nv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return la(Bi)}function sv(t,s){if(t==="click")return la(s)}function rv(t,s){if(t==="input"||t==="change")return la(s)}function iv(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Nn=typeof Object.is=="function"?Object.is:iv;function Ui(t,s){if(Nn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var i=Object.keys(t),l=Object.keys(s);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var c=i[l];if(!f.call(s,c)||!Nn(t[c],s[c]))return!1}return!0}function vd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _d(t,s){var i=vd(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=s&&l>=s)return{node:i,offset:s-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=vd(i)}}function yd(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yd(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function wd(){for(var t=window,s=Cn();s instanceof t.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)t=s.contentWindow;else break;s=Cn(t.document)}return s}function pu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function ov(t){var s=wd(),i=t.focusedElem,l=t.selectionRange;if(s!==i&&i&&i.ownerDocument&&yd(i.ownerDocument.documentElement,i)){if(l!==null&&pu(i)){if(s=l.start,t=l.end,t===void 0&&(t=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(t,i.value.length);else if(t=(s=i.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var c=i.textContent.length,p=Math.min(l.start,c);l=l.end===void 0?p:Math.min(l.end,c),!t.extend&&p>l&&(c=l,l=p,p=c),c=_d(i,p);var _=_d(i,l);c&&_&&(t.rangeCount!==1||t.anchorNode!==c.node||t.anchorOffset!==c.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(s=s.createRange(),s.setStart(c.node,c.offset),t.removeAllRanges(),p>l?(t.addRange(s),t.extend(_.node,_.offset)):(s.setEnd(_.node,_.offset),t.addRange(s)))}}for(s=[],t=i;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)t=s[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var av=d&&"documentMode"in document&&11>=document.documentMode,qr=null,mu=null,$i=null,gu=!1;function xd(t,s,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;gu||qr==null||qr!==Cn(l)||(l=qr,"selectionStart"in l&&pu(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),$i&&Ui($i,l)||($i=l,l=da(mu,"onSelect"),0<l.length&&(s=new ou("onSelect","select",null,s,i),t.push({event:s,listeners:l}),s.target=qr)))}function ua(t,s){var i={};return i[t.toLowerCase()]=s.toLowerCase(),i["Webkit"+t]="webkit"+s,i["Moz"+t]="moz"+s,i}var Wr={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionend:ua("Transition","TransitionEnd")},vu={},kd={};d&&(kd=document.createElement("div").style,"AnimationEvent"in window||(delete Wr.animationend.animation,delete Wr.animationiteration.animation,delete Wr.animationstart.animation),"TransitionEvent"in window||delete Wr.transitionend.transition);function ca(t){if(vu[t])return vu[t];if(!Wr[t])return t;var s=Wr[t],i;for(i in s)if(s.hasOwnProperty(i)&&i in kd)return vu[t]=s[i];return t}var Td=ca("animationend"),Cd=ca("animationiteration"),Sd=ca("animationstart"),bd=ca("transitionend"),Nd=new Map,Ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(t,s){Nd.set(t,s),u(s,[t])}for(var _u=0;_u<Ed.length;_u++){var yu=Ed[_u],lv=yu.toLowerCase(),uv=yu[0].toUpperCase()+yu.slice(1);Rs(lv,"on"+uv)}Rs(Td,"onAnimationEnd"),Rs(Cd,"onAnimationIteration"),Rs(Sd,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(bd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qi));function Rd(t,s,i){var l=t.type||"unknown-event";t.currentTarget=i,Ue(l,s,void 0,t),t.currentTarget=null}function Ad(t,s){s=(s&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],c=l.event;l=l.listeners;e:{var p=void 0;if(s)for(var _=l.length-1;0<=_;_--){var b=l[_],A=b.instance,W=b.currentTarget;if(b=b.listener,A!==p&&c.isPropagationStopped())break e;Rd(c,b,W),p=A}else for(_=0;_<l.length;_++){if(b=l[_],A=b.instance,W=b.currentTarget,b=b.listener,A!==p&&c.isPropagationStopped())break e;Rd(c,b,W),p=A}}}if(Fr)throw t=Ei,Fr=!1,Ei=null,t}function Ze(t,s){var i=s[Nu];i===void 0&&(i=s[Nu]=new Set);var l=t+"__bubble";i.has(l)||(Od(s,t,2,!1),i.add(l))}function wu(t,s,i){var l=0;s&&(l|=4),Od(i,t,l,s)}var ha="_reactListening"+Math.random().toString(36).slice(2);function Hi(t){if(!t[ha]){t[ha]=!0,r.forEach(function(i){i!=="selectionchange"&&(cv.has(i)||wu(i,!1,t),wu(i,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ha]||(s[ha]=!0,wu("selectionchange",!1,s))}}function Od(t,s,i,l){switch(ed(s)){case 1:var c=Cg;break;case 4:c=Sg;break;default:c=su}i=c.bind(null,s,i,t),c=void 0,!Ni||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(s,i,{capture:!0,passive:c}):t.addEventListener(s,i,!0):c!==void 0?t.addEventListener(s,i,{passive:c}):t.addEventListener(s,i,!1)}function xu(t,s,i,l,c){var p=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===c||b.nodeType===8&&b.parentNode===c)break;if(_===4)for(_=l.return;_!==null;){var A=_.tag;if((A===3||A===4)&&(A=_.stateNode.containerInfo,A===c||A.nodeType===8&&A.parentNode===c))return;_=_.return}for(;b!==null;){if(_=rr(b),_===null)return;if(A=_.tag,A===5||A===6){l=p=_;continue e}b=b.parentNode}}l=l.return}Uo(function(){var W=p,ee=ns(i),te=[];e:{var K=Nd.get(t);if(K!==void 0){var he=ou,me=t;switch(t){case"keypress":if(ia(i)===0)break e;case"keydown":case"keyup":he=zg;break;case"focusin":me="focus",he=uu;break;case"focusout":me="blur",he=uu;break;case"beforeblur":case"afterblur":he=uu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=sd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Bg;break;case Td:case Cd:case Sd:he=Og;break;case bd:he=$g;break;case"scroll":he=bg;break;case"wheel":he=Hg;break;case"copy":case"cut":case"paste":he=Dg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=id}var ve=(s&4)!==0,ht=!ve&&t==="scroll",P=ve?K!==null?K+"Capture":null:K;ve=[];for(var D=W,j;D!==null;){j=D;var oe=j.stateNode;if(j.tag===5&&oe!==null&&(j=oe,P!==null&&(oe=Ks(D,P),oe!=null&&ve.push(Gi(D,oe,j)))),ht)break;D=D.return}0<ve.length&&(K=new he(K,me,null,i,ee),te.push({event:K,listeners:ve}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",he=t==="mouseout"||t==="pointerout",K&&i!==bn&&(me=i.relatedTarget||i.fromElement)&&(rr(me)||me[rs]))break e;if((he||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,he?(me=i.relatedTarget||i.toElement,he=W,me=me?rr(me):null,me!==null&&(ht=Ee(me),me!==ht||me.tag!==5&&me.tag!==6)&&(me=null)):(he=null,me=W),he!==me)){if(ve=sd,oe="onMouseLeave",P="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(ve=id,oe="onPointerLeave",P="onPointerEnter",D="pointer"),ht=he==null?K:$r(he),j=me==null?K:$r(me),K=new ve(oe,D+"leave",he,i,ee),K.target=ht,K.relatedTarget=j,oe=null,rr(ee)===W&&(ve=new ve(P,D+"enter",me,i,ee),ve.target=j,ve.relatedTarget=ht,oe=ve),ht=oe,he&&me)t:{for(ve=he,P=me,D=0,j=ve;j;j=Br(j))D++;for(j=0,oe=P;oe;oe=Br(oe))j++;for(;0<D-j;)ve=Br(ve),D--;for(;0<j-D;)P=Br(P),j--;for(;D--;){if(ve===P||P!==null&&ve===P.alternate)break t;ve=Br(ve),P=Br(P)}ve=null}else ve=null;he!==null&&Md(te,K,he,ve,!1),me!==null&&ht!==null&&Md(te,ht,me,ve,!0)}}e:{if(K=W?$r(W):window,he=K.nodeName&&K.nodeName.toLowerCase(),he==="select"||he==="input"&&K.type==="file")var _e=ev;else if(hd(K))if(fd)_e=rv;else{_e=nv;var xe=tv}else(he=K.nodeName)&&he.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(_e=sv);if(_e&&(_e=_e(t,W))){dd(te,_e,i,ee);break e}xe&&xe(t,K,W),t==="focusout"&&(xe=K._wrapperState)&&xe.controlled&&K.type==="number"&&be(K,"number",K.value)}switch(xe=W?$r(W):window,t){case"focusin":(hd(xe)||xe.contentEditable==="true")&&(qr=xe,mu=W,$i=null);break;case"focusout":$i=mu=qr=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,xd(te,i,ee);break;case"selectionchange":if(av)break;case"keydown":case"keyup":xd(te,i,ee)}var ke;if(hu)e:{switch(t){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else zr?ud(t,i)&&(Se="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Se="onCompositionStart");Se&&(od&&i.locale!=="ko"&&(zr||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&zr&&(ke=td()):(Es=ee,iu="value"in Es?Es.value:Es.textContent,zr=!0)),xe=da(W,Se),0<xe.length&&(Se=new rd(Se,t,null,i,ee),te.push({event:Se,listeners:xe}),ke?Se.data=ke:(ke=cd(i),ke!==null&&(Se.data=ke)))),(ke=Yg?Xg(t,i):Zg(t,i))&&(W=da(W,"onBeforeInput"),0<W.length&&(ee=new rd("onBeforeInput","beforeinput",null,i,ee),te.push({event:ee,listeners:W}),ee.data=ke))}Ad(te,s)})}function Gi(t,s,i){return{instance:t,listener:s,currentTarget:i}}function da(t,s){for(var i=s+"Capture",l=[];t!==null;){var c=t,p=c.stateNode;c.tag===5&&p!==null&&(c=p,p=Ks(t,i),p!=null&&l.unshift(Gi(t,p,c)),p=Ks(t,s),p!=null&&l.push(Gi(t,p,c))),t=t.return}return l}function Br(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Md(t,s,i,l,c){for(var p=s._reactName,_=[];i!==null&&i!==l;){var b=i,A=b.alternate,W=b.stateNode;if(A!==null&&A===l)break;b.tag===5&&W!==null&&(b=W,c?(A=Ks(i,p),A!=null&&_.unshift(Gi(i,A,b))):c||(A=Ks(i,p),A!=null&&_.push(Gi(i,A,b)))),i=i.return}_.length!==0&&t.push({event:s,listeners:_})}var hv=/\r\n?/g,dv=/\u0000|\uFFFD/g;function Dd(t){return(typeof t=="string"?t:""+t).replace(hv,`
`).replace(dv,"")}function fa(t,s,i){if(s=Dd(s),Dd(t)!==s&&i)throw Error(n(425))}function pa(){}var ku=null,Tu=null;function Cu(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Su=typeof setTimeout=="function"?setTimeout:void 0,fv=typeof clearTimeout=="function"?clearTimeout:void 0,Id=typeof Promise=="function"?Promise:void 0,pv=typeof queueMicrotask=="function"?queueMicrotask:typeof Id<"u"?function(t){return Id.resolve(null).then(t).catch(mv)}:Su;function mv(t){setTimeout(function(){throw t})}function bu(t,s){var i=s,l=0;do{var c=i.nextSibling;if(t.removeChild(i),c&&c.nodeType===8)if(i=c.data,i==="/$"){if(l===0){t.removeChild(c),ji(s);return}l--}else i!=="$"&&i!=="$?"&&i!=="$!"||l++;i=c}while(i);ji(s)}function As(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Pd(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return t;s--}else i==="/$"&&s++}t=t.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),Un="__reactFiber$"+Ur,Yi="__reactProps$"+Ur,rs="__reactContainer$"+Ur,Nu="__reactEvents$"+Ur,gv="__reactListeners$"+Ur,vv="__reactHandles$"+Ur;function rr(t){var s=t[Un];if(s)return s;for(var i=t.parentNode;i;){if(s=i[rs]||i[Un]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(t=Pd(t);t!==null;){if(i=t[Un])return i;t=Pd(t)}return s}t=i,i=t.parentNode}return null}function Xi(t){return t=t[Un]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $r(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function ma(t){return t[Yi]||null}var Eu=[],Qr=-1;function Os(t){return{current:t}}function Ke(t){0>Qr||(t.current=Eu[Qr],Eu[Qr]=null,Qr--)}function Ge(t,s){Qr++,Eu[Qr]=t.current,t.current=s}var Ms={},Ot=Os(Ms),Qt=Os(!1),ir=Ms;function Hr(t,s){var i=t.type.contextTypes;if(!i)return Ms;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===s)return l.__reactInternalMemoizedMaskedChildContext;var c={},p;for(p in i)c[p]=s[p];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=c),c}function Ht(t){return t=t.childContextTypes,t!=null}function ga(){Ke(Qt),Ke(Ot)}function Fd(t,s,i){if(Ot.current!==Ms)throw Error(n(168));Ge(Ot,s),Ge(Qt,i)}function Ld(t,s,i){var l=t.stateNode;if(s=s.childContextTypes,typeof l.getChildContext!="function")return i;l=l.getChildContext();for(var c in l)if(!(c in s))throw Error(n(108,Ce(t)||"Unknown",c));return Y({},i,l)}function va(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,ir=Ot.current,Ge(Ot,t),Ge(Qt,Qt.current),!0}function jd(t,s,i){var l=t.stateNode;if(!l)throw Error(n(169));i?(t=Ld(t,s,ir),l.__reactInternalMemoizedMergedChildContext=t,Ke(Qt),Ke(Ot),Ge(Ot,t)):Ke(Qt),Ge(Qt,i)}var is=null,_a=!1,Ru=!1;function Vd(t){is===null?is=[t]:is.push(t)}function _v(t){_a=!0,Vd(t)}function Ds(){if(!Ru&&is!==null){Ru=!0;var t=0,s=We;try{var i=is;for(We=1;t<i.length;t++){var l=i[t];do l=l(!0);while(l!==null)}is=null,_a=!1}catch(c){throw is!==null&&(is=is.slice(t+1)),tr(Lr,Ds),c}finally{We=s,Ru=!1}}return null}var Gr=[],Yr=0,ya=null,wa=0,fn=[],pn=0,or=null,os=1,as="";function ar(t,s){Gr[Yr++]=wa,Gr[Yr++]=ya,ya=t,wa=s}function zd(t,s,i){fn[pn++]=os,fn[pn++]=as,fn[pn++]=or,or=t;var l=os;t=as;var c=32-$t(l)-1;l&=~(1<<c),i+=1;var p=32-$t(s)+c;if(30<p){var _=c-c%5;p=(l&(1<<_)-1).toString(32),l>>=_,c-=_,os=1<<32-$t(s)+c|i<<c|l,as=p+t}else os=1<<p|i<<c|l,as=t}function Au(t){t.return!==null&&(ar(t,1),zd(t,1,0))}function Ou(t){for(;t===ya;)ya=Gr[--Yr],Gr[Yr]=null,wa=Gr[--Yr],Gr[Yr]=null;for(;t===or;)or=fn[--pn],fn[pn]=null,as=fn[--pn],fn[pn]=null,os=fn[--pn],fn[pn]=null}var rn=null,on=null,nt=!1,En=null;function qd(t,s){var i=_n(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=t,s=t.deletions,s===null?(t.deletions=[i],t.flags|=16):s.push(i)}function Wd(t,s){switch(t.tag){case 5:var i=t.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,rn=t,on=As(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,rn=t,on=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=or!==null?{id:os,overflow:as}:null,t.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=_n(18,null,null,0),i.stateNode=s,i.return=t,t.child=i,rn=t,on=null,!0):!1;default:return!1}}function Mu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Du(t){if(nt){var s=on;if(s){var i=s;if(!Wd(t,s)){if(Mu(t))throw Error(n(418));s=As(i.nextSibling);var l=rn;s&&Wd(t,s)?qd(l,i):(t.flags=t.flags&-4097|2,nt=!1,rn=t)}}else{if(Mu(t))throw Error(n(418));t.flags=t.flags&-4097|2,nt=!1,rn=t}}}function Bd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function xa(t){if(t!==rn)return!1;if(!nt)return Bd(t),nt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Cu(t.type,t.memoizedProps)),s&&(s=on)){if(Mu(t))throw Ud(),Error(n(418));for(;s;)qd(t,s),s=As(s.nextSibling)}if(Bd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(s===0){on=As(t.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}t=t.nextSibling}on=null}}else on=rn?As(t.stateNode.nextSibling):null;return!0}function Ud(){for(var t=on;t;)t=As(t.nextSibling)}function Xr(){on=rn=null,nt=!1}function Iu(t){En===null?En=[t]:En.push(t)}var yv=B.ReactCurrentBatchConfig;function Zi(t,s,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(n(309));var l=i.stateNode}if(!l)throw Error(n(147,t));var c=l,p=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(_){var b=c.refs;_===null?delete b[p]:b[p]=_},s._stringRef=p,s)}if(typeof t!="string")throw Error(n(284));if(!i._owner)throw Error(n(290,t))}return t}function ka(t,s){throw t=Object.prototype.toString.call(s),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function $d(t){var s=t._init;return s(t._payload)}function Qd(t){function s(P,D){if(t){var j=P.deletions;j===null?(P.deletions=[D],P.flags|=16):j.push(D)}}function i(P,D){if(!t)return null;for(;D!==null;)s(P,D),D=D.sibling;return null}function l(P,D){for(P=new Map;D!==null;)D.key!==null?P.set(D.key,D):P.set(D.index,D),D=D.sibling;return P}function c(P,D){return P=qs(P,D),P.index=0,P.sibling=null,P}function p(P,D,j){return P.index=j,t?(j=P.alternate,j!==null?(j=j.index,j<D?(P.flags|=2,D):j):(P.flags|=2,D)):(P.flags|=1048576,D)}function _(P){return t&&P.alternate===null&&(P.flags|=2),P}function b(P,D,j,oe){return D===null||D.tag!==6?(D=Sc(j,P.mode,oe),D.return=P,D):(D=c(D,j),D.return=P,D)}function A(P,D,j,oe){var _e=j.type;return _e===L?ee(P,D,j.props.children,oe,j.key):D!==null&&(D.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===le&&$d(_e)===D.type)?(oe=c(D,j.props),oe.ref=Zi(P,D,j),oe.return=P,oe):(oe=Qa(j.type,j.key,j.props,null,P.mode,oe),oe.ref=Zi(P,D,j),oe.return=P,oe)}function W(P,D,j,oe){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=bc(j,P.mode,oe),D.return=P,D):(D=c(D,j.children||[]),D.return=P,D)}function ee(P,D,j,oe,_e){return D===null||D.tag!==7?(D=mr(j,P.mode,oe,_e),D.return=P,D):(D=c(D,j),D.return=P,D)}function te(P,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Sc(""+D,P.mode,j),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case N:return j=Qa(D.type,D.key,D.props,null,P.mode,j),j.ref=Zi(P,null,D),j.return=P,j;case I:return D=bc(D,P.mode,j),D.return=P,D;case le:var oe=D._init;return te(P,oe(D._payload),j)}if(Me(D)||Z(D))return D=mr(D,P.mode,j,null),D.return=P,D;ka(P,D)}return null}function K(P,D,j,oe){var _e=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return _e!==null?null:b(P,D,""+j,oe);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case N:return j.key===_e?A(P,D,j,oe):null;case I:return j.key===_e?W(P,D,j,oe):null;case le:return _e=j._init,K(P,D,_e(j._payload),oe)}if(Me(j)||Z(j))return _e!==null?null:ee(P,D,j,oe,null);ka(P,j)}return null}function he(P,D,j,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return P=P.get(j)||null,b(D,P,""+oe,_e);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case N:return P=P.get(oe.key===null?j:oe.key)||null,A(D,P,oe,_e);case I:return P=P.get(oe.key===null?j:oe.key)||null,W(D,P,oe,_e);case le:var xe=oe._init;return he(P,D,j,xe(oe._payload),_e)}if(Me(oe)||Z(oe))return P=P.get(j)||null,ee(D,P,oe,_e,null);ka(D,oe)}return null}function me(P,D,j,oe){for(var _e=null,xe=null,ke=D,Se=D=0,kt=null;ke!==null&&Se<j.length;Se++){ke.index>Se?(kt=ke,ke=null):kt=ke.sibling;var je=K(P,ke,j[Se],oe);if(je===null){ke===null&&(ke=kt);break}t&&ke&&je.alternate===null&&s(P,ke),D=p(je,D,Se),xe===null?_e=je:xe.sibling=je,xe=je,ke=kt}if(Se===j.length)return i(P,ke),nt&&ar(P,Se),_e;if(ke===null){for(;Se<j.length;Se++)ke=te(P,j[Se],oe),ke!==null&&(D=p(ke,D,Se),xe===null?_e=ke:xe.sibling=ke,xe=ke);return nt&&ar(P,Se),_e}for(ke=l(P,ke);Se<j.length;Se++)kt=he(ke,P,Se,j[Se],oe),kt!==null&&(t&&kt.alternate!==null&&ke.delete(kt.key===null?Se:kt.key),D=p(kt,D,Se),xe===null?_e=kt:xe.sibling=kt,xe=kt);return t&&ke.forEach(function(Ws){return s(P,Ws)}),nt&&ar(P,Se),_e}function ve(P,D,j,oe){var _e=Z(j);if(typeof _e!="function")throw Error(n(150));if(j=_e.call(j),j==null)throw Error(n(151));for(var xe=_e=null,ke=D,Se=D=0,kt=null,je=j.next();ke!==null&&!je.done;Se++,je=j.next()){ke.index>Se?(kt=ke,ke=null):kt=ke.sibling;var Ws=K(P,ke,je.value,oe);if(Ws===null){ke===null&&(ke=kt);break}t&&ke&&Ws.alternate===null&&s(P,ke),D=p(Ws,D,Se),xe===null?_e=Ws:xe.sibling=Ws,xe=Ws,ke=kt}if(je.done)return i(P,ke),nt&&ar(P,Se),_e;if(ke===null){for(;!je.done;Se++,je=j.next())je=te(P,je.value,oe),je!==null&&(D=p(je,D,Se),xe===null?_e=je:xe.sibling=je,xe=je);return nt&&ar(P,Se),_e}for(ke=l(P,ke);!je.done;Se++,je=j.next())je=he(ke,P,Se,je.value,oe),je!==null&&(t&&je.alternate!==null&&ke.delete(je.key===null?Se:je.key),D=p(je,D,Se),xe===null?_e=je:xe.sibling=je,xe=je);return t&&ke.forEach(function(Kv){return s(P,Kv)}),nt&&ar(P,Se),_e}function ht(P,D,j,oe){if(typeof j=="object"&&j!==null&&j.type===L&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case N:e:{for(var _e=j.key,xe=D;xe!==null;){if(xe.key===_e){if(_e=j.type,_e===L){if(xe.tag===7){i(P,xe.sibling),D=c(xe,j.props.children),D.return=P,P=D;break e}}else if(xe.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===le&&$d(_e)===xe.type){i(P,xe.sibling),D=c(xe,j.props),D.ref=Zi(P,xe,j),D.return=P,P=D;break e}i(P,xe);break}else s(P,xe);xe=xe.sibling}j.type===L?(D=mr(j.props.children,P.mode,oe,j.key),D.return=P,P=D):(oe=Qa(j.type,j.key,j.props,null,P.mode,oe),oe.ref=Zi(P,D,j),oe.return=P,P=oe)}return _(P);case I:e:{for(xe=j.key;D!==null;){if(D.key===xe)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){i(P,D.sibling),D=c(D,j.children||[]),D.return=P,P=D;break e}else{i(P,D);break}else s(P,D);D=D.sibling}D=bc(j,P.mode,oe),D.return=P,P=D}return _(P);case le:return xe=j._init,ht(P,D,xe(j._payload),oe)}if(Me(j))return me(P,D,j,oe);if(Z(j))return ve(P,D,j,oe);ka(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(i(P,D.sibling),D=c(D,j),D.return=P,P=D):(i(P,D),D=Sc(j,P.mode,oe),D.return=P,P=D),_(P)):i(P,D)}return ht}var Zr=Qd(!0),Hd=Qd(!1),Ta=Os(null),Ca=null,Kr=null,Pu=null;function Fu(){Pu=Kr=Ca=null}function Lu(t){var s=Ta.current;Ke(Ta),t._currentValue=s}function ju(t,s,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===i)break;t=t.return}}function Jr(t,s){Ca=t,Pu=Kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Gt=!0),t.firstContext=null)}function mn(t){var s=t._currentValue;if(Pu!==t)if(t={context:t,memoizedValue:s,next:null},Kr===null){if(Ca===null)throw Error(n(308));Kr=t,Ca.dependencies={lanes:0,firstContext:t}}else Kr=Kr.next=t;return s}var lr=null;function Vu(t){lr===null?lr=[t]:lr.push(t)}function Gd(t,s,i,l){var c=s.interleaved;return c===null?(i.next=i,Vu(s)):(i.next=c.next,c.next=i),s.interleaved=i,ls(t,l)}function ls(t,s){t.lanes|=s;var i=t.alternate;for(i!==null&&(i.lanes|=s),i=t,t=t.return;t!==null;)t.childLanes|=s,i=t.alternate,i!==null&&(i.childLanes|=s),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Is=!1;function zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function us(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Ps(t,s,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ie&2)!==0){var c=l.pending;return c===null?s.next=s:(s.next=c.next,c.next=s),l.pending=s,ls(t,i)}return c=l.interleaved,c===null?(s.next=s,Vu(l)):(s.next=c.next,c.next=s),l.interleaved=s,ls(t,i)}function Sa(t,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var l=s.lanes;l&=t.pendingLanes,i|=l,s.lanes=i,eu(t,i)}}function Xd(t,s){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var c=null,p=null;if(i=i.firstBaseUpdate,i!==null){do{var _={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};p===null?c=p=_:p=p.next=_,i=i.next}while(i!==null);p===null?c=p=s:p=p.next=s}else c=p=s;i={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:p,shared:l.shared,effects:l.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=s:t.next=s,i.lastBaseUpdate=s}function ba(t,s,i,l){var c=t.updateQueue;Is=!1;var p=c.firstBaseUpdate,_=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var A=b,W=A.next;A.next=null,_===null?p=W:_.next=W,_=A;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==_&&(b===null?ee.firstBaseUpdate=W:b.next=W,ee.lastBaseUpdate=A))}if(p!==null){var te=c.baseState;_=0,ee=W=A=null,b=p;do{var K=b.lane,he=b.eventTime;if((l&K)===K){ee!==null&&(ee=ee.next={eventTime:he,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var me=t,ve=b;switch(K=s,he=i,ve.tag){case 1:if(me=ve.payload,typeof me=="function"){te=me.call(he,te,K);break e}te=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ve.payload,K=typeof me=="function"?me.call(he,te,K):me,K==null)break e;te=Y({},te,K);break e;case 2:Is=!0}}b.callback!==null&&b.lane!==0&&(t.flags|=64,K=c.effects,K===null?c.effects=[b]:K.push(b))}else he={eventTime:he,lane:K,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(W=ee=he,A=te):ee=ee.next=he,_|=K;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;K=b,b=K.next,K.next=null,c.lastBaseUpdate=K,c.shared.pending=null}}while(!0);if(ee===null&&(A=te),c.baseState=A,c.firstBaseUpdate=W,c.lastBaseUpdate=ee,s=c.shared.interleaved,s!==null){c=s;do _|=c.lane,c=c.next;while(c!==s)}else p===null&&(c.shared.lanes=0);hr|=_,t.lanes=_,t.memoizedState=te}}function Zd(t,s,i){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var l=t[s],c=l.callback;if(c!==null){if(l.callback=null,l=i,typeof c!="function")throw Error(n(191,c));c.call(l)}}}var Ki={},$n=Os(Ki),Ji=Os(Ki),eo=Os(Ki);function ur(t){if(t===Ki)throw Error(n(174));return t}function qu(t,s){switch(Ge(eo,s),Ge(Ji,t),Ge($n,Ki),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:xs(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=xs(s,t)}Ke($n),Ge($n,s)}function ei(){Ke($n),Ke(Ji),Ke(eo)}function Kd(t){ur(eo.current);var s=ur($n.current),i=xs(s,t.type);s!==i&&(Ge(Ji,t),Ge($n,i))}function Wu(t){Ji.current===t&&(Ke($n),Ke(Ji))}var rt=Os(0);function Na(t){for(var s=t;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Bu=[];function Uu(){for(var t=0;t<Bu.length;t++)Bu[t]._workInProgressVersionPrimary=null;Bu.length=0}var Ea=B.ReactCurrentDispatcher,$u=B.ReactCurrentBatchConfig,cr=0,it=null,vt=null,wt=null,Ra=!1,to=!1,no=0,wv=0;function Mt(){throw Error(n(321))}function Qu(t,s){if(s===null)return!1;for(var i=0;i<s.length&&i<t.length;i++)if(!Nn(t[i],s[i]))return!1;return!0}function Hu(t,s,i,l,c,p){if(cr=p,it=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ea.current=t===null||t.memoizedState===null?Cv:Sv,t=i(l,c),to){p=0;do{if(to=!1,no=0,25<=p)throw Error(n(301));p+=1,wt=vt=null,s.updateQueue=null,Ea.current=bv,t=i(l,c)}while(to)}if(Ea.current=Ma,s=vt!==null&&vt.next!==null,cr=0,wt=vt=it=null,Ra=!1,s)throw Error(n(300));return t}function Gu(){var t=no!==0;return no=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?it.memoizedState=wt=t:wt=wt.next=t,wt}function gn(){if(vt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var s=wt===null?it.memoizedState:wt.next;if(s!==null)wt=s,vt=t;else{if(t===null)throw Error(n(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},wt===null?it.memoizedState=wt=t:wt=wt.next=t}return wt}function so(t,s){return typeof s=="function"?s(t):s}function Yu(t){var s=gn(),i=s.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=t;var l=vt,c=l.baseQueue,p=i.pending;if(p!==null){if(c!==null){var _=c.next;c.next=p.next,p.next=_}l.baseQueue=c=p,i.pending=null}if(c!==null){p=c.next,l=l.baseState;var b=_=null,A=null,W=p;do{var ee=W.lane;if((cr&ee)===ee)A!==null&&(A=A.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),l=W.hasEagerState?W.eagerState:t(l,W.action);else{var te={lane:ee,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};A===null?(b=A=te,_=l):A=A.next=te,it.lanes|=ee,hr|=ee}W=W.next}while(W!==null&&W!==p);A===null?_=l:A.next=b,Nn(l,s.memoizedState)||(Gt=!0),s.memoizedState=l,s.baseState=_,s.baseQueue=A,i.lastRenderedState=l}if(t=i.interleaved,t!==null){c=t;do p=c.lane,it.lanes|=p,hr|=p,c=c.next;while(c!==t)}else c===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xu(t){var s=gn(),i=s.queue;if(i===null)throw Error(n(311));i.lastRenderedReducer=t;var l=i.dispatch,c=i.pending,p=s.memoizedState;if(c!==null){i.pending=null;var _=c=c.next;do p=t(p,_.action),_=_.next;while(_!==c);Nn(p,s.memoizedState)||(Gt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),i.lastRenderedState=p}return[p,l]}function Jd(){}function ef(t,s){var i=it,l=gn(),c=s(),p=!Nn(l.memoizedState,c);if(p&&(l.memoizedState=c,Gt=!0),l=l.queue,Zu(sf.bind(null,i,l,t),[t]),l.getSnapshot!==s||p||wt!==null&&wt.memoizedState.tag&1){if(i.flags|=2048,ro(9,nf.bind(null,i,l,c,s),void 0,null),xt===null)throw Error(n(349));(cr&30)!==0||tf(i,s,c)}return c}function tf(t,s,i){t.flags|=16384,t={getSnapshot:s,value:i},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.stores=[t]):(i=s.stores,i===null?s.stores=[t]:i.push(t))}function nf(t,s,i,l){s.value=i,s.getSnapshot=l,rf(s)&&of(t)}function sf(t,s,i){return i(function(){rf(s)&&of(t)})}function rf(t){var s=t.getSnapshot;t=t.value;try{var i=s();return!Nn(t,i)}catch{return!0}}function of(t){var s=ls(t,1);s!==null&&Mn(s,t,1,-1)}function af(t){var s=Qn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:t},s.queue=t,t=t.dispatch=Tv.bind(null,it,t),[s.memoizedState,t]}function ro(t,s,i,l){return t={tag:t,create:s,destroy:i,deps:l,next:null},s=it.updateQueue,s===null?(s={lastEffect:null,stores:null},it.updateQueue=s,s.lastEffect=t.next=t):(i=s.lastEffect,i===null?s.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,s.lastEffect=t)),t}function lf(){return gn().memoizedState}function Aa(t,s,i,l){var c=Qn();it.flags|=t,c.memoizedState=ro(1|s,i,void 0,l===void 0?null:l)}function Oa(t,s,i,l){var c=gn();l=l===void 0?null:l;var p=void 0;if(vt!==null){var _=vt.memoizedState;if(p=_.destroy,l!==null&&Qu(l,_.deps)){c.memoizedState=ro(s,i,p,l);return}}it.flags|=t,c.memoizedState=ro(1|s,i,p,l)}function uf(t,s){return Aa(8390656,8,t,s)}function Zu(t,s){return Oa(2048,8,t,s)}function cf(t,s){return Oa(4,2,t,s)}function hf(t,s){return Oa(4,4,t,s)}function df(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function ff(t,s,i){return i=i!=null?i.concat([t]):null,Oa(4,4,df.bind(null,s,t),i)}function Ku(){}function pf(t,s){var i=gn();s=s===void 0?null:s;var l=i.memoizedState;return l!==null&&s!==null&&Qu(s,l[1])?l[0]:(i.memoizedState=[t,s],t)}function mf(t,s){var i=gn();s=s===void 0?null:s;var l=i.memoizedState;return l!==null&&s!==null&&Qu(s,l[1])?l[0]:(t=t(),i.memoizedState=[t,s],t)}function gf(t,s,i){return(cr&21)===0?(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=i):(Nn(i,s)||(i=$h(),it.lanes|=i,hr|=i,t.baseState=!0),s)}function xv(t,s){var i=We;We=i!==0&&4>i?i:4,t(!0);var l=$u.transition;$u.transition={};try{t(!1),s()}finally{We=i,$u.transition=l}}function vf(){return gn().memoizedState}function kv(t,s,i){var l=Vs(t);if(i={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null},_f(t))yf(s,i);else if(i=Gd(t,s,i,l),i!==null){var c=jt();Mn(i,t,l,c),wf(i,s,l)}}function Tv(t,s,i){var l=Vs(t),c={lane:l,action:i,hasEagerState:!1,eagerState:null,next:null};if(_f(t))yf(s,c);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var _=s.lastRenderedState,b=p(_,i);if(c.hasEagerState=!0,c.eagerState=b,Nn(b,_)){var A=s.interleaved;A===null?(c.next=c,Vu(s)):(c.next=A.next,A.next=c),s.interleaved=c;return}}catch{}finally{}i=Gd(t,s,c,l),i!==null&&(c=jt(),Mn(i,t,l,c),wf(i,s,l))}}function _f(t){var s=t.alternate;return t===it||s!==null&&s===it}function yf(t,s){to=Ra=!0;var i=t.pending;i===null?s.next=s:(s.next=i.next,i.next=s),t.pending=s}function wf(t,s,i){if((i&4194240)!==0){var l=s.lanes;l&=t.pendingLanes,i|=l,s.lanes=i,eu(t,i)}}var Ma={readContext:mn,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useInsertionEffect:Mt,useLayoutEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useMutableSource:Mt,useSyncExternalStore:Mt,useId:Mt,unstable_isNewReconciler:!1},Cv={readContext:mn,useCallback:function(t,s){return Qn().memoizedState=[t,s===void 0?null:s],t},useContext:mn,useEffect:uf,useImperativeHandle:function(t,s,i){return i=i!=null?i.concat([t]):null,Aa(4194308,4,df.bind(null,s,t),i)},useLayoutEffect:function(t,s){return Aa(4194308,4,t,s)},useInsertionEffect:function(t,s){return Aa(4,2,t,s)},useMemo:function(t,s){var i=Qn();return s=s===void 0?null:s,t=t(),i.memoizedState=[t,s],t},useReducer:function(t,s,i){var l=Qn();return s=i!==void 0?i(s):s,l.memoizedState=l.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},l.queue=t,t=t.dispatch=kv.bind(null,it,t),[l.memoizedState,t]},useRef:function(t){var s=Qn();return t={current:t},s.memoizedState=t},useState:af,useDebugValue:Ku,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=af(!1),s=t[0];return t=xv.bind(null,t[1]),Qn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,i){var l=it,c=Qn();if(nt){if(i===void 0)throw Error(n(407));i=i()}else{if(i=s(),xt===null)throw Error(n(349));(cr&30)!==0||tf(l,s,i)}c.memoizedState=i;var p={value:i,getSnapshot:s};return c.queue=p,uf(sf.bind(null,l,p,t),[t]),l.flags|=2048,ro(9,nf.bind(null,l,p,i,s),void 0,null),i},useId:function(){var t=Qn(),s=xt.identifierPrefix;if(nt){var i=as,l=os;i=(l&~(1<<32-$t(l)-1)).toString(32)+i,s=":"+s+"R"+i,i=no++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=wv++,s=":"+s+"r"+i.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Sv={readContext:mn,useCallback:pf,useContext:mn,useEffect:Zu,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:Yu,useRef:lf,useState:function(){return Yu(so)},useDebugValue:Ku,useDeferredValue:function(t){var s=gn();return gf(s,vt.memoizedState,t)},useTransition:function(){var t=Yu(so)[0],s=gn().memoizedState;return[t,s]},useMutableSource:Jd,useSyncExternalStore:ef,useId:vf,unstable_isNewReconciler:!1},bv={readContext:mn,useCallback:pf,useContext:mn,useEffect:Zu,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:Xu,useRef:lf,useState:function(){return Xu(so)},useDebugValue:Ku,useDeferredValue:function(t){var s=gn();return vt===null?s.memoizedState=t:gf(s,vt.memoizedState,t)},useTransition:function(){var t=Xu(so)[0],s=gn().memoizedState;return[t,s]},useMutableSource:Jd,useSyncExternalStore:ef,useId:vf,unstable_isNewReconciler:!1};function Rn(t,s){if(t&&t.defaultProps){s=Y({},s),t=t.defaultProps;for(var i in t)s[i]===void 0&&(s[i]=t[i]);return s}return s}function Ju(t,s,i,l){s=t.memoizedState,i=i(l,s),i=i==null?s:Y({},s,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Da={isMounted:function(t){return(t=t._reactInternals)?Ee(t)===t:!1},enqueueSetState:function(t,s,i){t=t._reactInternals;var l=jt(),c=Vs(t),p=us(l,c);p.payload=s,i!=null&&(p.callback=i),s=Ps(t,p,c),s!==null&&(Mn(s,t,c,l),Sa(s,t,c))},enqueueReplaceState:function(t,s,i){t=t._reactInternals;var l=jt(),c=Vs(t),p=us(l,c);p.tag=1,p.payload=s,i!=null&&(p.callback=i),s=Ps(t,p,c),s!==null&&(Mn(s,t,c,l),Sa(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var i=jt(),l=Vs(t),c=us(i,l);c.tag=2,s!=null&&(c.callback=s),s=Ps(t,c,l),s!==null&&(Mn(s,t,l,i),Sa(s,t,l))}};function xf(t,s,i,l,c,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,_):s.prototype&&s.prototype.isPureReactComponent?!Ui(i,l)||!Ui(c,p):!0}function kf(t,s,i){var l=!1,c=Ms,p=s.contextType;return typeof p=="object"&&p!==null?p=mn(p):(c=Ht(s)?ir:Ot.current,l=s.contextTypes,p=(l=l!=null)?Hr(t,c):Ms),s=new s(i,p),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Da,t.stateNode=s,s._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=c,t.__reactInternalMemoizedMaskedChildContext=p),s}function Tf(t,s,i,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,l),s.state!==t&&Da.enqueueReplaceState(s,s.state,null)}function ec(t,s,i,l){var c=t.stateNode;c.props=i,c.state=t.memoizedState,c.refs={},zu(t);var p=s.contextType;typeof p=="object"&&p!==null?c.context=mn(p):(p=Ht(s)?ir:Ot.current,c.context=Hr(t,p)),c.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Ju(t,s,p,i),c.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(s=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),s!==c.state&&Da.enqueueReplaceState(c,c.state,null),ba(t,i,c,l),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308)}function ti(t,s){try{var i="",l=s;do i+=J(l),l=l.return;while(l);var c=i}catch(p){c=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:s,stack:c,digest:null}}function tc(t,s,i){return{value:t,source:null,stack:i??null,digest:s??null}}function nc(t,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Nv=typeof WeakMap=="function"?WeakMap:Map;function Cf(t,s,i){i=us(-1,i),i.tag=3,i.payload={element:null};var l=s.value;return i.callback=function(){za||(za=!0,vc=l),nc(t,s)},i}function Sf(t,s,i){i=us(-1,i),i.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var c=s.value;i.payload=function(){return l(c)},i.callback=function(){nc(t,s)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(i.callback=function(){nc(t,s),typeof l!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),i}function bf(t,s,i){var l=t.pingCache;if(l===null){l=t.pingCache=new Nv;var c=new Set;l.set(s,c)}else c=l.get(s),c===void 0&&(c=new Set,l.set(s,c));c.has(i)||(c.add(i),t=qv.bind(null,t,s,i),s.then(t,t))}function Nf(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ef(t,s,i,l,c){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=us(-1,1),s.tag=2,Ps(i,s,1))),i.lanes|=1),t):(t.flags|=65536,t.lanes=c,t)}var Ev=B.ReactCurrentOwner,Gt=!1;function Lt(t,s,i,l){s.child=t===null?Hd(s,null,i,l):Zr(s,t.child,i,l)}function Rf(t,s,i,l,c){i=i.render;var p=s.ref;return Jr(s,c),l=Hu(t,s,i,l,p,c),i=Gu(),t!==null&&!Gt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c,cs(t,s,c)):(nt&&i&&Au(s),s.flags|=1,Lt(t,s,l,c),s.child)}function Af(t,s,i,l,c){if(t===null){var p=i.type;return typeof p=="function"&&!Cc(p)&&p.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=p,Of(t,s,p,l,c)):(t=Qa(i.type,null,l,s,s.mode,c),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,(t.lanes&c)===0){var _=p.memoizedProps;if(i=i.compare,i=i!==null?i:Ui,i(_,l)&&t.ref===s.ref)return cs(t,s,c)}return s.flags|=1,t=qs(p,l),t.ref=s.ref,t.return=s,s.child=t}function Of(t,s,i,l,c){if(t!==null){var p=t.memoizedProps;if(Ui(p,l)&&t.ref===s.ref)if(Gt=!1,s.pendingProps=l=p,(t.lanes&c)!==0)(t.flags&131072)!==0&&(Gt=!0);else return s.lanes=t.lanes,cs(t,s,c)}return sc(t,s,i,l,c)}function Mf(t,s,i){var l=s.pendingProps,c=l.children,p=t!==null?t.memoizedState:null;if(l.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(si,an),an|=i;else{if((i&1073741824)===0)return t=p!==null?p.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ge(si,an),an|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=p!==null?p.baseLanes:i,Ge(si,an),an|=l}else p!==null?(l=p.baseLanes|i,s.memoizedState=null):l=i,Ge(si,an),an|=l;return Lt(t,s,c,i),s.child}function Df(t,s){var i=s.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function sc(t,s,i,l,c){var p=Ht(i)?ir:Ot.current;return p=Hr(s,p),Jr(s,c),i=Hu(t,s,i,l,p,c),l=Gu(),t!==null&&!Gt?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c,cs(t,s,c)):(nt&&l&&Au(s),s.flags|=1,Lt(t,s,i,c),s.child)}function If(t,s,i,l,c){if(Ht(i)){var p=!0;va(s)}else p=!1;if(Jr(s,c),s.stateNode===null)Pa(t,s),kf(s,i,l),ec(s,i,l,c),l=!0;else if(t===null){var _=s.stateNode,b=s.memoizedProps;_.props=b;var A=_.context,W=i.contextType;typeof W=="object"&&W!==null?W=mn(W):(W=Ht(i)?ir:Ot.current,W=Hr(s,W));var ee=i.getDerivedStateFromProps,te=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function";te||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==l||A!==W)&&Tf(s,_,l,W),Is=!1;var K=s.memoizedState;_.state=K,ba(s,l,_,c),A=s.memoizedState,b!==l||K!==A||Qt.current||Is?(typeof ee=="function"&&(Ju(s,i,ee,l),A=s.memoizedState),(b=Is||xf(s,i,b,l,K,A,W))?(te||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=A),_.props=l,_.state=A,_.context=W,l=b):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{_=s.stateNode,Yd(t,s),b=s.memoizedProps,W=s.type===s.elementType?b:Rn(s.type,b),_.props=W,te=s.pendingProps,K=_.context,A=i.contextType,typeof A=="object"&&A!==null?A=mn(A):(A=Ht(i)?ir:Ot.current,A=Hr(s,A));var he=i.getDerivedStateFromProps;(ee=typeof he=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==te||K!==A)&&Tf(s,_,l,A),Is=!1,K=s.memoizedState,_.state=K,ba(s,l,_,c);var me=s.memoizedState;b!==te||K!==me||Qt.current||Is?(typeof he=="function"&&(Ju(s,i,he,l),me=s.memoizedState),(W=Is||xf(s,i,W,l,K,me,A)||!1)?(ee||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(l,me,A),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(l,me,A)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=me),_.props=l,_.state=me,_.context=A,l=W):(typeof _.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),l=!1)}return rc(t,s,i,l,p,c)}function rc(t,s,i,l,c,p){Df(t,s);var _=(s.flags&128)!==0;if(!l&&!_)return c&&jd(s,i,!1),cs(t,s,p);l=s.stateNode,Ev.current=s;var b=_&&typeof i.getDerivedStateFromError!="function"?null:l.render();return s.flags|=1,t!==null&&_?(s.child=Zr(s,t.child,null,p),s.child=Zr(s,null,b,p)):Lt(t,s,b,p),s.memoizedState=l.state,c&&jd(s,i,!0),s.child}function Pf(t){var s=t.stateNode;s.pendingContext?Fd(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Fd(t,s.context,!1),qu(t,s.containerInfo)}function Ff(t,s,i,l,c){return Xr(),Iu(c),s.flags|=256,Lt(t,s,i,l),s.child}var ic={dehydrated:null,treeContext:null,retryLane:0};function oc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lf(t,s,i){var l=s.pendingProps,c=rt.current,p=!1,_=(s.flags&128)!==0,b;if((b=_)||(b=t!==null&&t.memoizedState===null?!1:(c&2)!==0),b?(p=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(c|=1),Ge(rt,c&1),t===null)return Du(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(_=l.children,t=l.fallback,p?(l=s.mode,p=s.child,_={mode:"hidden",children:_},(l&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Ha(_,l,0,null),t=mr(t,l,i,null),p.return=s,t.return=s,p.sibling=t,s.child=p,s.child.memoizedState=oc(i),s.memoizedState=ic,t):ac(s,_));if(c=t.memoizedState,c!==null&&(b=c.dehydrated,b!==null))return Rv(t,s,_,l,b,c,i);if(p){p=l.fallback,_=s.mode,c=t.child,b=c.sibling;var A={mode:"hidden",children:l.children};return(_&1)===0&&s.child!==c?(l=s.child,l.childLanes=0,l.pendingProps=A,s.deletions=null):(l=qs(c,A),l.subtreeFlags=c.subtreeFlags&14680064),b!==null?p=qs(b,p):(p=mr(p,_,i,null),p.flags|=2),p.return=s,l.return=s,l.sibling=p,s.child=l,l=p,p=s.child,_=t.child.memoizedState,_=_===null?oc(i):{baseLanes:_.baseLanes|i,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~i,s.memoizedState=ic,l}return p=t.child,t=p.sibling,l=qs(p,{mode:"visible",children:l.children}),(s.mode&1)===0&&(l.lanes=i),l.return=s,l.sibling=null,t!==null&&(i=s.deletions,i===null?(s.deletions=[t],s.flags|=16):i.push(t)),s.child=l,s.memoizedState=null,l}function ac(t,s){return s=Ha({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Ia(t,s,i,l){return l!==null&&Iu(l),Zr(s,t.child,null,i),t=ac(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Rv(t,s,i,l,c,p,_){if(i)return s.flags&256?(s.flags&=-257,l=tc(Error(n(422))),Ia(t,s,_,l)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(p=l.fallback,c=s.mode,l=Ha({mode:"visible",children:l.children},c,0,null),p=mr(p,c,_,null),p.flags|=2,l.return=s,p.return=s,l.sibling=p,s.child=l,(s.mode&1)!==0&&Zr(s,t.child,null,_),s.child.memoizedState=oc(_),s.memoizedState=ic,p);if((s.mode&1)===0)return Ia(t,s,_,null);if(c.data==="$!"){if(l=c.nextSibling&&c.nextSibling.dataset,l)var b=l.dgst;return l=b,p=Error(n(419)),l=tc(p,l,void 0),Ia(t,s,_,l)}if(b=(_&t.childLanes)!==0,Gt||b){if(l=xt,l!==null){switch(_&-_){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(l.suspendedLanes|_))!==0?0:c,c!==0&&c!==p.retryLane&&(p.retryLane=c,ls(t,c),Mn(l,t,c,-1))}return Tc(),l=tc(Error(n(421))),Ia(t,s,_,l)}return c.data==="$?"?(s.flags|=128,s.child=t.child,s=Wv.bind(null,t),c._reactRetry=s,null):(t=p.treeContext,on=As(c.nextSibling),rn=s,nt=!0,En=null,t!==null&&(fn[pn++]=os,fn[pn++]=as,fn[pn++]=or,os=t.id,as=t.overflow,or=s),s=ac(s,l.children),s.flags|=4096,s)}function jf(t,s,i){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),ju(t.return,s,i)}function lc(t,s,i,l,c){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:c}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=i,p.tailMode=c)}function Vf(t,s,i){var l=s.pendingProps,c=l.revealOrder,p=l.tail;if(Lt(t,s,l.children,i),l=rt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jf(t,i,s);else if(t.tag===19)jf(t,i,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(Ge(rt,l),(s.mode&1)===0)s.memoizedState=null;else switch(c){case"forwards":for(i=s.child,c=null;i!==null;)t=i.alternate,t!==null&&Na(t)===null&&(c=i),i=i.sibling;i=c,i===null?(c=s.child,s.child=null):(c=i.sibling,i.sibling=null),lc(s,!1,c,i,p);break;case"backwards":for(i=null,c=s.child,s.child=null;c!==null;){if(t=c.alternate,t!==null&&Na(t)===null){s.child=c;break}t=c.sibling,c.sibling=i,i=c,c=t}lc(s,!0,i,null,p);break;case"together":lc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pa(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function cs(t,s,i){if(t!==null&&(s.dependencies=t.dependencies),hr|=s.lanes,(i&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(n(153));if(s.child!==null){for(t=s.child,i=qs(t,t.pendingProps),s.child=i,i.return=s;t.sibling!==null;)t=t.sibling,i=i.sibling=qs(t,t.pendingProps),i.return=s;i.sibling=null}return s.child}function Av(t,s,i){switch(s.tag){case 3:Pf(s),Xr();break;case 5:Kd(s);break;case 1:Ht(s.type)&&va(s);break;case 4:qu(s,s.stateNode.containerInfo);break;case 10:var l=s.type._context,c=s.memoizedProps.value;Ge(Ta,l._currentValue),l._currentValue=c;break;case 13:if(l=s.memoizedState,l!==null)return l.dehydrated!==null?(Ge(rt,rt.current&1),s.flags|=128,null):(i&s.child.childLanes)!==0?Lf(t,s,i):(Ge(rt,rt.current&1),t=cs(t,s,i),t!==null?t.sibling:null);Ge(rt,rt.current&1);break;case 19:if(l=(i&s.childLanes)!==0,(t.flags&128)!==0){if(l)return Vf(t,s,i);s.flags|=128}if(c=s.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Ge(rt,rt.current),l)break;return null;case 22:case 23:return s.lanes=0,Mf(t,s,i)}return cs(t,s,i)}var zf,uc,qf,Wf;zf=function(t,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},uc=function(){},qf=function(t,s,i,l){var c=t.memoizedProps;if(c!==l){t=s.stateNode,ur($n.current);var p=null;switch(i){case"input":c=qn(t,c),l=qn(t,l),p=[];break;case"select":c=Y({},c,{value:void 0}),l=Y({},l,{value:void 0}),p=[];break;case"textarea":c=St(t,c),l=St(t,l),p=[];break;default:typeof c.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=pa)}V(i,l);var _;i=null;for(W in c)if(!l.hasOwnProperty(W)&&c.hasOwnProperty(W)&&c[W]!=null)if(W==="style"){var b=c[W];for(_ in b)b.hasOwnProperty(_)&&(i||(i={}),i[_]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(a.hasOwnProperty(W)?p||(p=[]):(p=p||[]).push(W,null));for(W in l){var A=l[W];if(b=c!=null?c[W]:void 0,l.hasOwnProperty(W)&&A!==b&&(A!=null||b!=null))if(W==="style")if(b){for(_ in b)!b.hasOwnProperty(_)||A&&A.hasOwnProperty(_)||(i||(i={}),i[_]="");for(_ in A)A.hasOwnProperty(_)&&b[_]!==A[_]&&(i||(i={}),i[_]=A[_])}else i||(p||(p=[]),p.push(W,i)),i=A;else W==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,b=b?b.__html:void 0,A!=null&&b!==A&&(p=p||[]).push(W,A)):W==="children"?typeof A!="string"&&typeof A!="number"||(p=p||[]).push(W,""+A):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(a.hasOwnProperty(W)?(A!=null&&W==="onScroll"&&Ze("scroll",t),p||b===A||(p=[])):(p=p||[]).push(W,A))}i&&(p=p||[]).push("style",i);var W=p;(s.updateQueue=W)&&(s.flags|=4)}},Wf=function(t,s,i,l){i!==l&&(s.flags|=4)};function io(t,s){if(!nt)switch(t.tailMode){case"hidden":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Dt(t){var s=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(s)for(var c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags&14680064,l|=c.flags&14680064,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)i|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=i,s}function Ov(t,s,i){var l=s.pendingProps;switch(Ou(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Ht(s.type)&&ga(),Dt(s),null;case 3:return l=s.stateNode,ei(),Ke(Qt),Ke(Ot),Uu(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(xa(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,En!==null&&(wc(En),En=null))),uc(t,s),Dt(s),null;case 5:Wu(s);var c=ur(eo.current);if(i=s.type,t!==null&&s.stateNode!=null)qf(t,s,i,l,c),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!l){if(s.stateNode===null)throw Error(n(166));return Dt(s),null}if(t=ur($n.current),xa(s)){l=s.stateNode,i=s.type;var p=s.memoizedProps;switch(l[Un]=s,l[Yi]=p,t=(s.mode&1)!==0,i){case"dialog":Ze("cancel",l),Ze("close",l);break;case"iframe":case"object":case"embed":Ze("load",l);break;case"video":case"audio":for(c=0;c<Qi.length;c++)Ze(Qi[c],l);break;case"source":Ze("error",l);break;case"img":case"image":case"link":Ze("error",l),Ze("load",l);break;case"details":Ze("toggle",l);break;case"input":ue(l,p),Ze("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!p.multiple},Ze("invalid",l);break;case"textarea":tn(l,p),Ze("invalid",l)}V(i,p),c=null;for(var _ in p)if(p.hasOwnProperty(_)){var b=p[_];_==="children"?typeof b=="string"?l.textContent!==b&&(p.suppressHydrationWarning!==!0&&fa(l.textContent,b,t),c=["children",b]):typeof b=="number"&&l.textContent!==""+b&&(p.suppressHydrationWarning!==!0&&fa(l.textContent,b,t),c=["children",""+b]):a.hasOwnProperty(_)&&b!=null&&_==="onScroll"&&Ze("scroll",l)}switch(i){case"input":At(l),Ve(l,p,!0);break;case"textarea":At(l),Jn(l);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(l.onclick=pa)}l=c,s.updateQueue=l,l!==null&&(s.flags|=4)}else{_=c.nodeType===9?c:c.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=es(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=_.createElement(i,{is:l.is}):(t=_.createElement(i),i==="select"&&(_=t,l.multiple?_.multiple=!0:l.size&&(_.size=l.size))):t=_.createElementNS(t,i),t[Un]=s,t[Yi]=l,zf(t,s,!1,!1),s.stateNode=t;e:{switch(_=Ft(i,l),i){case"dialog":Ze("cancel",t),Ze("close",t),c=l;break;case"iframe":case"object":case"embed":Ze("load",t),c=l;break;case"video":case"audio":for(c=0;c<Qi.length;c++)Ze(Qi[c],t);c=l;break;case"source":Ze("error",t),c=l;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),c=l;break;case"details":Ze("toggle",t),c=l;break;case"input":ue(t,l),c=qn(t,l),Ze("invalid",t);break;case"option":c=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},c=Y({},l,{value:void 0}),Ze("invalid",t);break;case"textarea":tn(t,l),c=St(t,l),Ze("invalid",t);break;default:c=l}V(i,c),b=c;for(p in b)if(b.hasOwnProperty(p)){var A=b[p];p==="style"?Ir(t,A):p==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&Zs(t,A)):p==="children"?typeof A=="string"?(i!=="textarea"||A!=="")&&Wn(t,A):typeof A=="number"&&Wn(t,""+A):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?A!=null&&p==="onScroll"&&Ze("scroll",t):A!=null&&z(t,p,A,_))}switch(i){case"input":At(t),Ve(t,l,!1);break;case"textarea":At(t),Jn(t);break;case"option":l.value!=null&&t.setAttribute("value",""+ae(l.value));break;case"select":t.multiple=!!l.multiple,p=l.value,p!=null?et(t,!!l.multiple,p,!1):l.defaultValue!=null&&et(t,!!l.multiple,l.defaultValue,!0);break;default:typeof c.onClick=="function"&&(t.onclick=pa)}switch(i){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Dt(s),null;case 6:if(t&&s.stateNode!=null)Wf(t,s,t.memoizedProps,l);else{if(typeof l!="string"&&s.stateNode===null)throw Error(n(166));if(i=ur(eo.current),ur($n.current),xa(s)){if(l=s.stateNode,i=s.memoizedProps,l[Un]=s,(p=l.nodeValue!==i)&&(t=rn,t!==null))switch(t.tag){case 3:fa(l.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fa(l.nodeValue,i,(t.mode&1)!==0)}p&&(s.flags|=4)}else l=(i.nodeType===9?i:i.ownerDocument).createTextNode(l),l[Un]=s,s.stateNode=l}return Dt(s),null;case 13:if(Ke(rt),l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nt&&on!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Ud(),Xr(),s.flags|=98560,p=!1;else if(p=xa(s),l!==null&&l.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Un]=s}else Xr(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),p=!1}else En!==null&&(wc(En),En=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=i,s):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(rt.current&1)!==0?_t===0&&(_t=3):Tc())),s.updateQueue!==null&&(s.flags|=4),Dt(s),null);case 4:return ei(),uc(t,s),t===null&&Hi(s.stateNode.containerInfo),Dt(s),null;case 10:return Lu(s.type._context),Dt(s),null;case 17:return Ht(s.type)&&ga(),Dt(s),null;case 19:if(Ke(rt),p=s.memoizedState,p===null)return Dt(s),null;if(l=(s.flags&128)!==0,_=p.rendering,_===null)if(l)io(p,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(_=Na(t),_!==null){for(s.flags|=128,io(p,!1),l=_.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),s.subtreeFlags=0,l=i,i=s.child;i!==null;)p=i,t=l,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Ge(rt,rt.current&1|2),s.child}t=t.sibling}p.tail!==null&&tt()>ri&&(s.flags|=128,l=!0,io(p,!1),s.lanes=4194304)}else{if(!l)if(t=Na(_),t!==null){if(s.flags|=128,l=!0,i=t.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),io(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!nt)return Dt(s),null}else 2*tt()-p.renderingStartTime>ri&&i!==1073741824&&(s.flags|=128,l=!0,io(p,!1),s.lanes=4194304);p.isBackwards?(_.sibling=s.child,s.child=_):(i=p.last,i!==null?i.sibling=_:s.child=_,p.last=_)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=tt(),s.sibling=null,i=rt.current,Ge(rt,l?i&1|2:i&1),s):(Dt(s),null);case 22:case 23:return kc(),l=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(s.flags|=8192),l&&(s.mode&1)!==0?(an&1073741824)!==0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function Mv(t,s){switch(Ou(s),s.tag){case 1:return Ht(s.type)&&ga(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ei(),Ke(Qt),Ke(Ot),Uu(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Wu(s),null;case 13:if(Ke(rt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Xr()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Ke(rt),null;case 4:return ei(),null;case 10:return Lu(s.type._context),null;case 22:case 23:return kc(),null;case 24:return null;default:return null}}var Fa=!1,It=!1,Dv=typeof WeakSet=="function"?WeakSet:Set,pe=null;function ni(t,s){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(l){ut(t,s,l)}else i.current=null}function cc(t,s,i){try{i()}catch(l){ut(t,s,l)}}var Bf=!1;function Iv(t,s){if(ku=na,t=wd(),pu(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var c=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{i.nodeType,p.nodeType}catch{i=null;break e}var _=0,b=-1,A=-1,W=0,ee=0,te=t,K=null;t:for(;;){for(var he;te!==i||c!==0&&te.nodeType!==3||(b=_+c),te!==p||l!==0&&te.nodeType!==3||(A=_+l),te.nodeType===3&&(_+=te.nodeValue.length),(he=te.firstChild)!==null;)K=te,te=he;for(;;){if(te===t)break t;if(K===i&&++W===c&&(b=_),K===p&&++ee===l&&(A=_),(he=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=he}i=b===-1||A===-1?null:{start:b,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Tu={focusedElem:t,selectionRange:i},na=!1,pe=s;pe!==null;)if(s=pe,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,pe=t;else for(;pe!==null;){s=pe;try{var me=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ve=me.memoizedProps,ht=me.memoizedState,P=s.stateNode,D=P.getSnapshotBeforeUpdate(s.elementType===s.type?ve:Rn(s.type,ve),ht);P.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(oe){ut(s,s.return,oe)}if(t=s.sibling,t!==null){t.return=s.return,pe=t;break}pe=s.return}return me=Bf,Bf=!1,me}function oo(t,s,i){var l=s.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var c=l=l.next;do{if((c.tag&t)===t){var p=c.destroy;c.destroy=void 0,p!==void 0&&cc(s,i,p)}c=c.next}while(c!==l)}}function La(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var l=i.create;i.destroy=l()}i=i.next}while(i!==s)}}function hc(t){var s=t.ref;if(s!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof s=="function"?s(t):s.current=t}}function Uf(t){var s=t.alternate;s!==null&&(t.alternate=null,Uf(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Un],delete s[Yi],delete s[Nu],delete s[gv],delete s[vv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $f(t){return t.tag===5||t.tag===3||t.tag===4}function Qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$f(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dc(t,s,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(t,s):i.insertBefore(t,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(t,i)):(s=i,s.appendChild(t)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=pa));else if(l!==4&&(t=t.child,t!==null))for(dc(t,s,i),t=t.sibling;t!==null;)dc(t,s,i),t=t.sibling}function fc(t,s,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?i.insertBefore(t,s):i.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(fc(t,s,i),t=t.sibling;t!==null;)fc(t,s,i),t=t.sibling}var Nt=null,An=!1;function Fs(t,s,i){for(i=i.child;i!==null;)Hf(t,s,i),i=i.sibling}function Hf(t,s,i){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(sr,i)}catch{}switch(i.tag){case 5:It||ni(i,s);case 6:var l=Nt,c=An;Nt=null,Fs(t,s,i),Nt=l,An=c,Nt!==null&&(An?(t=Nt,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Nt.removeChild(i.stateNode));break;case 18:Nt!==null&&(An?(t=Nt,i=i.stateNode,t.nodeType===8?bu(t.parentNode,i):t.nodeType===1&&bu(t,i),ji(t)):bu(Nt,i.stateNode));break;case 4:l=Nt,c=An,Nt=i.stateNode.containerInfo,An=!0,Fs(t,s,i),Nt=l,An=c;break;case 0:case 11:case 14:case 15:if(!It&&(l=i.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){c=l=l.next;do{var p=c,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&cc(i,s,_),c=c.next}while(c!==l)}Fs(t,s,i);break;case 1:if(!It&&(ni(i,s),l=i.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=i.memoizedProps,l.state=i.memoizedState,l.componentWillUnmount()}catch(b){ut(i,s,b)}Fs(t,s,i);break;case 21:Fs(t,s,i);break;case 22:i.mode&1?(It=(l=It)||i.memoizedState!==null,Fs(t,s,i),It=l):Fs(t,s,i);break;default:Fs(t,s,i)}}function Gf(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new Dv),s.forEach(function(l){var c=Bv.bind(null,t,l);i.has(l)||(i.add(l),l.then(c,c))})}}function On(t,s){var i=s.deletions;if(i!==null)for(var l=0;l<i.length;l++){var c=i[l];try{var p=t,_=s,b=_;e:for(;b!==null;){switch(b.tag){case 5:Nt=b.stateNode,An=!1;break e;case 3:Nt=b.stateNode.containerInfo,An=!0;break e;case 4:Nt=b.stateNode.containerInfo,An=!0;break e}b=b.return}if(Nt===null)throw Error(n(160));Hf(p,_,c),Nt=null,An=!1;var A=c.alternate;A!==null&&(A.return=null),c.return=null}catch(W){ut(c,s,W)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Yf(s,t),s=s.sibling}function Yf(t,s){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(s,t),Hn(t),l&4){try{oo(3,t,t.return),La(3,t)}catch(ve){ut(t,t.return,ve)}try{oo(5,t,t.return)}catch(ve){ut(t,t.return,ve)}}break;case 1:On(s,t),Hn(t),l&512&&i!==null&&ni(i,i.return);break;case 5:if(On(s,t),Hn(t),l&512&&i!==null&&ni(i,i.return),t.flags&32){var c=t.stateNode;try{Wn(c,"")}catch(ve){ut(t,t.return,ve)}}if(l&4&&(c=t.stateNode,c!=null)){var p=t.memoizedProps,_=i!==null?i.memoizedProps:p,b=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{b==="input"&&p.type==="radio"&&p.name!=null&&we(c,p),Ft(b,_);var W=Ft(b,p);for(_=0;_<A.length;_+=2){var ee=A[_],te=A[_+1];ee==="style"?Ir(c,te):ee==="dangerouslySetInnerHTML"?Zs(c,te):ee==="children"?Wn(c,te):z(c,ee,te,W)}switch(b){case"input":Be(c,p);break;case"textarea":Sn(c,p);break;case"select":var K=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!p.multiple;var he=p.value;he!=null?et(c,!!p.multiple,he,!1):K!==!!p.multiple&&(p.defaultValue!=null?et(c,!!p.multiple,p.defaultValue,!0):et(c,!!p.multiple,p.multiple?[]:"",!1))}c[Yi]=p}catch(ve){ut(t,t.return,ve)}}break;case 6:if(On(s,t),Hn(t),l&4){if(t.stateNode===null)throw Error(n(162));c=t.stateNode,p=t.memoizedProps;try{c.nodeValue=p}catch(ve){ut(t,t.return,ve)}}break;case 3:if(On(s,t),Hn(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{ji(s.containerInfo)}catch(ve){ut(t,t.return,ve)}break;case 4:On(s,t),Hn(t);break;case 13:On(s,t),Hn(t),c=t.child,c.flags&8192&&(p=c.memoizedState!==null,c.stateNode.isHidden=p,!p||c.alternate!==null&&c.alternate.memoizedState!==null||(gc=tt())),l&4&&Gf(t);break;case 22:if(ee=i!==null&&i.memoizedState!==null,t.mode&1?(It=(W=It)||ee,On(s,t),It=W):On(s,t),Hn(t),l&8192){if(W=t.memoizedState!==null,(t.stateNode.isHidden=W)&&!ee&&(t.mode&1)!==0)for(pe=t,ee=t.child;ee!==null;){for(te=pe=ee;pe!==null;){switch(K=pe,he=K.child,K.tag){case 0:case 11:case 14:case 15:oo(4,K,K.return);break;case 1:ni(K,K.return);var me=K.stateNode;if(typeof me.componentWillUnmount=="function"){l=K,i=K.return;try{s=l,me.props=s.memoizedProps,me.state=s.memoizedState,me.componentWillUnmount()}catch(ve){ut(l,i,ve)}}break;case 5:ni(K,K.return);break;case 22:if(K.memoizedState!==null){Kf(te);continue}}he!==null?(he.return=K,pe=he):Kf(te)}ee=ee.sibling}e:for(ee=null,te=t;;){if(te.tag===5){if(ee===null){ee=te;try{c=te.stateNode,W?(p=c.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(b=te.stateNode,A=te.memoizedProps.style,_=A!=null&&A.hasOwnProperty("display")?A.display:null,b.style.display=Dr("display",_))}catch(ve){ut(t,t.return,ve)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=W?"":te.memoizedProps}catch(ve){ut(t,t.return,ve)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===t)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===t)break e;for(;te.sibling===null;){if(te.return===null||te.return===t)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:On(s,t),Hn(t),l&4&&Gf(t);break;case 21:break;default:On(s,t),Hn(t)}}function Hn(t){var s=t.flags;if(s&2){try{e:{for(var i=t.return;i!==null;){if($f(i)){var l=i;break e}i=i.return}throw Error(n(160))}switch(l.tag){case 5:var c=l.stateNode;l.flags&32&&(Wn(c,""),l.flags&=-33);var p=Qf(t);fc(t,p,c);break;case 3:case 4:var _=l.stateNode.containerInfo,b=Qf(t);dc(t,b,_);break;default:throw Error(n(161))}}catch(A){ut(t,t.return,A)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Pv(t,s,i){pe=t,Xf(t)}function Xf(t,s,i){for(var l=(t.mode&1)!==0;pe!==null;){var c=pe,p=c.child;if(c.tag===22&&l){var _=c.memoizedState!==null||Fa;if(!_){var b=c.alternate,A=b!==null&&b.memoizedState!==null||It;b=Fa;var W=It;if(Fa=_,(It=A)&&!W)for(pe=c;pe!==null;)_=pe,A=_.child,_.tag===22&&_.memoizedState!==null?Jf(c):A!==null?(A.return=_,pe=A):Jf(c);for(;p!==null;)pe=p,Xf(p),p=p.sibling;pe=c,Fa=b,It=W}Zf(t)}else(c.subtreeFlags&8772)!==0&&p!==null?(p.return=c,pe=p):Zf(t)}}function Zf(t){for(;pe!==null;){var s=pe;if((s.flags&8772)!==0){var i=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:It||La(5,s);break;case 1:var l=s.stateNode;if(s.flags&4&&!It)if(i===null)l.componentDidMount();else{var c=s.elementType===s.type?i.memoizedProps:Rn(s.type,i.memoizedProps);l.componentDidUpdate(c,i.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&Zd(s,p,l);break;case 3:var _=s.updateQueue;if(_!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}Zd(s,_,i)}break;case 5:var b=s.stateNode;if(i===null&&s.flags&4){i=b;var A=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&i.focus();break;case"img":A.src&&(i.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var W=s.alternate;if(W!==null){var ee=W.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&ji(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}It||s.flags&512&&hc(s)}catch(K){ut(s,s.return,K)}}if(s===t){pe=null;break}if(i=s.sibling,i!==null){i.return=s.return,pe=i;break}pe=s.return}}function Kf(t){for(;pe!==null;){var s=pe;if(s===t){pe=null;break}var i=s.sibling;if(i!==null){i.return=s.return,pe=i;break}pe=s.return}}function Jf(t){for(;pe!==null;){var s=pe;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{La(4,s)}catch(A){ut(s,i,A)}break;case 1:var l=s.stateNode;if(typeof l.componentDidMount=="function"){var c=s.return;try{l.componentDidMount()}catch(A){ut(s,c,A)}}var p=s.return;try{hc(s)}catch(A){ut(s,p,A)}break;case 5:var _=s.return;try{hc(s)}catch(A){ut(s,_,A)}}}catch(A){ut(s,s.return,A)}if(s===t){pe=null;break}var b=s.sibling;if(b!==null){b.return=s.return,pe=b;break}pe=s.return}}var Fv=Math.ceil,ja=B.ReactCurrentDispatcher,pc=B.ReactCurrentOwner,vn=B.ReactCurrentBatchConfig,Ie=0,xt=null,mt=null,Et=0,an=0,si=Os(0),_t=0,ao=null,hr=0,Va=0,mc=0,lo=null,Yt=null,gc=0,ri=1/0,hs=null,za=!1,vc=null,Ls=null,qa=!1,js=null,Wa=0,uo=0,_c=null,Ba=-1,Ua=0;function jt(){return(Ie&6)!==0?tt():Ba!==-1?Ba:Ba=tt()}function Vs(t){return(t.mode&1)===0?1:(Ie&2)!==0&&Et!==0?Et&-Et:yv.transition!==null?(Ua===0&&(Ua=$h()),Ua):(t=We,t!==0||(t=window.event,t=t===void 0?16:ed(t.type)),t)}function Mn(t,s,i,l){if(50<uo)throw uo=0,_c=null,Error(n(185));Di(t,i,l),((Ie&2)===0||t!==xt)&&(t===xt&&((Ie&2)===0&&(Va|=i),_t===4&&zs(t,Et)),Xt(t,l),i===1&&Ie===0&&(s.mode&1)===0&&(ri=tt()+500,_a&&Ds()))}function Xt(t,s){var i=t.callbackNode;yg(t,s);var l=Jo(t,t===xt?Et:0);if(l===0)i!==null&&Ri(i),t.callbackNode=null,t.callbackPriority=0;else if(s=l&-l,t.callbackPriority!==s){if(i!=null&&Ri(i),s===1)t.tag===0?_v(tp.bind(null,t)):Vd(tp.bind(null,t)),pv(function(){(Ie&6)===0&&Ds()}),i=null;else{switch(Qh(l)){case 1:i=Lr;break;case 4:i=Ai;break;case 16:i=nr;break;case 536870912:i=Oi;break;default:i=nr}i=up(i,ep.bind(null,t))}t.callbackPriority=s,t.callbackNode=i}}function ep(t,s){if(Ba=-1,Ua=0,(Ie&6)!==0)throw Error(n(327));var i=t.callbackNode;if(ii()&&t.callbackNode!==i)return null;var l=Jo(t,t===xt?Et:0);if(l===0)return null;if((l&30)!==0||(l&t.expiredLanes)!==0||s)s=$a(t,l);else{s=l;var c=Ie;Ie|=2;var p=sp();(xt!==t||Et!==s)&&(hs=null,ri=tt()+500,fr(t,s));do try{Vv();break}catch(b){np(t,b)}while(!0);Fu(),ja.current=p,Ie=c,mt!==null?s=0:(xt=null,Et=0,s=_t)}if(s!==0){if(s===2&&(c=Kl(t),c!==0&&(l=c,s=yc(t,c))),s===1)throw i=ao,fr(t,0),zs(t,l),Xt(t,tt()),i;if(s===6)zs(t,l);else{if(c=t.current.alternate,(l&30)===0&&!Lv(c)&&(s=$a(t,l),s===2&&(p=Kl(t),p!==0&&(l=p,s=yc(t,p))),s===1))throw i=ao,fr(t,0),zs(t,l),Xt(t,tt()),i;switch(t.finishedWork=c,t.finishedLanes=l,s){case 0:case 1:throw Error(n(345));case 2:pr(t,Yt,hs);break;case 3:if(zs(t,l),(l&130023424)===l&&(s=gc+500-tt(),10<s)){if(Jo(t,0)!==0)break;if(c=t.suspendedLanes,(c&l)!==l){jt(),t.pingedLanes|=t.suspendedLanes&c;break}t.timeoutHandle=Su(pr.bind(null,t,Yt,hs),s);break}pr(t,Yt,hs);break;case 4:if(zs(t,l),(l&4194240)===l)break;for(s=t.eventTimes,c=-1;0<l;){var _=31-$t(l);p=1<<_,_=s[_],_>c&&(c=_),l&=~p}if(l=c,l=tt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*Fv(l/1960))-l,10<l){t.timeoutHandle=Su(pr.bind(null,t,Yt,hs),l);break}pr(t,Yt,hs);break;case 5:pr(t,Yt,hs);break;default:throw Error(n(329))}}}return Xt(t,tt()),t.callbackNode===i?ep.bind(null,t):null}function yc(t,s){var i=lo;return t.current.memoizedState.isDehydrated&&(fr(t,s).flags|=256),t=$a(t,s),t!==2&&(s=Yt,Yt=i,s!==null&&wc(s)),t}function wc(t){Yt===null?Yt=t:Yt.push.apply(Yt,t)}function Lv(t){for(var s=t;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var l=0;l<i.length;l++){var c=i[l],p=c.getSnapshot;c=c.value;try{if(!Nn(p(),c))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function zs(t,s){for(s&=~mc,s&=~Va,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var i=31-$t(s),l=1<<i;t[i]=-1,s&=~l}}function tp(t){if((Ie&6)!==0)throw Error(n(327));ii();var s=Jo(t,0);if((s&1)===0)return Xt(t,tt()),null;var i=$a(t,s);if(t.tag!==0&&i===2){var l=Kl(t);l!==0&&(s=l,i=yc(t,l))}if(i===1)throw i=ao,fr(t,0),zs(t,s),Xt(t,tt()),i;if(i===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,pr(t,Yt,hs),Xt(t,tt()),null}function xc(t,s){var i=Ie;Ie|=1;try{return t(s)}finally{Ie=i,Ie===0&&(ri=tt()+500,_a&&Ds())}}function dr(t){js!==null&&js.tag===0&&(Ie&6)===0&&ii();var s=Ie;Ie|=1;var i=vn.transition,l=We;try{if(vn.transition=null,We=1,t)return t()}finally{We=l,vn.transition=i,Ie=s,(Ie&6)===0&&Ds()}}function kc(){an=si.current,Ke(si)}function fr(t,s){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,fv(i)),mt!==null)for(i=mt.return;i!==null;){var l=i;switch(Ou(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ga();break;case 3:ei(),Ke(Qt),Ke(Ot),Uu();break;case 5:Wu(l);break;case 4:ei();break;case 13:Ke(rt);break;case 19:Ke(rt);break;case 10:Lu(l.type._context);break;case 22:case 23:kc()}i=i.return}if(xt=t,mt=t=qs(t.current,null),Et=an=s,_t=0,ao=null,mc=Va=hr=0,Yt=lo=null,lr!==null){for(s=0;s<lr.length;s++)if(i=lr[s],l=i.interleaved,l!==null){i.interleaved=null;var c=l.next,p=i.pending;if(p!==null){var _=p.next;p.next=c,l.next=_}i.pending=l}lr=null}return t}function np(t,s){do{var i=mt;try{if(Fu(),Ea.current=Ma,Ra){for(var l=it.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}Ra=!1}if(cr=0,wt=vt=it=null,to=!1,no=0,pc.current=null,i===null||i.return===null){_t=1,ao=s,mt=null;break}e:{var p=t,_=i.return,b=i,A=s;if(s=Et,b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var W=A,ee=b,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var K=ee.alternate;K?(ee.updateQueue=K.updateQueue,ee.memoizedState=K.memoizedState,ee.lanes=K.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var he=Nf(_);if(he!==null){he.flags&=-257,Ef(he,_,b,p,s),he.mode&1&&bf(p,W,s),s=he,A=W;var me=s.updateQueue;if(me===null){var ve=new Set;ve.add(A),s.updateQueue=ve}else me.add(A);break e}else{if((s&1)===0){bf(p,W,s),Tc();break e}A=Error(n(426))}}else if(nt&&b.mode&1){var ht=Nf(_);if(ht!==null){(ht.flags&65536)===0&&(ht.flags|=256),Ef(ht,_,b,p,s),Iu(ti(A,b));break e}}p=A=ti(A,b),_t!==4&&(_t=2),lo===null?lo=[p]:lo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var P=Cf(p,A,s);Xd(p,P);break e;case 1:b=A;var D=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ls===null||!Ls.has(j)))){p.flags|=65536,s&=-s,p.lanes|=s;var oe=Sf(p,b,s);Xd(p,oe);break e}}p=p.return}while(p!==null)}ip(i)}catch(_e){s=_e,mt===i&&i!==null&&(mt=i=i.return);continue}break}while(!0)}function sp(){var t=ja.current;return ja.current=Ma,t===null?Ma:t}function Tc(){(_t===0||_t===3||_t===2)&&(_t=4),xt===null||(hr&268435455)===0&&(Va&268435455)===0||zs(xt,Et)}function $a(t,s){var i=Ie;Ie|=2;var l=sp();(xt!==t||Et!==s)&&(hs=null,fr(t,s));do try{jv();break}catch(c){np(t,c)}while(!0);if(Fu(),Ie=i,ja.current=l,mt!==null)throw Error(n(261));return xt=null,Et=0,_t}function jv(){for(;mt!==null;)rp(mt)}function Vv(){for(;mt!==null&&!$o();)rp(mt)}function rp(t){var s=lp(t.alternate,t,an);t.memoizedProps=t.pendingProps,s===null?ip(t):mt=s,pc.current=null}function ip(t){var s=t;do{var i=s.alternate;if(t=s.return,(s.flags&32768)===0){if(i=Ov(i,s,an),i!==null){mt=i;return}}else{if(i=Mv(i,s),i!==null){i.flags&=32767,mt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,mt=null;return}}if(s=s.sibling,s!==null){mt=s;return}mt=s=t}while(s!==null);_t===0&&(_t=5)}function pr(t,s,i){var l=We,c=vn.transition;try{vn.transition=null,We=1,zv(t,s,i,l)}finally{vn.transition=c,We=l}return null}function zv(t,s,i,l){do ii();while(js!==null);if((Ie&6)!==0)throw Error(n(327));i=t.finishedWork;var c=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=i.lanes|i.childLanes;if(wg(t,p),t===xt&&(mt=xt=null,Et=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||qa||(qa=!0,up(nr,function(){return ii(),null})),p=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||p){p=vn.transition,vn.transition=null;var _=We;We=1;var b=Ie;Ie|=4,pc.current=null,Iv(t,i),Yf(i,t),ov(Tu),na=!!ku,Tu=ku=null,t.current=i,Pv(i),Qo(),Ie=b,We=_,vn.transition=p}else t.current=i;if(qa&&(qa=!1,js=t,Wa=c),p=t.pendingLanes,p===0&&(Ls=null),Yo(i.stateNode),Xt(t,tt()),s!==null)for(l=t.onRecoverableError,i=0;i<s.length;i++)c=s[i],l(c.value,{componentStack:c.stack,digest:c.digest});if(za)throw za=!1,t=vc,vc=null,t;return(Wa&1)!==0&&t.tag!==0&&ii(),p=t.pendingLanes,(p&1)!==0?t===_c?uo++:(uo=0,_c=t):uo=0,Ds(),null}function ii(){if(js!==null){var t=Qh(Wa),s=vn.transition,i=We;try{if(vn.transition=null,We=16>t?16:t,js===null)var l=!1;else{if(t=js,js=null,Wa=0,(Ie&6)!==0)throw Error(n(331));var c=Ie;for(Ie|=4,pe=t.current;pe!==null;){var p=pe,_=p.child;if((pe.flags&16)!==0){var b=p.deletions;if(b!==null){for(var A=0;A<b.length;A++){var W=b[A];for(pe=W;pe!==null;){var ee=pe;switch(ee.tag){case 0:case 11:case 15:oo(8,ee,p)}var te=ee.child;if(te!==null)te.return=ee,pe=te;else for(;pe!==null;){ee=pe;var K=ee.sibling,he=ee.return;if(Uf(ee),ee===W){pe=null;break}if(K!==null){K.return=he,pe=K;break}pe=he}}}var me=p.alternate;if(me!==null){var ve=me.child;if(ve!==null){me.child=null;do{var ht=ve.sibling;ve.sibling=null,ve=ht}while(ve!==null)}}pe=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,pe=_;else e:for(;pe!==null;){if(p=pe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:oo(9,p,p.return)}var P=p.sibling;if(P!==null){P.return=p.return,pe=P;break e}pe=p.return}}var D=t.current;for(pe=D;pe!==null;){_=pe;var j=_.child;if((_.subtreeFlags&2064)!==0&&j!==null)j.return=_,pe=j;else e:for(_=D;pe!==null;){if(b=pe,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:La(9,b)}}catch(_e){ut(b,b.return,_e)}if(b===_){pe=null;break e}var oe=b.sibling;if(oe!==null){oe.return=b.return,pe=oe;break e}pe=b.return}}if(Ie=c,Ds(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(sr,t)}catch{}l=!0}return l}finally{We=i,vn.transition=s}}return!1}function op(t,s,i){s=ti(i,s),s=Cf(t,s,1),t=Ps(t,s,1),s=jt(),t!==null&&(Di(t,1,s),Xt(t,s))}function ut(t,s,i){if(t.tag===3)op(t,t,i);else for(;s!==null;){if(s.tag===3){op(s,t,i);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ls===null||!Ls.has(l))){t=ti(i,t),t=Sf(s,t,1),s=Ps(s,t,1),t=jt(),s!==null&&(Di(s,1,t),Xt(s,t));break}}s=s.return}}function qv(t,s,i){var l=t.pingCache;l!==null&&l.delete(s),s=jt(),t.pingedLanes|=t.suspendedLanes&i,xt===t&&(Et&i)===i&&(_t===4||_t===3&&(Et&130023424)===Et&&500>tt()-gc?fr(t,0):mc|=i),Xt(t,s)}function ap(t,s){s===0&&((t.mode&1)===0?s=1:(s=Ko,Ko<<=1,(Ko&130023424)===0&&(Ko=4194304)));var i=jt();t=ls(t,s),t!==null&&(Di(t,s,i),Xt(t,i))}function Wv(t){var s=t.memoizedState,i=0;s!==null&&(i=s.retryLane),ap(t,i)}function Bv(t,s){var i=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(i=c.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(s),ap(t,i)}var lp;lp=function(t,s,i){if(t!==null)if(t.memoizedProps!==s.pendingProps||Qt.current)Gt=!0;else{if((t.lanes&i)===0&&(s.flags&128)===0)return Gt=!1,Av(t,s,i);Gt=(t.flags&131072)!==0}else Gt=!1,nt&&(s.flags&1048576)!==0&&zd(s,wa,s.index);switch(s.lanes=0,s.tag){case 2:var l=s.type;Pa(t,s),t=s.pendingProps;var c=Hr(s,Ot.current);Jr(s,i),c=Hu(null,s,l,t,c,i);var p=Gu();return s.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ht(l)?(p=!0,va(s)):p=!1,s.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,zu(s),c.updater=Da,s.stateNode=c,c._reactInternals=s,ec(s,l,t,i),s=rc(null,s,l,!0,p,i)):(s.tag=0,nt&&p&&Au(s),Lt(null,s,c,i),s=s.child),s;case 16:l=s.elementType;e:{switch(Pa(t,s),t=s.pendingProps,c=l._init,l=c(l._payload),s.type=l,c=s.tag=$v(l),t=Rn(l,t),c){case 0:s=sc(null,s,l,t,i);break e;case 1:s=If(null,s,l,t,i);break e;case 11:s=Rf(null,s,l,t,i);break e;case 14:s=Af(null,s,l,Rn(l.type,t),i);break e}throw Error(n(306,l,""))}return s;case 0:return l=s.type,c=s.pendingProps,c=s.elementType===l?c:Rn(l,c),sc(t,s,l,c,i);case 1:return l=s.type,c=s.pendingProps,c=s.elementType===l?c:Rn(l,c),If(t,s,l,c,i);case 3:e:{if(Pf(s),t===null)throw Error(n(387));l=s.pendingProps,p=s.memoizedState,c=p.element,Yd(t,s),ba(s,l,null,i);var _=s.memoizedState;if(l=_.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){c=ti(Error(n(423)),s),s=Ff(t,s,l,i,c);break e}else if(l!==c){c=ti(Error(n(424)),s),s=Ff(t,s,l,i,c);break e}else for(on=As(s.stateNode.containerInfo.firstChild),rn=s,nt=!0,En=null,i=Hd(s,null,l,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Xr(),l===c){s=cs(t,s,i);break e}Lt(t,s,l,i)}s=s.child}return s;case 5:return Kd(s),t===null&&Du(s),l=s.type,c=s.pendingProps,p=t!==null?t.memoizedProps:null,_=c.children,Cu(l,c)?_=null:p!==null&&Cu(l,p)&&(s.flags|=32),Df(t,s),Lt(t,s,_,i),s.child;case 6:return t===null&&Du(s),null;case 13:return Lf(t,s,i);case 4:return qu(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Zr(s,null,l,i):Lt(t,s,l,i),s.child;case 11:return l=s.type,c=s.pendingProps,c=s.elementType===l?c:Rn(l,c),Rf(t,s,l,c,i);case 7:return Lt(t,s,s.pendingProps,i),s.child;case 8:return Lt(t,s,s.pendingProps.children,i),s.child;case 12:return Lt(t,s,s.pendingProps.children,i),s.child;case 10:e:{if(l=s.type._context,c=s.pendingProps,p=s.memoizedProps,_=c.value,Ge(Ta,l._currentValue),l._currentValue=_,p!==null)if(Nn(p.value,_)){if(p.children===c.children&&!Qt.current){s=cs(t,s,i);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var b=p.dependencies;if(b!==null){_=p.child;for(var A=b.firstContext;A!==null;){if(A.context===l){if(p.tag===1){A=us(-1,i&-i),A.tag=2;var W=p.updateQueue;if(W!==null){W=W.shared;var ee=W.pending;ee===null?A.next=A:(A.next=ee.next,ee.next=A),W.pending=A}}p.lanes|=i,A=p.alternate,A!==null&&(A.lanes|=i),ju(p.return,i,s),b.lanes|=i;break}A=A.next}}else if(p.tag===10)_=p.type===s.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=i,b=_.alternate,b!==null&&(b.lanes|=i),ju(_,i,s),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===s){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}Lt(t,s,c.children,i),s=s.child}return s;case 9:return c=s.type,l=s.pendingProps.children,Jr(s,i),c=mn(c),l=l(c),s.flags|=1,Lt(t,s,l,i),s.child;case 14:return l=s.type,c=Rn(l,s.pendingProps),c=Rn(l.type,c),Af(t,s,l,c,i);case 15:return Of(t,s,s.type,s.pendingProps,i);case 17:return l=s.type,c=s.pendingProps,c=s.elementType===l?c:Rn(l,c),Pa(t,s),s.tag=1,Ht(l)?(t=!0,va(s)):t=!1,Jr(s,i),kf(s,l,c),ec(s,l,c,i),rc(null,s,l,!0,t,i);case 19:return Vf(t,s,i);case 22:return Mf(t,s,i)}throw Error(n(156,s.tag))};function up(t,s){return tr(t,s)}function Uv(t,s,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,s,i,l){return new Uv(t,s,i,l)}function Cc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $v(t){if(typeof t=="function")return Cc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Q)return 11;if(t===de)return 14}return 2}function qs(t,s){var i=t.alternate;return i===null?(i=_n(t.tag,s,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=s,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,s=t.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Qa(t,s,i,l,c,p){var _=2;if(l=t,typeof t=="function")Cc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case L:return mr(i.children,c,p,s);case M:_=8,c|=8;break;case X:return t=_n(12,i,s,c|2),t.elementType=X,t.lanes=p,t;case ne:return t=_n(13,i,s,c),t.elementType=ne,t.lanes=p,t;case se:return t=_n(19,i,s,c),t.elementType=se,t.lanes=p,t;case ie:return Ha(i,c,p,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:_=10;break e;case H:_=9;break e;case Q:_=11;break e;case de:_=14;break e;case le:_=16,l=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return s=_n(_,i,s,c),s.elementType=t,s.type=l,s.lanes=p,s}function mr(t,s,i,l){return t=_n(7,t,l,s),t.lanes=i,t}function Ha(t,s,i,l){return t=_n(22,t,l,s),t.elementType=ie,t.lanes=i,t.stateNode={isHidden:!1},t}function Sc(t,s,i){return t=_n(6,t,null,s),t.lanes=i,t}function bc(t,s,i){return s=_n(4,t.children!==null?t.children:[],t.key,s),s.lanes=i,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Qv(t,s,i,l,c){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jl(0),this.expirationTimes=Jl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jl(0),this.identifierPrefix=l,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Nc(t,s,i,l,c,p,_,b,A){return t=new Qv(t,s,i,b,A),s===1?(s=1,p===!0&&(s|=8)):s=0,p=_n(3,null,null,s),t.current=p,p.stateNode=t,p.memoizedState={element:l,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},zu(p),t}function Hv(t,s,i){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:l==null?null:""+l,children:t,containerInfo:s,implementation:i}}function cp(t){if(!t)return Ms;t=t._reactInternals;e:{if(Ee(t)!==t||t.tag!==1)throw Error(n(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ht(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(t.tag===1){var i=t.type;if(Ht(i))return Ld(t,i,s)}return s}function hp(t,s,i,l,c,p,_,b,A){return t=Nc(i,l,!0,t,c,p,_,b,A),t.context=cp(null),i=t.current,l=jt(),c=Vs(i),p=us(l,c),p.callback=s??null,Ps(i,p,c),t.current.lanes=c,Di(t,c,l),Xt(t,l),t}function Ga(t,s,i,l){var c=s.current,p=jt(),_=Vs(c);return i=cp(i),s.context===null?s.context=i:s.pendingContext=i,s=us(p,_),s.payload={element:t},l=l===void 0?null:l,l!==null&&(s.callback=l),t=Ps(c,s,_),t!==null&&(Mn(t,c,_,p),Sa(t,c,_)),_}function Ya(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<s?i:s}}function Ec(t,s){dp(t,s),(t=t.alternate)&&dp(t,s)}function Gv(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rc(t){this._internalRoot=t}Xa.prototype.render=Rc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(n(409));Ga(t,s,null,null)},Xa.prototype.unmount=Rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;dr(function(){Ga(null,t,null,null)}),s[rs]=null}};function Xa(t){this._internalRoot=t}Xa.prototype.unstable_scheduleHydration=function(t){if(t){var s=Yh();t={blockedOn:null,target:t,priority:s};for(var i=0;i<Ns.length&&s!==0&&s<Ns[i].priority;i++);Ns.splice(i,0,t),i===0&&Kh(t)}};function Ac(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Za(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pp(){}function Yv(t,s,i,l,c){if(c){if(typeof l=="function"){var p=l;l=function(){var W=Ya(_);p.call(W)}}var _=hp(s,l,t,0,null,!1,!1,"",pp);return t._reactRootContainer=_,t[rs]=_.current,Hi(t.nodeType===8?t.parentNode:t),dr(),_}for(;c=t.lastChild;)t.removeChild(c);if(typeof l=="function"){var b=l;l=function(){var W=Ya(A);b.call(W)}}var A=Nc(t,0,!1,null,null,!1,!1,"",pp);return t._reactRootContainer=A,t[rs]=A.current,Hi(t.nodeType===8?t.parentNode:t),dr(function(){Ga(s,A,i,l)}),A}function Ka(t,s,i,l,c){var p=i._reactRootContainer;if(p){var _=p;if(typeof c=="function"){var b=c;c=function(){var A=Ya(_);b.call(A)}}Ga(s,_,t,c)}else _=Yv(i,s,t,c,l);return Ya(_)}Hh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var i=Mi(s.pendingLanes);i!==0&&(eu(s,i|1),Xt(s,tt()),(Ie&6)===0&&(ri=tt()+500,Ds()))}break;case 13:dr(function(){var l=ls(t,1);if(l!==null){var c=jt();Mn(l,t,1,c)}}),Ec(t,1)}},tu=function(t){if(t.tag===13){var s=ls(t,134217728);if(s!==null){var i=jt();Mn(s,t,134217728,i)}Ec(t,134217728)}},Gh=function(t){if(t.tag===13){var s=Vs(t),i=ls(t,s);if(i!==null){var l=jt();Mn(i,t,s,l)}Ec(t,s)}},Yh=function(){return We},Xh=function(t,s){var i=We;try{return We=t,s()}finally{We=i}},Si=function(t,s,i){switch(s){case"input":if(Be(t,i),s=i.name,i.type==="radio"&&s!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var l=i[s];if(l!==t&&l.form===t.form){var c=ma(l);if(!c)throw Error(n(90));Ut(l),Be(l,c)}}}break;case"textarea":Sn(t,i);break;case"select":s=i.value,s!=null&&et(t,!!i.multiple,s,!1)}},Wo=xc,Bo=dr;var Xv={usingClientEntryPoint:!1,Events:[Xi,$r,ma,zo,qo,xc]},co={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zv={bundleType:co.bundleType,version:co.version,rendererPackageName:co.rendererPackageName,rendererConfig:co.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dn(t),t===null?null:t.stateNode},findFiberByHostInstance:co.findFiberByHostInstance||Gv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{sr=Ja.inject(Zv),nn=Ja}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv,Zt.createPortal=function(t,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ac(s))throw Error(n(200));return Hv(t,s,null,i)},Zt.createRoot=function(t,s){if(!Ac(t))throw Error(n(299));var i=!1,l="",c=fp;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(c=s.onRecoverableError)),s=Nc(t,1,!1,null,null,i,!1,l,c),t[rs]=s.current,Hi(t.nodeType===8?t.parentNode:t),new Rc(s)},Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=dn(s),t=t===null?null:t.stateNode,t},Zt.flushSync=function(t){return dr(t)},Zt.hydrate=function(t,s,i){if(!Za(s))throw Error(n(200));return Ka(null,t,s,!0,i)},Zt.hydrateRoot=function(t,s,i){if(!Ac(t))throw Error(n(405));var l=i!=null&&i.hydratedSources||null,c=!1,p="",_=fp;if(i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),s=hp(s,null,t,1,i??null,c,!1,p,_),t[rs]=s.current,Hi(t),l)for(t=0;t<l.length;t++)i=l[t],c=i._getVersion,c=c(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,c]:s.mutableSourceEagerHydrationData.push(i,c);return new Xa(s)},Zt.render=function(t,s,i){if(!Za(s))throw Error(n(200));return Ka(null,t,s,!1,i)},Zt.unmountComponentAtNode=function(t){if(!Za(t))throw Error(n(40));return t._reactRootContainer?(dr(function(){Ka(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1},Zt.unstable_batchedUpdates=xc,Zt.unstable_renderSubtreeIntoContainer=function(t,s,i,l){if(!Za(i))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Ka(t,s,i,!1,l)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var kp;function a_(){if(kp)return Ic.exports;kp=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Ic.exports=o_(),Ic.exports}var Tp;function l_(){if(Tp)return el;Tp=1;var o=a_();return el.createRoot=o.createRoot,el.hydrateRoot=o.hydrateRoot,el}var u_=l_();const Jp="15.1.22",Cp=(o,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:o}),Sp=(o,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:o}),Wc=(o,e)=>({startTime:e,type:"setValue",value:o}),em=(o,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:o}),tm=(o,e,{startTime:n,target:r,timeConstant:a})=>r+(e-r)*Math.exp((n-o)/a),li=o=>o.type==="exponentialRampToValue",al=o=>o.type==="linearRampToValue",$s=o=>li(o)||al(o),Jc=o=>o.type==="setValue",ps=o=>o.type==="setValueCurve",ll=(o,e,n,r)=>{const a=o[e];return a===void 0?r:$s(a)||Jc(a)?a.value:ps(a)?a.values[a.values.length-1]:tm(n,ll(o,e-1,a.startTime,r),a)},bp=(o,e,n,r,a)=>n===void 0?[r.insertTime,a]:$s(n)?[n.endTime,n.value]:Jc(n)?[n.startTime,n.value]:ps(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,ll(o,e-1,n.startTime,a)],Bc=o=>o.type==="cancelAndHold",Uc=o=>o.type==="cancelScheduledValues",Bs=o=>Bc(o)||Uc(o)?o.cancelTime:li(o)||al(o)?o.endTime:o.startTime,Np=(o,e,n,{endTime:r,value:a})=>n===a?a:0<n&&0<a||n<0&&a<0?n*(a/n)**((o-e)/(r-e)):0,Ep=(o,e,n,{endTime:r,value:a})=>n+(o-e)/(r-e)*(a-n),c_=(o,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?o[n]:(1-(e-n))*o[n]+(1-(r-e))*o[r]},h_=(o,{duration:e,startTime:n,values:r})=>{const a=(o-n)/e*(r.length-1);return c_(r,a)},tl=o=>o.type==="setTarget";class d_{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Bs(e);if(Bc(e)||Uc(e)){const r=this._automationEvents.findIndex(u=>Uc(e)&&ps(u)?u.startTime+u.duration>=n:Bs(u)>=n),a=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Bc(e)){const u=this._automationEvents[this._automationEvents.length-1];if(a!==void 0&&$s(a)){if(u!==void 0&&tl(u))throw new Error("The internal list is malformed.");const h=u===void 0?a.insertTime:ps(u)?u.startTime+u.duration:Bs(u),d=u===void 0?this._defaultValue:ps(u)?u.values[u.values.length-1]:u.value,f=li(a)?Np(n,h,d,a):Ep(n,h,d,a),m=li(a)?Cp(f,n,this._currenTime):Sp(f,n,this._currenTime);this._automationEvents.push(m)}if(u!==void 0&&tl(u)&&this._automationEvents.push(Wc(this.getValue(n),n)),u!==void 0&&ps(u)&&u.startTime+u.duration>n){const h=n-u.startTime,d=(u.values.length-1)/u.duration,f=Math.max(2,1+Math.ceil(h*d)),m=h/(f-1)*d,g=u.values.slice(0,f);if(m<1)for(let v=1;v<f;v+=1){const y=m*v%1;g[v]=u.values[v-1]*(1-y)+u.values[v]*y}this._automationEvents[this._automationEvents.length-1]=em(g,u.startTime,h)}}}else{const r=this._automationEvents.findIndex(h=>Bs(h)>n),a=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(a!==void 0&&ps(a)&&Bs(a)+a.duration>n)return!1;const u=li(e)?Cp(e.value,e.endTime,this._currenTime):al(e)?Sp(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(u);else{if(ps(e)&&n+e.duration>Bs(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,u)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Bs(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),a=r[0];tl(a)&&r.unshift(Wc(ll(this._automationEvents,n-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(h=>Bs(h)>e),r=this._automationEvents[n],a=(n===-1?this._automationEvents.length:n)-1,u=this._automationEvents[a];if(u!==void 0&&tl(u)&&(r===void 0||!$s(r)||r.insertTime>e))return tm(e,ll(this._automationEvents,a-1,u.startTime,this._defaultValue),u);if(u!==void 0&&Jc(u)&&(r===void 0||!$s(r)))return u.value;if(u!==void 0&&ps(u)&&(r===void 0||!$s(r)||u.startTime+u.duration>e))return e<u.startTime+u.duration?h_(e,u):u.values[u.values.length-1];if(u!==void 0&&$s(u)&&(r===void 0||!$s(r)))return u.value;if(r!==void 0&&li(r)){const[h,d]=bp(this._automationEvents,a,u,r,this._defaultValue);return Np(e,h,d,r)}if(r!==void 0&&al(r)){const[h,d]=bp(this._automationEvents,a,u,r,this._defaultValue);return Ep(e,h,d,r)}return this._defaultValue}}const f_=o=>({cancelTime:o,type:"cancelAndHold"}),p_=o=>({cancelTime:o,type:"cancelScheduledValues"}),m_=(o,e)=>({endTime:e,type:"exponentialRampToValue",value:o}),g_=(o,e)=>({endTime:e,type:"linearRampToValue",value:o}),v_=(o,e,n)=>({startTime:e,target:o,timeConstant:n,type:"setTarget"}),__=()=>new DOMException("","AbortError"),y_=o=>(e,n,[r,a,u],h)=>{o(e[a],[n,r,u],d=>d[0]===n&&d[1]===r,h)},w_=o=>(e,n,r)=>{const a=[];for(let u=0;u<r.numberOfInputs;u+=1)a.push(new Set);o.set(e,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},x_=o=>(e,n)=>{o.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},pi=new WeakSet,nm=new WeakMap,eh=new WeakMap,sm=new WeakMap,th=new WeakMap,bl=new WeakMap,rm=new WeakMap,$c=new WeakMap,Qc=new WeakMap,Hc=new WeakMap,im={construct(){return im}},k_=o=>{try{const e=new Proxy(o,im);new e}catch{return!1}return!0},Rp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Ap=(o,e)=>{const n=[];let r=o.replace(/^[\s]+/,""),a=r.match(Rp);for(;a!==null;){const u=a[1].slice(1,-1),h=a[0].replace(/([\s]+)?;?$/,"").replace(u,new URL(u,e).toString());n.push(h),r=r.slice(a[0].length).replace(/^[\s]+/,""),a=r.match(Rp)}return[n.join(";"),r]},Op=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Mp=o=>{if(!k_(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},T_=(o,e,n,r,a,u,h,d,f,m,g,v,y)=>{let x=0;return(w,k,T={credentials:"omit"})=>{const R=g.get(w);if(R!==void 0&&R.has(k))return Promise.resolve();const q=m.get(w);if(q!==void 0){const N=q.get(k);if(N!==void 0)return N}const z=u(w),B=z.audioWorklet===void 0?a(k).then(([N,I])=>{const[L,M]=Ap(N,I),X=`${L};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${M}
})})(window,'_AWGS')`;return n(X)}).then(()=>{const N=y._AWGS.pop();if(N===void 0)throw new SyntaxError;r(z.currentTime,z.sampleRate,()=>N(class{},void 0,(I,L)=>{if(I.trim()==="")throw e();const M=Qc.get(z);if(M!==void 0){if(M.has(I))throw e();Mp(L),Op(L.parameterDescriptors),M.set(I,L)}else Mp(L),Op(L.parameterDescriptors),Qc.set(z,new Map([[I,L]]))},z.sampleRate,void 0,void 0))}):Promise.all([a(k),Promise.resolve(o(v,v))]).then(([[N,I],L])=>{const M=x+1;x=M;const[X,U]=Ap(N,I),se=`${X};((AudioWorkletProcessor,registerProcessor)=>{${U}
})(${L?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${L?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${L?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${M}',class extends AudioWorkletProcessor{process(){return !1}})`,de=new Blob([se],{type:"application/javascript; charset=utf-8"}),le=URL.createObjectURL(de);return z.audioWorklet.addModule(le,T).then(()=>{if(d(z))return z;const ie=h(z);return ie.audioWorklet.addModule(le,T).then(()=>ie)}).then(ie=>{if(f===null)throw new SyntaxError;try{new f(ie,`__sac${M}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(le))});return q===void 0?m.set(w,new Map([[k,B]])):q.set(k,B),B.then(()=>{const N=g.get(w);N===void 0?g.set(w,new Set([k])):N.add(k)}).finally(()=>{const N=m.get(w);N!==void 0&&N.delete(k)}),B}},Pn=(o,e)=>{const n=o.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Nl=(o,e)=>{const n=Array.from(o).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return o.delete(r),r},om=(o,e,n,r)=>{const a=Pn(o,e),u=Nl(a,h=>h[0]===n&&h[1]===r);return a.size===0&&o.delete(e),u},ko=o=>Pn(rm,o),mi=o=>{if(pi.has(o))throw new Error("The AudioNode is already stored.");pi.add(o),ko(o).forEach(e=>e(!0))},am=o=>"port"in o,To=o=>{if(!pi.has(o))throw new Error("The AudioNode is not stored.");pi.delete(o),ko(o).forEach(e=>e(!1))},Gc=(o,e)=>{!am(o)&&e.every(n=>n.size===0)&&To(o)},C_=(o,e,n,r,a,u,h,d,f,m,g,v,y)=>{const x=new WeakMap;return(w,k,T,R,q)=>{const{activeInputs:z,passiveInputs:B}=u(k),{outputs:N}=u(w),I=d(w),L=M=>{const X=f(k),U=f(w);if(M){const H=om(B,w,T,R);o(z,w,H,!1),!q&&!v(w)&&n(U,X,T,R),y(k)&&mi(k)}else{const H=r(z,w,T,R);e(B,R,H,!1),!q&&!v(w)&&a(U,X,T,R);const Q=h(k);if(Q===0)g(k)&&Gc(k,z);else{const ne=x.get(k);ne!==void 0&&clearTimeout(ne),x.set(k,setTimeout(()=>{g(k)&&Gc(k,z)},Q*1e3))}}};return m(N,[k,T,R],M=>M[0]===k&&M[1]===T&&M[2]===R,!0)?(I.add(L),g(w)?o(z,w,[T,R,L],!0):e(B,R,[w,T,L],!0),!0):!1}},S_=o=>(e,n,[r,a,u],h)=>{const d=e.get(r);d===void 0?e.set(r,new Set([[a,n,u]])):o(d,[a,n,u],f=>f[0]===a&&f[1]===n,h)},b_=o=>(e,n)=>{const r=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const a=()=>{n.removeEventListener("ended",a),n.disconnect(r),r.disconnect()};n.addEventListener("ended",a)},N_=o=>(e,n)=>{o(e).add(n)},E_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},R_=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...E_,...f},v=r(m,g),y=u(m)?e():null;super(d,!1,v,y),this._nativeAnalyserNode=v}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(d){this._nativeAnalyserNode.fftSize=d}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(d){const f=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=d,!(d>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=f,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(d){const f=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=d,!(this._nativeAnalyserNode.maxDecibels>d))throw this._nativeAnalyserNode.minDecibels=f,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(d){this._nativeAnalyserNode.smoothingTimeConstant=d}getByteFrequencyData(d){this._nativeAnalyserNode.getByteFrequencyData(d)}getByteTimeDomainData(d){this._nativeAnalyserNode.getByteTimeDomainData(d)}getFloatFrequencyData(d){this._nativeAnalyserNode.getFloatFrequencyData(d)}getFloatTimeDomainData(d){this._nativeAnalyserNode.getFloatTimeDomainData(d)}},Pt=(o,e)=>o.context===e,A_=(o,e,n)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Pt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,fftSize:d.fftSize,maxDecibels:d.maxDecibels,minDecibels:d.minDecibels,smoothingTimeConstant:d.smoothingTimeConstant};d=o(h,m)}return r.set(h,d),await n(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},ul=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Xn=()=>new DOMException("","IndexSizeError"),nh=o=>{o.getChannelData=(e=>n=>{try{return e.call(o,n)}catch(r){throw r.code===12?Xn():r}})(o.getChannelData)},O_={numberOfChannels:1},M_=(o,e,n,r,a,u,h,d)=>{let f=null;return class lm{constructor(g){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:v,numberOfChannels:y,sampleRate:x}={...O_,...g};f===null&&(f=new a(1,1,44100));const w=r!==null&&e(u,u)?new r({length:v,numberOfChannels:y,sampleRate:x}):f.createBuffer(y,v,x);if(w.numberOfChannels===0)throw n();return typeof w.copyFromChannel!="function"?(h(w),nh(w)):e(ul,()=>ul(w))||d(w),o.add(w),w}static[Symbol.hasInstance](g){return g!==null&&typeof g=="object"&&Object.getPrototypeOf(g)===lm.prototype||o.has(g)}}},Kt=-34028234663852886e22,Vt=-Kt,ms=o=>pi.has(o),D_={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},I_=(o,e,n,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),y={...D_,...g},x=a(v,y),w=h(v),k=w?e():null;super(m,!1,x,k),this._audioBufferSourceNodeRenderer=k,this._isBufferNullified=!1,this._isBufferSet=y.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=n(this,w,x.playbackRate,Vt,Kt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const g=typeof m=="function"?d(this,m):null;this._nativeAudioBufferSourceNode.onended=g;const v=this._nativeAudioBufferSourceNode.onended;this._onended=v!==null&&v===g?m:v}get playbackRate(){return this._playbackRate}start(m=0,g=0,v){if(this._nativeAudioBufferSourceNode.start(m,g,v),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=v===void 0?[m,g]:[m,g,v]),this.context.state!=="closed"){mi(this);const y=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",y),ms(this)&&To(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",y)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},P_=(o,e,n,r,a)=>()=>{const u=new WeakMap;let h=null,d=null;const f=async(m,g)=>{let v=n(m);const y=Pt(v,g);if(!y){const x={buffer:v.buffer,channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,loop:v.loop,loopEnd:v.loopEnd,loopStart:v.loopStart,playbackRate:v.playbackRate.value};v=e(g,x),h!==null&&v.start(...h),d!==null&&v.stop(d)}return u.set(g,v),y?await o(g,m.playbackRate,v.playbackRate):await r(g,m.playbackRate,v.playbackRate),await a(m,g,v),v};return{set start(m){h=m},set stop(m){d=m},render(m,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):f(m,g)}}},F_=o=>"playbackRate"in o,L_=o=>"frequency"in o&&"gain"in o,j_=o=>"offset"in o,V_=o=>!("frequency"in o)&&"gain"in o,z_=o=>"detune"in o&&"frequency"in o&&!("gain"in o),q_=o=>"pan"in o,zt=o=>Pn(nm,o),Co=o=>Pn(sm,o),Yc=(o,e)=>{const{activeInputs:n}=zt(o);n.forEach(a=>a.forEach(([u])=>{e.includes(o)||Yc(u,[...e,o])}));const r=F_(o)?[o.playbackRate]:am(o)?Array.from(o.parameters.values()):L_(o)?[o.Q,o.detune,o.frequency,o.gain]:j_(o)?[o.offset]:V_(o)?[o.gain]:z_(o)?[o.detune,o.frequency]:q_(o)?[o.pan]:[];for(const a of r){const u=Co(a);u!==void 0&&u.activeInputs.forEach(([h])=>Yc(h,e))}ms(o)&&To(o)},um=o=>{Yc(o.destination,[])},W_=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),B_=(o,e,n,r,a,u,h,d,f)=>class extends o{constructor(g={}){if(f===null)throw new Error("Missing the native AudioContext constructor.");let v;try{v=new f(g)}catch(w){throw w.code===12&&w.message==="sampleRate is not in range"?n():w}if(v===null)throw r();if(!W_(g.latencyHint))throw new TypeError(`The provided value '${g.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(g.sampleRate!==void 0&&v.sampleRate!==g.sampleRate)throw n();super(v,2);const{latencyHint:y}=g,{sampleRate:x}=v;if(this._baseLatency=typeof v.baseLatency=="number"?v.baseLatency:y==="balanced"?512/x:y==="interactive"||y===void 0?256/x:y==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(y*x/128)))*128/x,this._nativeAudioContext=v,f.name==="webkitAudioContext"?(this._nativeGainNode=v.createGain(),this._nativeOscillatorNode=v.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(v.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,v.state==="running"){this._state="suspended";const w=()=>{this._state==="suspended"&&(this._state=null),v.removeEventListener("statechange",w)};v.addEventListener("statechange",w)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),um(this)}))}createMediaElementSource(g){return new a(this,{mediaElement:g})}createMediaStreamDestination(){return new u(this)}createMediaStreamSource(g){return new h(this,{mediaStream:g})}createMediaStreamTrackSource(g){return new d(this,{mediaStreamTrack:g})}resume(){return this._state==="suspended"?new Promise((g,v)=>{const y=()=>{this._nativeAudioContext.removeEventListener("statechange",y),this._nativeAudioContext.state==="running"?g():this.resume().then(g,v)};this._nativeAudioContext.addEventListener("statechange",y)}):this._nativeAudioContext.resume().catch(g=>{throw g===void 0||g.code===15?e():g})}suspend(){return this._nativeAudioContext.suspend().catch(g=>{throw g===void 0?e():g})}},U_=(o,e,n,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),y=h(v),x=a(v,g,y),w=y?e(d):null;super(m,!1,x,w),this._isNodeOfNativeOfflineAudioContext=y,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},$_=o=>{const e=new WeakMap,n=async(r,a)=>{const u=a.destination;return e.set(a,u),await o(r,a,u),u};return{render(r,a){const u=e.get(a);return u!==void 0?Promise.resolve(u):n(r,a)}}},Q_=(o,e,n,r,a,u,h,d)=>(f,m)=>{const g=m.listener,v=()=>{const N=new Float32Array(1),I=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),L=h(m);let M=!1,X=[0,0,-1,0,1,0],U=[0,0,0];const H=()=>{if(M)return;M=!0;const de=r(m,256,9,0);de.onaudioprocess=({inputBuffer:le})=>{const ie=[u(le,N,0),u(le,N,1),u(le,N,2),u(le,N,3),u(le,N,4),u(le,N,5)];ie.some((Z,Y)=>Z!==X[Y])&&(g.setOrientation(...ie),X=ie);const G=[u(le,N,6),u(le,N,7),u(le,N,8)];G.some((Z,Y)=>Z!==U[Y])&&(g.setPosition(...G),U=G)},I.connect(de)},Q=de=>le=>{le!==X[de]&&(X[de]=le,g.setOrientation(...X))},ne=de=>le=>{le!==U[de]&&(U[de]=le,g.setPosition(...U))},se=(de,le,ie)=>{const G=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:le});G.connect(I,0,de),G.start(),Object.defineProperty(G.offset,"defaultValue",{get(){return le}});const Z=o({context:f},L,G.offset,Vt,Kt);return d(Z,"value",Y=>()=>Y.call(Z),Y=>E=>{try{Y.call(Z,E)}catch(F){if(F.code!==9)throw F}H(),L&&ie(E)}),Z.cancelAndHoldAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.cancelAndHoldAtTime),Z.cancelScheduledValues=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.cancelScheduledValues),Z.exponentialRampToValueAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.exponentialRampToValueAtTime),Z.linearRampToValueAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.linearRampToValueAtTime),Z.setTargetAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.setTargetAtTime),Z.setValueAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.setValueAtTime),Z.setValueCurveAtTime=(Y=>L?()=>{throw a()}:(...E)=>{const F=Y.apply(Z,E);return H(),F})(Z.setValueCurveAtTime),Z};return{forwardX:se(0,0,Q(0)),forwardY:se(1,0,Q(1)),forwardZ:se(2,-1,Q(2)),positionX:se(6,0,ne(0)),positionY:se(7,0,ne(1)),positionZ:se(8,0,ne(2)),upX:se(3,0,Q(3)),upY:se(4,1,Q(4)),upZ:se(5,0,Q(5))}},{forwardX:y,forwardY:x,forwardZ:w,positionX:k,positionY:T,positionZ:R,upX:q,upY:z,upZ:B}=g.forwardX===void 0?v():g;return{get forwardX(){return y},get forwardY(){return x},get forwardZ(){return w},get positionX(){return k},get positionY(){return T},get positionZ(){return R},get upX(){return q},get upY(){return z},get upZ(){return B}}},cl=o=>"context"in o,So=o=>cl(o[0]),Er=(o,e,n,r)=>{for(const a of o)if(n(a)){if(r)return!1;throw Error("The set contains at least one similar element.")}return o.add(e),!0},Dp=(o,e,[n,r],a)=>{Er(o,[e,n,r],u=>u[0]===e&&u[1]===n,a)},Ip=(o,[e,n,r],a)=>{const u=o.get(e);u===void 0?o.set(e,new Set([[n,r]])):Er(u,[n,r],h=>h[0]===n,a)},yi=o=>"inputs"in o,hl=(o,e,n,r)=>{if(yi(e)){const a=e.inputs[r];return o.connect(a,n,0),[a,n,0]}return o.connect(e,n,r),[e,n,r]},cm=(o,e,n)=>{for(const r of o)if(r[0]===e&&r[1]===n)return o.delete(r),r;return null},H_=(o,e,n)=>Nl(o,r=>r[0]===e&&r[1]===n),hm=(o,e)=>{if(!ko(o).delete(e))throw new Error("Missing the expected event listener.")},dm=(o,e,n)=>{const r=Pn(o,e),a=Nl(r,u=>u[0]===n);return r.size===0&&o.delete(e),a},dl=(o,e,n,r)=>{yi(e)?o.disconnect(e.inputs[r],n,0):o.disconnect(e,n,r)},Je=o=>Pn(eh,o),mo=o=>Pn(th,o),kr=o=>$c.has(o),il=o=>!pi.has(o),Pp=(o,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=o.createScriptProcessor(256,1,1),a=o.createGain(),u=o.createBuffer(1,2,44100),h=u.getChannelData(0);h[0]=1,h[1]=1;const d=o.createBufferSource();d.buffer=u,d.loop=!0,d.connect(r).connect(o.destination),d.connect(a),d.disconnect(a),r.onaudioprocess=f=>{const m=f.inputBuffer.getChannelData(0);Array.prototype.some.call(m,g=>g===1)?n(!0):n(!1),d.stop(),r.onaudioprocess=null,d.disconnect(r),r.disconnect(o.destination)},d.start()}}),Lc=(o,e)=>{const n=new Map;for(const r of o)for(const a of r){const u=n.get(a);n.set(a,u===void 0?1:u+1)}n.forEach((r,a)=>e(a,r))},fl=o=>"context"in o,G_=o=>{const e=new Map;o.connect=(n=>(r,a=0,u=0)=>{const h=fl(r)?n(r,a,u):n(r,a),d=e.get(r);return d===void 0?e.set(r,[{input:u,output:a}]):d.every(f=>f.input!==u||f.output!==a)&&d.push({input:u,output:a}),h})(o.connect.bind(o)),o.disconnect=(n=>(r,a,u)=>{if(n.apply(o),r===void 0)e.clear();else if(typeof r=="number")for(const[h,d]of e){const f=d.filter(m=>m.output!==r);f.length===0?e.delete(h):e.set(h,f)}else if(e.has(r))if(a===void 0)e.delete(r);else{const h=e.get(r);if(h!==void 0){const d=h.filter(f=>f.output!==a&&(f.input!==u||u===void 0));d.length===0?e.delete(r):e.set(r,d)}}for(const[h,d]of e)d.forEach(f=>{fl(h)?o.connect(h,f.output,f.input):o.connect(h,f.output)})})(o.disconnect)},Y_=(o,e,n,r)=>{const{activeInputs:a,passiveInputs:u}=Co(e),{outputs:h}=zt(o),d=ko(o),f=m=>{const g=Je(o),v=mo(e);if(m){const y=dm(u,o,n);Dp(a,o,y,!1),!r&&!kr(o)&&g.connect(v,n)}else{const y=H_(a,o,n);Ip(u,y,!1),!r&&!kr(o)&&g.disconnect(v,n)}};return Er(h,[e,n],m=>m[0]===e&&m[1]===n,!0)?(d.add(f),ms(o)?Dp(a,o,[n,f],!0):Ip(u,[o,n,f],!0),!0):!1},X_=(o,e,n,r)=>{const{activeInputs:a,passiveInputs:u}=zt(e),h=cm(a[r],o,n);return h===null?[om(u,o,n,r)[2],!1]:[h[2],!0]},Z_=(o,e,n)=>{const{activeInputs:r,passiveInputs:a}=Co(e),u=cm(r,o,n);return u===null?[dm(a,o,n)[1],!1]:[u[2],!0]},sh=(o,e,n,r,a)=>{const[u,h]=X_(o,n,r,a);if(u!==null&&(hm(o,u),h&&!e&&!kr(o)&&dl(Je(o),Je(n),r,a)),ms(n)){const{activeInputs:d}=zt(n);Gc(n,d)}},rh=(o,e,n,r)=>{const[a,u]=Z_(o,n,r);a!==null&&(hm(o,a),u&&!e&&!kr(o)&&Je(o).disconnect(mo(n),r))},K_=(o,e)=>{const n=zt(o),r=[];for(const a of n.outputs)So(a)?sh(o,e,...a):rh(o,e,...a),r.push(a[0]);return n.outputs.clear(),r},J_=(o,e,n)=>{const r=zt(o),a=[];for(const u of r.outputs)u[1]===n&&(So(u)?sh(o,e,...u):rh(o,e,...u),a.push(u[0]),r.outputs.delete(u));return a},ey=(o,e,n,r,a)=>{const u=zt(o);return Array.from(u.outputs).filter(h=>h[0]===n&&(r===void 0||h[1]===r)&&(a===void 0||h[2]===a)).map(h=>(So(h)?sh(o,e,...h):rh(o,e,...h),u.outputs.delete(h),h[0]))},ty=(o,e,n,r,a,u,h,d,f,m,g,v,y,x,w,k)=>class extends m{constructor(R,q,z,B){super(z),this._context=R,this._nativeAudioNode=z;const N=g(R);v(N)&&n(Pp,()=>Pp(N,k))!==!0&&G_(z),eh.set(this,z),rm.set(this,new Set),R.state!=="closed"&&q&&mi(this),o(this,B,z)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(R){this._nativeAudioNode.channelCount=R}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(R){this._nativeAudioNode.channelCountMode=R}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(R){this._nativeAudioNode.channelInterpretation=R}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(R,q=0,z=0){if(q<0||q>=this._nativeAudioNode.numberOfOutputs)throw a();const B=g(this._context),N=w(B);if(y(R)||x(R))throw u();if(cl(R)){const M=Je(R);try{const U=hl(this._nativeAudioNode,M,q,z),H=il(this);(N||H)&&this._nativeAudioNode.disconnect(...U),this.context.state!=="closed"&&!H&&il(R)&&mi(R)}catch(U){throw U.code===12?u():U}if(e(this,R,q,z,N)){const U=f([this],R);Lc(U,r(N))}return R}const I=mo(R);if(I.name==="playbackRate"&&I.maxValue===1024)throw h();try{this._nativeAudioNode.connect(I,q),(N||il(this))&&this._nativeAudioNode.disconnect(I,q)}catch(M){throw M.code===12?u():M}if(Y_(this,R,q,N)){const M=f([this],R);Lc(M,r(N))}}disconnect(R,q,z){let B;const N=g(this._context),I=w(N);if(R===void 0)B=K_(this,I);else if(typeof R=="number"){if(R<0||R>=this.numberOfOutputs)throw a();B=J_(this,I,R)}else{if(q!==void 0&&(q<0||q>=this.numberOfOutputs)||cl(R)&&z!==void 0&&(z<0||z>=R.numberOfInputs))throw a();if(B=ey(this,I,R,q,z),B.length===0)throw u()}for(const L of B){const M=f([this],L);Lc(M,d)}}},ny=(o,e,n,r,a,u,h,d,f,m,g,v,y)=>(x,w,k,T=null,R=null)=>{const q=k.value,z=new d_(q),B=w?r(z):null,N={get defaultValue(){return q},get maxValue(){return T===null?k.maxValue:T},get minValue(){return R===null?k.minValue:R},get value(){return k.value},set value(I){k.value=I,N.setValueAtTime(I,x.context.currentTime)},cancelAndHoldAtTime(I){if(typeof k.cancelAndHoldAtTime=="function")B===null&&z.flush(x.context.currentTime),z.add(a(I)),k.cancelAndHoldAtTime(I);else{const L=Array.from(z).pop();B===null&&z.flush(x.context.currentTime),z.add(a(I));const M=Array.from(z).pop();k.cancelScheduledValues(I),L!==M&&M!==void 0&&(M.type==="exponentialRampToValue"?k.exponentialRampToValueAtTime(M.value,M.endTime):M.type==="linearRampToValue"?k.linearRampToValueAtTime(M.value,M.endTime):M.type==="setValue"?k.setValueAtTime(M.value,M.startTime):M.type==="setValueCurve"&&k.setValueCurveAtTime(M.values,M.startTime,M.duration))}return N},cancelScheduledValues(I){return B===null&&z.flush(x.context.currentTime),z.add(u(I)),k.cancelScheduledValues(I),N},exponentialRampToValueAtTime(I,L){if(I===0)throw new RangeError;if(!Number.isFinite(L)||L<0)throw new RangeError;const M=x.context.currentTime;return B===null&&z.flush(M),Array.from(z).length===0&&(z.add(m(q,M)),k.setValueAtTime(q,M)),z.add(h(I,L)),k.exponentialRampToValueAtTime(I,L),N},linearRampToValueAtTime(I,L){const M=x.context.currentTime;return B===null&&z.flush(M),Array.from(z).length===0&&(z.add(m(q,M)),k.setValueAtTime(q,M)),z.add(d(I,L)),k.linearRampToValueAtTime(I,L),N},setTargetAtTime(I,L,M){return B===null&&z.flush(x.context.currentTime),z.add(f(I,L,M)),k.setTargetAtTime(I,L,M),N},setValueAtTime(I,L){return B===null&&z.flush(x.context.currentTime),z.add(m(I,L)),k.setValueAtTime(I,L),N},setValueCurveAtTime(I,L,M){const X=I instanceof Float32Array?I:new Float32Array(I);if(v!==null&&v.name==="webkitAudioContext"){const U=L+M,H=x.context.sampleRate,Q=Math.ceil(L*H),ne=Math.floor(U*H),se=ne-Q,de=new Float32Array(se);for(let ie=0;ie<se;ie+=1){const G=(X.length-1)/M*((Q+ie)/H-L),Z=Math.floor(G),Y=Math.ceil(G);de[ie]=Z===Y?X[Z]:(1-(G-Z))*X[Z]+(1-(Y-G))*X[Y]}B===null&&z.flush(x.context.currentTime),z.add(g(de,L,M)),k.setValueCurveAtTime(de,L,M);const le=ne/H;le<U&&y(N,de[de.length-1],le),y(N,X[X.length-1],U)}else B===null&&z.flush(x.context.currentTime),z.add(g(X,L,M)),k.setValueCurveAtTime(X,L,M);return N}};return n.set(N,k),e.set(N,x),o(N,B),N},sy=o=>({replay(e){for(const n of o)if(n.type==="exponentialRampToValue"){const{endTime:r,value:a}=n;e.exponentialRampToValueAtTime(a,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:a}=n;e.linearRampToValueAtTime(a,r)}else if(n.type==="setTarget"){const{startTime:r,target:a,timeConstant:u}=n;e.setTargetAtTime(a,r,u)}else if(n.type==="setValue"){const{startTime:r,value:a}=n;e.setValueAtTime(a,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:a,values:u}=n;e.setValueCurveAtTime(u,a,r)}else throw new Error("Can't apply an unknown automation.")}});class fm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,a)=>e.call(n,r,a,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const ry={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},iy=(o,e,n,r,a,u,h,d,f,m,g,v,y,x)=>class extends e{constructor(k,T,R){var q;const z=d(k),B=f(z),N=g({...ry,...R});y(N);const I=Qc.get(z),L=I==null?void 0:I.get(T),M=B||z.state!=="closed"?z:(q=h(z))!==null&&q!==void 0?q:z,X=a(M,B?null:k.baseLatency,m,T,L,N),U=B?r(T,N,L):null;super(k,!0,X,U);const H=[];X.parameters.forEach((ne,se)=>{const de=n(this,B,ne);H.push([se,de])}),this._nativeAudioWorkletNode=X,this._onprocessorerror=null,this._parameters=new fm(H),B&&o(z,this);const{activeInputs:Q}=u(this);v(X,Q)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(k){const T=typeof k=="function"?x(this,k):null;this._nativeAudioWorkletNode.onprocessorerror=T;const R=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=R!==null&&R===T?k:R}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function pl(o,e,n,r,a){if(typeof o.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),o.copyFromChannel(e[n],r,a);else{const u=o.getChannelData(r);if(e[n].byteLength===0)e[n]=u.slice(a,a+128);else{const h=new Float32Array(u.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(h)}}}const pm=(o,e,n,r,a)=>{typeof o.copyToChannel=="function"?e[n].byteLength!==0&&o.copyToChannel(e[n],r,a):e[n].byteLength!==0&&o.getChannelData(r).set(e[n],a)},ml=(o,e)=>{const n=[];for(let r=0;r<o;r+=1){const a=[],u=typeof e=="number"?e:e[r];for(let h=0;h<u;h+=1)a.push(new Float32Array(128));n.push(a)}return n},oy=(o,e)=>{const n=Pn(Hc,o),r=Je(e);return Pn(n,r)},ay=async(o,e,n,r,a,u,h)=>{const d=e===null?Math.ceil(o.context.length/128)*128:e.length,f=r.channelCount*r.numberOfInputs,m=a.reduce((T,R)=>T+R,0),g=m===0?null:n.createBuffer(m,d,n.sampleRate);if(u===void 0)throw new Error("Missing the processor constructor.");const v=zt(o),y=await oy(n,o),x=ml(r.numberOfInputs,r.channelCount),w=ml(r.numberOfOutputs,a),k=Array.from(o.parameters.keys()).reduce((T,R)=>({...T,[R]:new Float32Array(128)}),{});for(let T=0;T<d;T+=128){if(r.numberOfInputs>0&&e!==null)for(let R=0;R<r.numberOfInputs;R+=1)for(let q=0;q<r.channelCount;q+=1)pl(e,x[R],q,q,T);u.parameterDescriptors!==void 0&&e!==null&&u.parameterDescriptors.forEach(({name:R},q)=>{pl(e,k,R,f+q,T)});for(let R=0;R<r.numberOfInputs;R+=1)for(let q=0;q<a[R];q+=1)w[R][q].byteLength===0&&(w[R][q]=new Float32Array(128));try{const R=x.map((z,B)=>v.activeInputs[B].size===0?[]:z),q=h(T/n.sampleRate,n.sampleRate,()=>y.process(R,w,k));if(g!==null)for(let z=0,B=0;z<r.numberOfOutputs;z+=1){for(let N=0;N<a[z];N+=1)pm(g,w[z],N,B+N,T);B+=a[z]}if(!q)break}catch(R){o.dispatchEvent(new ErrorEvent("processorerror",{colno:R.colno,filename:R.filename,lineno:R.lineno,message:R.message}));break}}return g},ly=(o,e,n,r,a,u,h,d,f,m,g,v,y,x,w,k)=>(T,R,q)=>{const z=new WeakMap;let B=null;const N=async(I,L)=>{let M=g(I),X=null;const U=Pt(M,L),H=Array.isArray(R.outputChannelCount)?R.outputChannelCount:Array.from(R.outputChannelCount);if(v===null){const Q=H.reduce((le,ie)=>le+ie,0),ne=a(L,{channelCount:Math.max(1,Q),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Q)}),se=[];for(let le=0;le<I.numberOfOutputs;le+=1)se.push(r(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:H[le]}));const de=h(L,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1});de.connect=e.bind(null,se),de.disconnect=f.bind(null,se),X=[ne,se,de]}else U||(M=new v(L,T));if(z.set(L,X===null?M:X[2]),X!==null){if(B===null){if(q===void 0)throw new Error("Missing the processor constructor.");if(y===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ie=I.channelCount*I.numberOfInputs,G=q.parameterDescriptors===void 0?0:q.parameterDescriptors.length,Z=ie+G;B=ay(I,Z===0?null:await(async()=>{const E=new y(Z,Math.ceil(I.context.length/128)*128,L.sampleRate),F=[],re=[];for(let fe=0;fe<R.numberOfInputs;fe+=1)F.push(h(E,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1})),re.push(a(E,{channelCount:R.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:R.channelCount}));const ce=await Promise.all(Array.from(I.parameters.values()).map(async fe=>{const Ce=u(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:fe.value});return await x(E,fe,Ce.offset),Ce})),J=r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ie+G)});for(let fe=0;fe<R.numberOfInputs;fe+=1){F[fe].connect(re[fe]);for(let Ce=0;Ce<R.channelCount;Ce+=1)re[fe].connect(J,Ce,fe*R.channelCount+Ce)}for(const[fe,Ce]of ce.entries())Ce.connect(J,0,ie+fe),Ce.start(0);return J.connect(E.destination),await Promise.all(F.map(fe=>w(I,E,fe))),k(E)})(),L,R,H,q,m)}const Q=await B,ne=n(L,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[se,de,le]=X;Q!==null&&(ne.buffer=Q,ne.start(0)),ne.connect(se);for(let ie=0,G=0;ie<I.numberOfOutputs;ie+=1){const Z=de[ie];for(let Y=0;Y<H[ie];Y+=1)se.connect(Z,G+Y,Y);G+=H[ie]}return le}if(U)for(const[Q,ne]of I.parameters.entries())await o(L,ne,M.parameters.get(Q));else for(const[Q,ne]of I.parameters.entries())await x(L,ne,M.parameters.get(Q));return await w(I,L,M),M};return{render(I,L){d(L,I);const M=z.get(L);return M!==void 0?Promise.resolve(M):N(I,L)}}},uy=(o,e,n,r,a,u,h,d,f,m,g,v,y,x,w,k,T,R,q,z)=>class extends w{constructor(N,I){super(N,I),this._nativeContext=N,this._audioWorklet=o===void 0?void 0:{addModule:(L,M)=>o(this,L,M)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new a(this)}createBuffer(N,I,L){return new n({length:I,numberOfChannels:N,sampleRate:L})}createBufferSource(){return new r(this)}createChannelMerger(N=6){return new u(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new h(this,{numberOfOutputs:N})}createConstantSource(){return new d(this)}createConvolver(){return new f(this)}createDelay(N=1){return new g(this,{maxDelayTime:N})}createDynamicsCompressor(){return new v(this)}createGain(){return new y(this)}createIIRFilter(N,I){return new x(this,{feedback:I,feedforward:N})}createOscillator(){return new k(this)}createPanner(){return new T(this)}createPeriodicWave(N,I,L={disableNormalization:!1}){return new R(this,{...L,imag:I,real:N})}createStereoPanner(){return new q(this)}createWaveShaper(){return new z(this)}decodeAudioData(N,I,L){return m(this._nativeContext,N).then(M=>(typeof I=="function"&&I(M),M),M=>{throw typeof L=="function"&&L(M),M})}},cy={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},hy=(o,e,n,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),y={...cy,...g},x=a(v,y),w=h(v),k=w?n():null;super(m,!1,x,k),this._Q=e(this,w,x.Q,Vt,Kt),this._detune=e(this,w,x.detune,1200*Math.log2(Vt),-1200*Math.log2(Vt)),this._frequency=e(this,w,x.frequency,m.sampleRate/2,0),this._gain=e(this,w,x.gain,40*Math.log10(Vt),Kt),this._nativeBiquadFilterNode=x,d(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,g,v){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,g,v)}catch(y){throw y.code===11?r():y}if(m.length!==g.length||g.length!==v.length)throw r()}},dy=(o,e,n,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=n(d);const g=Pt(m,f);if(!g){const v={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=e(f,v)}return u.set(f,m),g?(await o(f,d.Q,m.Q),await o(f,d.detune,m.detune),await o(f,d.frequency,m.frequency),await o(f,d.gain,m.gain)):(await r(f,d.Q,m.Q),await r(f,d.detune,m.detune),await r(f,d.frequency,m.frequency),await r(f,d.gain,m.gain)),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},fy=(o,e)=>(n,r)=>{const a=e.get(n);if(a!==void 0)return a;const u=o.get(n);if(u!==void 0)return u;try{const h=r();return h instanceof Promise?(o.set(n,h),h.catch(()=>!1).then(d=>(o.delete(n),e.set(n,d),d))):(e.set(n,h),h)}catch{return e.set(n,!1),!1}},py={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},my=(o,e,n,r,a)=>class extends o{constructor(h,d){const f=r(h),m={...py,...d},g=n(f,m),v=a(f)?e():null;super(h,!1,g,v)}},gy=(o,e,n)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Pt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfInputs:d.numberOfInputs};d=o(h,m)}return r.set(h,d),await n(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},vy={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},_y=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g=u({...vy,...f}),v=n(m,g),y=a(m)?e():null;super(d,!1,v,y)}},yy=(o,e,n)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Pt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,numberOfOutputs:d.numberOfOutputs};d=o(h,m)}return r.set(h,d),await n(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},wy=o=>(e,n,r)=>o(n,e,r),xy=o=>(e,n,r=0,a=0)=>{const u=e[r];if(u===void 0)throw o();return fl(n)?u.connect(n,0,a):u.connect(n,0)},ky=o=>(e,n)=>{const r=o(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=e.createBuffer(1,2,44100);return r.buffer=a,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},Ty={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Cy=(o,e,n,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...Ty,...m},y=r(g,v),x=u(g),w=x?n():null;super(f,!1,y,w),this._constantSourceNodeRenderer=w,this._nativeConstantSourceNode=y,this._offset=e(this,x,y.offset,Vt,Kt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeConstantSourceNode.onended=m;const g=this._nativeConstantSourceNode.onended;this._onended=g!==null&&g===m?f:g}start(f=0){if(this._nativeConstantSourceNode.start(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=f),this.context.state!=="closed"){mi(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),ms(this)&&To(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(f=0){this._nativeConstantSourceNode.stop(f),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=f)}},Sy=(o,e,n,r,a)=>()=>{const u=new WeakMap;let h=null,d=null;const f=async(m,g)=>{let v=n(m);const y=Pt(v,g);if(!y){const x={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,offset:v.offset.value};v=e(g,x),h!==null&&v.start(h),d!==null&&v.stop(d)}return u.set(g,v),y?await o(g,m.offset,v.offset):await r(g,m.offset,v.offset),await a(m,g,v),v};return{set start(m){h=m},set stop(m){d=m},render(m,g){const v=u.get(g);return v!==void 0?Promise.resolve(v):f(m,g)}}},by=o=>e=>(o[0]=e,o[0]),Ny={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Ey=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g={...Ny,...f},v=n(m,g),x=a(m)?e():null;super(d,!1,v,x),this._isBufferNullified=!1,this._nativeConvolverNode=v,g.buffer!==null&&u(this,g.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(d){if(this._nativeConvolverNode.buffer=d,d===null&&this._nativeConvolverNode.buffer!==null){const f=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=f.createBuffer(1,1,f.sampleRate),this._isBufferNullified=!0,u(this,0)}else this._isBufferNullified=!1,u(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(d){this._nativeConvolverNode.normalize=d}},Ry=(o,e,n)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Pt(d,h)){const m={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,disableNormalization:!d.normalize};d=o(h,m)}return r.set(h,d),yi(d)?await n(u,h,d.inputs[0]):await n(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},Ay=(o,e)=>(n,r,a)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,a)}catch(u){throw u.name==="SyntaxError"?o():u}},Oy=()=>new DOMException("","DataCloneError"),Fp=o=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const a=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>a();try{e.postMessage(o,[o])}catch{}finally{a()}})},My=(o,e,n,r,a,u,h,d,f,m,g)=>(v,y)=>{const x=h(v)?v:u(v);if(a.has(y)){const w=n();return Promise.reject(w)}try{a.add(y)}catch{}return e(f,()=>f(x))?x.decodeAudioData(y).then(w=>(Fp(y).catch(()=>{}),e(d,()=>d(w))||g(w),o.add(w),w)):new Promise((w,k)=>{const T=async()=>{try{await Fp(y)}catch{}},R=q=>{k(q),T()};try{x.decodeAudioData(y,q=>{typeof q.copyFromChannel!="function"&&(m(q),nh(q)),o.add(q),T().then(()=>w(q))},q=>{R(q===null?r():q)})}catch(q){R(q)}})},Dy=(o,e,n,r,a,u,h,d)=>(f,m)=>{const g=e.get(f);if(g===void 0)throw new Error("Missing the expected cycle count.");const v=u(f.context),y=d(v);if(g===m){if(e.delete(f),!y&&h(f)){const x=r(f),{outputs:w}=n(f);for(const k of w)if(So(k)){const T=r(k[0]);o(x,T,k[1],k[2])}else{const T=a(k[0]);x.connect(T,k[1])}}}else e.set(f,g-m)},Iy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Py=(o,e,n,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...Iy,...m},y=r(g,v),x=u(g),w=x?n(v.maxDelayTime):null;super(f,!1,y,w),this._delayTime=e(this,x,y.delayTime),h(this,v.maxDelayTime)}get delayTime(){return this._delayTime}},Fy=(o,e,n,r,a)=>u=>{const h=new WeakMap,d=async(f,m)=>{let g=n(f);const v=Pt(g,m);if(!v){const y={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,delayTime:g.delayTime.value,maxDelayTime:u};g=e(m,y)}return h.set(m,g),v?await o(m,f.delayTime,g.delayTime):await r(m,f.delayTime,g.delayTime),await a(f,m,g),g};return{render(f,m){const g=h.get(m);return g!==void 0?Promise.resolve(g):d(f,m)}}},Ly=o=>(e,n,r,a)=>o(e[a],u=>u[0]===n&&u[1]===r),jy=o=>(e,n)=>{o(e).delete(n)},Vy=o=>"delayTime"in o,zy=(o,e,n)=>function r(a,u){const h=cl(u)?u:n(o,u);if(Vy(h))return[];if(a[0]===h)return[a];if(a.includes(h))return[];const{outputs:d}=e(h);return Array.from(d).map(f=>r([...a,h],f[0])).reduce((f,m)=>f.concat(m),[])},nl=(o,e,n)=>{const r=e[n];if(r===void 0)throw o();return r},qy=o=>(e,n=void 0,r=void 0,a=0)=>n===void 0?e.forEach(u=>u.disconnect()):typeof n=="number"?nl(o,e,n).disconnect():fl(n)?r===void 0?e.forEach(u=>u.disconnect(n)):a===void 0?nl(o,e,r).disconnect(n,0):nl(o,e,r).disconnect(n,0,a):r===void 0?e.forEach(u=>u.disconnect(n)):nl(o,e,r).disconnect(n,0),Wy={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},By=(o,e,n,r,a,u,h,d)=>class extends o{constructor(m,g){const v=u(m),y={...Wy,...g},x=r(v,y),w=h(v),k=w?n():null;super(m,!1,x,k),this._attack=e(this,w,x.attack),this._knee=e(this,w,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=e(this,w,x.ratio),this._release=e(this,w,x.release),this._threshold=e(this,w,x.threshold),d(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const g=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=g,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const g=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=g,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},Uy=(o,e,n,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=n(d);const g=Pt(m,f);if(!g){const v={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=e(f,v)}return u.set(f,m),g?(await o(f,d.attack,m.attack),await o(f,d.knee,m.knee),await o(f,d.ratio,m.ratio),await o(f,d.release,m.release),await o(f,d.threshold,m.threshold)):(await r(f,d.attack,m.attack),await r(f,d.knee,m.knee),await r(f,d.ratio,m.ratio),await r(f,d.release,m.release),await r(f,d.threshold,m.threshold)),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},$y=()=>new DOMException("","EncodingError"),Qy=o=>e=>new Promise((n,r)=>{if(o===null){r(new SyntaxError);return}const a=o.document.head;if(a===null)r(new SyntaxError);else{const u=o.document.createElement("script"),h=new Blob([e],{type:"application/javascript"}),d=URL.createObjectURL(h),f=o.onerror,m=()=>{o.onerror=f,URL.revokeObjectURL(d)};o.onerror=(g,v,y,x,w)=>{if(v===d||v===o.location.href&&y===1&&x===1)return m(),r(w),!1;if(f!==null)return f(g,v,y,x,w)},u.onerror=()=>{m(),r(new SyntaxError)},u.onload=()=>{m(),n()},u.src=d,u.type="module",a.appendChild(u)}}),Hy=o=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,a){if(r!==null){let u=this._listeners.get(r);u===void 0&&(u=o(this,r),typeof r=="function"&&this._listeners.set(r,u)),this._nativeEventTarget.addEventListener(n,u,a)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,a){const u=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,u===void 0?null:u,a)}},Gy=o=>(e,n,r)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},Yy=o=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw o()},Xy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Zy=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...Xy,...f},v=r(m,g),y=u(m),x=y?n():null;super(d,!1,v,x),this._gain=e(this,y,v.gain,Vt,Kt)}get gain(){return this._gain}},Ky=(o,e,n,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=n(d);const g=Pt(m,f);if(!g){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=e(f,v)}return u.set(f,m),g?await o(f,d.gain,m.gain):await r(f,d.gain,m.gain),await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},Jy=(o,e)=>n=>e(o,n),e0=o=>e=>{const n=o(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},t0=o=>e=>{var n;return(n=o.get(e))!==null&&n!==void 0?n:0},n0=o=>e=>{const n=o(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},s0=o=>e=>o.get(e),Tt=()=>new DOMException("","InvalidStateError"),r0=o=>e=>{const n=o.get(e);if(n===void 0)throw Tt();return n},i0=(o,e)=>n=>{let r=o.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),o.set(n,r),r},o0=o=>e=>{const n=o.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},El=()=>new DOMException("","InvalidAccessError"),a0=o=>{o.getFrequencyResponse=(e=>(n,r,a)=>{if(n.length!==r.length||r.length!==a.length)throw El();return e.call(o,n,r,a)})(o.getFrequencyResponse)},l0={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},u0=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=r(d),g=a(m),v={...l0,...f},y=e(m,g?null:d.baseLatency,v),x=g?n(v.feedback,v.feedforward):null;super(d,!1,y,x),a0(y),this._nativeIIRFilterNode=y,u(this,1)}getFrequencyResponse(d,f,m){return this._nativeIIRFilterNode.getFrequencyResponse(d,f,m)}},mm=(o,e,n,r,a,u,h,d,f,m,g)=>{const v=m.length;let y=d;for(let x=0;x<v;x+=1){let w=n[0]*m[x];for(let k=1;k<a;k+=1){const T=y-k&f-1;w+=n[k]*u[T],w-=o[k]*h[T]}for(let k=a;k<r;k+=1)w+=n[k]*u[y-k&f-1];for(let k=a;k<e;k+=1)w-=o[k]*h[y-k&f-1];u[y]=m[x],h[y]=w,y=y+1&f-1,g[x]=w}return y},c0=(o,e,n,r)=>{const a=n instanceof Float64Array?n:new Float64Array(n),u=r instanceof Float64Array?r:new Float64Array(r),h=a.length,d=u.length,f=Math.min(h,d);if(a[0]!==1){for(let w=0;w<h;w+=1)u[w]/=a[0];for(let w=1;w<d;w+=1)a[w]/=a[0]}const m=32,g=new Float32Array(m),v=new Float32Array(m),y=e.createBuffer(o.numberOfChannels,o.length,o.sampleRate),x=o.numberOfChannels;for(let w=0;w<x;w+=1){const k=o.getChannelData(w),T=y.getChannelData(w);g.fill(0),v.fill(0),mm(a,h,u,d,f,g,v,0,m,k,T)}return y},h0=(o,e,n,r,a)=>(u,h)=>{const d=new WeakMap;let f=null;const m=async(g,v)=>{let y=null,x=e(g);const w=Pt(x,v);if(v.createIIRFilter===void 0?y=o(v,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):w||(x=v.createIIRFilter(h,u)),d.set(v,y===null?x:y),y!==null){if(f===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const T=new n(g.context.destination.channelCount,g.context.length,v.sampleRate);f=(async()=>{await r(g,T,T.destination);const R=await a(T);return c0(R,v,u,h)})()}const k=await f;return y.buffer=k,y.start(0),y}return await r(g,v,x),x};return{render(g,v){const y=d.get(v);return y!==void 0?Promise.resolve(y):m(g,v)}}},d0=(o,e,n,r,a,u)=>h=>(d,f)=>{const m=o.get(d);if(m===void 0){if(!h&&u(d)){const g=r(d),{outputs:v}=n(d);for(const y of v)if(So(y)){const x=r(y[0]);e(g,x,y[1],y[2])}else{const x=a(y[0]);g.disconnect(x,y[1])}}o.set(d,f)}else o.set(d,m+f)},f0=(o,e)=>n=>{const r=o.get(n);return e(r)||e(n)},p0=(o,e)=>n=>o.has(n)||e(n),m0=(o,e)=>n=>o.has(n)||e(n),g0=(o,e)=>n=>{const r=o.get(n);return e(r)||e(n)},v0=o=>e=>o!==null&&e instanceof o,_0=o=>e=>o!==null&&typeof o.AudioNode=="function"&&e instanceof o.AudioNode,y0=o=>e=>o!==null&&typeof o.AudioParam=="function"&&e instanceof o.AudioParam,w0=(o,e)=>n=>o(n)||e(n),x0=o=>e=>o!==null&&e instanceof o,k0=o=>o!==null&&o.isSecureContext,T0=(o,e,n,r)=>class extends o{constructor(u,h){const d=n(u),f=e(d,h);if(r(d))throw TypeError();super(u,!0,f,null),this._nativeMediaElementAudioSourceNode=f}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},C0={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},S0=(o,e,n,r)=>class extends o{constructor(u,h){const d=n(u);if(r(d))throw new TypeError;const f={...C0,...h},m=e(d,f);super(u,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},b0=(o,e,n,r)=>class extends o{constructor(u,h){const d=n(u),f=e(d,h);if(r(d))throw new TypeError;super(u,!0,f,null),this._nativeMediaStreamAudioSourceNode=f}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},N0=(o,e,n)=>class extends o{constructor(a,u){const h=n(a),d=e(h,u);super(a,!0,d,null)}},E0=(o,e,n,r,a,u)=>class extends n{constructor(d,f){super(d),this._nativeContext=d,bl.set(this,d),r(d)&&a.set(d,new Set),this._destination=new o(this,f),this._listener=e(this,d),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(d){const f=typeof d=="function"?u(this,d):null;this._nativeContext.onstatechange=f;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===f?d:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},go=o=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=o.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},R0=(o,e)=>(n,r,a)=>{const u=new Set;return n.connect=(h=>(d,f=0,m=0)=>{const g=u.size===0;if(e(d))return h.call(n,d,f,m),o(u,[d,f,m],v=>v[0]===d&&v[1]===f&&v[2]===m,!0),g&&r(),d;h.call(n,d,f),o(u,[d,f],v=>v[0]===d&&v[1]===f,!0),g&&r()})(n.connect),n.disconnect=(h=>(d,f,m)=>{const g=u.size>0;if(d===void 0)h.apply(n),u.clear();else if(typeof d=="number"){h.call(n,d);for(const y of u)y[1]===d&&u.delete(y)}else{e(d)?h.call(n,d,f,m):h.call(n,d,f);for(const y of u)y[0]===d&&(f===void 0||y[1]===f)&&(m===void 0||y[2]===m)&&u.delete(y)}const v=u.size===0;g&&v&&a()})(n.disconnect),n},st=(o,e,n)=>{const r=e[n];r!==void 0&&r!==o[n]&&(o[n]=r)},yt=(o,e)=>{st(o,e,"channelCount"),st(o,e,"channelCountMode"),st(o,e,"channelInterpretation")},Lp=o=>typeof o.getFloatTimeDomainData=="function",A0=o=>{o.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);o.getByteTimeDomainData(n);const r=Math.max(n.length,o.fftSize);for(let a=0;a<r;a+=1)e[a]=(n[a]-128)*.0078125;return e}},O0=(o,e)=>(n,r)=>{const a=n.createAnalyser();if(yt(a,r),!(r.maxDecibels>r.minDecibels))throw e();return st(a,r,"fftSize"),st(a,r,"maxDecibels"),st(a,r,"minDecibels"),st(a,r,"smoothingTimeConstant"),o(Lp,()=>Lp(a))||A0(a),a},M0=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,ct=(o,e,n)=>{const r=e[n];r!==void 0&&r!==o[n].value&&(o[n].value=r)},D0=o=>{o.start=(e=>{let n=!1;return(r=0,a=0,u)=>{if(n)throw Tt();e.call(o,r,a,u),n=!0}})(o.start)},ih=o=>{o.start=(e=>(n=0,r=0,a)=>{if(typeof a=="number"&&a<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(o,n,r,a)})(o.start)},oh=o=>{o.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(o,n)})(o.stop)},I0=(o,e,n,r,a,u,h,d,f,m,g)=>(v,y)=>{const x=v.createBufferSource();return yt(x,y),ct(x,y,"playbackRate"),st(x,y,"buffer"),st(x,y,"loop"),st(x,y,"loopEnd"),st(x,y,"loopStart"),e(n,()=>n(v))||D0(x),e(r,()=>r(v))||f(x),e(a,()=>a(v))||m(x,v),e(u,()=>u(v))||ih(x),e(h,()=>h(v))||g(x,v),e(d,()=>d(v))||oh(x),o(v,x),x},P0=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,F0=(o,e)=>(n,r,a)=>{const u=n.destination;if(u.channelCount!==r)try{u.channelCount=r}catch{}a&&u.channelCountMode!=="explicit"&&(u.channelCountMode="explicit"),u.maxChannelCount===0&&Object.defineProperty(u,"maxChannelCount",{value:r});const h=o(n,{channelCount:r,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:1});return e(h,"channelCount",d=>()=>d.call(h),d=>f=>{d.call(h,f);try{u.channelCount=f}catch(m){if(f>u.maxChannelCount)throw m}}),e(h,"channelCountMode",d=>()=>d.call(h),d=>f=>{d.call(h,f),u.channelCountMode=f}),e(h,"channelInterpretation",d=>()=>d.call(h),d=>f=>{d.call(h,f),u.channelInterpretation=f}),Object.defineProperty(h,"maxChannelCount",{get:()=>u.maxChannelCount}),h.connect(u),h},L0=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,j0=o=>{const{port1:e}=new MessageChannel;try{e.postMessage(o)}finally{e.close()}},V0=(o,e,n,r,a)=>(u,h,d,f,m,g)=>{if(d!==null)try{const v=new d(u,f,g),y=new Map;let x=null;if(Object.defineProperties(v,{channelCount:{get:()=>g.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>x,set:w=>{typeof x=="function"&&v.removeEventListener("processorerror",x),x=typeof w=="function"?w:null,typeof x=="function"&&v.addEventListener("processorerror",x)}}}),v.addEventListener=(w=>(...k)=>{if(k[0]==="processorerror"){const T=typeof k[1]=="function"?k[1]:typeof k[1]=="object"&&k[1]!==null&&typeof k[1].handleEvent=="function"?k[1].handleEvent:null;if(T!==null){const R=y.get(k[1]);R!==void 0?k[1]=R:(k[1]=q=>{q.type==="error"?(Object.defineProperties(q,{type:{value:"processorerror"}}),T(q)):T(new ErrorEvent(k[0],{...q}))},y.set(T,k[1]))}}return w.call(v,"error",k[1],k[2]),w.call(v,...k)})(v.addEventListener),v.removeEventListener=(w=>(...k)=>{if(k[0]==="processorerror"){const T=y.get(k[1]);T!==void 0&&(y.delete(k[1]),k[1]=T)}return w.call(v,"error",k[1],k[2]),w.call(v,k[0],k[1],k[2])})(v.removeEventListener),g.numberOfOutputs!==0){const w=n(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return v.connect(w).connect(u.destination),a(v,()=>w.disconnect(),()=>w.connect(u.destination))}return v}catch(v){throw v.code===11?r():v}if(m===void 0)throw r();return j0(g),e(u,h,m,g)},gm=(o,e)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*e))))),z0=o=>new Promise((e,n)=>{const{port1:r,port2:a}=new MessageChannel;r.onmessage=({data:u})=>{r.close(),a.close(),e(u)},r.onmessageerror=({data:u})=>{r.close(),a.close(),n(u)},a.postMessage(o)}),q0=async(o,e)=>{const n=await z0(e);return new o(n)},W0=(o,e,n,r)=>{let a=Hc.get(o);a===void 0&&(a=new WeakMap,Hc.set(o,a));const u=q0(n,r);return a.set(e,u),u},B0=(o,e,n,r,a,u,h,d,f,m,g,v,y)=>(x,w,k,T)=>{if(T.numberOfInputs===0&&T.numberOfOutputs===0)throw f();const R=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(R.some(ue=>ue<1))throw f();if(R.length!==T.numberOfOutputs)throw e();if(T.channelCountMode!=="explicit")throw f();const q=T.channelCount*T.numberOfInputs,z=R.reduce((ue,we)=>ue+we,0),B=k.parameterDescriptors===void 0?0:k.parameterDescriptors.length;if(q+B>6||z>6)throw f();const N=new MessageChannel,I=[],L=[];for(let ue=0;ue<T.numberOfInputs;ue+=1)I.push(h(x,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),L.push(a(x,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const M=[];if(k.parameterDescriptors!==void 0)for(const{defaultValue:ue,maxValue:we,minValue:Be,name:Ve}of k.parameterDescriptors){const be=u(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:T.parameterData[Ve]!==void 0?T.parameterData[Ve]:ue===void 0?0:ue});Object.defineProperties(be.offset,{defaultValue:{get:()=>ue===void 0?0:ue},maxValue:{get:()=>we===void 0?Vt:we},minValue:{get:()=>Be===void 0?Kt:Be}}),M.push(be)}const X=r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+B)}),U=gm(w,x.sampleRate),H=d(x,U,q+B,Math.max(1,z)),Q=a(x,{channelCount:Math.max(1,z),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,z)}),ne=[];for(let ue=0;ue<T.numberOfOutputs;ue+=1)ne.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[ue]}));for(let ue=0;ue<T.numberOfInputs;ue+=1){I[ue].connect(L[ue]);for(let we=0;we<T.channelCount;we+=1)L[ue].connect(X,we,ue*T.channelCount+we)}const se=new fm(k.parameterDescriptors===void 0?[]:k.parameterDescriptors.map(({name:ue},we)=>{const Be=M[we];return Be.connect(X,0,q+we),Be.start(0),[ue,Be.offset]}));X.connect(H);let de=T.channelInterpretation,le=null;const ie=T.numberOfOutputs===0?[H]:ne,G={get bufferSize(){return U},get channelCount(){return T.channelCount},set channelCount(ue){throw n()},get channelCountMode(){return T.channelCountMode},set channelCountMode(ue){throw n()},get channelInterpretation(){return de},set channelInterpretation(ue){for(const we of I)we.channelInterpretation=ue;de=ue},get context(){return H.context},get inputs(){return I},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get onprocessorerror(){return le},set onprocessorerror(ue){typeof le=="function"&&G.removeEventListener("processorerror",le),le=typeof ue=="function"?ue:null,typeof le=="function"&&G.addEventListener("processorerror",le)},get parameters(){return se},get port(){return N.port2},addEventListener(...ue){return H.addEventListener(ue[0],ue[1],ue[2])},connect:o.bind(null,ie),disconnect:m.bind(null,ie),dispatchEvent(...ue){return H.dispatchEvent(ue[0])},removeEventListener(...ue){return H.removeEventListener(ue[0],ue[1],ue[2])}},Z=new Map;N.port1.addEventListener=(ue=>(...we)=>{if(we[0]==="message"){const Be=typeof we[1]=="function"?we[1]:typeof we[1]=="object"&&we[1]!==null&&typeof we[1].handleEvent=="function"?we[1].handleEvent:null;if(Be!==null){const Ve=Z.get(we[1]);Ve!==void 0?we[1]=Ve:(we[1]=be=>{g(x.currentTime,x.sampleRate,()=>Be(be))},Z.set(Be,we[1]))}}return ue.call(N.port1,we[0],we[1],we[2])})(N.port1.addEventListener),N.port1.removeEventListener=(ue=>(...we)=>{if(we[0]==="message"){const Be=Z.get(we[1]);Be!==void 0&&(Z.delete(we[1]),we[1]=Be)}return ue.call(N.port1,we[0],we[1],we[2])})(N.port1.removeEventListener);let Y=null;Object.defineProperty(N.port1,"onmessage",{get:()=>Y,set:ue=>{typeof Y=="function"&&N.port1.removeEventListener("message",Y),Y=typeof ue=="function"?ue:null,typeof Y=="function"&&(N.port1.addEventListener("message",Y),N.port1.start())}}),k.prototype.port=N.port1;let E=null;W0(x,G,k,T).then(ue=>E=ue);const re=ml(T.numberOfInputs,T.channelCount),ce=ml(T.numberOfOutputs,R),J=k.parameterDescriptors===void 0?[]:k.parameterDescriptors.reduce((ue,{name:we})=>({...ue,[we]:new Float32Array(128)}),{});let fe=!0;const Ce=()=>{T.numberOfOutputs>0&&H.disconnect(Q);for(let ue=0,we=0;ue<T.numberOfOutputs;ue+=1){const Be=ne[ue];for(let Ve=0;Ve<R[ue];Ve+=1)Q.disconnect(Be,we+Ve,Ve);we+=R[ue]}},ae=new Map;H.onaudioprocess=({inputBuffer:ue,outputBuffer:we})=>{if(E!==null){const Be=v(G);for(let Ve=0;Ve<U;Ve+=128){for(let be=0;be<T.numberOfInputs;be+=1)for(let Me=0;Me<T.channelCount;Me+=1)pl(ue,re[be],Me,Me,Ve);k.parameterDescriptors!==void 0&&k.parameterDescriptors.forEach(({name:be},Me)=>{pl(ue,J,be,q+Me,Ve)});for(let be=0;be<T.numberOfInputs;be+=1)for(let Me=0;Me<R[be];Me+=1)ce[be][Me].byteLength===0&&(ce[be][Me]=new Float32Array(128));try{const be=re.map((et,St)=>{if(Be[St].size>0)return ae.set(St,U/128),et;const Sn=ae.get(St);return Sn===void 0?[]:(et.every(Jn=>Jn.every(es=>es===0))&&(Sn===1?ae.delete(St):ae.set(St,Sn-1)),et)});fe=g(x.currentTime+Ve/x.sampleRate,x.sampleRate,()=>E.process(be,ce,J));for(let et=0,St=0;et<T.numberOfOutputs;et+=1){for(let tn=0;tn<R[et];tn+=1)pm(we,ce[et],tn,St+tn,Ve);St+=R[et]}}catch(be){fe=!1,G.dispatchEvent(new ErrorEvent("processorerror",{colno:be.colno,filename:be.filename,lineno:be.lineno,message:be.message}))}if(!fe){for(let be=0;be<T.numberOfInputs;be+=1){I[be].disconnect(L[be]);for(let Me=0;Me<T.channelCount;Me+=1)L[Ve].disconnect(X,Me,be*T.channelCount+Me)}if(k.parameterDescriptors!==void 0){const be=k.parameterDescriptors.length;for(let Me=0;Me<be;Me+=1){const et=M[Me];et.disconnect(X,0,q+Me),et.stop()}}X.disconnect(H),H.onaudioprocess=null,Ae?Ce():Ut();break}}}};let Ae=!1;const He=h(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),At=()=>H.connect(He).connect(x.destination),Ut=()=>{H.disconnect(He),He.disconnect()},Cn=()=>{if(fe){Ut(),T.numberOfOutputs>0&&H.connect(Q);for(let ue=0,we=0;ue<T.numberOfOutputs;ue+=1){const Be=ne[ue];for(let Ve=0;Ve<R[ue];Ve+=1)Q.connect(Be,we+Ve,Ve);we+=R[ue]}}Ae=!0},qn=()=>{fe&&(At(),Ce()),Ae=!1};return At(),y(G,Cn,qn)},vm=(o,e)=>{const n=o.createBiquadFilter();return yt(n,e),ct(n,e,"Q"),ct(n,e,"detune"),ct(n,e,"frequency"),ct(n,e,"gain"),st(n,e,"type"),n},U0=(o,e)=>(n,r)=>{const a=n.createChannelMerger(r.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&e(n,a),yt(a,r),a},$0=o=>{const e=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Tt()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Tt()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Tt()}})},bo=(o,e)=>{const n=o.createChannelSplitter(e.numberOfOutputs);return yt(n,e),$0(n),n},Q0=(o,e,n,r,a)=>(u,h)=>{if(u.createConstantSource===void 0)return n(u,h);const d=u.createConstantSource();return yt(d,h),ct(d,h,"offset"),e(r,()=>r(u))||ih(d),e(a,()=>a(u))||oh(d),o(u,d),d},wi=(o,e)=>(o.connect=e.connect.bind(e),o.disconnect=e.disconnect.bind(e),o),H0=(o,e,n,r)=>(a,{offset:u,...h})=>{const d=a.createBuffer(1,2,44100),f=e(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=n(a,{...h,gain:u}),g=d.getChannelData(0);g[0]=1,g[1]=1,f.buffer=d,f.loop=!0;const v={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(w){m.channelCount=w},get channelCountMode(){return m.channelCountMode},set channelCountMode(w){m.channelCountMode=w},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(w){m.channelInterpretation=w},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return f.onended},set onended(w){f.onended=w},addEventListener(...w){return f.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return f.dispatchEvent(w[0])},removeEventListener(...w){return f.removeEventListener(w[0],w[1],w[2])},start(w=0){f.start.call(f,w)},stop(w=0){f.stop.call(f,w)}},y=()=>f.connect(m),x=()=>f.disconnect(m);return o(a,f),r(wi(v,m),y,x)},G0=(o,e)=>(n,r)=>{const a=n.createConvolver();if(yt(a,r),r.disableNormalization===a.normalize&&(a.normalize=!r.disableNormalization),st(a,r,"buffer"),r.channelCount>2||(e(a,"channelCount",u=>()=>u.call(a),u=>h=>{if(h>2)throw o();return u.call(a,h)}),r.channelCountMode==="max"))throw o();return e(a,"channelCountMode",u=>()=>u.call(a),u=>h=>{if(h==="max")throw o();return u.call(a,h)}),a},_m=(o,e)=>{const n=o.createDelay(e.maxDelayTime);return yt(n,e),ct(n,e,"delayTime"),n},Y0=o=>(e,n)=>{const r=e.createDynamicsCompressor();if(yt(r,n),n.channelCount>2||n.channelCountMode==="max")throw o();return ct(r,n,"attack"),ct(r,n,"knee"),ct(r,n,"ratio"),ct(r,n,"release"),ct(r,n,"threshold"),r},en=(o,e)=>{const n=o.createGain();return yt(n,e),ct(n,e,"gain"),n},X0=o=>(e,n,r)=>{if(e.createIIRFilter===void 0)return o(e,n,r);const a=e.createIIRFilter(r.feedforward,r.feedback);return yt(a,r),a};function Z0(o,e){const n=e[0]*e[0]+e[1]*e[1];return[(o[0]*e[0]+o[1]*e[1])/n,(o[1]*e[0]-o[0]*e[1])/n]}function K0(o,e){return[o[0]*e[0]-o[1]*e[1],o[0]*e[1]+o[1]*e[0]]}function jp(o,e){let n=[0,0];for(let r=o.length-1;r>=0;r-=1)n=K0(n,e),n[0]+=o[r];return n}const J0=(o,e,n,r)=>(a,u,{channelCount:h,channelCountMode:d,channelInterpretation:f,feedback:m,feedforward:g})=>{const v=gm(u,a.sampleRate),y=m instanceof Float64Array?m:new Float64Array(m),x=g instanceof Float64Array?g:new Float64Array(g),w=y.length,k=x.length,T=Math.min(w,k);if(w===0||w>20)throw r();if(y[0]===0)throw e();if(k===0||k>20)throw r();if(x[0]===0)throw e();if(y[0]!==1){for(let M=0;M<k;M+=1)x[M]/=y[0];for(let M=1;M<w;M+=1)y[M]/=y[0]}const R=n(a,v,h,h);R.channelCount=h,R.channelCountMode=d,R.channelInterpretation=f;const q=32,z=[],B=[],N=[];for(let M=0;M<h;M+=1){z.push(0);const X=new Float32Array(q),U=new Float32Array(q);X.fill(0),U.fill(0),B.push(X),N.push(U)}R.onaudioprocess=M=>{const X=M.inputBuffer,U=M.outputBuffer,H=X.numberOfChannels;for(let Q=0;Q<H;Q+=1){const ne=X.getChannelData(Q),se=U.getChannelData(Q);z[Q]=mm(y,w,x,k,T,B[Q],N[Q],z[Q],q,ne,se)}};const I=a.sampleRate/2;return wi({get bufferSize(){return v},get channelCount(){return R.channelCount},set channelCount(M){R.channelCount=M},get channelCountMode(){return R.channelCountMode},set channelCountMode(M){R.channelCountMode=M},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(M){R.channelInterpretation=M},get context(){return R.context},get inputs(){return[R]},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},addEventListener(...M){return R.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return R.dispatchEvent(M[0])},getFrequencyResponse(M,X,U){if(M.length!==X.length||X.length!==U.length)throw o();const H=M.length;for(let Q=0;Q<H;Q+=1){const ne=-Math.PI*(M[Q]/I),se=[Math.cos(ne),Math.sin(ne)],de=jp(x,se),le=jp(y,se),ie=Z0(de,le);X[Q]=Math.sqrt(ie[0]*ie[0]+ie[1]*ie[1]),U[Q]=Math.atan2(ie[1],ie[0])}},removeEventListener(...M){return R.removeEventListener(M[0],M[1],M[2])}},R)},ew=(o,e)=>o.createMediaElementSource(e.mediaElement),tw=(o,e)=>{const n=o.createMediaStreamDestination();return yt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},nw=(o,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((u,h)=>u.id<h.id?-1:u.id>h.id?1:0);const r=n.slice(0,1),a=o.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(a,"mediaStream",{value:e}),a},sw=(o,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const a=new MediaStream([r]),u=n.createMediaStreamSource(a);if(r.kind!=="audio")throw o();if(e(n))throw new TypeError;return u},rw=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,iw=(o,e,n,r,a,u)=>(h,d)=>{const f=h.createOscillator();return yt(f,d),ct(f,d,"detune"),ct(f,d,"frequency"),d.periodicWave!==void 0?f.setPeriodicWave(d.periodicWave):st(f,d,"type"),e(n,()=>n(h))||ih(f),e(r,()=>r(h))||u(f,h),e(a,()=>a(h))||oh(f),o(h,f),f},ow=o=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?o(e,n):(yt(r,n),ct(r,n,"orientationX"),ct(r,n,"orientationY"),ct(r,n,"orientationZ"),ct(r,n,"positionX"),ct(r,n,"positionY"),ct(r,n,"positionZ"),st(r,n,"coneInnerAngle"),st(r,n,"coneOuterAngle"),st(r,n,"coneOuterGain"),st(r,n,"distanceModel"),st(r,n,"maxDistance"),st(r,n,"panningModel"),st(r,n,"refDistance"),st(r,n,"rolloffFactor"),r)},aw=(o,e,n,r,a,u,h,d,f,m)=>(g,{coneInnerAngle:v,coneOuterAngle:y,coneOuterGain:x,distanceModel:w,maxDistance:k,orientationX:T,orientationY:R,orientationZ:q,panningModel:z,positionX:B,positionY:N,positionZ:I,refDistance:L,rolloffFactor:M,...X})=>{const U=g.createPanner();if(X.channelCount>2||X.channelCountMode==="max")throw h();yt(U,X);const H={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},Q=n(g,{...H,channelInterpretation:"speakers",numberOfInputs:6}),ne=r(g,{...X,gain:1}),se=r(g,{...H,gain:1}),de=r(g,{...H,gain:0}),le=r(g,{...H,gain:0}),ie=r(g,{...H,gain:0}),G=r(g,{...H,gain:0}),Z=r(g,{...H,gain:0}),Y=a(g,256,6,1),E=u(g,{...H,curve:new Float32Array([1,1]),oversample:"none"});let F=[T,R,q],re=[B,N,I];const ce=new Float32Array(1);Y.onaudioprocess=({inputBuffer:ae})=>{const Ae=[f(ae,ce,0),f(ae,ce,1),f(ae,ce,2)];Ae.some((At,Ut)=>At!==F[Ut])&&(U.setOrientation(...Ae),F=Ae);const He=[f(ae,ce,3),f(ae,ce,4),f(ae,ce,5)];He.some((At,Ut)=>At!==re[Ut])&&(U.setPosition(...He),re=He)},Object.defineProperty(de.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0});const J={get bufferSize(){},get channelCount(){return U.channelCount},set channelCount(ae){if(ae>2)throw h();ne.channelCount=ae,U.channelCount=ae},get channelCountMode(){return U.channelCountMode},set channelCountMode(ae){if(ae==="max")throw h();ne.channelCountMode=ae,U.channelCountMode=ae},get channelInterpretation(){return U.channelInterpretation},set channelInterpretation(ae){ne.channelInterpretation=ae,U.channelInterpretation=ae},get coneInnerAngle(){return U.coneInnerAngle},set coneInnerAngle(ae){U.coneInnerAngle=ae},get coneOuterAngle(){return U.coneOuterAngle},set coneOuterAngle(ae){U.coneOuterAngle=ae},get coneOuterGain(){return U.coneOuterGain},set coneOuterGain(ae){if(ae<0||ae>1)throw e();U.coneOuterGain=ae},get context(){return U.context},get distanceModel(){return U.distanceModel},set distanceModel(ae){U.distanceModel=ae},get inputs(){return[ne]},get maxDistance(){return U.maxDistance},set maxDistance(ae){if(ae<0)throw new RangeError;U.maxDistance=ae},get numberOfInputs(){return U.numberOfInputs},get numberOfOutputs(){return U.numberOfOutputs},get orientationX(){return se.gain},get orientationY(){return de.gain},get orientationZ(){return le.gain},get panningModel(){return U.panningModel},set panningModel(ae){U.panningModel=ae},get positionX(){return ie.gain},get positionY(){return G.gain},get positionZ(){return Z.gain},get refDistance(){return U.refDistance},set refDistance(ae){if(ae<0)throw new RangeError;U.refDistance=ae},get rolloffFactor(){return U.rolloffFactor},set rolloffFactor(ae){if(ae<0)throw new RangeError;U.rolloffFactor=ae},addEventListener(...ae){return ne.addEventListener(ae[0],ae[1],ae[2])},dispatchEvent(...ae){return ne.dispatchEvent(ae[0])},removeEventListener(...ae){return ne.removeEventListener(ae[0],ae[1],ae[2])}};v!==J.coneInnerAngle&&(J.coneInnerAngle=v),y!==J.coneOuterAngle&&(J.coneOuterAngle=y),x!==J.coneOuterGain&&(J.coneOuterGain=x),w!==J.distanceModel&&(J.distanceModel=w),k!==J.maxDistance&&(J.maxDistance=k),T!==J.orientationX.value&&(J.orientationX.value=T),R!==J.orientationY.value&&(J.orientationY.value=R),q!==J.orientationZ.value&&(J.orientationZ.value=q),z!==J.panningModel&&(J.panningModel=z),B!==J.positionX.value&&(J.positionX.value=B),N!==J.positionY.value&&(J.positionY.value=N),I!==J.positionZ.value&&(J.positionZ.value=I),L!==J.refDistance&&(J.refDistance=L),M!==J.rolloffFactor&&(J.rolloffFactor=M),(F[0]!==1||F[1]!==0||F[2]!==0)&&U.setOrientation(...F),(re[0]!==0||re[1]!==0||re[2]!==0)&&U.setPosition(...re);const fe=()=>{ne.connect(U),o(ne,E,0,0),E.connect(se).connect(Q,0,0),E.connect(de).connect(Q,0,1),E.connect(le).connect(Q,0,2),E.connect(ie).connect(Q,0,3),E.connect(G).connect(Q,0,4),E.connect(Z).connect(Q,0,5),Q.connect(Y).connect(g.destination)},Ce=()=>{ne.disconnect(U),d(ne,E,0,0),E.disconnect(se),se.disconnect(Q),E.disconnect(de),de.disconnect(Q),E.disconnect(le),le.disconnect(Q),E.disconnect(ie),ie.disconnect(Q),E.disconnect(G),G.disconnect(Q),E.disconnect(Z),Z.disconnect(Q),Q.disconnect(Y),Y.disconnect(g.destination)};return m(wi(J,U),fe,Ce)},lw=o=>(e,{disableNormalization:n,imag:r,real:a})=>{const u=r instanceof Float32Array?r:new Float32Array(r),h=a instanceof Float32Array?a:new Float32Array(a),d=e.createPeriodicWave(h,u,{disableNormalization:n});if(Array.from(r).length<2)throw o();return d},No=(o,e,n,r)=>o.createScriptProcessor(e,n,r),uw=(o,e)=>(n,r)=>{const a=r.channelCountMode;if(a==="clamped-max")throw e();if(n.createStereoPanner===void 0)return o(n,r);const u=n.createStereoPanner();return yt(u,r),ct(u,r,"pan"),Object.defineProperty(u,"channelCountMode",{get:()=>a,set:h=>{if(h!==a)throw e()}}),u},cw=(o,e,n,r,a,u)=>{const d=new Float32Array([1,1]),f=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},g={...m,oversample:"none"},v=(w,k,T,R)=>{const q=new Float32Array(16385),z=new Float32Array(16385);for(let X=0;X<16385;X+=1){const U=X/16384*f;q[X]=Math.cos(U),z[X]=Math.sin(U)}const B=n(w,{...m,gain:0}),N=r(w,{...g,curve:q}),I=r(w,{...g,curve:d}),L=n(w,{...m,gain:0}),M=r(w,{...g,curve:z});return{connectGraph(){k.connect(B),k.connect(I.inputs===void 0?I:I.inputs[0]),k.connect(L),I.connect(T),T.connect(N.inputs===void 0?N:N.inputs[0]),T.connect(M.inputs===void 0?M:M.inputs[0]),N.connect(B.gain),M.connect(L.gain),B.connect(R,0,0),L.connect(R,0,1)},disconnectGraph(){k.disconnect(B),k.disconnect(I.inputs===void 0?I:I.inputs[0]),k.disconnect(L),I.disconnect(T),T.disconnect(N.inputs===void 0?N:N.inputs[0]),T.disconnect(M.inputs===void 0?M:M.inputs[0]),N.disconnect(B.gain),M.disconnect(L.gain),B.disconnect(R,0,0),L.disconnect(R,0,1)}}},y=(w,k,T,R)=>{const q=new Float32Array(16385),z=new Float32Array(16385),B=new Float32Array(16385),N=new Float32Array(16385),I=Math.floor(16385/2);for(let ie=0;ie<16385;ie+=1)if(ie>I){const G=(ie-I)/(16384-I)*f;q[ie]=Math.cos(G),z[ie]=Math.sin(G),B[ie]=0,N[ie]=1}else{const G=ie/(16384-I)*f;q[ie]=1,z[ie]=0,B[ie]=Math.cos(G),N[ie]=Math.sin(G)}const L=e(w,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),M=n(w,{...m,gain:0}),X=r(w,{...g,curve:q}),U=n(w,{...m,gain:0}),H=r(w,{...g,curve:z}),Q=r(w,{...g,curve:d}),ne=n(w,{...m,gain:0}),se=r(w,{...g,curve:B}),de=n(w,{...m,gain:0}),le=r(w,{...g,curve:N});return{connectGraph(){k.connect(L),k.connect(Q.inputs===void 0?Q:Q.inputs[0]),L.connect(M,0),L.connect(U,0),L.connect(ne,1),L.connect(de,1),Q.connect(T),T.connect(X.inputs===void 0?X:X.inputs[0]),T.connect(H.inputs===void 0?H:H.inputs[0]),T.connect(se.inputs===void 0?se:se.inputs[0]),T.connect(le.inputs===void 0?le:le.inputs[0]),X.connect(M.gain),H.connect(U.gain),se.connect(ne.gain),le.connect(de.gain),M.connect(R,0,0),ne.connect(R,0,0),U.connect(R,0,1),de.connect(R,0,1)},disconnectGraph(){k.disconnect(L),k.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),L.disconnect(M,0),L.disconnect(U,0),L.disconnect(ne,1),L.disconnect(de,1),Q.disconnect(T),T.disconnect(X.inputs===void 0?X:X.inputs[0]),T.disconnect(H.inputs===void 0?H:H.inputs[0]),T.disconnect(se.inputs===void 0?se:se.inputs[0]),T.disconnect(le.inputs===void 0?le:le.inputs[0]),X.disconnect(M.gain),H.disconnect(U.gain),se.disconnect(ne.gain),le.disconnect(de.gain),M.disconnect(R,0,0),ne.disconnect(R,0,0),U.disconnect(R,0,1),de.disconnect(R,0,1)}}},x=(w,k,T,R,q)=>{if(k===1)return v(w,T,R,q);if(k===2)return y(w,T,R,q);throw a()};return(w,{channelCount:k,channelCountMode:T,pan:R,...q})=>{if(T==="max")throw a();const z=o(w,{...q,channelCount:1,channelCountMode:T,numberOfInputs:2}),B=n(w,{...q,channelCount:k,channelCountMode:T,gain:1}),N=n(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:R});let{connectGraph:I,disconnectGraph:L}=x(w,k,B,N,z);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const M={get bufferSize(){},get channelCount(){return B.channelCount},set channelCount(Q){B.channelCount!==Q&&(X&&L(),{connectGraph:I,disconnectGraph:L}=x(w,Q,B,N,z),X&&I()),B.channelCount=Q},get channelCountMode(){return B.channelCountMode},set channelCountMode(Q){if(Q==="clamped-max"||Q==="max")throw a();B.channelCountMode=Q},get channelInterpretation(){return B.channelInterpretation},set channelInterpretation(Q){B.channelInterpretation=Q},get context(){return B.context},get inputs(){return[B]},get numberOfInputs(){return B.numberOfInputs},get numberOfOutputs(){return B.numberOfOutputs},get pan(){return N.gain},addEventListener(...Q){return B.addEventListener(Q[0],Q[1],Q[2])},dispatchEvent(...Q){return B.dispatchEvent(Q[0])},removeEventListener(...Q){return B.removeEventListener(Q[0],Q[1],Q[2])}};let X=!1;const U=()=>{I(),X=!0},H=()=>{L(),X=!1};return u(wi(M,z),U,H)}},hw=(o,e,n,r,a,u,h)=>(d,f)=>{const m=d.createWaveShaper();if(u!==null&&u.name==="webkitAudioContext"&&d.createGain().gain.automationRate===void 0)return n(d,f);yt(m,f);const g=f.curve===null||f.curve instanceof Float32Array?f.curve:new Float32Array(f.curve);if(g!==null&&g.length<2)throw e();st(m,{curve:g},"curve"),st(m,f,"oversample");let v=null,y=!1;return h(m,"curve",k=>()=>k.call(m),k=>T=>(k.call(m,T),y&&(r(T)&&v===null?v=o(d,m):!r(T)&&v!==null&&(v(),v=null)),T)),a(m,()=>{y=!0,r(m.curve)&&(v=o(d,m))},()=>{y=!1,v!==null&&(v(),v=null)})},dw=(o,e,n,r,a)=>(u,{curve:h,oversample:d,...f})=>{const m=u.createWaveShaper(),g=u.createWaveShaper();yt(m,f),yt(g,f);const v=n(u,{...f,gain:1}),y=n(u,{...f,gain:-1}),x=n(u,{...f,gain:1}),w=n(u,{...f,gain:-1});let k=null,T=!1,R=null;const q={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(N){v.channelCount=N,y.channelCount=N,m.channelCount=N,x.channelCount=N,g.channelCount=N,w.channelCount=N},get channelCountMode(){return m.channelCountMode},set channelCountMode(N){v.channelCountMode=N,y.channelCountMode=N,m.channelCountMode=N,x.channelCountMode=N,g.channelCountMode=N,w.channelCountMode=N},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(N){v.channelInterpretation=N,y.channelInterpretation=N,m.channelInterpretation=N,x.channelInterpretation=N,g.channelInterpretation=N,w.channelInterpretation=N},get context(){return m.context},get curve(){return R},set curve(N){if(N!==null&&N.length<2)throw e();if(N===null)m.curve=N,g.curve=N;else{const I=N.length,L=new Float32Array(I+2-I%2),M=new Float32Array(I+2-I%2);L[0]=N[0],M[0]=-N[I-1];const X=Math.ceil((I+1)/2),U=(I+1)/2-1;for(let H=1;H<X;H+=1){const Q=H/X*U,ne=Math.floor(Q),se=Math.ceil(Q);L[H]=ne===se?N[ne]:(1-(Q-ne))*N[ne]+(1-(se-Q))*N[se],M[H]=ne===se?-N[I-1-ne]:-((1-(Q-ne))*N[I-1-ne])-(1-(se-Q))*N[I-1-se]}L[X]=I%2===1?N[X-1]:(N[X-2]+N[X-1])/2,m.curve=L,g.curve=M}R=N,T&&(r(R)&&k===null?k=o(u,v):k!==null&&(k(),k=null))},get inputs(){return[v]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(N){m.oversample=N,g.oversample=N},addEventListener(...N){return v.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return v.dispatchEvent(N[0])},removeEventListener(...N){return v.removeEventListener(N[0],N[1],N[2])}};h!==null&&(q.curve=h instanceof Float32Array?h:new Float32Array(h)),d!==q.oversample&&(q.oversample=d);const z=()=>{v.connect(m).connect(x),v.connect(y).connect(g).connect(w).connect(x),T=!0,r(R)&&(k=o(u,v))},B=()=>{v.disconnect(m),m.disconnect(x),v.disconnect(y),y.disconnect(g),g.disconnect(w),w.disconnect(x),T=!1,k!==null&&(k(),k=null)};return a(wi(q,x),z,B)},Bt=()=>new DOMException("","NotSupportedError"),fw={numberOfChannels:1},pw=(o,e,n,r,a)=>class extends o{constructor(h,d,f){let m;if(typeof h=="number"&&d!==void 0&&f!==void 0)m={length:d,numberOfChannels:h,sampleRate:f};else if(typeof h=="object")m=h;else throw new Error("The given parameters are not valid.");const{length:g,numberOfChannels:v,sampleRate:y}={...fw,...m},x=r(v,g,y);e(go,()=>go(x))||x.addEventListener("statechange",(()=>{let w=0;const k=T=>{this._state==="running"&&(w>0?(x.removeEventListener("statechange",k),T.stopImmediatePropagation(),this._waitForThePromiseToSettle(T)):w+=1)};return k})()),super(x,v),this._length=g,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,um(this)}))}_waitForThePromiseToSettle(h){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(h):setTimeout(()=>this._waitForThePromiseToSettle(h))}},mw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},gw=(o,e,n,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...mw,...m},y=n(g,v),x=u(g),w=x?r():null,k=f.sampleRate/2;super(f,!1,y,w),this._detune=e(this,x,y.detune,153600,-153600),this._frequency=e(this,x,y.frequency,k,-k),this._nativeOscillatorNode=y,this._onended=null,this._oscillatorNodeRenderer=w,this._oscillatorNodeRenderer!==null&&v.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=v.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(f){const m=typeof f=="function"?h(this,f):null;this._nativeOscillatorNode.onended=m;const g=this._nativeOscillatorNode.onended;this._onended=g!==null&&g===m?f:g}get type(){return this._nativeOscillatorNode.type}set type(f){this._nativeOscillatorNode.type=f,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(f){this._nativeOscillatorNode.setPeriodicWave(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=f)}start(f=0){if(this._nativeOscillatorNode.start(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=f),this.context.state!=="closed"){mi(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),ms(this)&&To(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(f=0){this._nativeOscillatorNode.stop(f),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=f)}},vw=(o,e,n,r,a)=>()=>{const u=new WeakMap;let h=null,d=null,f=null;const m=async(g,v)=>{let y=n(g);const x=Pt(y,v);if(!x){const w={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:h===null?void 0:h,type:y.type};y=e(v,w),d!==null&&y.start(d),f!==null&&y.stop(f)}return u.set(v,y),x?(await o(v,g.detune,y.detune),await o(v,g.frequency,y.frequency)):(await r(v,g.detune,y.detune),await r(v,g.frequency,y.frequency)),await a(g,v,y),y};return{set periodicWave(g){h=g},set start(g){d=g},set stop(g){f=g},render(g,v){const y=u.get(v);return y!==void 0?Promise.resolve(y):m(g,v)}}},_w={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},yw=(o,e,n,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={..._w,...m},y=n(g,v),x=u(g),w=x?r():null;super(f,!1,y,w),this._nativePannerNode=y,this._orientationX=e(this,x,y.orientationX,Vt,Kt),this._orientationY=e(this,x,y.orientationY,Vt,Kt),this._orientationZ=e(this,x,y.orientationZ,Vt,Kt),this._positionX=e(this,x,y.positionX,Vt,Kt),this._positionY=e(this,x,y.positionY,Vt,Kt),this._positionZ=e(this,x,y.positionZ,Vt,Kt),h(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(f){this._nativePannerNode.coneInnerAngle=f}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(f){this._nativePannerNode.coneOuterAngle=f}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(f){this._nativePannerNode.coneOuterGain=f}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(f){this._nativePannerNode.distanceModel=f}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(f){this._nativePannerNode.maxDistance=f}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(f){this._nativePannerNode.panningModel=f}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(f){this._nativePannerNode.refDistance=f}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(f){this._nativePannerNode.rolloffFactor=f}},ww=(o,e,n,r,a,u,h,d,f,m)=>()=>{const g=new WeakMap;let v=null;const y=async(x,w)=>{let k=null,T=u(x);const R={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation},q={...R,coneInnerAngle:T.coneInnerAngle,coneOuterAngle:T.coneOuterAngle,coneOuterGain:T.coneOuterGain,distanceModel:T.distanceModel,maxDistance:T.maxDistance,panningModel:T.panningModel,refDistance:T.refDistance,rolloffFactor:T.rolloffFactor},z=Pt(T,w);if("bufferSize"in T)k=r(w,{...R,gain:1});else if(!z){const B={...q,orientationX:T.orientationX.value,orientationY:T.orientationY.value,orientationZ:T.orientationZ.value,positionX:T.positionX.value,positionY:T.positionY.value,positionZ:T.positionZ.value};T=a(w,B)}if(g.set(w,k===null?T:k),k!==null){if(v===null){if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const H=new h(6,x.context.length,w.sampleRate),Q=e(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});Q.connect(H.destination),v=(async()=>{const ne=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(se,de)=>{const le=n(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:de===0?1:0});return await d(H,se,le.offset),le}));for(let se=0;se<6;se+=1)ne[se].connect(Q,0,se),ne[se].start(0);return m(H)})()}const B=await v,N=r(w,{...R,gain:1});await f(x,w,N);const I=[];for(let H=0;H<B.numberOfChannels;H+=1)I.push(B.getChannelData(H));let L=[I[0][0],I[1][0],I[2][0]],M=[I[3][0],I[4][0],I[5][0]],X=r(w,{...R,gain:1}),U=a(w,{...q,orientationX:L[0],orientationY:L[1],orientationZ:L[2],positionX:M[0],positionY:M[1],positionZ:M[2]});N.connect(X).connect(U.inputs[0]),U.connect(k);for(let H=128;H<B.length;H+=128){const Q=[I[0][H],I[1][H],I[2][H]],ne=[I[3][H],I[4][H],I[5][H]];if(Q.some((se,de)=>se!==L[de])||ne.some((se,de)=>se!==M[de])){L=Q,M=ne;const se=H/w.sampleRate;X.gain.setValueAtTime(0,se),X=r(w,{...R,gain:0}),U=a(w,{...q,orientationX:L[0],orientationY:L[1],orientationZ:L[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),X.gain.setValueAtTime(1,se),N.connect(X).connect(U.inputs[0]),U.connect(k)}}return k}return z?(await o(w,x.orientationX,T.orientationX),await o(w,x.orientationY,T.orientationY),await o(w,x.orientationZ,T.orientationZ),await o(w,x.positionX,T.positionX),await o(w,x.positionY,T.positionY),await o(w,x.positionZ,T.positionZ)):(await d(w,x.orientationX,T.orientationX),await d(w,x.orientationY,T.orientationY),await d(w,x.orientationZ,T.orientationZ),await d(w,x.positionX,T.positionX),await d(w,x.positionY,T.positionY),await d(w,x.positionZ,T.positionZ)),yi(T)?await f(x,w,T.inputs[0]):await f(x,w,T),T};return{render(x,w){const k=g.get(w);return k!==void 0?Promise.resolve(k):y(x,w)}}},xw={disableNormalization:!1},kw=(o,e,n,r)=>class ym{constructor(u,h){const d=e(u),f=r({...xw,...h}),m=o(d,f);return n.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===ym.prototype||n.has(u)}},Tw=(o,e)=>(n,r,a)=>(o(r).replay(a),e(r,n,a)),Cw=(o,e,n)=>async(r,a,u)=>{const h=o(r);await Promise.all(h.activeInputs.map((d,f)=>Array.from(d).map(async([m,g])=>{const y=await e(m).render(m,a),x=r.context.destination;!n(m)&&(r!==x||!n(r))&&y.connect(u,g,f)})).reduce((d,f)=>[...d,...f],[]))},Sw=(o,e,n)=>async(r,a,u)=>{const h=e(r);await Promise.all(Array.from(h.activeInputs).map(async([d,f])=>{const g=await o(d).render(d,a);n(d)||g.connect(u,f)}))},bw=(o,e,n,r)=>a=>o(go,()=>go(a))?Promise.resolve(o(r,r)).then(u=>{if(!u){const h=n(a,512,0,1);a.oncomplete=()=>{h.onaudioprocess=null,h.disconnect()},h.onaudioprocess=()=>a.currentTime,h.connect(a.destination)}return a.startRendering()}):new Promise(u=>{const h=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=d=>{h.disconnect(),u(d.renderedBuffer)},h.connect(a.destination),a.startRendering()}),Nw=o=>(e,n)=>{o.set(e,n)},Ew=o=>(e,n)=>o.set(e,n),Rw=(o,e,n,r,a,u,h,d)=>(f,m)=>n(f).render(f,m).then(()=>Promise.all(Array.from(r(m)).map(g=>n(g).render(g,m)))).then(()=>a(m)).then(g=>(typeof g.copyFromChannel!="function"?(h(g),nh(g)):e(u,()=>u(g))||d(g),o.add(g),g)),Aw={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Ow=(o,e,n,r,a,u)=>class extends o{constructor(d,f){const m=a(d),g={...Aw,...f},v=n(m,g),y=u(m),x=y?r():null;super(d,!1,v,x),this._pan=e(this,y,v.pan)}get pan(){return this._pan}},Mw=(o,e,n,r,a)=>()=>{const u=new WeakMap,h=async(d,f)=>{let m=n(d);const g=Pt(m,f);if(!g){const v={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=e(f,v)}return u.set(f,m),g?await o(f,d.pan,m.pan):await r(f,d.pan,m.pan),yi(m)?await a(d,f,m.inputs[0]):await a(d,f,m),m};return{render(d,f){const m=u.get(f);return m!==void 0?Promise.resolve(m):h(d,f)}}},Dw=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},Iw=(o,e)=>async()=>{if(o===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),a=URL.createObjectURL(n);let u=!1,h=!1;try{await r.audioWorklet.addModule(a);const d=new o(r,"a",{numberOfOutputs:0}),f=r.createOscillator();d.port.onmessage=()=>u=!0,d.onprocessorerror=()=>h=!0,f.connect(d),f.start(0),await r.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(a)}return u&&!h},Pw=(o,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=o(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{n.oncomplete=()=>{r.disconnect(),a(n.currentTime!==0)},n.startRendering()})},Fw=()=>new DOMException("","UnknownError"),Lw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},jw=(o,e,n,r,a,u,h)=>class extends o{constructor(f,m){const g=a(f),v={...Lw,...m},y=n(g,v),w=u(g)?r():null;super(f,!0,y,w),this._isCurveNullified=!1,this._nativeWaveShaperNode=y,h(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(f){if(f===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(f.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=f}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(f){this._nativeWaveShaperNode.oversample=f}},Vw=(o,e,n)=>()=>{const r=new WeakMap,a=async(u,h)=>{let d=e(u);if(!Pt(d,h)){const m={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=o(h,m)}return r.set(h,d),yi(d)?await n(u,h,d.inputs[0]):await n(u,h,d),d};return{render(u,h){const d=r.get(h);return d!==void 0?Promise.resolve(d):a(u,h)}}},zw=()=>typeof window>"u"?null:window,qw=(o,e)=>n=>{n.copyFromChannel=(r,a,u=0)=>{const h=o(u),d=o(a);if(d>=n.numberOfChannels)throw e();const f=n.length,m=n.getChannelData(d),g=r.length;for(let v=h<0?-h:0;v+h<f&&v<g;v+=1)r[v]=m[v+h]},n.copyToChannel=(r,a,u=0)=>{const h=o(u),d=o(a);if(d>=n.numberOfChannels)throw e();const f=n.length,m=n.getChannelData(d),g=r.length;for(let v=h<0?-h:0;v+h<f&&v<g;v+=1)m[v+h]=r[v]}},Ww=o=>e=>{e.copyFromChannel=(n=>(r,a,u=0)=>{const h=o(u),d=o(a);if(h<e.length)return n.call(e,r,d,h)})(e.copyFromChannel),e.copyToChannel=(n=>(r,a,u=0)=>{const h=o(u),d=o(a);if(h<e.length)return n.call(e,r,d,h)})(e.copyToChannel)},Bw=o=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),o(e,"buffer",a=>()=>{const u=a.call(e);return u===r?null:u},a=>u=>a.call(e,u===null?r:u))},Uw=(o,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const a=n.createBufferSource();e(r,()=>{const d=r.numberOfInputs;for(let f=0;f<d;f+=1)a.connect(r,0,f)},()=>a.disconnect(r))},wm=(o,e,n)=>o.copyFromChannel===void 0?o.getChannelData(n)[0]:(o.copyFromChannel(e,n),e[0]),xm=o=>{if(o===null)return!1;const e=o.length;return e%2!==0?o[Math.floor(e/2)]!==0:o[e/2-1]+o[e/2]!==0},Eo=(o,e,n,r)=>{let a=o;for(;!a.hasOwnProperty(e);)a=Object.getPrototypeOf(a);const{get:u,set:h}=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(o,e,{get:n(u),set:r(h)})},$w=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),Qw=o=>({...o,channelCount:o.numberOfOutputs}),Hw=o=>{const{imag:e,real:n}=o;return e===void 0?n===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(n,()=>0),real:n}:n===void 0?{...o,imag:e,real:Array.from(e,()=>0)}:{...o,imag:e,real:n}},km=(o,e,n)=>{try{o.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;km(o,e,n+1e-7)}},Gw=o=>{const e=o.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Yw=o=>{const e=o.createBufferSource(),n=o.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},Xw=o=>{const e=o.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},ah=o=>{const e=o.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Tm=o=>{const e=o.createBuffer(1,1,44100),n=o.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},lh=o=>{const e=o.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},Zw=o=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(o)}finally{e.close(),n.close()}},Kw=o=>{o.start=(e=>(n=0,r=0,a)=>{const u=o.buffer,h=u===null?r:Math.min(u.duration,r);u!==null&&h>u.duration-.5/o.context.sampleRate?e.call(o,n,0,0):e.call(o,n,h,a)})(o.start)},Cm=(o,e)=>{const n=e.createGain();o.connect(n);const r=(a=>()=>{a.call(o,n),o.removeEventListener("ended",r)})(o.disconnect);o.addEventListener("ended",r),wi(o,n),o.stop=(a=>{let u=!1;return(h=0)=>{if(u)try{a.call(o,h)}catch{n.gain.setValueAtTime(0,h)}else a.call(o,h),u=!0}})(o.stop)},xi=(o,e)=>n=>{const r={value:o};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(o,n):e.handleEvent.call(o,n)},Jw=y_(Er),e1=S_(Er),t1=Ly(Nl),Sm=new WeakMap,n1=t0(Sm),jn=fy(new Map,new WeakMap),Gn=zw(),bm=O0(jn,Xn),uh=e0(zt),Rt=Cw(zt,uh,kr),s1=A_(bm,Je,Rt),Ye=r0(bl),vs=rw(Gn),$e=x0(vs),Nm=new WeakMap,Em=Hy(xi),Ro=P0(Gn),ch=v0(Ro),hh=_0(Gn),Rm=y0(Gn),vo=L0(Gn),pt=ty(w_(nm),C_(Jw,e1,hl,t1,dl,zt,n1,ko,Je,Er,ms,kr,il),jn,d0($c,dl,zt,Je,mo,ms),Xn,El,Bt,Dy(hl,$c,zt,Je,mo,Ye,ms,$e),zy(Nm,zt,Pn),Em,Ye,ch,hh,Rm,$e,vo),r1=R_(pt,s1,Xn,bm,Ye,$e),dh=new WeakSet,Vp=M0(Gn),Am=by(new Uint32Array(1)),fh=qw(Am,Xn),ph=Ww(Am),Om=M_(dh,jn,Bt,Vp,vs,Dw(Vp),fh,ph),Rl=b_(en),Mm=Sw(uh,Co,kr),Zn=wy(Mm),ki=I0(Rl,jn,Gw,Yw,Xw,ah,Tm,lh,Kw,Bw(Eo),Cm),Kn=Tw(n0(Co),Mm),i1=P_(Zn,ki,Je,Kn,Rt),Vn=ny(x_(sm),Nm,th,sy,f_,p_,m_,g_,v_,Wc,em,Ro,km),o1=I_(pt,i1,Vn,Tt,ki,Ye,$e,xi),a1=U_(pt,$_,Xn,Tt,F0(en,Eo),Ye,$e,Rt),l1=dy(Zn,vm,Je,Kn,Rt),Rr=Ew(Sm),u1=hy(pt,Vn,l1,El,vm,Ye,$e,Rr),Ys=R0(Er,hh),c1=Uw(Tt,Ys),Xs=U0(Ro,c1),h1=gy(Xs,Je,Rt),d1=my(pt,h1,Xs,Ye,$e),f1=yy(bo,Je,Rt),p1=_y(pt,f1,bo,Ye,$e,Qw),m1=H0(Rl,ki,en,Ys),Ti=Q0(Rl,jn,m1,ah,lh),g1=Sy(Zn,Ti,Je,Kn,Rt),v1=Cy(pt,Vn,g1,Ti,Ye,$e,xi),Dm=G0(Bt,Eo),_1=Ry(Dm,Je,Rt),y1=Ey(pt,_1,Dm,Ye,$e,Rr),w1=Fy(Zn,_m,Je,Kn,Rt),x1=Py(pt,Vn,w1,_m,Ye,$e,Rr),Im=Y0(Bt),k1=Uy(Zn,Im,Je,Kn,Rt),T1=By(pt,Vn,k1,Im,Bt,Ye,$e,Rr),C1=Ky(Zn,en,Je,Kn,Rt),S1=Zy(pt,Vn,C1,en,Ye,$e),b1=J0(El,Tt,No,Bt),Al=bw(jn,en,No,Pw(en,vs)),N1=h0(ki,Je,vs,Rt,Al),E1=X0(b1),R1=u0(pt,E1,N1,Ye,$e,Rr),A1=Q_(Vn,Xs,Ti,No,Bt,wm,$e,Eo),Pm=new WeakMap,O1=E0(a1,A1,Em,$e,Pm,xi),Fm=iw(Rl,jn,ah,Tm,lh,Cm),M1=vw(Zn,Fm,Je,Kn,Rt),D1=gw(pt,Vn,Fm,M1,Ye,$e,xi),Lm=ky(ki),I1=dw(Lm,Tt,en,xm,Ys),Ol=hw(Lm,Tt,I1,xm,Ys,Ro,Eo),P1=aw(hl,Tt,Xs,en,No,Ol,Bt,dl,wm,Ys),jm=ow(P1),F1=ww(Zn,Xs,Ti,en,jm,Je,vs,Kn,Rt,Al),L1=yw(pt,Vn,jm,F1,Ye,$e,Rr),j1=lw(Xn),V1=kw(j1,Ye,new WeakSet,Hw),z1=cw(Xs,bo,en,Ol,Bt,Ys),Vm=uw(z1,Bt),q1=Mw(Zn,Vm,Je,Kn,Rt),W1=Ow(pt,Vn,Vm,q1,Ye,$e),B1=Vw(Ol,Je,Rt),U1=jw(pt,Tt,Ol,B1,Ye,$e,Rr),zm=k0(Gn),mh=Gy(Gn),qm=new WeakMap,$1=i0(qm,vs),Q1=zm?T_(jn,Bt,Qy(Gn),mh,Yy(__),Ye,$1,$e,vo,new WeakMap,new WeakMap,Iw(vo,vs),Gn):void 0,H1=w0(ch,$e),G1=My(dh,jn,Oy,$y,new WeakSet,Ye,H1,ul,go,fh,ph),Wm=uy(Q1,r1,Om,o1,u1,d1,p1,v1,y1,G1,x1,T1,S1,R1,O1,D1,L1,V1,W1,U1),Y1=T0(pt,ew,Ye,$e),X1=S0(pt,tw,Ye,$e),Z1=b0(pt,nw,Ye,$e),K1=sw(Tt,$e),J1=N0(pt,K1,Ye),ex=B_(Wm,Tt,Bt,Fw,Y1,X1,Z1,J1,Ro),gh=o0(Pm),tx=N_(gh),Bm=xy(Xn),nx=jy(gh),Um=qy(Xn),$m=new WeakMap,sx=Jy($m,Pn),rx=B0(Bm,Xn,Tt,Xs,bo,Ti,en,No,Bt,Um,mh,sx,Ys),ix=V0(Tt,rx,en,Bt,Ys),ox=ly(Zn,Bm,ki,Xs,bo,Ti,en,nx,Um,mh,Je,vo,vs,Kn,Rt,Al),ax=s0(qm),lx=Nw($m),zp=zm?iy(tx,pt,Vn,ox,ix,zt,ax,Ye,$e,vo,$w,lx,Zw,xi):void 0,ux=Ay(Bt,vs),cx=Rw(dh,jn,uh,gh,Al,ul,fh,ph),hx=pw(Wm,jn,Tt,ux,cx),dx=f0(bl,ch),fx=p0(eh,hh),px=m0(th,Rm),mx=g0(bl,$e);function kn(o){return o===void 0}function Oe(o){return o!==void 0}function gx(o){return typeof o=="function"}function Fn(o){return typeof o=="number"}function _r(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function Qm(o){return typeof o=="boolean"}function hn(o){return Array.isArray(o)}function gs(o){return typeof o=="string"}function sl(o){return gs(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function Te(o,e){if(!o)throw new Error(e)}function cn(o,e,n=1/0){if(!(e<=o&&o<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${o}`)}function Hm(o){!o.isOffline&&o.state!=="running"&&Ao('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let Gm=!1,qp=!1;function Wp(o){Gm=o}function vx(o){kn(o)&&Gm&&!qp&&(qp=!0,Ao("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let Ym=console;function _x(...o){Ym.log(...o)}function Ao(...o){Ym.warn(...o)}function yx(o){return new ex(o)}function wx(o,e,n){return new hx(o,e,n)}const un=typeof self=="object"?self:null,xx=un&&(un.hasOwnProperty("AudioContext")||un.hasOwnProperty("webkitAudioContext"));function kx(o,e,n){return Te(Oe(zp),"AudioWorkletNode only works in a secure context (https or localhost)"),new(o instanceof(un==null?void 0:un.BaseAudioContext)?un==null?void 0:un.AudioWorkletNode:zp)(o,e,n)}function zn(o,e,n,r){var a=arguments.length,u=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(o,e,n,r);else for(var d=o.length-1;d>=0;d--)(h=o[d])&&(u=(a<3?h(u):a>3?h(e,n,u):h(e,n))||u);return a>3&&u&&Object.defineProperty(e,n,u),u}function ft(o,e,n,r){function a(u){return u instanceof n?u:new n(function(h){h(u)})}return new(n||(n=Promise))(function(u,h){function d(g){try{m(r.next(g))}catch(v){h(v)}}function f(g){try{m(r.throw(g))}catch(v){h(v)}}function m(g){g.done?u(g.value):a(g.value).then(d,f)}m((r=r.apply(o,e||[])).next())})}class Tx{constructor(e,n,r,a){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(a||44100),.001),this.updateInterval=r,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Tr(o){return px(o)}function Qs(o){return fx(o)}function ol(o){return mx(o)}function ai(o){return dx(o)}function Cx(o){return o instanceof Om}function Sx(o,e){return o==="value"||Tr(e)||Qs(e)||Cx(e)}function yr(o,...e){if(!e.length)return o;const n=e.shift();if(_r(o)&&_r(n))for(const r in n)Sx(r,n[r])?o[r]=n[r]:_r(n[r])?(o[r]||Object.assign(o,{[r]:{}}),yr(o[r],n[r])):Object.assign(o,{[r]:n[r]});return yr(o,...e)}function bx(o,e){return o.length===e.length&&o.every((n,r)=>e[r]===n)}function ge(o,e,n=[],r){const a={},u=Array.from(e);if(_r(u[0])&&r&&!Reflect.has(u[0],r)&&(Object.keys(u[0]).some(d=>Reflect.has(o,d))||(yr(a,{[r]:u[0]}),n.splice(n.indexOf(r),1),u.shift())),u.length===1&&_r(u[0]))yr(a,u[0]);else for(let h=0;h<n.length;h++)Oe(u[h])&&(a[n[h]]=u[h]);return yr(o,a)}function Nx(o){return o.constructor.getDefaults()}function wr(o,e){return kn(o)?e:o}function Xc(o,e){return e.forEach(n=>{Reflect.has(o,n)&&delete o[n]}),o}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class _s{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||un&&this.toString()===un.TONE_DEBUG_CLASS)&&_x(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}_s.version=Jp;const vh=1e-6;function gi(o,e){return o>e+vh}function Zc(o,e){return gi(o,e)||Dn(o,e)}function gl(o,e){return o+vh<e}function Dn(o,e){return Math.abs(o-e)<vh}function Ex(o,e,n){return Math.max(Math.min(o,n),e)}class Tn extends _s{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ge(Tn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Te(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Te(Zc(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const r=this._search(e,n);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const r=this._search(e,n);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Dn(this._timeline[n].time,e)){for(let r=n;r>=0&&Dn(this._timeline[r].time,e);r--)n=r;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Zc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let r=0;const a=this._timeline.length;let u=a;if(a>0&&this._timeline[a-1][n]<=e)return a-1;for(;r<u;){let h=Math.floor(r+(u-r)/2);const d=this._timeline[h],f=this._timeline[h+1];if(Dn(d[n],e)){for(let m=h;m<this._timeline.length;m++){const g=this._timeline[m];if(Dn(g[n],e))h=m;else break}return h}else{if(gl(d[n],e)&&gi(f[n],e))return h;gi(d[n],e)?u=h:r=h+1}}return-1}_iterate(e,n=0,r=this._timeline.length-1){this._timeline.slice(n,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const r=this._search(e);return r!==-1&&this._iterate(n,0,r),this}forEachAfter(e,n){const r=this._search(e);return this._iterate(n,r+1),this}forEachBetween(e,n,r){let a=this._search(e),u=this._search(n);return a!==-1&&u!==-1?(this._timeline[a].time!==e&&(a+=1),this._timeline[u].time===n&&(u-=1),this._iterate(r,a,u)):a===-1&&this._iterate(r,0,u),this}forEachFrom(e,n){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(n,r+1),this}forEachAtTime(e,n){const r=this._search(e);if(r!==-1&&Dn(this._timeline[r].time,e)){let a=r;for(let u=r;u>=0&&Dn(this._timeline[u].time,e);u--)a=u;this._iterate(u=>{n(u)},a,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Xm=[];function Ml(o){Xm.push(o)}function Rx(o){Xm.forEach(e=>e(o))}const Zm=[];function Dl(o){Zm.push(o)}function Ax(o){Zm.forEach(e=>e(o))}class Oo extends _s{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(a=>{kn(this._events)&&(this._events={}),this._events.hasOwnProperty(a)||(this._events[a]=[]),this._events[a].push(n)}),this}once(e,n){const r=(...a)=>{n(...a),this.off(e,r)};return this.on(e,r),this}off(e,n){return e.split(/\W+/).forEach(a=>{if(kn(this._events)&&(this._events={}),this._events.hasOwnProperty(a))if(kn(n))this._events[a]=[];else{const u=this._events[a];for(let h=u.length-1;h>=0;h--)u[h]===n&&u.splice(h,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const r=this._events[e].slice(0);for(let a=0,u=r.length;a<u;a++)r[a].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const r=Object.getOwnPropertyDescriptor(Oo.prototype,n);Object.defineProperty(e.prototype,n,r)})}dispose(){return super.dispose(),this._events=void 0,this}}class Km extends Oo{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Mo extends Km{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Tn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const r=ge(Mo.getDefaults(),arguments,["context"]);r.context?(this._context=r.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=yx({latencyHint:r.latencyHint}),this._latencyHint=r.latencyHint),this._ticker=new Tx(this.emit.bind(this,"tick"),r.clockSource,r.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=r.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Rx(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,r){return this._context.createBuffer(e,n,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,r){return this._context.createPeriodicWave(e,n,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Te(ai(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Te(ai(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Te(ai(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Te(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Te(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Te(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Te(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return kx(this.rawContext,e,n)}addAudioWorkletModule(e){return ft(this,void 0,void 0,function*(){Te(Oe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ft(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ai(this._context)?this._context.resume():Promise.resolve()}close(){return ft(this,void 0,void 0,function*(){ai(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Ax(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),r=n.getChannelData(0);for(let u=0;u<r.length;u++)r[u]=e;const a=this._context.createBufferSource();return a.channelCount=1,a.channelCountMode="explicit",a.buffer=n,a.loop=!0,a.start(0),this._constants.set(e,a),a}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const r=++this._timeoutIds,a=()=>{const u=this.now();this._timeouts.add({callback:()=>{e(),a()},id:r,time:u+n})};return a(),r}}class Ox extends Km{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ft(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Le(o,e){hn(e)?e.forEach(n=>Le(o,n)):Object.defineProperty(o,e,{enumerable:!0,writable:!1})}function _h(o,e){hn(e)?e.forEach(n=>_h(o,n)):Object.defineProperty(o,e,{writable:!0})}const ze=()=>{};class Qe extends _s{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ze;const e=ge(Qe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,gs(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:ze,onload:ze,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:qt().sampleRate}set(e){return e instanceof Qe?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ft(this,void 0,void 0,function*(){const n=Qe.load(e).then(r=>{this.set(r),this.onload(this)});Qe.downloads.push(n);try{yield n}finally{const r=Qe.downloads.indexOf(n);Qe.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=hn(e)&&e[0].length>0,r=n?e.length:1,a=n?e[0].length:e.length,u=qt(),h=u.createBuffer(r,a,u.sampleRate),d=!n&&r===1?[e]:e;for(let f=0;f<r;f++)h.copyToChannel(d[f],f);return this._buffer=h,this}toMono(e){if(Fn(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const r=this.numberOfChannels;for(let a=0;a<r;a++){const u=this.toArray(a);for(let h=0;h<u.length;h++)n[h]+=u[h]}n=n.map(a=>a/r),this.fromArray(n)}return this}toArray(e){if(Fn(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let r=0;r<this.numberOfChannels;r++)n[r]=this.getChannelData(r);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){Te(this.loaded,"Buffer is not loaded");const r=Math.floor(e*this.sampleRate),a=Math.floor(n*this.sampleRate);Te(r<a,"The start time must be less than the end time");const u=a-r,h=qt().createBuffer(this.numberOfChannels,u,this.sampleRate);for(let d=0;d<this.numberOfChannels;d++)h.copyToChannel(this.getChannelData(d).subarray(r,a),d);return new Qe(h)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Qe().fromArray(e)}static fromUrl(e){return ft(this,void 0,void 0,function*(){return yield new Qe().load(e)})}static load(e){return ft(this,void 0,void 0,function*(){const n=Qe.baseUrl===""||Qe.baseUrl.endsWith("/")?Qe.baseUrl:Qe.baseUrl+"/",r=yield fetch(n+e);if(!r.ok)throw new Error(`could not load url: ${e}`);const a=yield r.arrayBuffer();return yield qt().decodeAudioData(a)})}static supportsType(e){const n=e.split("."),r=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+r)!==""}static loaded(){return ft(this,void 0,void 0,function*(){for(yield Promise.resolve();Qe.downloads.length;)yield Qe.downloads[0]})}}Qe.baseUrl="";Qe.downloads=[];class Il extends Mo{constructor(){super({clockSource:"offline",context:ol(arguments[0])?arguments[0]:wx(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:ol(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ol(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ft(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const r=Math.floor(this.sampleRate/128);e&&n%r===0&&(yield new Promise(a=>setTimeout(a,1)))}})}render(){return ft(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Qe(n)})}close(){return Promise.resolve()}}const Jm=new Ox;let gr=Jm;function qt(){return gr===Jm&&xx&&Mx(new Mo),gr}function Mx(o,e=!1){e&&gr.dispose(),ai(o)?gr=new Mo(o):ol(o)?gr=new Il(o):gr=o}function Dx(){return gr.resume()}if(un&&!un.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Jp} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function vl(o){return Math.pow(10,o/20)}function eg(o){return 20*(Math.log(o)/Math.LN10)}function tg(o){return Math.pow(2,o/12)}let Pl=440;function Ix(){return Pl}function Px(o){Pl=o}function vr(o){return Math.round(ng(o))}function ng(o){return 69+12*Math.log2(o/Pl)}function sg(o){return Pl*Math.pow(2,(o-69)/12)}class yh extends _s{constructor(e,n,r){super(),this.defaultUnits="s",this._val=n,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const r=parseInt(e,10),a=n==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*a:this._beatsToUnits(4/r)*a},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,r)=>{let a=0;return e&&e!=="0"&&(a+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(a+=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(a+=this._beatsToUnits(parseFloat(r)/4)),a},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof yh&&this.fromType(this._val),kn(this._val))return this._noArg();if(gs(this._val)&&kn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(_r(this._val)){let e=0;for(const n in this._val)if(Oe(this._val[n])){const r=this._val[n],a=new this.constructor(this.context,n).valueOf()*r;e+=a}return e}if(Oe(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return gs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class In extends yh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new In(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const r=new this.constructor(this.context,e).valueOf(),a=this.valueOf(),d=Math.round(a/r)*r-a;return a+d*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let u=1;u<9;u++){const h=Math.pow(2,u);n.push(h+"n."),n.push(h+"n"),n.push(h+"t")}n.push("0");let r=n[0],a=new In(this.context,n[0]).toSeconds();return n.forEach(u=>{const h=new In(this.context,u).toSeconds();Math.abs(h-e)<Math.abs(a-e)&&(r=u,a=h)}),r}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const r=Math.floor(n/this._getTimeSignature());let a=n%1*4;n=Math.floor(n)%this._getTimeSignature();const u=a.toString();return u.length>3&&(a=parseFloat(parseFloat(u).toFixed(3))),[r,n,a].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return vr(this.toFrequency())}_now(){return this.context.now()}}class Jt extends In{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ix()}static set A4(e){Px(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Jt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const a=Fx[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?a:Jt.mtof(a)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,r){let a=1;return e&&e!=="0"&&(a*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(a*=this._beatsToUnits(parseFloat(n))),r&&r!=="0"&&(a*=this._beatsToUnits(parseFloat(r)/4)),a}}})}transpose(e){return new Jt(this.context,this.valueOf()*tg(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return vr(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Jt.A4);let r=Math.round(12*n)+57;const a=Math.floor(r/12);return a<0&&(r+=-12*a),Lx[r%12]+a.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return sg(e)}static ftom(e){return vr(e)}}const Fx={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Lx=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Us(o,e){return new Jt(qt(),o,e)}class fo extends In{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Ct extends _s{constructor(){super();const e=ge(Ct.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:qt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return vx(e),new In(this.context,e).toSeconds()}toFrequency(e){return new Jt(this.context,e).toFrequency()}toTicks(e){return new fo(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(r=>{kn(e[r])&&delete n[r]}),n}get(){const e=Nx(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const r=this[n];Oe(r)&&Oe(r.value)&&Oe(r.setValueAtTime)?e[n]=r.value:r instanceof Ct?e[n]=r._getPartialProperties(e[n]):hn(r)||Fn(r)||gs(r)||Qm(r)?e[n]=r:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Oe(this[n])&&(this[n]&&Oe(this[n].value)&&Oe(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Ct?this[n].set(e[n]):this[n]=e[n])}),this}}class Fl extends Tn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,r){return cn(n,0),this.add(Object.assign({},r,{state:e,time:n})),this}getLastState(e,n){const r=this._search(n);for(let a=r;a>=0;a--){const u=this._timeline[a];if(u.state===e)return u}}getNextState(e,n){const r=this._search(n);if(r!==-1)for(let a=r;a<this._timeline.length;a++){const u=this._timeline[a];if(u.state===e)return u}}}class Pe extends Ct{constructor(){const e=ge(Pe.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Te(Oe(e.param)&&(Tr(e.param)||e.param instanceof Pe),"param must be an AudioParam");!Tr(e.param);)e.param=e.param._param;this._swappable=Oe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Tn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Oe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ct.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Oe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Oe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Oe(this.maxValue)&&Oe(this.minValue)&&cn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?vl(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?eg(e):e}setValueAtTime(e,n){const r=this.toSeconds(n),a=this._fromType(e);return Te(isFinite(a)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(a),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,r),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),r=this._events.getAfter(n),a=this._events.get(n);let u=this._initialValue;if(a===null)u=this._initialValue;else if(a.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){const h=this._events.getBefore(a.time);let d;h===null?d=this._initialValue:d=h.value,a.type==="setTargetAtTime"&&(u=this._exponentialApproach(a.time,d,a.value,a.constant,n))}else if(r===null)u=a.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let h=a.value;if(a.type==="setTargetAtTime"){const d=this._events.getBefore(a.time);d===null?h=this._initialValue:h=d.value}r.type==="linearRampToValueAtTime"?u=this._linearInterpolate(a.time,h,r.time,r.value,n):u=this._exponentialInterpolate(a.time,h,r.time,r.value,n)}else u=a.value;return this._toType(u)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const r=this._fromType(e),a=this.toSeconds(n);return Te(isFinite(r)&&isFinite(a),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this._events.add({time:a,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,a),this._param.linearRampToValueAtTime(r,a),this}exponentialRampToValueAtTime(e,n){let r=this._fromType(e);r=Dn(r,0)?this._minOutput:r,this._assertRange(r);const a=this.toSeconds(n);return Te(isFinite(r)&&isFinite(a),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,a),this._param.exponentialRampToValueAtTime(r,a),this}exponentialRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(n)),this}linearRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(n)),this}targetRampTo(e,n,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,n),this}exponentialApproachValueAtTime(e,n,r){n=this.toSeconds(n),r=this.toSeconds(r);const a=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,n,a),this.cancelAndHoldAtTime(n+r*.9),this.linearRampToValueAtTime(e,n+r),this}setTargetAtTime(e,n,r){const a=this._fromType(e);Te(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");const u=this.toSeconds(n);return this._assertRange(a),Te(isFinite(a)&&isFinite(u),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:r,time:u,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",e,u,r),this._param.setTargetAtTime(a,u,r),this}setValueCurveAtTime(e,n,r,a=1){r=this.toSeconds(r),n=this.toSeconds(n);const u=this._fromType(e[0])*a;this.setValueAtTime(this._toType(u),n);const h=r/(e.length-1);for(let d=1;d<e.length;d++){const f=this._fromType(e[d])*a;this.linearRampToValueAtTime(this._toType(f),n+d*h)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Te(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),r=this._fromType(this.getValueAtTime(n));Te(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+r);const a=this._events.get(n),u=this._events.getAfter(n);return a&&Dn(a.time,n)?u?(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):u&&(this._param.cancelScheduledValues(u.time),this._events.cancel(u.time),u.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),n):u.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),n)),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}rampTo(e,n=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,r):this.linearRampTo(e,n,r),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const r=this._events.get(n);if(r&&r.type==="setTargetAtTime"){const a=this._events.getAfter(r.time),u=a?a.time:n+2,h=(u-n)/10;for(let d=n;d<u;d+=h)e.linearRampToValueAtTime(this.getValueAtTime(d),d)}return this._events.forEachAfter(this.context.currentTime,a=>{a.type==="cancelScheduledValues"?e.cancelScheduledValues(a.time):a.type==="setTargetAtTime"?e.setTargetAtTime(a.value,a.time,a.constant):e[a.type](a.value,a.time)}),this}setParam(e){Te(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,r,a,u){return r+(n-r)*Math.exp(-(u-e)/a)}_linearInterpolate(e,n,r,a,u){return n+(a-n)*((u-e)/(r-e))}_exponentialInterpolate(e,n,r,a,u){return n*Math.pow(a/n,(u-e)/(r-e))}}class ye extends Ct{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Oe(this.input)?Tr(this.input)||this.input instanceof Pe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Oe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Oe(e)&&(e instanceof ye||Qs(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Te(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,r=0){return Ln(this,e,n,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Ao("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,r=0){return rg(this,e,n,r),this}chain(...e){return Cr(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Oe(this.input)&&(this.input instanceof ye?this.input.dispose():Qs(this.input)&&this.input.disconnect()),Oe(this.output)&&(this.output instanceof ye?this.output.dispose():Qs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Cr(...o){const e=o.shift();o.reduce((n,r)=>(n instanceof ye?n.connect(r):Qs(n)&&Ln(n,r),r),e)}function Ln(o,e,n=0,r=0){for(Te(Oe(o),"Cannot connect from undefined node"),Te(Oe(e),"Cannot connect to undefined node"),(e instanceof ye||Qs(e))&&Te(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Te(o.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof ye||e instanceof Pe;)Oe(e.input)&&(e=e.input);for(;o instanceof ye;)Oe(o.output)&&(o=o.output);Tr(e)?o.connect(e,n):o.connect(e,n,r)}function rg(o,e,n=0,r=0){if(Oe(e))for(;e instanceof ye;)e=e.input;for(;!Qs(o);)Oe(o.output)&&(o=o.output);Tr(e)?o.disconnect(e,n):Qs(e)?o.disconnect(e,n,r):o.disconnect()}class Ne extends ye{constructor(){const e=ge(Ne.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Pe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Le(this,"gain")}static getDefaults(){return Object.assign(ye.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class vi extends ye{constructor(e){super(e),this.onended=ze,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Ne({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const r=this.toSeconds(n);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(ye.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ze})}_startGain(e,n=1){Te(this._startTime===-1,"Source cannot be started more than once");const r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+r):this._gainNode.gain.exponentialApproachValueAtTime(n,e,r)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Te(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const r=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ze&&(this.onended(this),this.onended=ze,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Te(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=ze,this}}class wh extends vi{constructor(){const e=ge(wh.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Ln(this._source,this._gainNode),this.offset=new Pe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(vi.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class qe extends ye{constructor(){const e=ge(qe.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new wh({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ye.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,r=0){return Ll(this,e,n,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,r){return this._param.exponentialRampTo(e,n,r),this}linearRampTo(e,n,r){return this._param.linearRampTo(e,n,r),this}targetRampTo(e,n,r){return this._param.targetRampTo(e,n,r),this}exponentialApproachValueAtTime(e,n,r){return this._param.exponentialApproachValueAtTime(e,n,r),this}setTargetAtTime(e,n,r){return this._param.setTargetAtTime(e,n,r),this}setValueCurveAtTime(e,n,r,a){return this._param.setValueCurveAtTime(e,n,r,a),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,r){return this._param.rampTo(e,n,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Ll(o,e,n,r){(e instanceof Pe||Tr(e)||e instanceof qe&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof qe&&(e.overridden=!0)),Ln(o,e,n,r)}class xh extends Pe{constructor(){const e=ge(xh.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Tn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Pe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,r){n=this.toSeconds(n),this.setRampPoint(n);const a=this._fromType(e),u=this._events.get(n),h=Math.round(Math.max(1/r,1));for(let d=0;d<=h;d++){const f=r*d+n,m=this._exponentialApproach(u.time,u.value,a,r,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}setValueAtTime(e,n){const r=this.toSeconds(n);super.setValueAtTime(e,n);const a=this._events.get(r),u=this._events.previousEvent(a),h=this._getTicksUntilEvent(u,r);return a.ticks=Math.max(h,0),this}linearRampToValueAtTime(e,n){const r=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const a=this._events.get(r),u=this._events.previousEvent(a),h=this._getTicksUntilEvent(u,r);return a.ticks=Math.max(h,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const r=this._fromType(e),a=this._events.get(n),u=Math.round(Math.max((n-a.time)*10,1)),h=(n-a.time)/u;for(let d=0;d<=u;d++){const f=h*d+a.time,m=this._exponentialInterpolate(a.time,a.value,n,r,f);this.linearRampToValueAtTime(this._toType(m),f)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(kn(e.ticks)){const h=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(h,e.time)}const r=this._fromType(this.getValueAtTime(e.time));let a=this._fromType(this.getValueAtTime(n));const u=this._events.get(n);return u&&u.time===n&&u.type==="setValueAtTime"&&(a=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(r+a)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),r=this._events.get(n);return Math.max(this._getTicksUntilEvent(r,n),0)}getDurationOfTicks(e,n){const r=this.toSeconds(n),a=this.getTicksAtTime(n);return this.getTimeOfTick(a+e)-r}getTimeOfTick(e){const n=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&r&&r.type==="linearRampToValueAtTime"&&n.value!==r.value){const a=this._fromType(this.getValueAtTime(n.time)),h=(this._fromType(this.getValueAtTime(r.time))-a)/(r.time-n.time),d=Math.sqrt(Math.pow(a,2)-2*h*(n.ticks-e)),f=(-a+d)/h,m=(-a-d)/h;return(f>0?f:m)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const r=this.toSeconds(n),a=this.toSeconds(e),u=this.getTicksAtTime(r);return this.getTicksAtTime(r+a)-u}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class kh extends qe{constructor(){const e=ge(kh.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new xh({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Th extends Ct{constructor(){const e=ge(Th.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Fl,this._tickOffset=new Tn,this._ticksAtTime=new Tn,this._secondsAtTime=new Tn,this.frequency=new kh({context:this.context,units:e.units,value:e.frequency}),Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Ct.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),Oe(n)&&this.setTicksAtTime(n,r),this._ticksAtTime.cancel(r),this._secondsAtTime.cancel(r)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const r=this._state.get(n);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),r=this._state.getLastState("stopped",n),a=this._ticksAtTime.get(n),u={state:"paused",time:n};this._state.add(u);let h=a||r,d=a?a.ticks:0,f=null;return this._state.forEachBetween(h.time,n+this.sampleTime,m=>{let g=h.time;const v=this._tickOffset.get(m.time);v&&v.time>=h.time&&(d=v.ticks,g=v.time),h.state==="started"&&m.state!=="started"&&(d+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(g),m.time!==u.time&&(f={state:m.state,time:m.time,ticks:d})),h=m}),this._state.remove(u),f&&this._ticksAtTime.add(f),d}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),r=this.frequency.timeToTicks(e,n);this.setTicksAtTime(r,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);const a=this._secondsAtTime.get(e);let u=a||n,h=a?a.seconds:0,d=null;return this._state.forEachBetween(u.time,e+this.sampleTime,f=>{let m=u.time;const g=this._tickOffset.get(f.time);g&&g.time>=u.time&&(h=g.seconds,m=g.time),u.state==="started"&&f.state!=="started"&&(h+=f.time-m,f.time!==r.time&&(d={state:f.state,time:f.time,seconds:h})),u=f}),this._state.remove(r),d&&this._secondsAtTime.add(d),h}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const r=this._tickOffset.get(n),a=this._state.get(n),u=Math.max(r.time,a.time),h=this.frequency.getTicksAtTime(u)+e-r.ticks;return this.frequency.getTimeOfTick(h)}forEachTickBetween(e,n,r){let a=this._state.get(e);this._state.forEachBetween(e,n,h=>{a&&a.state==="started"&&h.state!=="started"&&this.forEachTickBetween(Math.max(a.time,e),h.time-this.sampleTime,r),a=h});let u=null;if(a&&a.state==="started"){const h=Math.max(a.time,e),d=this.frequency.getTicksAtTime(h),f=this.frequency.getTicksAtTime(a.time),m=d-f;let g=Math.ceil(m)-m;g=Dn(g,1)?0:g;let v=this.frequency.getTimeOfTick(d+g);for(;v<n;){try{r(v,Math.round(this.getTicksAtTime(v)))}catch(y){u=y;break}v+=this.frequency.getDurationOfTicks(1,v)}}if(u)throw u;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class jl extends Ct{constructor(){const e=ge(jl.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=ze,this._lastUpdate=0,this._state=new Fl("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Th({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Le(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Ct.getDefaults(),{callback:ze,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){Hm(this.context);const r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,n),r<this._lastUpdate&&this.emit("start",r,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const r=this.toSeconds(n),a=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(a+e,r)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,r=>{switch(r.state){case"started":const a=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,a);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,n,(r,a)=>{this.callback(r,a)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Oo.mixin(jl);class _o extends ye{constructor(){const e=ge(_o.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Pe({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Le(this,"delayTime")}static getDefaults(){return Object.assign(ye.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ci extends ye{constructor(){const e=ge(Ci.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Ne({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Le(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ch extends ye{constructor(){const e=ge(Ch.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ci({context:this.context}),this.output=new Ne({context:this.context}),this.volume=this.input.volume,Cr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Cr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ml(o=>{o.destination=new Ch({context:o})});Dl(o=>{o.destination.dispose()});class jx extends ye{constructor(){super(...arguments),this.name="Listener",this.positionX=new Pe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Pe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Pe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Pe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Pe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Pe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Pe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Pe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Pe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ye.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ml(o=>{o.listener=new jx({context:o})});Dl(o=>{o.listener.dispose()});class Sh extends _s{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ge(Sh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const r=e.urls[n];this.add(n,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ze,onload:ze,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Te(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,r=ze,a=ze){return gs(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Qe(this.baseUrl+n,r,a))):this._buffers.set(e.toString(),new Qe(n,r,a)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class _l extends Jt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return vr(super._frequencyToUnits(e))}_ticksToUnits(e){return vr(super._ticksToUnits(e))}_beatsToUnits(e){return vr(super._beatsToUnits(e))}_secondsToUnits(e){return vr(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return sg(this.toMidi())}transpose(e){return new _l(this.context,this.toMidi()+e)}}class yn extends fo{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Vx extends Ct{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Tn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ml(o=>{o.draw=new Vx({context:o})});Dl(o=>{o.draw.dispose()});class zx extends _s{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Te(Oe(e.time),"Events must have a time property"),Te(Oe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new qx(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const r of n)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let r,a=null;if(n>0)if(e.left.right===null)r=e.left,r.right=e.right,a=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,a=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,a=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,a=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),a&&this._rebalance(a)}e.dispose()}_rotateLeft(e){const n=e.parent,r=e.isLeftChild(),a=e.right;a&&(e.right=a.left,a.left=e),n!==null?r?n.left=a:n.right=a:this._setRoot(a)}_rotateRight(e){const n=e.parent,r=e.isLeftChild(),a=e.left;a&&(e.left=a.right,a.right=e),n!==null?r?n.left=a:n.right=a:this._setRoot(a)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let r=n[0];for(let a=1;a<n.length;a++)n[a].low>r.low&&(r=n[a]);return r.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(r=>n.push(r)),n.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const r=[];this._root.search(e,r),r.forEach(a=>{a.event&&n(a.event)})}return this}forEachFrom(e,n){if(this._root!==null){const r=[];this._root.searchAfter(e,r),r.forEach(a=>{a.event&&n(a.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class qx{constructor(e,n,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Wx extends _s{constructor(e){super(),this.name="TimelineValue",this._timeline=new Tn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Yn extends ye{constructor(){super(ge(Yn.getDefaults(),arguments,["context"]))}connect(e,n=0,r=0){return Ll(this,e,n,r),this}}class Ar extends Yn{constructor(){const e=ge(Ar.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,hn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):gx(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(qe.getDefaults(),{length:1024})}setMap(e,n=1024){const r=new Float32Array(n);for(let a=0,u=n;a<u;a++){const h=a/(u-1)*2-1;r[a]=e(h,a)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(r=>r.includes(e));Te(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class bh extends Yn{constructor(){const e=ge(bh.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Ar({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Yn.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Hs{constructor(e,n){this.id=Hs._eventId++,this._remainderTime=0;const r=Object.assign(Hs.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=Math.floor(r.time),this._remainderTime=r.time-this.time}static getDefaults(){return{callback:ze,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Hs._eventId=0;class Nh extends Hs{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const r=Object.assign(Nh.getDefaults(),n);this.duration=r.duration,this._interval=r.interval,this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Hs.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return gl(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new yn(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){gl(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new yn(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);gi(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Vl extends Ct{constructor(){const e=ge(Vl.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Wx(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Tn,this._repeatedEvents=new zx,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new jl({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Le(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Ct.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const r=n%(this._swingTicks*2)/(this._swingTicks*2),a=Math.sin(r*Math.PI)*this._swingAmount;e+=new yn(this.context,this._swingTicks*2/3).toSeconds()*a}Wp(!0),this._timeline.forEachAtTime(n,r=>r.invoke(e)),Wp(!1)}schedule(e,n){const r=new Hs(this,{callback:e,time:new fo(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,n,r,a=1/0){const u=new Nh(this,{callback:e,duration:new In(this.context,a).toTicks(),interval:new In(this.context,n).toTicks(),time:new fo(this.context,r).toTicks()});return this._addEvent(u,this._repeatedEvents)}scheduleOnce(e,n){const r=new Hs(this,{callback:e,once:!0,time:new fo(this.context,n).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(n,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new yn(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let r;return Oe(n)&&(r=this.toTicks(n)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){hn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new In(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new In(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new yn(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new yn(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),r=this._clock.frequency.timeToTicks(e,n);this.ticks=r}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const r=this._clock.getTicksAtTime(n),a=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,n),u=n+a;this.emit("stop",u),this._clock.setTicksAtTime(e,u),this.emit("start",u,this._clock.getSecondsAtTime(u))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),r=this.getTicksAtTime(n),a=e-r%e;return this._clock.nextTickTime(a,n)}}syncSignal(e,n){const r=this.now();let a=this.bpm,u=1/(60/a.getValueAtTime(r)/this.PPQ),h=[];if(e.units==="time"){const f=.015625/u,m=new Ne(f),g=new bh(-1),v=new Ne(f);a.chain(m,g,v),a=v,u=1/u,h=[m,g,v]}n||(e.getValueAtTime(r)!==0?n=e.getValueAtTime(r)/u:n=0);const d=new Ne(n);return a.connect(d),d.connect(e._param),h.push(d),this._syncedSignals.push({initial:e.value,nodes:h,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const r=this._syncedSignals[n];r.signal===e&&(r.nodes.forEach(a=>a.dispose()),r.signal.value=r.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),_h(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Oo.mixin(Vl);Ml(o=>{o.transport=new Vl({context:o})});Dl(o=>{o.transport.dispose()});class Wt extends ye{constructor(e){super(e),this.input=void 0,this._state=new Fl("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ze,this._syncedStop=ze,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ci({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,onstop:ze,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,r){let a=kn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(a=this._clampToCurrentTime(a),!this._synced&&this._state.getValueAtTime(a)==="started")Te(gi(a,this._state.get(a).time),"Start time must be strictly greater than previous start time"),this._state.cancel(a),this._state.setStateAtTime("started",a),this.log("restart",a),this.restart(a,n,r);else if(this.log("start",a),this._state.setStateAtTime("started",a),this._synced){const u=this._state.get(a);u&&(u.offset=this.toSeconds(wr(n,0)),u.duration=r?this.toSeconds(r):void 0);const h=this.context.transport.schedule(d=>{this._start(d,n,r)},a);this._scheduled.push(h),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>a&&this._syncedStart(this.now(),this.context.transport.seconds)}else Hm(this.context),this._start(a,n,r);return this}stop(e){let n=kn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Oe(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const r=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(r)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(gi(n,0)){const r=this._state.get(n);if(r&&r.state==="started"&&r.time!==n){const a=n-this.toSeconds(r.time);let u;r.duration&&(u=this.toSeconds(r.duration)-a),this._start(e,this.toSeconds(r.offset)+a,u)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ze,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Do extends vi{constructor(){const e=ge(Do.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Ln(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Pe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Qe(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(vi.getDefaults(),{url:new Qe,loop:!1,loopEnd:0,loopStart:0,onload:ze,onerror:ze,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,r,a=1){Te(this.buffer.loaded,"buffer is either not set or not loaded");const u=this.toSeconds(e);this._startGain(u,a),this.loop?n=wr(n,this.loopStart):n=wr(n,0);let h=Math.max(this.toSeconds(n),0);if(this.loop){const d=this.toSeconds(this.loopEnd)||this.buffer.duration,f=this.toSeconds(this.loopStart),m=d-f;Zc(h,d)&&(h=(h-f)%m+f),Dn(h,this.buffer.duration)&&(h=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,gl(h,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,h)),Oe(r)){let d=this.toSeconds(r);d=Math.max(d,0),this.stop(u+d)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class yo extends Wt{constructor(){const e=ge(yo.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Wt.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Te(e in Bp,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Bp[this._type];this._source=new Do({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const oi=44100*5,jc=2,ds={brown:null,pink:null,white:null},Bp={get brown(){if(!ds.brown){const o=[];for(let e=0;e<jc;e++){const n=new Float32Array(oi);o[e]=n;let r=0;for(let a=0;a<oi;a++){const u=Math.random()*2-1;n[a]=(r+.02*u)/1.02,r=n[a],n[a]*=3.5}}ds.brown=new Qe().fromArray(o)}return ds.brown},get pink(){if(!ds.pink){const o=[];for(let e=0;e<jc;e++){const n=new Float32Array(oi);o[e]=n;let r,a,u,h,d,f,m;r=a=u=h=d=f=m=0;for(let g=0;g<oi;g++){const v=Math.random()*2-1;r=.99886*r+v*.0555179,a=.99332*a+v*.0750759,u=.969*u+v*.153852,h=.8665*h+v*.3104856,d=.55*d+v*.5329522,f=-.7616*f-v*.016898,n[g]=r+a+u+h+d+f+m+v*.5362,n[g]*=.11,m=v*.115926}}ds.pink=new Qe().fromArray(o)}return ds.pink},get white(){if(!ds.white){const o=[];for(let e=0;e<jc;e++){const n=new Float32Array(oi);o[e]=n;for(let r=0;r<oi;r++)n[r]=Math.random()*2-1}ds.white=new Qe().fromArray(o)}return ds.white}};function Or(o,e){return ft(this,void 0,void 0,function*(){const n=e/o.context.sampleRate,r=new Il(1,n,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}class Eh extends vi{constructor(){const e=ge(Eh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Ln(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Pe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Pe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Le(this,["frequency","detune"])}static getDefaults(){return Object.assign(vi.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class at extends Wt{constructor(){const e=ge(at.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new qe({context:this.context,units:"frequency",value:e.frequency}),Le(this,"frequency"),this.detune=new qe({context:this.context,units:"cents",value:e.detune}),Le(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),r=new Eh({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return at._periodicWaveCache.find(n=>n.phase===this._phase&&bx(n.partials,this._partials));{const e=at._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const r=this._getCachedPeriodicWave();if(Oe(r)){const{partials:a,wave:u}=r;this._wave=u,this._partials=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[a,u]=this._getRealImaginary(e,this._phase),h=this.context.createPeriodicWave(a,u);this._wave=h,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),at._periodicWaveCache.push({imag:u,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:a,type:this._type,wave:this._wave}),at._periodicWaveCache.length>100&&at._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){cn(e,0);let n=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(n=r[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const a=new Float32Array(e);this._partials.forEach((u,h)=>a[h]=u),this._partials=Array.from(a),this.type=this._type}}_getRealImaginary(e,n){let a=2048;const u=new Float32Array(a),h=new Float32Array(a);let d=1;if(e==="custom"){if(d=this._partials.length+1,this._partialCount=this._partials.length,a=d,this._partials.length===0)return[u,h]}else{const f=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);f?(d=parseInt(f[2],10)+1,this._partialCount=parseInt(f[2],10),e=f[1],d=Math.max(d,2),a=d):this._partialCount=0,this._partials=[]}for(let f=1;f<a;++f){const m=2/(f*Math.PI);let g;switch(e){case"sine":g=f<=d?1:0,this._partials[f-1]=g;break;case"square":g=f&1?2*m:0,this._partials[f-1]=g;break;case"sawtooth":g=m*(f&1?1:-1),this._partials[f-1]=g;break;case"triangle":f&1?g=2*(m*m)*(f-1>>1&1?-1:1):g=0,this._partials[f-1]=g;break;case"custom":g=this._partials[f-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}g!==0?(u[f]=-g*Math.sin(n*f),h[f]=g*Math.cos(n*f)):(u[f]=0,h[f]=0)}return[u,h]}_inverseFFT(e,n,r){let a=0;const u=e.length;for(let h=0;h<u;h++)a+=e[h]*Math.cos(h*r)+n[h]*Math.sin(h*r);return a}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let r=0;const a=Math.PI*2,u=32;for(let h=0;h<u;h++)r=Math.max(this._inverseFFT(e,n,h/u*a),r);return Ex(-this._inverseFFT(e,n,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}at._periodicWaveCache=[];class ig extends Yn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ar({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Sr extends qe{constructor(){const e=ge(Sr.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Ne({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(qe.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class zl extends Wt{constructor(){const e=ge(zl.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new ig({context:this.context}),this._modulationNode=new Ne({context:this.context}),this._carrier=new at({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new at({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Sr({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Le(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(at.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class ql extends Wt{constructor(){const e=ge(ql.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Ne({context:this.context,gain:0}),this._carrier=new at({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new qe({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new at({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Sr({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Sr({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Le(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(at.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Io extends Wt{constructor(){const e=ge(Io.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Ne({context:this.context,gain:0}),this._thresh=new Ar({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new qe({context:this.context,units:"audioRange",value:e.width}),this._triangle=new at({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Le(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Wl extends Wt{constructor(){const e=ge(Wl.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new qe({context:this.context,units:"frequency",value:e.frequency}),this.detune=new qe({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Le(this,["frequency","detune"])}static getDefaults(){return Object.assign(at.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,r=e/(this._oscillators.length-1);this._forEach((a,u)=>a.detune.value=n+r*u)}}get count(){return this._oscillators.length}set count(e){if(cn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const r=new at({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):ze});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,r)=>n.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Bl extends Wt{constructor(){const e=ge(Bl.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Sr({context:this.context,value:2}),this._pulse=new Io({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new at({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Le(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Wt.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Up={am:zl,fat:Wl,fm:ql,oscillator:at,pulse:Io,pwm:Bl};class yl extends Wt{constructor(){const e=ge(yl.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new qe({context:this.context,units:"frequency",value:e.frequency}),this.detune=new qe({context:this.context,units:"cents",value:e.detune}),Le(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(at.getDefaults(),ql.getDefaults(),zl.getDefaults(),Wl.getDefaults(),Io.getDefaults(),Bl.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Up[e],r=this.now();if(this._oscillator){const a=this._oscillator;a.stop(r),this.context.setTimeout(()=>a.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Up[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Fn(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Fn(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&gs(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ft(this,arguments,void 0,function*(e=1024){return Or(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Rh extends qe{constructor(){super(ge(Rh.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Ne({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Cr(this._constantSource,this._sum)}static getDefaults(){return Object.assign(qe.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Ul extends Yn{constructor(){const e=ge(Ul.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Sr({context:this.context,value:e.max-e.min}),this._add=this.output=new Rh({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Yn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Ah extends Yn{constructor(){super(ge(Ah.getDefaults(),arguments)),this.name="Zero",this._gain=new Ne({context:this.context}),this.output=this._gain,this.input=void 0,Ln(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),rg(this.context.getConstant(0),this._gain),this}}class br extends ye{constructor(){const e=ge(br.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Pe.prototype._fromType,this._toType=Pe.prototype._toType,this._is=Pe.prototype._is,this._clampValue=Pe.prototype._clampValue,this._oscillator=new at(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Ne({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new qe({context:this.context,units:"audioRange",value:0}),this._zeros=new Ah({context:this.context}),this._a2g=new ig({context:this.context}),this._scaler=this.output=new Ul({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Le(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(at.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,r=this.max;this._units=e,this.min=n,this.max=r}get state(){return this._oscillator.state}connect(e,n,r){return(e instanceof Pe||e instanceof qe)&&(this.convert=e.convert,this.units=e.units),Ll(this,e,n,r),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function og(o,e=1/0){const n=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(u){cn(u,o,e),n.set(this,u)}})}}function ys(o,e=1/0){const n=new WeakMap;return function(r,a){Reflect.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(u){cn(this.toSeconds(u),o,e),n.set(this,u)}})}}class $l extends Wt{constructor(){const e=ge($l.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Qe({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Wt.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ze,onerror:ze,playbackRate:1,reverse:!1})}load(e){return ft(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ze){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,r){return super.start(e,n,r),this}_start(e,n,r){this._loop?n=wr(n,this._loopStart):n=wr(n,0);const a=this.toSeconds(n),u=r;r=wr(r,Math.max(this._buffer.duration-a,0));let h=this.toSeconds(r);h=h/this._playbackRate,e=this.toSeconds(e);const d=new Do({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+h),this._state.setStateAtTime("stopped",e+h,{implicitEnd:!0})),this._activeSources.add(d),this._loop&&kn(u)?d.start(e,a):d.start(e,a,h-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(n))}restart(e,n,r){return super.restart(e,n,r),this}_restart(e,n,r){var a;(a=[...this._activeSources].pop())===null||a===void 0||a.stop(e),this._start(e,n,r)}seek(e,n){const r=this.toSeconds(n);if(this._state.getValueAtTime(r)==="started"){const a=this.toSeconds(e);this._stop(r),this._start(r,a)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&cn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&cn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),r=this._state.getNextState("stopped",n);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(a=>a.cancelStop())),this._activeSources.forEach(a=>{a.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}zn([ys(0)],$l.prototype,"fadeIn",void 0);zn([ys(0)],$l.prototype,"fadeOut",void 0);class Bx extends Yn{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Ar({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ws extends ye{constructor(){const e=ge(ws.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new qe({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(ye.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(gs(e))return e;{let r;for(r in rl)if(rl[r][n]===e)return r;return e}}_setCurve(e,n,r){if(gs(r)&&Reflect.has(rl,r)){const a=rl[r];_r(a)?e!=="_decayCurve"&&(this[e]=a[n]):this[e]=a}else if(hn(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let a=this.toSeconds(this.attack);const u=this.toSeconds(this.decay),h=this.getValueAtTime(e);if(h>0){const d=1/a;a=(1-h)/d}if(a<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,a,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,a,e);else{this._sig.cancelAndHoldAtTime(e);let d=this._attackCurve;for(let f=1;f<d.length;f++)if(d[f-1]<=h&&h<=d[f]){d=this._attackCurve.slice(f),d[0]=h;break}this._sig.setValueCurveAtTime(d,e,a,n)}if(u&&this.sustain<1){const d=n*this.sustain,f=e+a;this.log("decay",f),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(d,u+f):this._sig.exponentialApproachValueAtTime(d,f,u)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(Te(hn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,r=1){return n=this.toSeconds(n),this.triggerAttack(n,r),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,r=0){return Ll(this,e,n,r),this}asArray(){return ft(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,r=new Il(1,n,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),u=a+this.toSeconds(this.release),h=u*.1,d=u+h,f=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/d,decay:n*this.toSeconds(this.decay)/d,release:n*this.toSeconds(this.release)/d,context:r}));return f._sig.toDestination(),f.triggerAttackRelease(n*(a+h)/d,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}zn([ys(0)],ws.prototype,"attack",void 0);zn([ys(0)],ws.prototype,"decay",void 0);zn([og(0,1)],ws.prototype,"sustain",void 0);zn([ys(0)],ws.prototype,"release",void 0);const rl=(()=>{let e,n;const r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));const a=[],u=6.4;for(e=0;e<127;e++){n=e/127;const y=Math.sin(n*(Math.PI*2)*u-Math.PI/2)+1;a[e]=y/10+n*.83}a[127]=1;const h=[],d=5;for(e=0;e<128;e++)h[e]=Math.ceil(e/127*d)/d;const f=[];for(e=0;e<128;e++)n=e/127,f[e]=.5*(1-Math.cos(Math.PI*n));const m=[];for(e=0;e<128;e++){n=e/127;const y=Math.pow(n,3)*4+.2,x=Math.cos(y*Math.PI*2*n);m[e]=Math.abs(x*(1-n))}function g(y){const x=new Array(y.length);for(let w=0;w<y.length;w++)x[w]=1-y[w];return x}function v(y){return y.slice(0).reverse()}return{bounce:{In:g(m),Out:m},cosine:{In:r,Out:v(r)},exponential:"exponential",linear:"linear",ripple:{In:a,Out:g(a)},sine:{In:f,Out:g(f)},step:{In:h,Out:g(h)}}})();class Gs extends ye{constructor(){const e=ge(Gs.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Ci({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Le(this,"volume")}static getDefaults(){return Object.assign(ye.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const r=this["_original_"+e]=this[e];this[e]=(...a)=>{const u=a[n],h=this.context.transport.schedule(d=>{a[n]=d,r.apply(this,a)},u);this._scheduledEvents.push(h)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,r,a){const u=this.toSeconds(r),h=this.toSeconds(n);return this.triggerAttack(e,u,a),this.triggerRelease(u+h),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Nr extends Gs{constructor(){const e=ge(Nr.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Gs.getDefaults(),{detune:0,onsilence:ze,portamento:0})}triggerAttack(e,n,r=1){this.log("triggerAttack",e,n,r);const a=this.toSeconds(n);return this._triggerEnvelopeAttack(a,r),this.setNote(e,a),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const r=this.toSeconds(n),a=e instanceof Jt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){const u=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(a,u,r)}else this.frequency.setValueAtTime(a,r);return this}}zn([ys(0)],Nr.prototype,"portamento",void 0);class wo extends ws{constructor(){super(ge(wo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Ne({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}let wl=class ag extends Nr{constructor(){const e=ge(ag.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new yl(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new wo(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Le(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Nr.getDefaults(),{envelope:Object.assign(Xc(ws.getDefaults(),Object.keys(ye.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Xc(yl.getDefaults(),[...Object.keys(Wt.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const r=this.toSeconds(this.envelope.attack),a=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+a)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};class xl extends ye{constructor(){const e=ge(xl.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Pe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Pe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Pe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Pe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(ye.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Te(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let h=0;h<e;h++){const f=Math.pow(h/e,2)*19980+20;n[h]=f}const r=new Float32Array(e),a=new Float32Array(e),u=this.context.createBiquadFilter();return u.type=this.type,u.Q.value=this.Q.value,u.frequency.value=this.frequency.value,u.gain.value=this.gain.value,u.getFrequencyResponse(n,r,a),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class kl extends ye{constructor(){const e=ge(kl.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Ne({context:this.context}),this.output=new Ne({context:this.context}),this._filters=[],this._filters=[],this.Q=new qe({context:this.context,units:"positive",value:e.Q}),this.frequency=new qe({context:this.context,units:"frequency",value:e.frequency}),this.detune=new qe({context:this.context,units:"cents",value:e.detune}),this.gain=new qe({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Le(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ye.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Te(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=Fn(e)?e:parseInt(e,10),r=[-12,-24,-48,-96];let a=r.indexOf(n);Te(a!==-1,`rolloff can only be ${r.join(", ")}`),a+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(u=>u.disconnect()),this._filters=new Array(a);for(let u=0;u<a;u++){const h=new xl({context:this.context});h.type=this._type,this.frequency.connect(h.frequency),this.detune.connect(h.detune),this.Q.connect(h.Q),this.gain.connect(h.gain),this._filters[u]=h}this._internalChannels=this._filters,Cr(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new xl({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((u,h)=>r[h]*=u)}),n.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),_h(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Ql extends wl{constructor(){const e=ge(Ql.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Le(this,["oscillator","envelope"])}static getDefaults(){return yr(Nr.getDefaults(),wl.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const r=this.toSeconds(n),a=this.toFrequency(e instanceof Jt?e.toFrequency():e),u=a*this.octaves;return this.oscillator.frequency.setValueAtTime(u,r),this.oscillator.frequency.exponentialRampToValueAtTime(a,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}zn([og(0)],Ql.prototype,"octaves",void 0);zn([ys(0)],Ql.prototype,"pitchDecay",void 0);const lg=new Set;function Oh(o){lg.add(o)}function ug(o,e){const n=`registerProcessor("${o}", ${e})`;lg.add(n)}const Ux=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Oh(Ux);const $x=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Oh($x);const Qx=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Oh(Qx);const Hx="feedback-comb-filter",Gx=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ug(Hx,Gx);class Mh extends Gs{constructor(){const e=ge(Mh.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=a=>this.releaseAll(a),Te(!Fn(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Gs.getDefaults(),{maxPolyphony:32,options:{},voice:wl})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return Te(e instanceof Nr,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else Ao("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,r){e.forEach(a=>{const u=new _l(this.context,a).toMidi(),h=this._getNextAvailableVoice();h&&(h.triggerAttack(a,n,r),this._activeVoices.push({midi:u,voice:h,released:!1}),this.log("triggerAttack",a,n))})}_triggerRelease(e,n){e.forEach(r=>{const a=new _l(this.context,r).toMidi(),u=this._activeVoices.find(({midi:h,released:d})=>h===a&&!d);u&&(u.voice.triggerRelease(n),u.released=!0,this.log("triggerRelease",r,n))})}_scheduleEvent(e,n,r,a){Te(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(n,r,a):this._triggerRelease(n,r):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,r,a)},r-this.now())}triggerAttack(e,n,r){Array.isArray(e)||(e=[e]);const a=this.toSeconds(n);return this._scheduleEvent("attack",e,a,r),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const r=this.toSeconds(n);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,n,r,a){const u=this.toSeconds(r);if(this.triggerAttack(e,u,a),hn(n)){Te(hn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let h=0;h<e.length;h++){const d=n[Math.min(h,n.length-1)],f=this.toSeconds(d);Te(f>0,"The duration must be greater than 0"),this.triggerRelease(e[h],u+f)}}else{const h=this.toSeconds(n);Te(h>0,"The duration must be greater than 0"),this.triggerRelease(e,u+h)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=Xc(e,["onsilence","context"]);return this.options=yr(this.options,n),this._voices.forEach(r=>r.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Hl extends Gs{constructor(){const e=ge(Hl.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(r=>{const a=parseInt(r,10);if(Te(sl(r)||Fn(a)&&isFinite(a),`url key is neither a note or midi pitch: ${r}`),sl(r)){const u=new Jt(this.context,r).toMidi();n[u]=e.urls[r]}else Fn(a)&&isFinite(a)&&(n[a]=e.urls[a])}),this._buffers=new Sh({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Gs.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ze,onerror:ze,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,r=1){return this.log("triggerAttack",e,n,r),Array.isArray(e)||(e=[e]),e.forEach(a=>{const u=ng(new Jt(this.context,a).toFrequency()),h=Math.round(u),d=u-h,f=this._findClosest(h),m=h-f,g=this._buffers.get(m),v=tg(f+d),y=new Do({url:g,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:v}).connect(this.output);y.start(n,0,g.duration/v,r),hn(this._activeSources.get(h))||this._activeSources.set(h,[]),this._activeSources.get(h).push(y),y.onended=()=>{if(this._activeSources&&this._activeSources.has(h)){const x=this._activeSources.get(h),w=x.indexOf(y);w!==-1&&x.splice(w,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(r=>{const a=new Jt(this.context,r).toMidi();if(this._activeSources.has(a)&&this._activeSources.get(a).length){const u=this._activeSources.get(a);n=this.toSeconds(n),u.forEach(h=>{h.stop(n)}),this._activeSources.set(a,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,r,a=1){const u=this.toSeconds(r);return this.triggerAttack(e,u,a),hn(n)?(Te(hn(e),"notes must be an array when duration is array"),e.forEach((h,d)=>{const f=n[Math.min(d,n.length-1)];this.triggerRelease(h,u+this.toSeconds(f))})):this.triggerRelease(e,u+this.toSeconds(n)),this}add(e,n,r){if(Te(sl(e)||isFinite(e),`note must be a pitch or midi: ${e}`),sl(e)){const a=new Jt(this.context,e).toMidi();this._buffers.add(a,n,r)}else this._buffers.add(e,n,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}zn([ys(0)],Hl.prototype,"attack",void 0);zn([ys(0)],Hl.prototype,"release",void 0);class Dh extends Ct{constructor(){const e=ge(Dh.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Fl("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Ct.getDefaults(),{callback:ze,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let r;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const a=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Fn(this._loop)&&this._loop>1){r=1/0,Fn(this._loop)&&(r=this._loop*this._getLoopDuration());const u=this._state.getAfter(a);u!==null&&(r=Math.min(r,u.time-a)),r!==1/0&&(r=new yn(this.context,r));const h=new yn(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),h,new yn(this.context,a),r)}else n.id=this.context.transport.schedule(this._tick.bind(this),new yn(this.context,a))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const r=this._state.getBefore(n);let a=n;r!==null&&(a=r.time),this._rescheduleEvents(a)}return this}cancel(e){e=wr(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,r=>{this.context.transport.clear(r.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let r=.02;Qm(this.humanize)||(r=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*r}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new yn(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new yn(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const r=this._getLoopDuration();return(e-n.time)%r/r}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Ih extends Ct{constructor(){const e=ge(Ih.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new Dh({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(Ct.getDefaults(),{interval:"4n",callback:ze,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class Gl extends ye{constructor(){const e=ge(Gl.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new Bx({context:this.context}),this.a=new Ne({context:this.context,gain:0}),this.b=new Ne({context:this.context,gain:0}),this.output=new Ne({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new qe({context:this.context,units:"normalRange",value:e.fade}),Le(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",Ln(this._split,this.a.gain,0),Ln(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ye.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class _i extends ye{constructor(e){super(e),this.name="Effect",this._dryWet=new Gl({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Ne({context:this.context}),this.effectReturn=new Ne({context:this.context}),this.input=new Ne({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Le(this,"wet")}static getDefaults(){return Object.assign(ye.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class Ph extends ye{constructor(){const e=ge(Ph.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Pe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Le(this,"pan")}static getDefaults(){return Object.assign(ye.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Yx="bit-crusher",Xx=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ug(Yx,Xx);class Po extends ye{constructor(){const e=ge(Po.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ye.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Fo extends ye{constructor(){const e=ge(Fo.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(ye.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Tl extends ye{constructor(e){super(e),this.name="StereoEffect",this.input=new Ne({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new Gl({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Po({context:this.context,channels:2}),this._merge=new Fo({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Le(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Cr(...e),Ln(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Cr(...e),Ln(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ye.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class $p extends Tl{constructor(e){super(e),this.feedback=new qe({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Ne({context:this.context}),this._feedbackR=new Ne({context:this.context}),this._feedbackSplit=new Po({context:this.context,channels:2}),this._feedbackMerge=new Fo({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Le(this,["feedback"])}static getDefaults(){return Object.assign(Tl.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Fh extends $p{constructor(){const e=ge(Fh.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new br({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new br({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new _o({context:this.context}),this._delayNodeR=new _o({context:this.context}),this.frequency=this._lfoL.frequency,Le(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign($p.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Lh extends _i{constructor(){const e=ge(Lh.getDefaults(),arguments,["distortion"]);super(e),this.name="Distortion",this._shaper=new Ar({context:this.context,length:4096}),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample}static getDefaults(){return Object.assign(_i.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(e){this._distortion=e;const n=e*100,r=Math.PI/180;this._shaper.setMap(a=>Math.abs(a)<.001?0:(3+n)*a*20*r/(Math.PI+n*Math.abs(a)))}get oversample(){return this._shaper.oversample}set oversample(e){this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Qp extends _i{constructor(e){super(e),this.name="FeedbackEffect",this._feedbackGain=new Ne({context:this.context,gain:e.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Le(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(_i.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class jh extends Qp{constructor(){const e=ge(jh.getDefaults(),arguments,["delayTime","feedback"]);super(e),this.name="FeedbackDelay",this._delayNode=new _o({context:this.context,delayTime:e.delayTime,maxDelay:e.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Le(this,"delayTime")}static getDefaults(){return Object.assign(Qp.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Vh extends Tl{constructor(){const e=ge(Vh.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);super(e),this.name="Phaser",this._lfoL=new br({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new br({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(e.baseFrequency),this._octaves=e.octaves,this.Q=new qe({context:this.context,value:e.Q,units:"positive"}),this._filtersL=this._makeFilters(e.stages,this._lfoL),this._filtersR=this._makeFilters(e.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),Le(this,["frequency","Q"])}static getDefaults(){return Object.assign(Tl.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(e,n){const r=[];for(let a=0;a<e;a++){const u=this.context.createBiquadFilter();u.type="allpass",this.Q.connect(u.Q),n.connect(u.frequency),r.push(u)}return r}get octaves(){return this._octaves}set octaves(e){this._octaves=e;const n=this._baseFrequency*Math.pow(2,e);this._lfoL.max=n,this._lfoR.max=n}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(e=>e.disconnect()),this._filtersR.forEach(e=>e.disconnect()),this.frequency.dispose(),this}}class zh extends _i{constructor(){const e=ge(zh.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const n=this.toSeconds(e.decay);cn(n,.001),this._decay=n;const r=this.toSeconds(e.preDelay);cn(r,0),this._preDelay=r,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(_i.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),cn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),cn(e,0),this._preDelay=e,this.generate()}generate(){return ft(this,void 0,void 0,function*(){const e=this.ready,n=new Il(2,this._decay+this._preDelay,this.context.sampleRate),r=new yo({context:n}),a=new yo({context:n}),u=new Fo({context:n});r.connect(u,0,0),a.connect(u,0,1);const h=new Ne({context:n}).toDestination();u.connect(h),r.start(0),a.start(0),h.gain.setValueAtTime(0,0),h.gain.setValueAtTime(1,this._preDelay),h.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const d=n.render();return this.ready=d.then(ze),yield e,this._convolver.buffer=(yield d).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Lo extends ye{constructor(){const e=ge(Lo.getDefaults(),arguments,["type","size"]);super(e),this.name="Analyser",this._analysers=[],this._buffers=[],this.input=this.output=this._gain=new Ne({context:this.context}),this._split=new Po({context:this.context,channels:e.channels}),this.input.connect(this._split),cn(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(ye.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const r=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(r):this._type==="waveform"&&e.getFloatTimeDomainData(r)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,r)=>{n.fftSize=e*2,this._buffers[r]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){Te(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class xo extends ye{constructor(){super(ge(xo.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Lo({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class qh extends xo{constructor(){const e=ge(qh.getDefaults(),arguments,["smoothing"]);super(e),this.name="Meter",this.input=this.output=this._analyser=new Lo({context:this.context,size:256,type:"waveform",channels:e.channelCount}),this.smoothing=e.smoothing,this.normalRange=e.normalRange,this._rms=new Array(e.channelCount),this._rms.fill(0)}static getDefaults(){return Object.assign(xo.getDefaults(),{smoothing:.8,normalRange:!1,channelCount:1})}getLevel(){return Ao("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const e=this._analyser.getValue(),r=(this.channels===1?[e]:e).map((a,u)=>{const h=a.reduce((f,m)=>f+m*m,0),d=Math.sqrt(h/a.length);return this._rms[u]=Math.max(d,this._rms[u]*this.smoothing),this.normalRange?this._rms[u]:eg(this._rms[u])});return this.channels===1?r[0]:r}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Wh extends xo{constructor(){const e=ge(Wh.getDefaults(),arguments,["size"]);super(e),this.name="FFT",this.normalRange=e.normalRange,this._analyser.type="fft",this.size=e.size}static getDefaults(){return Object.assign(ye.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(n=>this.normalRange?vl(n):n)}get size(){return this._analyser.size}set size(e){this._analyser.size=e}get smoothing(){return this._analyser.smoothing}set smoothing(e){this._analyser.smoothing=e}getFrequencyOfIndex(e){return Te(0<=e&&e<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),e*this.context.sampleRate/(this.size*2)}}class gt extends ye{constructor(){const e=ge(gt.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Ne({context:this.context}),gt._allSolos.has(this.context)||gt._allSolos.set(this.context,new Set),gt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(ye.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),gt._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){gt._soloed.has(this.context)||gt._soloed.set(this.context,new Set),gt._soloed.get(this.context).add(this)}_removeSolo(){gt._soloed.has(this.context)&&gt._soloed.get(this.context).delete(this)}_isSoloed(){return gt._soloed.has(this.context)&&gt._soloed.get(this.context).has(this)}_noSolos(){return!gt._soloed.has(this.context)||gt._soloed.has(this.context)&&gt._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),gt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}gt._allSolos=new Map;gt._soloed=new Map;class Bh extends ye{constructor(){const e=ge(Bh.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Ph({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ci({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Le(this,["pan","volume"])}static getDefaults(){return Object.assign(ye.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class ui extends ye{constructor(){const e=ge(ui.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new gt({solo:e.solo,context:this.context}),this._panVol=this.output=new Bh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Le(this,["pan","volume"])}static getDefaults(){return Object.assign(ye.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return ui.buses.has(e)||ui.buses.set(e,new Ne({context:this.context})),ui.buses.get(e)}send(e,n=0){const r=this._getBus(e),a=new Ne({context:this.context,units:"decibels",gain:n});return this.connect(a),a.connect(r),a}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}ui.buses=new Map;function fs(){return qt().now()}qt().transport;function ln(){return qt().transport}qt().destination;qt().destination;function Zx(){return qt().destination}qt().listener;qt().draw;qt();const dt={volume:-12,attack:.01,release:.3,waveform:"sawtooth",octave:3,mono:!1},ot={lowpass:{frequency:2e4,Q:1},highpass:{frequency:20,Q:1},reverb:{decay:1.5,wet:0},delay:{time:.25,feedback:.3,wet:0},distortion:{amount:0,wet:.5}},hi={rate:2,depth:0,waveform:"sine"},Kx=[{target:"filterCutoff",amount:0,enabled:!1}],xn={waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},Cl={enabled:!1,time:.1},wn={attack:.01,decay:.2,sustain:.5,release:.3,amount:0},xr={rate:1.5,depth:.5,wet:0},di={rate:.5,depth:.5,wet:0},cg={enabled:!1,pattern:"up",rate:"1/8",octaves:1},Yl={bpm:120},Uh=2,ci={FILTER_ENV_MAX_SWEEP_HZ:8e3,LFO_FILTER_MAX_RANGE_HZ:5e3,KNOB_DRAG_SENSITIVITY_PX:150,HIGHPASS_MAX_FREQ_HZ:5e3,DEFAULT_RAMP_TIME:.1};function Jx(){const[o,e]=S.useState({isInitialized:!1,activeNotes:0}),n=S.useRef(null),r=S.useRef(null),a=S.useRef(null),u=S.useRef(null),h=S.useRef(null),d=S.useRef(null),f=S.useRef(null),m=S.useRef(null),g=S.useRef(null),v=S.useRef(null),y=S.useRef(null),x=S.useRef(null),w=S.useRef(null),k=S.useRef(null),T=S.useRef(null),R=S.useRef(null),q=S.useRef(null),z=S.useRef(null),B=S.useRef(null),N=S.useRef(null),I=S.useRef(null),L=S.useRef(null),M=S.useRef(null),X=S.useRef(null),U=S.useRef(new Set),H=S.useRef(440),Q=S.useRef(dt.octave),ne=S.useRef(Cl.enabled),se=S.useRef(Cl.time),de=S.useRef(0),le=S.useRef(2),ie=S.useRef(xn.subOscOctave),G=S.useRef(wn.amount),Z=S.useRef(dt.waveform),Y=S.useRef(dt.mono),E=S.useRef([]),F=S.useRef(!1),re=S.useRef(null),ce=S.useCallback(async()=>{o.isInitialized||(await Dx(),x.current=new Ne(1),n.current=new Mh(wl,{oscillator:{type:dt.waveform},envelope:{attack:dt.attack,decay:.1,sustain:.9,release:dt.release}}),n.current.maxPolyphony=4,n.current.connect(x.current),r.current=new at({type:"sine",frequency:220}),a.current=new Ne(xn.subOscLevel),u.current=new wo({attack:dt.attack,decay:.1,sustain:.9,release:dt.release}),r.current.connect(u.current),u.current.connect(a.current),a.current.connect(x.current),h.current=new yo(xn.noiseType),d.current=new Ne(xn.noiseLevel),f.current=new wo({attack:dt.attack,decay:.1,sustain:.9,release:dt.release}),h.current.connect(f.current),f.current.connect(d.current),d.current.connect(x.current),m.current=new ws({attack:wn.attack,decay:wn.decay,sustain:wn.sustain,release:wn.release}),g.current=new Ul(0,wn.amount*ci.FILTER_ENV_MAX_SWEEP_HZ),m.current.connect(g.current),v.current=new br({frequency:hi.rate,min:-1,max:1,type:hi.waveform}),y.current=new Ne(hi.depth),re.current=new Ne(0),R.current=new qe({value:ot.lowpass.frequency,units:"frequency"}),k.current=new kl({frequency:0,type:"lowpass",Q:ot.lowpass.Q}),R.current.connect(k.current.frequency),T.current=new kl({frequency:ot.highpass.frequency,type:"highpass",Q:ot.highpass.Q}),q.current=new Lh({distortion:ot.distortion.amount,wet:ot.distortion.wet}),z.current=new Fh({frequency:xr.rate,depth:xr.depth,wet:xr.wet}),B.current=new Vh({frequency:di.rate,octaves:3,baseFrequency:350,wet:di.wet}),N.current=new jh({delayTime:ot.delay.time,feedback:ot.delay.feedback,wet:ot.delay.wet}),I.current=new zh({decay:ot.reverb.decay,wet:ot.reverb.wet}),L.current=new qh,M.current=new Lo("waveform",256),X.current=new Wh(256),w.current=new Ne(vl(dt.volume)),v.current.connect(y.current),y.current.connect(re.current),re.current.connect(k.current.frequency),g.current.connect(k.current.frequency),x.current.chain(k.current,T.current,q.current,z.current,B.current,N.current,I.current,w.current,L.current,M.current,X.current,Zx()),r.current.start(),h.current.start(),v.current.start(),z.current.start(),e({isInitialized:!0,activeNotes:0}))},[o.isInitialized]),J=S.useCallback($=>{const De=de.current*le.current;return $*Math.pow(2,De/12)},[]),fe=S.useCallback($=>{var lt,bt;if(!n.current)return;const De=J($),Ue=Us(De).toNote(),Ee=E.current.length===0;if(E.current.includes($)||E.current.push($),!Ee&&U.current.size>0){const Xe=Array.from(U.current)[0],dn=J(Xe),ss=Us(dn).toNote();n.current.triggerRelease(ss,fs()),U.current.delete(Xe)}if(Ee||ne.current,n.current.triggerAttack(Ue,fs()),U.current.clear(),U.current.add($),H.current=$,r.current&&u.current){const Xe=De/Math.pow(2,Math.abs(ie.current));ne.current&&!Ee?r.current.frequency.rampTo(Xe,se.current):r.current.frequency.value=Xe,Ee&&u.current.triggerAttack()}Ee&&((lt=f.current)==null||lt.triggerAttack(),(bt=m.current)==null||bt.triggerAttack()),e(Xe=>({...Xe,activeNotes:1}))},[J]),Ce=S.useCallback($=>{var Ee,lt,bt;if(!n.current)return;E.current=E.current.filter(Xe=>Xe!==$);const De=J($),Ue=Us(De).toNote();if(n.current.triggerRelease(Ue,fs()),U.current.delete($),E.current.length>0){const Xe=E.current[E.current.length-1],dn=J(Xe),ss=Us(dn).toNote();if(n.current.triggerAttack(ss,fs()),U.current.add(Xe),H.current=Xe,r.current&&ne.current){const tr=dn/Math.pow(2,Math.abs(ie.current));r.current.frequency.rampTo(tr,se.current)}}else(Ee=u.current)==null||Ee.triggerRelease(),(lt=f.current)==null||lt.triggerRelease(),(bt=m.current)==null||bt.triggerRelease(),e(Xe=>({...Xe,activeNotes:0}))},[J]),ae=S.useCallback($=>{if(!n.current)return;if(Y.current){fe($);return}const De=J($),Ue=Us(De).toNote();if(n.current.triggerAttack(Ue,fs()),U.current.add($),H.current=$,r.current&&u.current){const Ee=De/Math.pow(2,Math.abs(ie.current));ne.current&&U.current.size>1?r.current.frequency.rampTo(Ee,se.current):r.current.frequency.value=Ee,U.current.size===1&&u.current.triggerAttack()}f.current&&U.current.size===1&&f.current.triggerAttack(),m.current&&U.current.size===1&&m.current.triggerAttack(),e(Ee=>({...Ee,activeNotes:U.current.size}))},[J,fe]),Ae=S.useCallback($=>{var Ee,lt,bt;if(!n.current)return;if(Y.current){Ce($);return}const De=J($),Ue=Us(De).toNote();n.current.triggerRelease(Ue,fs()),U.current.delete($),U.current.size===0&&!F.current&&((Ee=u.current)==null||Ee.triggerRelease(),(lt=f.current)==null||lt.triggerRelease(),(bt=m.current)==null||bt.triggerRelease()),e(Xe=>({...Xe,activeNotes:U.current.size}))},[J,Ce]),He=S.useCallback(()=>{var $,De,Ue;n.current&&(n.current.releaseAll(),U.current.clear(),E.current=[],F.current||(($=u.current)==null||$.triggerRelease(),(De=f.current)==null||De.triggerRelease(),(Ue=m.current)==null||Ue.triggerRelease()),e(Ee=>({...Ee,activeNotes:0})))},[]),At=S.useCallback(($,De)=>{var bt,Xe;if(!n.current)return;const Ue=J($),Ee=Us(Ue).toNote(),lt=De??fs();if(n.current.triggerAttack(Ee,lt),r.current&&u.current){const dn=Ue/Math.pow(2,Math.abs(ie.current));r.current.frequency.setValueAtTime(dn,lt),u.current.triggerAttack(lt)}(bt=f.current)==null||bt.triggerAttack(lt),(Xe=m.current)==null||Xe.triggerAttack(lt)},[J]),Ut=S.useCallback(($,De)=>{if(!n.current)return;const Ue=J($),Ee=Us(Ue).toNote(),lt=De??fs();n.current.triggerRelease(Ee,lt)},[J]),Cn=S.useCallback($=>{var De,Ue,Ee;F.current=$,$||U.current.size===0&&((De=u.current)==null||De.triggerRelease(),(Ue=f.current)==null||Ue.triggerRelease(),(Ee=m.current)==null||Ee.triggerRelease())},[]),qn=S.useCallback($=>{w.current&&w.current.gain.rampTo(vl($),.1)},[]),ue=S.useCallback($=>{n.current&&(n.current.set({envelope:{attack:$}}),u.current&&(u.current.attack=$),f.current&&(f.current.attack=$))},[]),we=S.useCallback($=>{n.current&&(n.current.set({envelope:{release:$}}),u.current&&(u.current.release=$),f.current&&(f.current.release=$))},[]),Be=S.useCallback($=>{n.current&&(Z.current=$,n.current.set({oscillator:{type:$}}))},[]),Ve=S.useCallback($=>{Q.current=$},[]),be=S.useCallback($=>{Y.current=$,$?n.current&&U.current.size>1&&(n.current.releaseAll(),U.current.clear(),E.current=[]):E.current=[]},[]),Me=S.useCallback($=>{a.current&&a.current.gain.rampTo($,.1)},[]),et=S.useCallback($=>{if(ie.current=$,!r.current)return;const De=H.current/Math.pow(2,Math.abs($));r.current.frequency.value=De},[]),St=S.useCallback($=>{d.current&&d.current.gain.rampTo($,.1)},[]),tn=S.useCallback($=>{h.current&&(h.current.type=$)},[]),Sn=S.useCallback($=>{ne.current=$,n.current&&n.current.set({portamento:$?se.current:0})},[]),Jn=S.useCallback($=>{se.current=$,n.current&&ne.current&&n.current.set({portamento:$})},[]),es=S.useCallback($=>{if(de.current=$,n.current){const De=$*le.current*100;n.current.set({detune:De})}if(r.current){const Ue=J(H.current)/Math.pow(2,Math.abs(ie.current));r.current.frequency.rampTo(Ue,.05)}},[J]),xs=S.useCallback($=>{le.current=$},[]),ts=S.useCallback($=>{v.current&&v.current.frequency.rampTo($,.1)},[]),Zs=S.useCallback($=>{y.current&&y.current.gain.rampTo($,.1)},[]),Wn=S.useCallback($=>{v.current&&(v.current.type=$)},[]),Bn=S.useCallback(($,De,Ue)=>{const Ee=Ue?De:0;switch($){case"filterCutoff":re.current&&re.current.gain.rampTo(Ee*ci.LFO_FILTER_MAX_RANGE_HZ,ci.DEFAULT_RAMP_TIME);break}},[]),Mr=S.useCallback($=>{R.current&&R.current.rampTo($,.05)},[]),Dr=S.useCallback($=>{k.current&&k.current.Q.rampTo($,.1)},[]),Ir=S.useCallback($=>{T.current&&T.current.frequency.rampTo($,.05)},[]),O=S.useCallback($=>{T.current&&T.current.Q.rampTo($,.1)},[]),V=S.useCallback($=>{m.current&&(m.current.attack=$)},[]),Ft=S.useCallback($=>{m.current&&(m.current.decay=$)},[]),bn=S.useCallback($=>{m.current&&(m.current.sustain=$)},[]),ns=S.useCallback($=>{m.current&&(m.current.release=$)},[]),Si=S.useCallback($=>{g.current&&(G.current=$,g.current.max=$*ci.FILTER_ENV_MAX_SWEEP_HZ)},[]),ks=S.useCallback($=>{q.current&&(q.current.distortion=$)},[]),Ts=S.useCallback($=>{q.current&&q.current.wet.rampTo($,.1)},[]),Vo=S.useCallback($=>{z.current&&z.current.frequency.rampTo($,.1)},[]),zo=S.useCallback($=>{z.current&&(z.current.depth=$)},[]),qo=S.useCallback($=>{z.current&&z.current.wet.rampTo($,.1)},[]),Wo=S.useCallback($=>{B.current&&B.current.frequency.rampTo($,.1)},[]),Bo=S.useCallback($=>{B.current&&(B.current.octaves=$*6)},[]),bi=S.useCallback($=>{B.current&&B.current.wet.rampTo($,.1)},[]),Uo=S.useCallback($=>{N.current&&N.current.delayTime.rampTo($,.1)},[]),Ks=S.useCallback($=>{N.current&&N.current.feedback.rampTo($,.1)},[]),Ni=S.useCallback($=>{N.current&&N.current.wet.rampTo($,.1)},[]),Js=S.useCallback($=>{I.current&&(I.current.decay=$)},[]),Zl=S.useCallback($=>{I.current&&I.current.wet.rampTo($,.1)},[]),er=S.useCallback(()=>{if(!L.current)return-60;const $=L.current.getValue();return typeof $=="number"?$:$[0]},[]),Pr=S.useCallback(()=>M.current?M.current.getValue():new Float32Array(256),[]),Fr=S.useCallback(()=>X.current?X.current.getValue():new Float32Array(256),[]),Ei=S.useCallback(()=>H.current,[]);return S.useEffect(()=>()=>{var $,De,Ue,Ee,lt,bt,Xe,dn,ss,tr,Ri,$o,Qo,tt,Ho,Lr,Ai,nr,Go,Oi,sr,nn,Yo,$t,Xo;($=n.current)==null||$.dispose(),(De=r.current)==null||De.dispose(),(Ue=a.current)==null||Ue.dispose(),(Ee=u.current)==null||Ee.dispose(),(lt=h.current)==null||lt.dispose(),(bt=d.current)==null||bt.dispose(),(Xe=f.current)==null||Xe.dispose(),(dn=m.current)==null||dn.dispose(),(ss=g.current)==null||ss.dispose(),(tr=v.current)==null||tr.dispose(),(Ri=y.current)==null||Ri.dispose(),($o=re.current)==null||$o.dispose(),(Qo=x.current)==null||Qo.dispose(),(tt=w.current)==null||tt.dispose(),(Ho=k.current)==null||Ho.dispose(),(Lr=R.current)==null||Lr.dispose(),(Ai=T.current)==null||Ai.dispose(),(nr=q.current)==null||nr.dispose(),(Go=z.current)==null||Go.dispose(),(Oi=B.current)==null||Oi.dispose(),(sr=N.current)==null||sr.dispose(),(nn=I.current)==null||nn.dispose(),(Yo=L.current)==null||Yo.dispose(),($t=M.current)==null||$t.dispose(),(Xo=X.current)==null||Xo.dispose()},[]),{isInitialized:o.isInitialized,isPlaying:o.activeNotes>0,activeNotes:o.activeNotes,initializeAudio:ce,playNote:ae,stopNote:Ae,stopAllNotes:He,playArpNote:At,stopArpNote:Ut,setArpeggiating:Cn,setVolume:qn,setAttack:ue,setRelease:we,setWaveform:Be,setOctave:Ve,setMonoMode:be,setSubOscLevel:Me,setSubOscOctave:et,setNoiseLevel:St,setNoiseType:tn,setGlideEnabled:Sn,setGlideTime:Jn,setPitchBend:es,setPitchBendRange:xs,setLFORate:ts,setLFODepth:Zs,setLFOWaveform:Wn,setModRouting:Bn,setLowpassFrequency:Mr,setLowpassQ:Dr,setHighpassFrequency:Ir,setHighpassQ:O,setFilterEnvAttack:V,setFilterEnvDecay:Ft,setFilterEnvSustain:bn,setFilterEnvRelease:ns,setFilterEnvAmount:Si,setDistortionAmount:ks,setDistortionWet:Ts,setChorusRate:Vo,setChorusDepth:zo,setChorusWet:qo,setPhaserRate:Wo,setPhaserDepth:Bo,setPhaserWet:bi,setDelayTime:Uo,setDelayFeedback:Ks,setDelayWet:Ni,setReverbDecay:Js,setReverbWet:Zl,getMeterLevel:er,getWaveformData:Pr,getFFTData:Fr,getCurrentFrequency:Ei}}const Hp=[{id:"init",name:"Init",category:"lead",params:{master:{volume:-12,attack:.01,release:.3,waveform:"sawtooth",octave:3,mono:!1},effects:{lowpass:{frequency:2e4,Q:1},highpass:{frequency:20,Q:1},reverb:{decay:1.5,wet:0},delay:{time:.25,feedback:.3,wet:0},distortion:{amount:0,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:2,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.01,decay:.2,sustain:.5,release:.3,amount:0},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"classic-bass",name:"Classic Bass",category:"bass",params:{master:{volume:-8,attack:.005,release:.2,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:800,Q:4},highpass:{frequency:30,Q:1},reverb:{decay:.5,wet:.1},delay:{time:.25,feedback:.1,wet:0},distortion:{amount:.2,wet:.8}},oscillator:{waveform:"sawtooth",subOscLevel:.6,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:.5,depth:.1,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.2,enabled:!0}],glide:{enabled:!0,time:.08},filterEnvelope:{attack:.01,decay:.3,sustain:.2,release:.2,amount:.5},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"acid-bass",name:"Acid Bass",category:"bass",params:{master:{volume:-6,attack:.001,release:.1,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:400,Q:12},highpass:{frequency:40,Q:1},reverb:{decay:.3,wet:.05},delay:{time:.375,feedback:.4,wet:.2},distortion:{amount:.4,wet:1}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:4,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!0,time:.05},filterEnvelope:{attack:.001,decay:.15,sustain:.1,release:.1,amount:.8},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/16",octaves:1},tempo:{bpm:130},pitchBendRange:2}},{id:"screaming-lead",name:"Screaming Lead",category:"lead",params:{master:{volume:-10,attack:.02,release:.4,waveform:"sawtooth",octave:4,mono:!0},effects:{lowpass:{frequency:5e3,Q:2},highpass:{frequency:100,Q:1},reverb:{decay:2,wet:.3},delay:{time:.375,feedback:.35,wet:.25},distortion:{amount:.3,wet:.6}},oscillator:{waveform:"sawtooth",subOscLevel:.2,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:5,depth:.15,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.3,enabled:!0}],glide:{enabled:!0,time:.15},filterEnvelope:{attack:.05,decay:.5,sustain:.6,release:.5,amount:.4},chorus:{rate:2,depth:.4,wet:.3},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"soft-pad",name:"Soft Pad",category:"pad",params:{master:{volume:-14,attack:.5,release:1.5,waveform:"triangle",octave:3,mono:!1},effects:{lowpass:{frequency:3e3,Q:.5},highpass:{frequency:80,Q:1},reverb:{decay:5,wet:.5},delay:{time:.5,feedback:.3,wet:.15},distortion:{amount:0,wet:.5}},oscillator:{waveform:"triangle",subOscLevel:.3,subOscOctave:-1,noiseLevel:.05,noiseType:"pink"},lfo:{rate:.3,depth:.2,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.15,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.8,decay:1,sustain:.7,release:1.5,amount:.3},chorus:{rate:.8,depth:.6,wet:.5},phaser:{rate:.2,depth:.3,wet:.2},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:90},pitchBendRange:2}},{id:"warm-strings",name:"Warm Strings",category:"pad",params:{master:{volume:-12,attack:.3,release:1,waveform:"square",octave:3,mono:!1},effects:{lowpass:{frequency:4e3,Q:1},highpass:{frequency:100,Q:1},reverb:{decay:3,wet:.4},delay:{time:.25,feedback:.2,wet:.1},distortion:{amount:0,wet:.5}},oscillator:{waveform:"square",subOscLevel:.15,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:.8,depth:.4,waveform:"triangle"},modRouting:[{target:"filterCutoff",amount:.2,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.4,decay:.5,sustain:.8,release:1,amount:.2},chorus:{rate:1,depth:.5,wet:.4},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:2}},{id:"pluck-lead",name:"Pluck Lead",category:"lead",params:{master:{volume:-10,attack:.001,release:.5,waveform:"sawtooth",octave:4,mono:!1},effects:{lowpass:{frequency:8e3,Q:1},highpass:{frequency:80,Q:1},reverb:{decay:1.5,wet:.25},delay:{time:.25,feedback:.4,wet:.3},distortion:{amount:.1,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-1,noiseLevel:.02,noiseType:"white"},lfo:{rate:2,depth:0,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:.001,decay:.2,sustain:.3,release:.4,amount:.6},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/16",octaves:2},tempo:{bpm:128},pitchBendRange:2}},{id:"wobble-bass",name:"Wobble Bass",category:"bass",params:{master:{volume:-8,attack:.01,release:.2,waveform:"sawtooth",octave:2,mono:!0},effects:{lowpass:{frequency:600,Q:8},highpass:{frequency:30,Q:1},reverb:{decay:.5,wet:.1},delay:{time:.25,feedback:.1,wet:0},distortion:{amount:.5,wet:1}},oscillator:{waveform:"sawtooth",subOscLevel:.4,subOscOctave:-1,noiseLevel:0,noiseType:"white"},lfo:{rate:3,depth:.7,waveform:"sine"},modRouting:[{target:"filterCutoff",amount:.8,enabled:!0}],glide:{enabled:!0,time:.05},filterEnvelope:{attack:.01,decay:.1,sustain:.8,release:.2,amount:.2},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:.5,depth:.5,wet:0},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:140},pitchBendRange:2}},{id:"laser-fx",name:"Laser FX",category:"fx",params:{master:{volume:-12,attack:.001,release:.8,waveform:"sawtooth",octave:5,mono:!0},effects:{lowpass:{frequency:15e3,Q:3},highpass:{frequency:200,Q:1},reverb:{decay:3,wet:.4},delay:{time:.125,feedback:.6,wet:.4},distortion:{amount:.2,wet:.5}},oscillator:{waveform:"sawtooth",subOscLevel:0,subOscOctave:-2,noiseLevel:.1,noiseType:"white"},lfo:{rate:15,depth:.5,waveform:"sawtooth"},modRouting:[{target:"filterCutoff",amount:0,enabled:!1}],glide:{enabled:!0,time:.3},filterEnvelope:{attack:.001,decay:.5,sustain:.2,release:.8,amount:.7},chorus:{rate:1.5,depth:.5,wet:0},phaser:{rate:2,depth:.8,wet:.5},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:120},pitchBendRange:12}},{id:"noise-sweep",name:"Noise Sweep",category:"fx",params:{master:{volume:-14,attack:.5,release:2,waveform:"sine",octave:3,mono:!1},effects:{lowpass:{frequency:2e3,Q:4},highpass:{frequency:100,Q:1},reverb:{decay:4,wet:.6},delay:{time:.375,feedback:.5,wet:.3},distortion:{amount:0,wet:.5}},oscillator:{waveform:"sine",subOscLevel:0,subOscOctave:-1,noiseLevel:.8,noiseType:"pink"},lfo:{rate:.1,depth:.8,waveform:"triangle"},modRouting:[{target:"filterCutoff",amount:.9,enabled:!0}],glide:{enabled:!1,time:.1},filterEnvelope:{attack:2,decay:1,sustain:.5,release:2,amount:.5},chorus:{rate:.5,depth:.3,wet:.3},phaser:{rate:.3,depth:.6,wet:.4},arpeggiator:{enabled:!1,pattern:"up",rate:"1/8",octaves:1},tempo:{bpm:100},pitchBendRange:2}}],Gp="web-monosynth-presets",po={master:dt,effects:ot,oscillator:xn,lfo:hi,modRouting:Kx,glide:Cl,filterEnvelope:wn,chorus:xr,phaser:di,arpeggiator:cg,tempo:Yl,pitchBendRange:Uh};function ek(o){const e={...po};if(o.master&&typeof o.master=="object"){const n=o.master;e.master={volume:typeof n.volume=="number"?n.volume:dt.volume,attack:typeof n.attack=="number"?n.attack:dt.attack,release:typeof n.release=="number"?n.release:dt.release,waveform:n.waveform||dt.waveform,octave:typeof n.octave=="number"?n.octave:dt.octave,mono:typeof n.mono=="boolean"?n.mono:dt.mono}}if(o.effects&&typeof o.effects=="object"&&(e.effects=o.effects),o.oscillator&&typeof o.oscillator=="object"){const n=o.oscillator;e.oscillator={waveform:n.waveform||xn.waveform,subOscLevel:typeof n.subOscLevel=="number"?n.subOscLevel:xn.subOscLevel,subOscOctave:n.subOscOctave||xn.subOscOctave,noiseLevel:typeof n.noiseLevel=="number"?n.noiseLevel:xn.noiseLevel,noiseType:n.noiseType||xn.noiseType}}if(o.lfo&&typeof o.lfo=="object"&&(e.lfo=o.lfo),o.modRouting&&Array.isArray(o.modRouting)){const n=o.modRouting.find(r=>r.target==="filterCutoff");n?e.modRouting=[{target:"filterCutoff",amount:typeof n.amount=="number"?n.amount:0,enabled:typeof n.enabled=="boolean"?n.enabled:!1}]:e.modRouting=[{target:"filterCutoff",amount:0,enabled:!1}]}if(o.glide&&typeof o.glide=="object"&&(e.glide=o.glide),o.filterEnvelope&&typeof o.filterEnvelope=="object"&&(e.filterEnvelope=o.filterEnvelope),o.chorus&&typeof o.chorus=="object"&&(e.chorus=o.chorus),o.phaser&&typeof o.phaser=="object"&&(e.phaser=o.phaser),o.arpeggiator&&typeof o.arpeggiator=="object"&&(e.arpeggiator=o.arpeggiator),o.tempo&&typeof o.tempo=="object"){const n=o.tempo;e.tempo={bpm:typeof n.bpm=="number"?n.bpm:Yl.bpm}}return e.pitchBendRange=typeof o.pitchBendRange=="number"?o.pitchBendRange:Uh,e}function tk(){const[o,e]=S.useState([]),[n,r]=S.useState(null);S.useEffect(()=>{try{const x=localStorage.getItem(Gp);if(x){const k=JSON.parse(x).map(T=>({...T,params:ek(T.params)}));e(k)}}catch(x){console.error("Failed to load presets from localStorage:",x)}},[]),S.useEffect(()=>{try{localStorage.setItem(Gp,JSON.stringify(o))}catch(x){console.error("Failed to save presets to localStorage:",x)}},[o]);const a=S.useMemo(()=>[...Hp,...o],[o]),u=S.useCallback(x=>a.filter(w=>w.category===x),[a]),h=S.useCallback(x=>a.find(w=>w.id===x),[a]),d=S.useCallback((x,w,k)=>{const T={id:`user-${Date.now()}`,name:x,category:w,params:k};return e(R=>[...R,T]),r(T.id),T},[]),f=S.useCallback((x,w)=>{e(k=>k.map(T=>T.id===x?{...T,...w}:T))},[]),m=S.useCallback(x=>x.startsWith("user-")?(e(w=>w.filter(k=>k.id!==x)),r(null),!0):!1,[]),g=S.useCallback(x=>{const w=h(x);return w?(r(x),w.params):null},[h]),v=S.useCallback(()=>(r(null),po),[]),y=S.useCallback(x=>x.startsWith("user-"),[]);return{presets:a,userPresets:o,factoryPresets:Hp,currentPresetId:n,getPresetsByCategory:u,getPresetById:h,savePreset:d,updatePreset:f,deletePreset:m,loadPreset:g,initPreset:v,isUserPreset:y}}function nk(){const[o,e]=S.useState(Yl.bpm),[n,r]=S.useState(!1),a=S.useRef([]),u=S.useRef(new Set);S.useEffect(()=>{ln().bpm.value=o},[o]);const h=S.useCallback(k=>{const T=Math.max(40,Math.min(240,k));e(T),ln().bpm.value=T},[]),d=S.useCallback(()=>{ln().state!=="started"&&ln().start(),r(!0)},[]),f=S.useCallback(()=>{ln().stop(),r(!1)},[]),m=S.useCallback(k=>{u.current.add(k),ln().state!=="started"&&(ln().start(),r(!0))},[]),g=S.useCallback(k=>{u.current.delete(k),u.current.size===0&&ln().state==="started"&&(ln().stop(),r(!1))},[]),v=S.useCallback(()=>{n?f():d()},[n,d,f]),y=S.useCallback(()=>{const k=performance.now(),R=a.current.filter(q=>k-q<2e3);if(R.push(k),a.current=R,R.length>=2){const q=[];for(let N=1;N<R.length;N++)q.push(R[N]-R[N-1]);const z=q.reduce((N,I)=>N+I,0)/q.length,B=Math.round(6e4/z);h(B)}},[h]),x=S.useCallback(k=>{const T=60/o;switch(k){case"1/4":return T;case"1/8":return T/2;case"1/16":return T/4;case"1/32":return T/8;default:return T/2}},[o]),w=S.useCallback(k=>{switch(k){case"1/4":return"4n";case"1/8":return"8n";case"1/16":return"16n";case"1/32":return"32n";default:return"8n"}},[]);return S.useEffect(()=>()=>{ln().stop()},[]),{bpm:o,setBpm:h,isPlaying:n,startTransport:d,stopTransport:f,toggleTransport:v,tapTempo:y,getNoteTime:x,getToneTime:w,requestTransportStart:m,releaseTransport:g,transport:ln()}}const Yp="arpeggiator";function sk({playNote:o,stopNote:e,stopAllNotes:n,playArpNote:r,stopArpNote:a,getNoteTime:u,getToneTime:h,setArpeggiating:d,requestTransportStart:f,releaseTransport:m}){const[g,v]=S.useState(cg),y=S.useRef([]),x=S.useRef(0),w=S.useRef(null),k=S.useRef(null),T=S.useRef(!1),R=S.useRef(o),q=S.useRef(e),z=S.useRef(r),B=S.useRef(a),N=S.useRef(u),I=S.useRef(h),L=S.useRef(d),M=S.useRef(g),X=S.useRef(f),U=S.useRef(m);S.useEffect(()=>{R.current=o,q.current=e,z.current=r,B.current=a,N.current=u,I.current=h,L.current=d,X.current=f,U.current=m,M.current=g},[o,e,r,a,u,h,d,f,m,g]);const H=S.useCallback(()=>{const F=[...y.current].sort((ce,J)=>ce-J);if(F.length===0)return[];const re=[];for(let ce=0;ce<M.current.octaves;ce++){const J=Math.pow(2,ce);re.push(...F.map(fe=>fe*J))}switch(M.current.pattern){case"up":return re;case"down":return re.reverse();case"upDown":return re.length<=1?re:[...re,...re.slice(1,-1).reverse()];case"random":for(let ce=re.length-1;ce>0;ce--){const J=Math.floor(Math.random()*(ce+1));[re[ce],re[J]]=[re[J],re[ce]]}return re;default:return re}},[]),Q=S.useCallback(F=>{k.current!==null&&(B.current(k.current,F),k.current=null)},[]),ne=S.useCallback(()=>{if(T.current)return;T.current=!0,X.current?X.current(Yp):ln().state!=="started"&&ln().start(),L.current(!0);const F=I.current(M.current.rate);x.current=0,w.current=new Ih(ce=>{const J=H();if(J.length===0)return;Q(ce);const fe=J[x.current%J.length];k.current=fe,z.current(fe,ce),x.current=(x.current+1)%J.length},F),w.current.start("+0");const re=H();if(re.length>0){const ce=re[0];k.current=ce,z.current(ce),x.current=1}},[H,Q]),se=S.useCallback(()=>{T.current&&(T.current=!1,w.current&&(w.current.stop(),w.current.dispose(),w.current=null),Q(),L.current(!1),U.current&&U.current(Yp),n())},[n,Q]),de=S.useCallback(F=>{y.current.includes(F)||y.current.push(F),M.current.enabled&&y.current.length===1&&!T.current&&ne()},[ne]),le=S.useCallback(F=>{y.current=y.current.filter(re=>re!==F),y.current.length===0&&se()},[se]),ie=S.useCallback(()=>{y.current=[],se()},[se]),G=S.useCallback(F=>{v(re=>({...re,enabled:F})),M.current={...M.current,enabled:F},F?y.current.length>0&&!T.current&&ne():se()},[ne,se]),Z=S.useCallback(F=>{v(re=>({...re,pattern:F})),M.current={...M.current,pattern:F},x.current=0},[]),Y=S.useCallback(F=>{if(v(re=>({...re,rate:F})),M.current={...M.current,rate:F},T.current&&w.current){const re=I.current(F);w.current.interval=re}},[]),E=S.useCallback(F=>{v(re=>({...re,octaves:F})),M.current={...M.current,octaves:F}},[]);return S.useEffect(()=>()=>{w.current&&(w.current.stop(),w.current.dispose()),L.current(!1)},[]),{params:g,addNote:de,removeNote:le,clearNotes:ie,setEnabled:G,setPattern:Z,setRate:Y,setOctaves:E,isActive:T.current}}const hg=S.createContext(null),dg=S.createContext(null);function rk({children:o,getFrequency:e}){const n=Jx(),r=tk(),a=nk(),[u,h]=S.useState(po),[d,f]=S.useState(0),[m,g]=S.useState(new Set),v=S.useRef(new Map),y=sk({playNote:n.playNote,stopNote:n.stopNote,stopAllNotes:n.stopAllNotes,playArpNote:n.playArpNote,stopArpNote:n.stopArpNote,getNoteTime:a.getNoteTime,getToneTime:a.getToneTime,setArpeggiating:n.setArpeggiating,requestTransportStart:a.requestTransportStart,releaseTransport:a.releaseTransport}),x=y.params.enabled,w=S.useCallback(O=>{x?y.addNote(O):n.playNote(O)},[x,y,n]),k=S.useCallback(O=>{x?y.removeNote(O):n.stopNote(O)},[x,y,n]),T=S.useCallback(O=>{const V=e(O,u.master.octave);V&&(w(V),g(Ft=>new Set(Ft).add(O)),v.current.set(O,V))},[u.master.octave,w,e]),R=S.useCallback(O=>{const V=v.current.get(O);V&&(k(V),g(Ft=>{const bn=new Set(Ft);return bn.delete(O),bn}),v.current.delete(O))},[k]),q=S.useCallback(O=>{const V=Math.max(0,Math.min(5,u.master.octave+(O==="up"?1:-1)));h(Ft=>({...Ft,master:{...Ft.master,octave:V}})),n.setOctave(V)},[u.master.octave,n]),z=S.useCallback(O=>{n.setVolume(O.master.volume),n.setAttack(O.master.attack),n.setRelease(O.master.release),n.setWaveform(O.master.waveform),n.setOctave(O.master.octave),n.setMonoMode(O.master.mono),n.setSubOscLevel(O.oscillator.subOscLevel),n.setSubOscOctave(O.oscillator.subOscOctave),n.setNoiseLevel(O.oscillator.noiseLevel),n.setNoiseType(O.oscillator.noiseType),n.setGlideEnabled(O.glide.enabled),n.setGlideTime(O.glide.time),n.setPitchBendRange(O.pitchBendRange),n.setLFORate(O.lfo.rate),n.setLFODepth(O.lfo.depth),n.setLFOWaveform(O.lfo.waveform),O.modRouting.forEach(V=>{n.setModRouting(V.target,V.amount,V.enabled)}),n.setLowpassFrequency(O.effects.lowpass.frequency),n.setLowpassQ(O.effects.lowpass.Q),n.setHighpassFrequency(O.effects.highpass.frequency),n.setHighpassQ(O.effects.highpass.Q),n.setFilterEnvAttack(O.filterEnvelope.attack),n.setFilterEnvDecay(O.filterEnvelope.decay),n.setFilterEnvSustain(O.filterEnvelope.sustain),n.setFilterEnvRelease(O.filterEnvelope.release),n.setFilterEnvAmount(O.filterEnvelope.amount),n.setDistortionAmount(O.effects.distortion.amount),n.setDistortionWet(O.effects.distortion.wet),n.setChorusRate(O.chorus.rate),n.setChorusDepth(O.chorus.depth),n.setChorusWet(O.chorus.wet),n.setPhaserRate(O.phaser.rate),n.setPhaserDepth(O.phaser.depth),n.setPhaserWet(O.phaser.wet),n.setDelayTime(O.effects.delay.time),n.setDelayFeedback(O.effects.delay.feedback),n.setDelayWet(O.effects.delay.wet),n.setReverbDecay(O.effects.reverb.decay),n.setReverbWet(O.effects.reverb.wet),a.setBpm(O.tempo.bpm),y.setEnabled(O.arpeggiator.enabled),y.setPattern(O.arpeggiator.pattern),y.setRate(O.arpeggiator.rate),y.setOctaves(O.arpeggiator.octaves)},[n,a,y]),B=S.useCallback(O=>{h(V=>({...V,master:{...V.master,volume:O}})),n.setVolume(O)},[n]),N=S.useCallback(O=>{h(V=>({...V,master:{...V.master,attack:O}})),n.setAttack(O)},[n]),I=S.useCallback(O=>{h(V=>({...V,master:{...V.master,release:O}})),n.setRelease(O)},[n]),L=S.useCallback(O=>{h(V=>({...V,master:{...V.master,waveform:O},oscillator:{...V.oscillator,waveform:O}})),n.setWaveform(O)},[n]),M=S.useCallback(O=>{h(V=>({...V,master:{...V.master,octave:O}})),n.setOctave(O)},[n]),X=S.useCallback(O=>{h(V=>({...V,master:{...V.master,mono:O}})),n.setMonoMode(O)},[n]),U=S.useCallback(O=>{h(V=>({...V,oscillator:{...V.oscillator,subOscLevel:O}})),n.setSubOscLevel(O)},[n]),H=S.useCallback(O=>{h(V=>({...V,oscillator:{...V.oscillator,subOscOctave:O}})),n.setSubOscOctave(O)},[n]),Q=S.useCallback(O=>{h(V=>({...V,oscillator:{...V.oscillator,noiseLevel:O}})),n.setNoiseLevel(O)},[n]),ne=S.useCallback(O=>{h(V=>({...V,oscillator:{...V.oscillator,noiseType:O}})),n.setNoiseType(O)},[n]),se=S.useCallback(O=>{h(V=>({...V,glide:{...V.glide,enabled:O}})),n.setGlideEnabled(O)},[n]),de=S.useCallback(O=>{h(V=>({...V,glide:{...V.glide,time:O}})),n.setGlideTime(O)},[n]),le=S.useCallback(O=>{f(O),n.setPitchBend(O)},[n]),ie=S.useCallback(O=>{h(V=>({...V,pitchBendRange:O})),n.setPitchBendRange(O)},[n]),G=S.useCallback(O=>{h(V=>({...V,lfo:{...V.lfo,rate:O}})),n.setLFORate(O)},[n]),Z=S.useCallback(O=>{h(V=>({...V,lfo:{...V.lfo,depth:O}})),n.setLFODepth(O)},[n]),Y=S.useCallback(O=>{h(V=>({...V,lfo:{...V.lfo,waveform:O}})),n.setLFOWaveform(O)},[n]),E=S.useCallback((O,V,Ft)=>{h(bn=>({...bn,modRouting:bn.modRouting.map(ns=>ns.target===O?{...ns,amount:V,enabled:Ft}:ns)})),n.setModRouting(O,V,Ft)},[n]),F=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,lowpass:{...V.effects.lowpass,frequency:O}}})),n.setLowpassFrequency(O)},[n]),re=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,lowpass:{...V.effects.lowpass,Q:O}}})),n.setLowpassQ(O)},[n]),ce=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,highpass:{...V.effects.highpass,frequency:O}}})),n.setHighpassFrequency(O)},[n]),J=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,highpass:{...V.effects.highpass,Q:O}}})),n.setHighpassQ(O)},[n]),fe=S.useCallback(O=>{h(V=>({...V,filterEnvelope:{...V.filterEnvelope,attack:O}})),n.setFilterEnvAttack(O)},[n]),Ce=S.useCallback(O=>{h(V=>({...V,filterEnvelope:{...V.filterEnvelope,decay:O}})),n.setFilterEnvDecay(O)},[n]),ae=S.useCallback(O=>{h(V=>({...V,filterEnvelope:{...V.filterEnvelope,sustain:O}})),n.setFilterEnvSustain(O)},[n]),Ae=S.useCallback(O=>{h(V=>({...V,filterEnvelope:{...V.filterEnvelope,release:O}})),n.setFilterEnvRelease(O)},[n]),He=S.useCallback(O=>{h(V=>({...V,filterEnvelope:{...V.filterEnvelope,amount:O}})),n.setFilterEnvAmount(O)},[n]),At=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,distortion:{...V.effects.distortion,amount:O}}})),n.setDistortionAmount(O)},[n]),Ut=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,distortion:{...V.effects.distortion,wet:O}}})),n.setDistortionWet(O)},[n]),Cn=S.useCallback(O=>{h(V=>({...V,chorus:{...V.chorus,rate:O}})),n.setChorusRate(O)},[n]),qn=S.useCallback(O=>{h(V=>({...V,chorus:{...V.chorus,depth:O}})),n.setChorusDepth(O)},[n]),ue=S.useCallback(O=>{h(V=>({...V,chorus:{...V.chorus,wet:O}})),n.setChorusWet(O)},[n]),we=S.useCallback(O=>{h(V=>({...V,phaser:{...V.phaser,rate:O}})),n.setPhaserRate(O)},[n]),Be=S.useCallback(O=>{h(V=>({...V,phaser:{...V.phaser,depth:O}})),n.setPhaserDepth(O)},[n]),Ve=S.useCallback(O=>{h(V=>({...V,phaser:{...V.phaser,wet:O}})),n.setPhaserWet(O)},[n]),be=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,delay:{...V.effects.delay,time:O}}})),n.setDelayTime(O)},[n]),Me=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,delay:{...V.effects.delay,feedback:O}}})),n.setDelayFeedback(O)},[n]),et=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,delay:{...V.effects.delay,wet:O}}})),n.setDelayWet(O)},[n]),St=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,reverb:{...V.effects.reverb,decay:O}}})),n.setReverbDecay(O)},[n]),tn=S.useCallback(O=>{h(V=>({...V,effects:{...V.effects,reverb:{...V.effects.reverb,wet:O}}})),n.setReverbWet(O)},[n]),Sn=S.useCallback(O=>{h(V=>({...V,tempo:{...V.tempo,bpm:O}})),a.setBpm(O)},[a]),Jn=S.useCallback(O=>{y.setEnabled(O),O||y.clearNotes()},[y]),es=S.useCallback(O=>{y.setPattern(O)},[y]),xs=S.useCallback(O=>{y.setRate(O)},[y]),ts=S.useCallback(O=>{y.setOctaves(O)},[y]),Zs=S.useCallback(O=>{const V=r.loadPreset(O);return V&&(h(V),z(V)),V},[r,z]),Wn=S.useCallback(()=>{const O=r.initPreset();return h(O),z(O),O},[r,z]),Bn=S.useCallback(()=>{h(po),z(po),f(0),n.setPitchBend(0)},[z,n]),Mr=S.useCallback(()=>({...u,arpeggiator:y.params,tempo:{bpm:a.bpm}}),[u,y.params,a.bpm]),Dr=S.useMemo(()=>({params:u,pitchBendValue:d,activeKeys:m,isInitialized:n.isInitialized,isPlaying:n.isPlaying,tempo:{bpm:a.bpm,isPlaying:a.isPlaying},arpeggiator:{params:y.params},presets:{presets:r.presets,currentPresetId:r.currentPresetId}}),[u,d,m,n.isInitialized,n.isPlaying,a.bpm,a.isPlaying,y.params,r.presets,r.currentPresetId]),Ir=S.useMemo(()=>({initializeAudio:n.initializeAudio,playNote:w,stopNote:k,handleNoteOn:T,handleNoteOff:R,handleOctaveChange:q,setVolume:B,setAttack:N,setRelease:I,setWaveform:L,setOctave:M,setMonoMode:X,setSubOscLevel:U,setSubOscOctave:H,setNoiseLevel:Q,setNoiseType:ne,setGlideEnabled:se,setGlideTime:de,setPitchBend:le,setPitchBendRange:ie,setLFORate:G,setLFODepth:Z,setLFOWaveform:Y,setModRouting:E,setLowpassFrequency:F,setLowpassQ:re,setHighpassFrequency:ce,setHighpassQ:J,setFilterEnvAttack:fe,setFilterEnvDecay:Ce,setFilterEnvSustain:ae,setFilterEnvRelease:Ae,setFilterEnvAmount:He,setDistortionAmount:At,setDistortionWet:Ut,setChorusRate:Cn,setChorusDepth:qn,setChorusWet:ue,setPhaserRate:we,setPhaserDepth:Be,setPhaserWet:Ve,setDelayTime:be,setDelayFeedback:Me,setDelayWet:et,setReverbDecay:St,setReverbWet:tn,getMeterLevel:n.getMeterLevel,getWaveformData:n.getWaveformData,getFFTData:n.getFFTData,setBpm:Sn,tapTempo:a.tapTempo,toggleTransport:a.toggleTransport,startTransport:a.startTransport,stopTransport:a.stopTransport,getNoteTime:a.getNoteTime,setArpEnabled:Jn,setArpPattern:es,setArpRate:xs,setArpOctaves:ts,clearArpNotes:y.clearNotes,loadPreset:Zs,savePreset:r.savePreset,deletePreset:r.deletePreset,initPreset:Wn,isUserPreset:r.isUserPreset,handleReset:Bn,getCurrentParams:Mr}),[n.initializeAudio,n.getMeterLevel,n.getWaveformData,n.getFFTData,w,k,T,R,q,B,N,I,L,M,X,U,H,Q,ne,se,de,le,ie,G,Z,Y,E,F,re,ce,J,fe,Ce,ae,Ae,He,At,Ut,Cn,qn,ue,we,Be,Ve,be,Me,et,St,tn,Sn,a.tapTempo,a.toggleTransport,a.startTransport,a.stopTransport,a.getNoteTime,Jn,es,xs,ts,y.clearNotes,Zs,r.savePreset,r.deletePreset,Wn,r.isUserPreset,Bn,Mr]);return C.jsx(hg.Provider,{value:Dr,children:C.jsx(dg.Provider,{value:Ir,children:o})})}function ik(){const o=S.useContext(hg);if(!o)throw new Error("useSynthState must be used within a SynthProvider");return o}function ok(){const o=S.useContext(dg);if(!o)throw new Error("useSynthActions must be used within a SynthProvider");return o}function fg(){const o=ik(),e=ok();return{...o,...e}}const Sl=[{code:"KeyA",noteName:"C",isBlack:!1,frequencies:{0:16.35,1:32.7,2:65.41,3:130.81,4:261.63,5:523.25}},{code:"KeyW",noteName:"C#",isBlack:!0,frequencies:{0:17.32,1:34.65,2:69.3,3:138.59,4:277.18,5:554.37}},{code:"KeyS",noteName:"D",isBlack:!1,frequencies:{0:18.35,1:36.71,2:73.42,3:146.83,4:293.66,5:587.33}},{code:"KeyE",noteName:"D#",isBlack:!0,frequencies:{0:19.45,1:38.89,2:77.78,3:155.56,4:311.13,5:622.25}},{code:"KeyD",noteName:"E",isBlack:!1,frequencies:{0:20.6,1:41.2,2:82.41,3:164.81,4:329.63,5:659.26}},{code:"KeyF",noteName:"F",isBlack:!1,frequencies:{0:21.83,1:43.65,2:87.31,3:174.61,4:349.23,5:698.46}},{code:"KeyT",noteName:"F#",isBlack:!0,frequencies:{0:23.12,1:46.25,2:92.5,3:185,4:369.99,5:739.99}},{code:"KeyG",noteName:"G",isBlack:!1,frequencies:{0:24.5,1:49,2:98,3:196,4:392,5:783.99}},{code:"KeyY",noteName:"G#",isBlack:!0,frequencies:{0:25.96,1:51.91,2:103.83,3:207.65,4:415.3,5:830.61}},{code:"KeyH",noteName:"A",isBlack:!1,frequencies:{0:27.5,1:55,2:110,3:220,4:440,5:880}},{code:"KeyU",noteName:"A#",isBlack:!0,frequencies:{0:29.14,1:58.27,2:116.54,3:233.08,4:466.16,5:932.33}},{code:"KeyJ",noteName:"B",isBlack:!1,frequencies:{0:30.87,1:61.74,2:123.47,3:246.94,4:493.88,5:987.77}},{code:"KeyK",noteName:"C",isBlack:!1,frequencies:{0:32.7,1:65.41,2:130.81,3:261.63,4:523.25,5:1046.5}},{code:"KeyO",noteName:"C#",isBlack:!0,frequencies:{0:34.65,1:69.3,2:138.59,3:277.18,4:554.37,5:1108.73}},{code:"KeyL",noteName:"D",isBlack:!1,frequencies:{0:36.71,1:73.42,2:146.83,3:293.66,4:587.33,5:1174.66}}],Vc=new Set(Sl.map(o=>o.code));function ak(o){return Sl.find(e=>e.code===o)}function lk(o,e){const n=ak(o);return(n==null?void 0:n.frequencies[e])??null}function uk({onNoteOn:o,onNoteOff:e,onOctaveChange:n,enabled:r=!0}){const a=S.useRef(new Set),u=S.useCallback(f=>{if(r&&!f.repeat){if((Vc.has(f.code)||f.code==="KeyZ"||f.code==="KeyX")&&f.preventDefault(),f.code==="KeyZ"){n("down");return}if(f.code==="KeyX"){n("up");return}Vc.has(f.code)&&!a.current.has(f.code)&&(a.current.add(f.code),o(f.code))}},[r,o,n]),h=S.useCallback(f=>{r&&Vc.has(f.code)&&(a.current.delete(f.code),e(f.code))},[r,e]),d=S.useCallback(()=>{a.current.forEach(f=>{e(f)}),a.current.clear()},[e]);return S.useEffect(()=>{if(r)return window.addEventListener("keydown",u),window.addEventListener("keyup",h),window.addEventListener("blur",d),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",h),window.removeEventListener("blur",d)}},[r,u,h,d]),{activeKeys:a.current}}class ck extends S.Component{constructor(n){super(n);Oc(this,"handleRetry",()=>{this.setState({hasError:!1,error:null})});this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,r){console.error("Audio error caught:",n,r)}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:C.jsx("div",{className:"min-h-screen bg-ableton-bg flex flex-col items-center justify-center gap-6 p-8",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-ableton-text mb-4",children:"Audio Error"}),C.jsx("p",{className:"text-ableton-text-dim mb-2",children:"Something went wrong with the audio engine."}),C.jsx("p",{className:"text-ableton-text-muted text-sm mb-6 max-w-md",children:((n=this.state.error)==null?void 0:n.message)||"Unknown error occurred"}),C.jsx("button",{onClick:this.handleRetry,className:"px-6 py-3 bg-ableton-accent text-white rounded-lg font-semibold hover:bg-ableton-accent-hover transition-colors",children:"Try Again"})]})}):this.props.children}}class zc extends S.Component{constructor(){super(...arguments);Oc(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n){console.warn(`Visualizer error in ${this.props.name}:`,n)}render(){return this.state.hasError?C.jsxs("div",{className:"bg-ableton-surface rounded-lg flex items-center justify-center text-ableton-text-muted text-xs p-2",children:[this.props.name," unavailable"]}):this.props.children}}function Xp({noteName:o,keyCode:e,isBlack:n,isActive:r,onNoteOn:a,onNoteOff:u}){const h=e.replace("Key",""),d=S.useRef(!1),f=S.useCallback(()=>{d.current||(d.current=!0,a())},[a]),m=S.useCallback(()=>{d.current&&(d.current=!1,u())},[u]);return n?C.jsx("button",{className:`
          relative z-10 h-16 -mx-2 flex flex-col items-center justify-end pb-1
          rounded-b-md transition-all duration-75 touch-none select-none
          ${r?"bg-ableton-accent shadow-key-active":"bg-gradient-to-b from-gray-700 to-ableton-key-black hover:from-gray-600 hover:to-gray-800"}
          border border-gray-600
        `,onMouseDown:f,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchCancel:m,children:C.jsx("span",{className:`text-[10px] font-mono ${r?"text-white":"text-ableton-text-muted"}`,children:h})}):C.jsxs("button",{className:`
        relative h-24 flex flex-col items-center justify-end pb-2
        rounded-b-md transition-all duration-75 touch-none select-none
        ${r?"bg-ableton-accent shadow-key-active":"bg-gradient-to-b from-ableton-key-white to-gray-200 hover:from-gray-100 hover:to-gray-300"}
        border border-gray-300
      `,onMouseDown:f,onMouseUp:m,onMouseLeave:m,onTouchStart:f,onTouchEnd:m,onTouchCancel:m,children:[C.jsx("span",{className:`text-xs font-mono ${r?"text-white":"text-ableton-text-muted"} mb-1`,children:o}),C.jsx("span",{className:`text-[10px] font-mono ${r?"text-white/70":"text-ableton-text-muted/50"}`,children:h})]})}function hk({activeKeys:o,onNoteOn:e,onNoteOff:n,className:r=""}){const a=Sl.filter(d=>!d.isBlack),u=Sl.filter(d=>d.isBlack),h={KeyW:0,KeyE:1,KeyT:3,KeyY:4,KeyU:5,KeyO:7};return C.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg p-4 ${r}`,children:[C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"grid grid-cols-9 gap-0.5",children:a.map(d=>C.jsx(Xp,{noteName:d.noteName,keyCode:d.code,isBlack:!1,isActive:o.has(d.code),onNoteOn:()=>e(d.code),onNoteOff:()=>n(d.code)},d.code))}),C.jsx("div",{className:"absolute top-0 left-0 right-0 grid grid-cols-9 gap-0.5 pointer-events-none",children:a.map((d,f)=>{const m=u.find(g=>h[g.code]===f);return m?C.jsx("div",{className:"pointer-events-auto px-1",children:C.jsx(Xp,{noteName:m.noteName,keyCode:m.code,isBlack:!0,isActive:o.has(m.code),onNoteOn:()=>e(m.code),onNoteOff:()=>n(m.code)})},m.code):C.jsx("div",{className:"h-16"},`spacer-${f}`)})})]}),C.jsx("p",{className:"text-center text-xs text-ableton-text-muted mt-3 font-mono",children:"Use keyboard keys A-L (white) and W, E, T, Y, U, O (black) to play"})]})}function jo({title:o,children:e,className:n=""}){return C.jsxs("div",{className:`module-panel ${n}`,children:[C.jsx("h3",{className:"module-title",children:o}),C.jsx("div",{className:"flex flex-wrap gap-4",children:e})]})}const Zp={sm:{knob:"w-10 h-10",text:"text-xs"},md:{knob:"w-14 h-14",text:"text-sm"},lg:{knob:"w-20 h-20",text:"text-base"}};function Fe({value:o,min:e,max:n,onChange:r,label:a,unit:u="",size:h="md",displayValue:d,defaultValue:f}){const m=S.useRef(null),[g,v]=S.useState(!1),y=S.useRef(0),x=S.useRef(0),w=(o-e)/(n-e),k=w*270-135,T=S.useCallback(()=>{f!==void 0&&r(f)},[f,r]),R=S.useCallback(z=>{z.preventDefault(),v(!0),y.current=z.clientY,x.current=o},[o]);S.useEffect(()=>{if(!g)return;const z=N=>{const I=y.current-N.clientY,M=(n-e)/ci.KNOB_DRAG_SENSITIVITY_PX,X=Math.max(e,Math.min(n,x.current+I*M));r(X)},B=()=>{v(!1)};return window.addEventListener("mousemove",z),window.addEventListener("mouseup",B),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",B)}},[g,e,n,r]);const q=d?d(o):o.toFixed(1);return C.jsxs("div",{className:"knob-container",children:[C.jsx("span",{className:"knob-label",children:a}),C.jsxs("div",{ref:m,className:`${Zp[h].knob} relative cursor-grab active:cursor-grabbing select-none`,onMouseDown:R,onDoubleClick:T,title:f!==void 0?"Double-click to reset":void 0,children:[C.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100",children:[C.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-ableton-border",strokeDasharray:"188.5 62.8",strokeDashoffset:"-31.4",strokeLinecap:"round"}),C.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"currentColor",strokeWidth:"4",className:"text-ableton-accent",strokeDasharray:`${w*188.5} 251.3`,strokeDashoffset:"-31.4",strokeLinecap:"round"})]}),C.jsx("div",{className:"absolute inset-2 rounded-full bg-gradient-to-b from-ableton-surface-light to-ableton-surface shadow-knob",style:{transform:`rotate(${k}deg)`},children:C.jsx("div",{className:"absolute top-1 left-1/2 -translate-x-1/2 w-0.5 h-2 bg-ableton-accent rounded-full"})})]}),C.jsxs("span",{className:`knob-value ${Zp[h].text}`,children:[q,u]})]})}const dk=[{type:"sine",label:"Sine",icon:C.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:C.jsx("path",{d:"M0 6 Q6 0 12 6 Q18 12 24 6",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"triangle",label:"Triangle",icon:C.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:C.jsx("path",{d:"M0 6 L6 0 L12 6 L18 12 L24 6",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"sawtooth",label:"Saw",icon:C.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:C.jsx("path",{d:"M0 12 L12 0 L12 12 L24 0",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})},{type:"square",label:"Square",icon:C.jsx("svg",{viewBox:"0 0 24 12",className:"w-6 h-3",children:C.jsx("path",{d:"M0 12 L0 0 L12 0 L12 12 L24 12 L24 0",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})})}];function pg({value:o,onChange:e}){return C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsx("span",{className:"knob-label",children:"Waveform"}),C.jsx("div",{className:"flex gap-1 p-1 bg-ableton-bg rounded ring-1 ring-ableton-border",children:dk.map(({type:n,label:r,icon:a})=>C.jsx("button",{onClick:()=>e(n),className:`flex flex-col items-center gap-1 px-2 py-1.5 rounded transition-all ${o===n?"bg-ableton-accent text-white shadow-[inset_0_1px_0_rgba(255,255,255,0.2)]":"bg-ableton-surface text-ableton-text-muted hover:text-ableton-text-dim hover:bg-ableton-surface-light"}`,title:r,children:a},n))})]})}function fk({octave:o,onOctaveChange:e}){return C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsx("span",{className:"knob-label",children:"Octave"}),C.jsxs("div",{className:"flex items-center gap-2",children:[C.jsx("button",{onClick:()=>e(Math.max(0,o-1)),disabled:o<=0,className:"w-6 h-6 rounded bg-ableton-surface-light text-ableton-text-dim hover:bg-ableton-border hover:text-ableton-text disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm font-mono",children:"-"}),C.jsx("span",{className:"w-8 text-center text-lg font-mono text-ableton-text",children:o}),C.jsx("button",{onClick:()=>e(Math.min(5,o+1)),disabled:o>=5,className:"w-6 h-6 rounded bg-ableton-surface-light text-ableton-text-dim hover:bg-ableton-border hover:text-ableton-text disabled:opacity-30 disabled:cursor-not-allowed transition-all text-sm font-mono",children:"+"})]}),C.jsx("span",{className:"text-xs text-ableton-text-muted font-mono",children:"Z/X keys"})]})}function Xl({label:o,value:e,onChange:n,size:r="md"}){const a=r==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-xs";return C.jsxs("div",{className:"flex flex-col items-center gap-1",children:[C.jsx("button",{className:`
          ${a}
          rounded font-bold uppercase tracking-wide transition-all
          ${e?"bg-ableton-green text-white ring-2 ring-ableton-green/50 shadow-[0_0_8px_rgba(29,185,84,0.4)]":"bg-ableton-surface text-ableton-text-muted hover:bg-ableton-surface-light hover:text-ableton-text-dim"}
        `,onClick:()=>n(!e),children:e?"ON":"OFF"}),C.jsx("span",{className:"text-xs text-ableton-text-secondary",children:o})]})}function fi({label:o,value:e,options:n,onChange:r,size:a="md"}){const u=a==="sm"?"px-2 py-1 text-xs":"px-3 py-1.5 text-xs";return C.jsxs("div",{className:"flex flex-col items-center gap-1",children:[C.jsx("div",{className:"flex rounded bg-ableton-bg overflow-hidden ring-1 ring-ableton-border",children:n.map(h=>C.jsx("button",{className:`
              ${u}
              font-bold uppercase tracking-wide transition-all border-r border-ableton-border last:border-r-0
              ${e===h.value?"bg-ableton-accent text-white shadow-[inset_0_1px_0_rgba(255,255,255,0.2)]":"bg-ableton-surface text-ableton-text-muted hover:bg-ableton-surface-light hover:text-ableton-text-dim"}
            `,onClick:()=>r(h.value),children:h.label},String(h.value)))}),C.jsx("span",{className:"text-xs text-ableton-text-secondary",children:o})]})}function pk({value:o,onChange:e,onRelease:n,label:r="PITCH",height:a=120,springBack:u=!0}){const h=S.useRef(null),[d,f]=S.useState(!1),g=(o+1)/2*100,v=S.useCallback(x=>{if(!h.current)return;const w=h.current.getBoundingClientRect(),k=w.bottom-x,R=Math.max(0,Math.min(1,k/w.height))*2-1;e(R)},[e]),y=S.useCallback(x=>{f(!0),v(x.clientY)},[v]);return S.useEffect(()=>{if(!d)return;const x=k=>{v(k.clientY)},w=()=>{f(!1),u&&e(0),n==null||n()};return window.addEventListener("mousemove",x),window.addEventListener("mouseup",w),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",w)}},[d,v,u,e,n]),C.jsxs("div",{className:"flex flex-col items-center gap-2",children:[C.jsxs("div",{ref:h,className:"relative w-8 rounded bg-ableton-surface cursor-pointer overflow-hidden",style:{height:a},onMouseDown:y,children:[C.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-px bg-ableton-accent"}),C.jsx("div",{className:"absolute left-1 right-1 bg-ableton-accent/30",style:{top:o>0?`${50-o*50}%`:"50%",bottom:o<0?`${50+o*50}%`:"50%"}}),C.jsx("div",{className:"absolute inset-0 flex flex-col justify-between py-1 pointer-events-none",children:[0,1,2,3,4].map(x=>C.jsx("div",{className:"w-full h-px bg-ableton-bg opacity-50"},x))}),C.jsx("div",{className:`absolute left-0 right-0 h-3 rounded-sm shadow-md transition-colors ${d?"bg-ableton-accent":"bg-ableton-text"}`,style:{bottom:`clamp(0px, calc(${g}% - 6px), calc(100% - 12px))`}})]}),C.jsx("span",{className:"text-xs text-ableton-text-secondary font-medium",children:r})]})}const mk=S.memo(function({volume:e,attack:n,release:r,waveform:a,octave:u,mono:h,onVolumeChange:d,onAttackChange:f,onReleaseChange:m,onWaveformChange:g,onOctaveChange:v,onMonoChange:y,className:x=""}){return C.jsxs(jo,{title:"Master",className:x,children:[C.jsx(Fe,{value:e,min:-60,max:0,onChange:d,label:"Volume",unit:"dB",displayValue:w=>w.toFixed(0),defaultValue:dt.volume}),C.jsx(Fe,{value:n,min:.001,max:2,onChange:f,label:"Attack",unit:"s",displayValue:w=>w.toFixed(2),defaultValue:dt.attack}),C.jsx(Fe,{value:r,min:.01,max:2,onChange:m,label:"Release",unit:"s",displayValue:w=>w.toFixed(2),defaultValue:dt.release}),C.jsx(pg,{value:a,onChange:g}),C.jsx(fk,{octave:u,onOctaveChange:v}),C.jsx(Xl,{label:"Mono",value:h,onChange:y,size:"sm"})]})});function Kp(o){return o>=1e3?`${(o/1e3).toFixed(1)}k`:o.toFixed(0)}function qc(o){return o>=1?`${o.toFixed(1)}s`:`${(o*1e3).toFixed(0)}ms`}const gk=S.memo(function({lowpassFreq:e,lowpassQ:n,highpassFreq:r,highpassQ:a,filterEnvelope:u,onLowpassFreqChange:h,onLowpassQChange:d,onHighpassFreqChange:f,onHighpassQChange:m,onFilterEnvAttackChange:g,onFilterEnvDecayChange:v,onFilterEnvSustainChange:y,onFilterEnvReleaseChange:x,onFilterEnvAmountChange:w,className:k=""}){return C.jsx(jo,{title:"Filter",className:k,children:C.jsxs("div",{className:"flex flex-col gap-4",children:[C.jsxs("div",{className:"flex gap-3",children:[C.jsx(Fe,{value:e,min:20,max:2e4,onChange:h,label:"LP Freq",unit:"Hz",size:"sm",displayValue:Kp,defaultValue:ot.lowpass.frequency}),C.jsx(Fe,{value:n,min:.1,max:15,onChange:d,label:"LP Res",size:"sm",displayValue:T=>T.toFixed(1),defaultValue:ot.lowpass.Q})]}),C.jsxs("div",{className:"flex gap-3",children:[C.jsx(Fe,{value:r,min:20,max:ci.HIGHPASS_MAX_FREQ_HZ,onChange:f,label:"HP Freq",unit:"Hz",size:"sm",displayValue:Kp,defaultValue:ot.highpass.frequency}),C.jsx(Fe,{value:a,min:.1,max:15,onChange:m,label:"HP Res",size:"sm",displayValue:T=>T.toFixed(1),defaultValue:ot.highpass.Q})]}),C.jsxs("div",{className:"border-t border-ableton-bg pt-3",children:[C.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Filter Envelope"}),C.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[C.jsx(Fe,{value:u.attack,min:.001,max:2,onChange:g,label:"A",size:"sm",displayValue:qc,defaultValue:wn.attack}),C.jsx(Fe,{value:u.decay,min:.001,max:2,onChange:v,label:"D",size:"sm",displayValue:qc,defaultValue:wn.decay}),C.jsx(Fe,{value:u.sustain,min:0,max:1,onChange:y,label:"S",size:"sm",displayValue:T=>`${(T*100).toFixed(0)}%`,defaultValue:wn.sustain}),C.jsx(Fe,{value:u.release,min:.001,max:3,onChange:x,label:"R",size:"sm",displayValue:qc,defaultValue:wn.release}),C.jsx(Fe,{value:u.amount,min:0,max:1,onChange:w,label:"Amt",size:"sm",displayValue:T=>`${(T*100).toFixed(0)}%`,defaultValue:wn.amount})]})]})]})})}),vk=S.memo(function({decay:e,wet:n,onDecayChange:r,onWetChange:a,className:u=""}){return C.jsxs(jo,{title:"Reverb",className:u,children:[C.jsx(Fe,{value:e,min:.1,max:10,onChange:r,label:"Decay",unit:"s",displayValue:h=>h.toFixed(1),defaultValue:ot.reverb.decay}),C.jsx(Fe,{value:n,min:0,max:1,onChange:a,label:"Mix",displayValue:h=>`${Math.round(h*100)}%`,defaultValue:ot.reverb.wet})]})}),_k=S.memo(function({time:e,feedback:n,wet:r,onTimeChange:a,onFeedbackChange:u,onWetChange:h,className:d=""}){return C.jsxs(jo,{title:"Delay",className:d,children:[C.jsx(Fe,{value:e,min:.01,max:1,onChange:a,label:"Time",unit:"s",displayValue:f=>f.toFixed(2),defaultValue:ot.delay.time}),C.jsx(Fe,{value:n,min:0,max:.9,onChange:u,label:"Feedback",displayValue:f=>`${Math.round(f*100)}%`,defaultValue:ot.delay.feedback}),C.jsx(Fe,{value:r,min:0,max:1,onChange:h,label:"Mix",displayValue:f=>`${Math.round(f*100)}%`,defaultValue:ot.delay.wet})]})}),yk=S.memo(function({amount:e,wet:n,onAmountChange:r,onWetChange:a,className:u=""}){return C.jsxs(jo,{title:"Distortion",className:u,children:[C.jsx(Fe,{value:e,min:0,max:1,onChange:r,label:"Drive",displayValue:h=>`${Math.round(h*100)}%`,defaultValue:ot.distortion.amount}),C.jsx(Fe,{value:n,min:0,max:1,onChange:a,label:"Mix",displayValue:h=>`${Math.round(h*100)}%`,defaultValue:ot.distortion.wet})]})}),wk=S.memo(function({params:e,onWaveformChange:n,onSubOscLevelChange:r,onSubOscOctaveChange:a,onNoiseLevelChange:u,onNoiseTypeChange:h}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Oscillator"}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx(pg,{value:e.waveform,onChange:n})}),C.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[C.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Sub Osc"}),C.jsxs("div",{className:"flex items-center justify-center gap-4",children:[C.jsx(Fe,{label:"Level",value:e.subOscLevel,min:0,max:1,onChange:r,size:"sm",defaultValue:xn.subOscLevel}),C.jsx(fi,{label:"Octave",value:e.subOscOctave,options:[{value:-1,label:"-1"},{value:-2,label:"-2"}],onChange:a,size:"sm"})]})]}),C.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[C.jsx("div",{className:"text-xs text-ableton-text-secondary mb-2 text-center",children:"Noise"}),C.jsxs("div",{className:"flex items-center justify-center gap-4",children:[C.jsx(Fe,{label:"Level",value:e.noiseLevel,min:0,max:1,onChange:u,size:"sm",defaultValue:xn.noiseLevel}),C.jsx(fi,{label:"Type",value:e.noiseType,options:[{value:"white",label:"WHT"},{value:"pink",label:"PNK"}],onChange:h,size:"sm"})]})]})]})]})}),xk=[{value:"sine",label:"SIN"},{value:"triangle",label:"TRI"},{value:"square",label:"SQR"},{value:"sawtooth",label:"SAW"}],kk=S.memo(function({lfoParams:e,modRouting:n,onRateChange:r,onDepthChange:a,onWaveformChange:u,onRoutingChange:h}){const d=g=>n.find(v=>v.target===g)||{target:g,amount:0,enabled:!1},f=g=>{const v=d(g);h(g,v.amount,!v.enabled)},m=(g,v)=>{const y=d(g);h(g,v,y.enabled)};return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"LFO"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex items-center justify-center gap-4",children:[C.jsx(Fe,{label:"Rate",value:e.rate,min:.1,max:20,onChange:r,size:"sm",displayValue:g=>`${g.toFixed(1)} Hz`,defaultValue:hi.rate}),C.jsx(Fe,{label:"Depth",value:e.depth,min:0,max:1,onChange:a,size:"sm",defaultValue:hi.depth})]}),C.jsx("div",{className:"flex justify-center",children:C.jsx(fi,{label:"Waveform",value:e.waveform,options:xk,onChange:u,size:"sm"})}),C.jsxs("div",{className:"border-t border-ableton-bg pt-4",children:[C.jsx("div",{className:"text-xs text-ableton-text-secondary mb-3 text-center",children:"Routing"}),C.jsx("div",{className:"flex justify-center",children:C.jsxs("div",{className:"flex flex-col items-center gap-2",children:[C.jsx(Xl,{label:"",value:d("filterCutoff").enabled,onChange:()=>f("filterCutoff"),size:"sm"}),C.jsx(Fe,{label:"Filter",value:d("filterCutoff").amount,min:0,max:1,onChange:g=>m("filterCutoff",g),size:"sm",defaultValue:0})]})})]})]})]})}),Tk=S.memo(function({glideParams:e,pitchBendValue:n,pitchBendRange:r,onGlideEnabledChange:a,onGlideTimeChange:u,onPitchBendChange:h,onPitchBendRangeChange:d}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Pitch"}),C.jsxs("div",{className:"flex items-start justify-center gap-6",children:[C.jsxs("div",{className:"flex flex-col items-center gap-2",children:[C.jsx(pk,{value:n,onChange:h,label:"BEND",height:100,springBack:!0}),C.jsx(Fe,{label:"Range",value:r,min:1,max:12,onChange:d,size:"sm",displayValue:f=>`${Math.round(f)} st`,defaultValue:Uh})]}),C.jsxs("div",{className:"flex flex-col items-center gap-3",children:[C.jsx("div",{className:"text-xs text-ableton-text-secondary",children:"Glide"}),C.jsx(Xl,{label:"",value:e.enabled,onChange:a,size:"sm"}),C.jsx(Fe,{label:"Time",value:e.time,min:.01,max:2,onChange:u,size:"sm",displayValue:f=>`${(f*1e3).toFixed(0)}ms`,defaultValue:Cl.time})]})]})]})}),Ck=S.memo(function({params:e,onRateChange:n,onDepthChange:r,onWetChange:a}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Chorus"}),C.jsxs("div",{className:"flex items-center justify-center gap-3",children:[C.jsx(Fe,{label:"Rate",value:e.rate,min:.1,max:10,onChange:n,size:"sm",displayValue:u=>`${u.toFixed(1)} Hz`,defaultValue:xr.rate}),C.jsx(Fe,{label:"Depth",value:e.depth,min:0,max:1,onChange:r,size:"sm",defaultValue:xr.depth}),C.jsx(Fe,{label:"Mix",value:e.wet,min:0,max:1,onChange:a,size:"sm",defaultValue:xr.wet})]})]})}),Sk=S.memo(function({params:e,onRateChange:n,onDepthChange:r,onWetChange:a}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Phaser"}),C.jsxs("div",{className:"flex items-center justify-center gap-3",children:[C.jsx(Fe,{label:"Rate",value:e.rate,min:.1,max:10,onChange:n,size:"sm",displayValue:u=>`${u.toFixed(1)} Hz`,defaultValue:di.rate}),C.jsx(Fe,{label:"Depth",value:e.depth,min:0,max:1,onChange:r,size:"sm",defaultValue:di.depth}),C.jsx(Fe,{label:"Mix",value:e.wet,min:0,max:1,onChange:a,size:"sm",defaultValue:di.wet})]})]})}),bk=[{value:"up",label:"UP"},{value:"down",label:"DN"},{value:"upDown",label:"U/D"},{value:"random",label:"RND"}],Nk=[{value:"1/4",label:"1/4"},{value:"1/8",label:"1/8"},{value:"1/16",label:"1/16"},{value:"1/32",label:"1/32"}],Ek=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"}],Rk=S.memo(function({params:e,onEnabledChange:n,onPatternChange:r,onRateChange:a,onOctavesChange:u}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Arpeggiator"}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx(Xl,{label:"Active",value:e.enabled,onChange:n})}),C.jsx("div",{className:"flex justify-center",children:C.jsx(fi,{label:"Pattern",value:e.pattern,options:bk,onChange:r,size:"sm"})}),C.jsx("div",{className:"flex justify-center",children:C.jsx(fi,{label:"Rate",value:e.rate,options:Nk,onChange:a,size:"sm"})}),C.jsx("div",{className:"flex justify-center",children:C.jsx(fi,{label:"Octaves",value:e.octaves,options:Ek,onChange:u,size:"sm"})})]})]})}),Ak=S.memo(function({bpm:e,isPlaying:n,onBpmChange:r,onTapTempo:a,onToggleTransport:u}){return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Tempo"}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"flex justify-center",children:C.jsx(Fe,{label:"BPM",value:e,min:40,max:240,onChange:r,size:"md",displayValue:h=>`${Math.round(h)}`,defaultValue:Yl.bpm})}),C.jsxs("div",{className:"flex items-center justify-center gap-3",children:[C.jsx("button",{className:`
              px-3 py-2 rounded text-xs font-medium uppercase tracking-wide transition-all
              ${n?"bg-green-600 text-white":"bg-ableton-surface-light text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg"}
            `,onClick:u,children:n?"Stop":"Play"}),C.jsx("button",{className:"px-3 py-2 rounded text-xs font-medium uppercase tracking-wide bg-ableton-surface-light text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg transition-all",onClick:a,children:"Tap"})]})]})]})});function mg(o,e=!0){const n=S.useRef(),r=S.useRef(o);S.useEffect(()=>{r.current=o},[o]),S.useEffect(()=>{if(!e)return;const a=()=>{r.current(),n.current=requestAnimationFrame(a)};return n.current=requestAnimationFrame(a),()=>{n.current&&cancelAnimationFrame(n.current)}},[e])}function Ok({getMeterLevel:o,isPlaying:e,className:n="",compact:r=!1}){const[a,u]=S.useState(-60);mg(()=>{const f=o();u(m=>f>m?f:m-2)},e);const h=Math.max(0,Math.min(100,(a+60)/60*100)),d=()=>h>90?"bg-ableton-red":h>75?"bg-ableton-yellow":"bg-ableton-green";return r?C.jsxs("div",{className:`flex items-center gap-2 ${n}`,children:[C.jsx("span",{className:"text-[10px] font-semibold text-ableton-text-secondary uppercase tracking-wider",children:"Level"}),C.jsxs("div",{className:"relative flex-1 h-3 bg-ableton-bg rounded overflow-hidden min-w-[60px]",children:[C.jsx("div",{className:`absolute top-0 bottom-0 left-0 transition-all duration-75 ${d()}`,style:{width:`${h}%`}}),C.jsx("div",{className:"absolute inset-0 flex justify-between px-0.5",children:[0,1,2,3,4].map(f=>C.jsx("div",{className:"w-px bg-ableton-border/50"},f))})]}),C.jsx("span",{className:"text-[10px] font-mono text-ableton-text-muted tabular-nums w-12",children:a>-60?`${a.toFixed(0)}dB`:"-"})]}):C.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg p-4 flex flex-col items-center ${n}`,children:[C.jsx("h3",{className:"module-title mb-2",children:"Level"}),C.jsxs("div",{className:"relative w-6 h-32 bg-ableton-bg rounded overflow-hidden",children:[C.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[C.jsx("div",{className:"flex-1 bg-gradient-to-b from-ableton-red/20 to-transparent"}),C.jsx("div",{className:"flex-1 bg-gradient-to-b from-ableton-yellow/20 to-transparent"}),C.jsx("div",{className:"flex-[2] bg-gradient-to-b from-ableton-green/20 to-transparent"})]}),C.jsx("div",{className:`absolute bottom-0 left-0 right-0 transition-all duration-75 ${d()}`,style:{height:`${h}%`}}),C.jsx("div",{className:"absolute inset-0 flex flex-col justify-between py-1",children:[0,-6,-12,-24,-48].map(f=>C.jsx("div",{className:"h-px bg-ableton-border"},f))})]}),C.jsxs("div",{className:"flex flex-col justify-between h-32 text-[9px] font-mono text-ableton-text-muted -mt-32 ml-10",children:[C.jsx("span",{children:"0"}),C.jsx("span",{children:"-6"}),C.jsx("span",{children:"-12"}),C.jsx("span",{children:"-24"}),C.jsx("span",{children:"-48"})]}),C.jsx("span",{className:"mt-2 text-xs font-mono text-ableton-text tabular-nums",children:a>-60?`${a.toFixed(0)} dB`:"- dB"})]})}function Mk({getWaveformData:o,isPlaying:e,className:n="",compact:r=!1}){const a=S.useRef(null),[u,h]=S.useState({width:0,height:0});S.useEffect(()=>{const m=a.current;if(!m)return;const g=new ResizeObserver(v=>{for(const y of v){const{width:x,height:w}=y.contentRect;h({width:x,height:w}),m.width=x*window.devicePixelRatio,m.height=w*window.devicePixelRatio}});return g.observe(m),()=>g.disconnect()},[]),mg(()=>{const m=a.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const v=o(),y=window.devicePixelRatio;g.fillStyle="#1a1a1a",g.fillRect(0,0,m.width,m.height),g.strokeStyle="#3d3d3d",g.lineWidth=1,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2);const x=r?2:4;for(let k=0;k<=x;k++){const T=m.width/x*k;g.moveTo(T,0),g.lineTo(T,m.height)}g.stroke(),g.strokeStyle="#ff764d",g.lineWidth=(r?1.5:2)*y,g.lineCap="round",g.lineJoin="round",g.beginPath();const w=m.width/v.length;for(let k=0;k<v.length;k++){const T=k*w,R=(v[k]+1)/2*m.height;k===0?g.moveTo(T,R):g.lineTo(T,R)}g.stroke()},e),S.useEffect(()=>{if(e)return;const m=a.current;if(!m)return;const g=m.getContext("2d");if(!g)return;g.fillStyle="#1a1a1a",g.fillRect(0,0,m.width,m.height),g.strokeStyle="#3d3d3d",g.lineWidth=1,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2);const v=r?2:4;for(let y=0;y<=v;y++){const x=m.width/v*y;g.moveTo(x,0),g.lineTo(x,m.height)}g.stroke(),g.strokeStyle="#ff764d",g.lineWidth=(r?1.5:2)*window.devicePixelRatio,g.beginPath(),g.moveTo(0,m.height/2),g.lineTo(m.width,m.height/2),g.stroke()},[e,u,r]);const d=r?"h-12":"h-24",f=r?"p-2":"p-4";return C.jsxs("div",{className:`bg-ableton-surface border border-ableton-border rounded-lg ${f} ${n}`,children:[!r&&C.jsx("h3",{className:"module-title mb-2",children:"Waveform"}),C.jsx("canvas",{ref:a,className:`w-full ${d} rounded bg-ableton-bg`,style:{imageRendering:"crisp-edges"}})]})}function Dk({getFFTData:o,isActive:e,compact:n=!1,className:r=""}){const a=S.useRef(null),u=S.useRef(null),h=S.useRef(),[d,f]=S.useState({width:200,height:n?48:80});S.useEffect(()=>{const v=u.current;if(!v)return;const y=new ResizeObserver(x=>{for(const w of x){const{width:k}=w.contentRect,T=n?48:80;f({width:k,height:T}),a.current&&(a.current.width=k,a.current.height=T)}});return y.observe(v),()=>y.disconnect()},[n]);const m=S.useCallback(()=>{const v=a.current;if(!v)return;const y=v.getContext("2d");if(!y)return;const{width:x,height:w}=d,k=o(),T=k.length;y.fillStyle="#1a1a1a",y.fillRect(0,0,x,w);const R=n?32:Math.min(64,T),q=x/R*.8,z=x/R*.2;for(let N=0;N<R;N++){const I=Math.floor(Math.pow(N/R,1.5)*T),L=k[I],M=Math.max(0,(L+100)/100),X=M*w*.9,U=30+N/R*30,H=80+M*20,Q=40+M*20;y.fillStyle=`hsl(${U}, ${H}%, ${Q}%)`,y.fillRect(N*(q+z),w-X,q,X)}y.strokeStyle="rgba(255, 255, 255, 0.1)",y.lineWidth=1;const B=n?2:4;for(let N=1;N<B;N++){const I=w/B*N;y.beginPath(),y.moveTo(0,I),y.lineTo(x,I),y.stroke()}e&&(h.current=requestAnimationFrame(m))},[o,e,d,n]);S.useEffect(()=>(e&&m(),()=>{h.current&&cancelAnimationFrame(h.current)}),[e,m]);const g=n?"p-2":"p-3";return C.jsxs("div",{ref:u,className:`bg-ableton-surface rounded-lg ${g} ${r}`,children:[!n&&C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-2",children:"Spectrum"}),C.jsx("canvas",{ref:a,width:d.width,height:d.height,className:"rounded bg-ableton-bg w-full"})]})}const Ik=[{value:"bass",label:"Bass"},{value:"lead",label:"Lead"},{value:"pad",label:"Pad"},{value:"fx",label:"FX"},{value:"user",label:"User"}];function Pk({onSave:o,onCancel:e,initialName:n="",initialCategory:r="user"}){const[a,u]=S.useState(n),[h,d]=S.useState(r),f=m=>{m.preventDefault(),a.trim()&&o(a.trim(),h)};return C.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-6 w-80 shadow-xl",children:[C.jsx("h2",{className:"text-lg font-semibold text-ableton-text mb-4",children:"Save Preset"}),C.jsxs("form",{onSubmit:f,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-ableton-text-secondary mb-1",children:"Name"}),C.jsx("input",{type:"text",value:a,onChange:m=>u(m.target.value),className:"w-full px-3 py-2 bg-ableton-bg rounded text-ableton-text text-sm focus:outline-none focus:ring-2 focus:ring-ableton-orange",placeholder:"My Preset",autoFocus:!0})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs text-ableton-text-secondary mb-1",children:"Category"}),C.jsx("div",{className:"flex flex-wrap gap-2",children:Ik.map(m=>C.jsx("button",{type:"button",className:`px-3 py-1 text-xs rounded transition-colors ${h===m.value?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>d(m.value),children:m.label},m.value))})]}),C.jsxs("div",{className:"flex gap-2 pt-2",children:[C.jsx("button",{type:"button",className:"flex-1 px-4 py-2 text-sm bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light rounded transition-colors",onClick:e,children:"Cancel"}),C.jsx("button",{type:"submit",disabled:!a.trim(),className:"flex-1 px-4 py-2 text-sm bg-ableton-orange text-ableton-bg hover:bg-ableton-orange/80 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Save"})]})]})]})})}const Fk=[{value:"bass",label:"Bass"},{value:"lead",label:"Lead"},{value:"pad",label:"Pad"},{value:"fx",label:"FX"},{value:"user",label:"User"}];function Lk({presets:o,currentPresetId:e,onLoadPreset:n,onSavePreset:r,onDeletePreset:a,onInitPreset:u,onReset:h,getCurrentParams:d,isUserPreset:f}){const[m,g]=S.useState("all"),[v,y]=S.useState(!1),[x,w]=S.useState(!1),k=m==="all"?o:o.filter(N=>N.category===m),T=e?o.find(N=>N.id===e):null,R=S.useCallback(N=>{n(N),w(!1)},[n]),q=S.useCallback((N,I)=>{const L=d();r(N,I,L),y(!1)},[d,r]),z=S.useCallback(()=>{e&&f(e)&&confirm("Delete this preset?")&&a(e)},[e,f,a]),B=S.useCallback(()=>{u()},[u]);return C.jsxs("div",{className:"bg-ableton-surface rounded-lg p-4",children:[C.jsx("h3",{className:"text-xs font-semibold text-ableton-text-secondary uppercase tracking-wider mb-4",children:"Presets"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex gap-1 overflow-x-auto",children:[C.jsx("button",{className:`px-2 py-1 text-xs rounded transition-colors ${m==="all"?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>g("all"),children:"All"}),Fk.map(N=>C.jsx("button",{className:`px-2 py-1 text-xs rounded transition-colors ${m===N.value?"bg-ableton-orange text-ableton-bg":"bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-surface-light"}`,onClick:()=>g(N.value),children:N.label},N.value))]}),C.jsxs("div",{className:"relative",children:[C.jsxs("button",{className:"w-full px-3 py-2 bg-ableton-bg rounded text-left text-sm text-ableton-text flex justify-between items-center hover:bg-ableton-surface-light transition-colors",onClick:()=>w(!x),children:[C.jsx("span",{className:"truncate",children:T?T.name:"-- Select Preset --"}),C.jsx("svg",{className:`w-4 h-4 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&C.jsx("div",{className:"absolute z-10 w-full mt-1 bg-ableton-bg rounded shadow-lg max-h-48 overflow-y-auto",children:k.map(N=>C.jsxs("button",{className:`w-full px-3 py-2 text-left text-sm hover:bg-ableton-surface-light transition-colors ${N.id===e?"text-ableton-orange":"text-ableton-text"}`,onClick:()=>R(N.id),children:[C.jsx("span",{className:"truncate block",children:N.name}),C.jsx("span",{className:"text-xs text-ableton-text-secondary capitalize",children:N.category})]},N.id))})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:B,children:"Init"}),C.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:h,children:"Reset"}),C.jsx("button",{className:"flex-1 px-3 py-2 text-xs font-medium uppercase tracking-wide bg-ableton-bg text-ableton-text-secondary hover:bg-ableton-orange hover:text-ableton-bg rounded transition-colors",onClick:()=>y(!0),children:"Save"}),e&&f(e)&&C.jsx("button",{className:"px-3 py-2 text-xs font-medium uppercase tracking-wide bg-red-900/50 text-red-400 hover:bg-red-900 rounded transition-colors",onClick:z,children:"Del"})]})]}),v&&C.jsx(Pk,{onSave:q,onCancel:()=>y(!1),initialName:(T==null?void 0:T.name)||"",initialCategory:(T==null?void 0:T.category)||"user"})]})}function jk({onStart:o}){return C.jsxs("div",{className:"min-h-screen bg-ableton-bg flex flex-col items-center justify-center gap-6",children:[C.jsx("h1",{className:"text-4xl font-bold text-ableton-text",children:"Web PolySynth"}),C.jsxs("p",{className:"text-ableton-text-dim max-w-md text-center",children:["A 4-voice polyphonic synthesizer with LFO, sub-oscillator, filter envelope, chorus, phaser, delay, reverb, and arpeggiator - right in your browser.",C.jsx("br",{}),"Use your keyboard or click the keys to play chords."]}),C.jsx("button",{onClick:o,className:"px-8 py-4 bg-ableton-accent text-white rounded-lg text-xl font-semibold hover:bg-ableton-accent-hover transition-colors shadow-lg",children:"Click to Start"}),C.jsx("p",{className:"text-ableton-text-muted text-sm",children:"Audio requires user interaction to start"})]})}function Vk(){const o=fg();return uk({onNoteOn:o.handleNoteOn,onNoteOff:o.handleNoteOff,onOctaveChange:o.handleOctaveChange,enabled:o.isInitialized}),C.jsxs("div",{className:"min-h-screen bg-ableton-bg p-3 md:p-4",children:[C.jsxs("header",{className:"mb-3 flex flex-col lg:flex-row lg:items-center gap-3",children:[C.jsxs("div",{className:"flex-shrink-0",children:[C.jsx("h1",{className:"text-xl font-bold text-ableton-text",children:"Web PolySynth"}),C.jsx("p",{className:"text-xs text-ableton-text-dim",children:"4-voice polyphonic"})]}),C.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[C.jsx(zc,{name:"Waveform",children:C.jsx(Mk,{className:"flex-1 min-w-0",getWaveformData:o.getWaveformData,isPlaying:o.isPlaying,compact:!0})}),C.jsx(zc,{name:"Spectrum",children:C.jsx(Dk,{getFFTData:o.getFFTData,isActive:o.isInitialized,compact:!0,className:"w-32 flex-shrink-0"})}),C.jsx(zc,{name:"VU Meter",children:C.jsx(Ok,{getMeterLevel:o.getMeterLevel,isPlaying:o.isPlaying,compact:!0,className:"w-32 flex-shrink-0"})})]})]}),C.jsx("div",{className:"mb-3",children:C.jsx(hk,{activeKeys:o.activeKeys,onNoteOn:o.handleNoteOn,onNoteOff:o.handleNoteOff})}),C.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:[C.jsx(mk,{volume:o.params.master.volume,attack:o.params.master.attack,release:o.params.master.release,waveform:o.params.master.waveform,octave:o.params.master.octave,mono:o.params.master.mono,onVolumeChange:o.setVolume,onAttackChange:o.setAttack,onReleaseChange:o.setRelease,onWaveformChange:o.setWaveform,onOctaveChange:o.setOctave,onMonoChange:o.setMonoMode}),C.jsx(wk,{params:o.params.oscillator,onWaveformChange:o.setWaveform,onSubOscLevelChange:o.setSubOscLevel,onSubOscOctaveChange:o.setSubOscOctave,onNoiseLevelChange:o.setNoiseLevel,onNoiseTypeChange:o.setNoiseType}),C.jsx(Tk,{glideParams:o.params.glide,pitchBendValue:o.pitchBendValue,pitchBendRange:o.params.pitchBendRange,onGlideEnabledChange:o.setGlideEnabled,onGlideTimeChange:o.setGlideTime,onPitchBendChange:o.setPitchBend,onPitchBendRangeChange:o.setPitchBendRange}),C.jsx(gk,{lowpassFreq:o.params.effects.lowpass.frequency,lowpassQ:o.params.effects.lowpass.Q,highpassFreq:o.params.effects.highpass.frequency,highpassQ:o.params.effects.highpass.Q,filterEnvelope:o.params.filterEnvelope,onLowpassFreqChange:o.setLowpassFrequency,onLowpassQChange:o.setLowpassQ,onHighpassFreqChange:o.setHighpassFrequency,onHighpassQChange:o.setHighpassQ,onFilterEnvAttackChange:o.setFilterEnvAttack,onFilterEnvDecayChange:o.setFilterEnvDecay,onFilterEnvSustainChange:o.setFilterEnvSustain,onFilterEnvReleaseChange:o.setFilterEnvRelease,onFilterEnvAmountChange:o.setFilterEnvAmount}),C.jsx(kk,{lfoParams:o.params.lfo,modRouting:o.params.modRouting,onRateChange:o.setLFORate,onDepthChange:o.setLFODepth,onWaveformChange:o.setLFOWaveform,onRoutingChange:o.setModRouting}),C.jsx(Ak,{bpm:o.tempo.bpm,isPlaying:o.tempo.isPlaying,onBpmChange:o.setBpm,onTapTempo:o.tapTempo,onToggleTransport:o.toggleTransport}),C.jsx(yk,{amount:o.params.effects.distortion.amount,wet:o.params.effects.distortion.wet,onAmountChange:o.setDistortionAmount,onWetChange:o.setDistortionWet}),C.jsx(Ck,{params:o.params.chorus,onRateChange:o.setChorusRate,onDepthChange:o.setChorusDepth,onWetChange:o.setChorusWet}),C.jsx(Sk,{params:o.params.phaser,onRateChange:o.setPhaserRate,onDepthChange:o.setPhaserDepth,onWetChange:o.setPhaserWet}),C.jsx(_k,{time:o.params.effects.delay.time,feedback:o.params.effects.delay.feedback,wet:o.params.effects.delay.wet,onTimeChange:o.setDelayTime,onFeedbackChange:o.setDelayFeedback,onWetChange:o.setDelayWet}),C.jsx(vk,{decay:o.params.effects.reverb.decay,wet:o.params.effects.reverb.wet,onDecayChange:o.setReverbDecay,onWetChange:o.setReverbWet}),C.jsx(Rk,{params:o.arpeggiator.params,onEnabledChange:o.setArpEnabled,onPatternChange:o.setArpPattern,onRateChange:o.setArpRate,onOctavesChange:o.setArpOctaves}),C.jsx("div",{className:"col-span-2 md:col-span-3 lg:col-span-6",children:C.jsx(Lk,{presets:o.presets.presets,currentPresetId:o.presets.currentPresetId,onLoadPreset:o.loadPreset,onSavePreset:o.savePreset,onDeletePreset:o.deletePreset,onInitPreset:o.initPreset,onReset:o.handleReset,getCurrentParams:o.getCurrentParams,isUserPreset:o.isUserPreset})})]}),C.jsx("footer",{className:"mt-8 text-center text-xs text-ableton-text-muted",children:"Built with React, Tone.js, and Tailwind CSS"})]})}function zk(){const o=fg();return o.isInitialized?C.jsx(Vk,{}):C.jsx(jk,{onStart:o.initializeAudio})}function qk(){return C.jsx(ck,{children:C.jsx(rk,{getFrequency:lk,children:C.jsx(zk,{})})})}u_.createRoot(document.getElementById("root")).render(C.jsx(S.StrictMode,{children:C.jsx(qk,{})}));
